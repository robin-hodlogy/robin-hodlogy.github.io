import{$ as dm,$a as Us,A as ff,B as fi,C as Xg,D as Zg,E as Dc,Ea as gf,F as em,G as Os,Ga as bm,H as tm,Ha as wm,I as nm,Ia as Sm,J as Di,Ja as Em,K as rm,Ka as xm,L as im,La as Ds,M as xn,Ma as Rm,N as Eo,Na as Lc,O as om,P as Ps,Q as di,Qa as Ns,R as sm,Ra as Cm,S as am,T as cm,Ta as mf,U as xo,Ua as Tm,V as um,Va as km,W as lm,Wa as Nr,X as Nc,Xa as rn,Z as fm,a as st,ba as Uc,ca as pm,cb as Am,da as hm,db as Im,ea as gm,eb as Om,f as Gg,fa as mm,g as Ac,ga as ym,h as Kg,ha as _m,i as Hg,j as yn,ja as Ni,kb as Ur,l as Vg,la as vm,lb as yf,m as $g,n as Ic,na as Ze,nb as _f,o as af,ob as Pm,p as Yg,q as cf,qb as Dm,r as Wg,rb as Nm,s as Jg,t as uf,ta as Ro,tb as Fm,u as lf,v as Oc,w as Is,wa as df,x as Qg,xa as pf,y as Pc,ya as hf,z as me}from"https://app.gitbook.com/public/app/chunks/chunk-EFJ6CI7R.min.js";import{a as S1,b as zm,c as Bm,d as jm}from"https://app.gitbook.com/public/app/chunks/chunk-NHCYIOQH.min.js";import{a as kn}from"https://app.gitbook.com/public/app/chunks/chunk-HCFMPDL2.min.js";import{a as ko}from"https://app.gitbook.com/public/app/chunks/chunk-AHBDZVSS.min.js";import{d as Fc,e as Um,g as Co,h as Lm,i as v1,j as vf,k as w1}from"https://app.gitbook.com/public/app/chunks/chunk-QDU35MW3.min.js";import{a as Dt}from"https://app.gitbook.com/public/app/chunks/chunk-XQJO7322.min.js";import{_ as b1,ma as Ls,na as Ao,oa as Mm,p as Pi}from"https://app.gitbook.com/public/app/chunks/chunk-UVYKISNP.min.js";import{b as To}from"https://app.gitbook.com/public/app/chunks/chunk-YPOOS4GR.min.js";import{a as qg,c as Fe,d as _1,e as Wt,k as Buffer,l as w}from"https://app.gitbook.com/public/app/chunks/chunk-OAKVUAEN.min.js";var __=Fe((cu,y_)=>{w();(function(e,t){typeof cu=="object"&&typeof y_<"u"?t(cu):typeof define=="function"&&define.amd?define(["exports"],t):t((e=e||self).lru_map=e.lru_map||{})})(cu,function(e){let t=Symbol("newer"),n=Symbol("older");class r{constructor(u,p){typeof u!="number"&&(p=u,u=0),this.size=0,this.limit=u,this.oldest=this.newest=void 0,this._keymap=new Map,p&&(this.assign(p),u<1&&(this.limit=this.size))}_markEntryAsUsed(u){u!==this.newest&&(u[t]&&(u===this.oldest&&(this.oldest=u[t]),u[t][n]=u[n]),u[n]&&(u[n][t]=u[t]),u[t]=void 0,u[n]=this.newest,this.newest&&(this.newest[t]=u),this.newest=u)}assign(u){let p,h=this.limit||Number.MAX_VALUE;this._keymap.clear();let y=u[Symbol.iterator]();for(let m=y.next();!m.done;m=y.next()){let b=new i(m.value[0],m.value[1]);if(this._keymap.set(b.key,b),p?(p[t]=b,b[n]=p):this.oldest=b,p=b,h--==0)throw new Error("overflow")}this.newest=p,this.size=this._keymap.size}get(u){var p=this._keymap.get(u);return p?(this._markEntryAsUsed(p),p.value):void 0}set(u,p){var h=this._keymap.get(u);return h?(h.value=p,this._markEntryAsUsed(h),this):(this._keymap.set(u,h=new i(u,p)),this.newest?(this.newest[t]=h,h[n]=this.newest):this.oldest=h,this.newest=h,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var u=this.oldest;if(u)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),u[t]=u[n]=void 0,this._keymap.delete(u.key),--this.size,[u.key,u.value]}find(u){let p=this._keymap.get(u);return p?p.value:void 0}has(u){return this._keymap.has(u)}delete(u){var p=this._keymap.get(u);return p?(this._keymap.delete(p.key),p[t]&&p[n]?(p[n][t]=p[t],p[t][n]=p[n]):p[t]?(p[t][n]=void 0,this.oldest=p[t]):p[n]?(p[n][t]=void 0,this.newest=p[n]):this.oldest=this.newest=void 0,this.size--,p.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new s(this.oldest)}values(){return new a(this.oldest)}entries(){return this}[Symbol.iterator](){return new o(this.oldest)}forEach(u,p){typeof p!="object"&&(p=this);let h=this.oldest;for(;h;)u.call(p,h.value,h.key,this),h=h[t]}toJSON(){for(var u=new Array(this.size),p=0,h=this.oldest;h;)u[p++]={key:h.key,value:h.value},h=h[t];return u}toString(){for(var u="",p=this.oldest;p;)u+=String(p.key)+":"+p.value,p=p[t],p&&(u+=" < ");return u}}e.LRUMap=r;function i(c,u){this.key=c,this.value=u,this[t]=void 0,this[n]=void 0}function o(c){this.entry=c}o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let c=this.entry;return c?(this.entry=c[t],{done:!1,value:[c.key,c.value]}):{done:!0,value:void 0}};function s(c){this.entry=c}s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let c=this.entry;return c?(this.entry=c[t],{done:!1,value:c.key}):{done:!0,value:void 0}};function a(c){this.entry=c}a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let c=this.entry;return c?(this.entry=c[t],{done:!1,value:c.value}):{done:!0,value:void 0}}})});var zo=Fe((x5,w_)=>{w();w_.exports=b_;function b_(e,t){if(!e)throw new Error(t||"Assertion failed")}b_.equal=function(t,n,r){if(t!=n)throw new Error(r||"Assertion failed: "+t+" != "+n)}});var cr=Fe(wt=>{"use strict";w();var hk=zo(),gk=ko();wt.inherits=gk;function mk(e,t){return(e.charCodeAt(t)&64512)!==55296||t<0||t+1>=e.length?!1:(e.charCodeAt(t+1)&64512)===56320}function yk(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if(typeof e=="string")if(t){if(t==="hex")for(e=e.replace(/[^a-z0-9]+/ig,""),e.length%2!==0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var r=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?n[r++]=o:o<2048?(n[r++]=o>>6|192,n[r++]=o&63|128):mk(e,i)?(o=65536+((o&1023)<<10)+(e.charCodeAt(++i)&1023),n[r++]=o>>18|240,n[r++]=o>>12&63|128,n[r++]=o>>6&63|128,n[r++]=o&63|128):(n[r++]=o>>12|224,n[r++]=o>>6&63|128,n[r++]=o&63|128)}else for(i=0;i<e.length;i++)n[i]=e[i]|0;return n}wt.toArray=yk;function _k(e){for(var t="",n=0;n<e.length;n++)t+=E_(e[n].toString(16));return t}wt.toHex=_k;function S_(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}wt.htonl=S_;function vk(e,t){for(var n="",r=0;r<e.length;r++){var i=e[r];t==="little"&&(i=S_(i)),n+=x_(i.toString(16))}return n}wt.toHex32=vk;function E_(e){return e.length===1?"0"+e:e}wt.zero2=E_;function x_(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}wt.zero8=x_;function bk(e,t,n,r){var i=n-t;hk(i%4===0);for(var o=new Array(i/4),s=0,a=t;s<o.length;s++,a+=4){var c;r==="big"?c=e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:c=e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],o[s]=c>>>0}return o}wt.join32=bk;function wk(e,t){for(var n=new Array(e.length*4),r=0,i=0;r<e.length;r++,i+=4){var o=e[r];t==="big"?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=o&255):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=o&255)}return n}wt.split32=wk;function Sk(e,t){return e>>>t|e<<32-t}wt.rotr32=Sk;function Ek(e,t){return e<<t|e>>>32-t}wt.rotl32=Ek;function xk(e,t){return e+t>>>0}wt.sum32=xk;function Rk(e,t,n){return e+t+n>>>0}wt.sum32_3=Rk;function Ck(e,t,n,r){return e+t+n+r>>>0}wt.sum32_4=Ck;function Tk(e,t,n,r,i){return e+t+n+r+i>>>0}wt.sum32_5=Tk;function kk(e,t,n,r){var i=e[t],o=e[t+1],s=r+o>>>0,a=(s<r?1:0)+n+i;e[t]=a>>>0,e[t+1]=s}wt.sum64=kk;function Ak(e,t,n,r){var i=t+r>>>0,o=(i<t?1:0)+e+n;return o>>>0}wt.sum64_hi=Ak;function Ik(e,t,n,r){var i=t+r;return i>>>0}wt.sum64_lo=Ik;function Ok(e,t,n,r,i,o,s,a){var c=0,u=t;u=u+r>>>0,c+=u<t?1:0,u=u+o>>>0,c+=u<o?1:0,u=u+a>>>0,c+=u<a?1:0;var p=e+n+i+s+c;return p>>>0}wt.sum64_4_hi=Ok;function Pk(e,t,n,r,i,o,s,a){var c=t+r+o+a;return c>>>0}wt.sum64_4_lo=Pk;function Dk(e,t,n,r,i,o,s,a,c,u){var p=0,h=t;h=h+r>>>0,p+=h<t?1:0,h=h+o>>>0,p+=h<o?1:0,h=h+a>>>0,p+=h<a?1:0,h=h+u>>>0,p+=h<u?1:0;var y=e+n+i+s+c+p;return y>>>0}wt.sum64_5_hi=Dk;function Nk(e,t,n,r,i,o,s,a,c,u){var p=t+r+o+a+u;return p>>>0}wt.sum64_5_lo=Nk;function Uk(e,t,n){var r=t<<32-n|e>>>n;return r>>>0}wt.rotr64_hi=Uk;function Lk(e,t,n){var r=e<<32-n|t>>>n;return r>>>0}wt.rotr64_lo=Lk;function Fk(e,t,n){return e>>>n}wt.shr64_hi=Fk;function Mk(e,t,n){var r=e<<32-n|t>>>n;return r>>>0}wt.shr64_lo=Mk});var Bo=Fe(C_=>{"use strict";w();var R_=cr(),zk=zo();function uu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}C_.BlockHash=uu;uu.prototype.update=function(t,n){if(t=R_.toArray(t,n),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var r=t.length%this._delta8;this.pending=t.slice(t.length-r,t.length),this.pending.length===0&&(this.pending=null),t=R_.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this};uu.prototype.digest=function(t){return this.update(this._pad()),zk(this.pending===null),this._digest(t)};uu.prototype._pad=function(){var t=this.pendingTotal,n=this._delta8,r=n-(t+this.padLength)%n,i=new Array(r+this.padLength);i[0]=128;for(var o=1;o<r;o++)i[o]=0;if(t<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=t>>>24&255,i[o++]=t>>>16&255,i[o++]=t>>>8&255,i[o++]=t&255}else for(i[o++]=t&255,i[o++]=t>>>8&255,i[o++]=t>>>16&255,i[o++]=t>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,s=8;s<this.padLength;s++)i[o++]=0;return i}});var rd=Fe(Mr=>{"use strict";w();var Bk=cr(),_r=Bk.rotr32;function jk(e,t,n,r){if(e===0)return T_(t,n,r);if(e===1||e===3)return A_(t,n,r);if(e===2)return k_(t,n,r)}Mr.ft_1=jk;function T_(e,t,n){return e&t^~e&n}Mr.ch32=T_;function k_(e,t,n){return e&t^e&n^t&n}Mr.maj32=k_;function A_(e,t,n){return e^t^n}Mr.p32=A_;function qk(e){return _r(e,2)^_r(e,13)^_r(e,22)}Mr.s0_256=qk;function Gk(e){return _r(e,6)^_r(e,11)^_r(e,25)}Mr.s1_256=Gk;function Kk(e){return _r(e,7)^_r(e,18)^e>>>3}Mr.g0_256=Kk;function Hk(e){return _r(e,17)^_r(e,19)^e>>>10}Mr.g1_256=Hk});var P_=Fe((P5,O_)=>{"use strict";w();var jo=cr(),Vk=Bo(),$k=rd(),id=jo.rotl32,na=jo.sum32,Yk=jo.sum32_5,Wk=$k.ft_1,I_=Vk.BlockHash,Jk=[1518500249,1859775393,2400959708,3395469782];function vr(){if(!(this instanceof vr))return new vr;I_.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}jo.inherits(vr,I_);O_.exports=vr;vr.blockSize=512;vr.outSize=160;vr.hmacStrength=80;vr.padLength=64;vr.prototype._update=function(t,n){for(var r=this.W,i=0;i<16;i++)r[i]=t[n+i];for(;i<r.length;i++)r[i]=id(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var o=this.h[0],s=this.h[1],a=this.h[2],c=this.h[3],u=this.h[4];for(i=0;i<r.length;i++){var p=~~(i/20),h=Yk(id(o,5),Wk(p,s,a,c),u,r[i],Jk[p]);u=c,c=a,a=id(s,30),s=o,o=h}this.h[0]=na(this.h[0],o),this.h[1]=na(this.h[1],s),this.h[2]=na(this.h[2],a),this.h[3]=na(this.h[3],c),this.h[4]=na(this.h[4],u)};vr.prototype._digest=function(t){return t==="hex"?jo.toHex32(this.h,"big"):jo.split32(this.h,"big")}});var od=Fe((N5,N_)=>{"use strict";w();var qo=cr(),Qk=Bo(),Go=rd(),Xk=zo(),ur=qo.sum32,Zk=qo.sum32_4,eA=qo.sum32_5,tA=Go.ch32,nA=Go.maj32,rA=Go.s0_256,iA=Go.s1_256,oA=Go.g0_256,sA=Go.g1_256,D_=Qk.BlockHash,aA=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function br(){if(!(this instanceof br))return new br;D_.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=aA,this.W=new Array(64)}qo.inherits(br,D_);N_.exports=br;br.blockSize=512;br.outSize=256;br.hmacStrength=192;br.padLength=64;br.prototype._update=function(t,n){for(var r=this.W,i=0;i<16;i++)r[i]=t[n+i];for(;i<r.length;i++)r[i]=Zk(sA(r[i-2]),r[i-7],oA(r[i-15]),r[i-16]);var o=this.h[0],s=this.h[1],a=this.h[2],c=this.h[3],u=this.h[4],p=this.h[5],h=this.h[6],y=this.h[7];for(Xk(this.k.length===r.length),i=0;i<r.length;i++){var m=eA(y,iA(u),tA(u,p,h),this.k[i],r[i]),b=ur(rA(o),nA(o,s,a));y=h,h=p,p=u,u=ur(c,m),c=a,a=s,s=o,o=ur(m,b)}this.h[0]=ur(this.h[0],o),this.h[1]=ur(this.h[1],s),this.h[2]=ur(this.h[2],a),this.h[3]=ur(this.h[3],c),this.h[4]=ur(this.h[4],u),this.h[5]=ur(this.h[5],p),this.h[6]=ur(this.h[6],h),this.h[7]=ur(this.h[7],y)};br.prototype._digest=function(t){return t==="hex"?qo.toHex32(this.h,"big"):qo.split32(this.h,"big")}});var F_=Fe((L5,L_)=>{"use strict";w();var sd=cr(),U_=od();function zr(){if(!(this instanceof zr))return new zr;U_.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}sd.inherits(zr,U_);L_.exports=zr;zr.blockSize=512;zr.outSize=224;zr.hmacStrength=192;zr.padLength=64;zr.prototype._digest=function(t){return t==="hex"?sd.toHex32(this.h.slice(0,7),"big"):sd.split32(this.h.slice(0,7),"big")}});var ud=Fe((M5,j_)=>{"use strict";w();var Mn=cr(),cA=Bo(),uA=zo(),wr=Mn.rotr64_hi,Sr=Mn.rotr64_lo,M_=Mn.shr64_hi,z_=Mn.shr64_lo,hi=Mn.sum64,ad=Mn.sum64_hi,cd=Mn.sum64_lo,lA=Mn.sum64_4_hi,fA=Mn.sum64_4_lo,dA=Mn.sum64_5_hi,pA=Mn.sum64_5_lo,B_=cA.BlockHash,hA=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function lr(){if(!(this instanceof lr))return new lr;B_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=hA,this.W=new Array(160)}Mn.inherits(lr,B_);j_.exports=lr;lr.blockSize=1024;lr.outSize=512;lr.hmacStrength=192;lr.padLength=128;lr.prototype._prepareBlock=function(t,n){for(var r=this.W,i=0;i<32;i++)r[i]=t[n+i];for(;i<r.length;i+=2){var o=RA(r[i-4],r[i-3]),s=CA(r[i-4],r[i-3]),a=r[i-14],c=r[i-13],u=EA(r[i-30],r[i-29]),p=xA(r[i-30],r[i-29]),h=r[i-32],y=r[i-31];r[i]=lA(o,s,a,c,u,p,h,y),r[i+1]=fA(o,s,a,c,u,p,h,y)}};lr.prototype._update=function(t,n){this._prepareBlock(t,n);var r=this.W,i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],p=this.h[6],h=this.h[7],y=this.h[8],m=this.h[9],b=this.h[10],R=this.h[11],D=this.h[12],E=this.h[13],I=this.h[14],N=this.h[15];uA(this.k.length===r.length);for(var P=0;P<r.length;P+=2){var F=I,K=N,H=wA(y,m),z=SA(y,m),C=gA(y,m,b,R,D,E),fe=mA(y,m,b,R,D,E),oe=this.k[P],Re=this.k[P+1],T=r[P],pe=r[P+1],Ce=dA(F,K,H,z,C,fe,oe,Re,T,pe),Ge=pA(F,K,H,z,C,fe,oe,Re,T,pe);F=vA(i,o),K=bA(i,o),H=yA(i,o,s,a,c,u),z=_A(i,o,s,a,c,u);var $e=ad(F,K,H,z),Ue=cd(F,K,H,z);I=D,N=E,D=b,E=R,b=y,R=m,y=ad(p,h,Ce,Ge),m=cd(h,h,Ce,Ge),p=c,h=u,c=s,u=a,s=i,a=o,i=ad(Ce,Ge,$e,Ue),o=cd(Ce,Ge,$e,Ue)}hi(this.h,0,i,o),hi(this.h,2,s,a),hi(this.h,4,c,u),hi(this.h,6,p,h),hi(this.h,8,y,m),hi(this.h,10,b,R),hi(this.h,12,D,E),hi(this.h,14,I,N)};lr.prototype._digest=function(t){return t==="hex"?Mn.toHex32(this.h,"big"):Mn.split32(this.h,"big")};function gA(e,t,n,r,i){var o=e&n^~e&i;return o<0&&(o+=4294967296),o}function mA(e,t,n,r,i,o){var s=t&r^~t&o;return s<0&&(s+=4294967296),s}function yA(e,t,n,r,i){var o=e&n^e&i^n&i;return o<0&&(o+=4294967296),o}function _A(e,t,n,r,i,o){var s=t&r^t&o^r&o;return s<0&&(s+=4294967296),s}function vA(e,t){var n=wr(e,t,28),r=wr(t,e,2),i=wr(t,e,7),o=n^r^i;return o<0&&(o+=4294967296),o}function bA(e,t){var n=Sr(e,t,28),r=Sr(t,e,2),i=Sr(t,e,7),o=n^r^i;return o<0&&(o+=4294967296),o}function wA(e,t){var n=wr(e,t,14),r=wr(e,t,18),i=wr(t,e,9),o=n^r^i;return o<0&&(o+=4294967296),o}function SA(e,t){var n=Sr(e,t,14),r=Sr(e,t,18),i=Sr(t,e,9),o=n^r^i;return o<0&&(o+=4294967296),o}function EA(e,t){var n=wr(e,t,1),r=wr(e,t,8),i=M_(e,t,7),o=n^r^i;return o<0&&(o+=4294967296),o}function xA(e,t){var n=Sr(e,t,1),r=Sr(e,t,8),i=z_(e,t,7),o=n^r^i;return o<0&&(o+=4294967296),o}function RA(e,t){var n=wr(e,t,19),r=wr(t,e,29),i=M_(e,t,6),o=n^r^i;return o<0&&(o+=4294967296),o}function CA(e,t){var n=Sr(e,t,19),r=Sr(t,e,29),i=z_(e,t,6),o=n^r^i;return o<0&&(o+=4294967296),o}});var K_=Fe((B5,G_)=>{"use strict";w();var ld=cr(),q_=ud();function Br(){if(!(this instanceof Br))return new Br;q_.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}ld.inherits(Br,q_);G_.exports=Br;Br.blockSize=1024;Br.outSize=384;Br.hmacStrength=192;Br.padLength=128;Br.prototype._digest=function(t){return t==="hex"?ld.toHex32(this.h.slice(0,12),"big"):ld.split32(this.h.slice(0,12),"big")}});var H_=Fe(Ko=>{"use strict";w();Ko.sha1=P_();Ko.sha224=F_();Ko.sha256=od();Ko.sha384=K_();Ko.sha512=ud()});var Q_=Fe(J_=>{"use strict";w();var Mi=cr(),TA=Bo(),lu=Mi.rotl32,V_=Mi.sum32,ra=Mi.sum32_3,$_=Mi.sum32_4,W_=TA.BlockHash;function Er(){if(!(this instanceof Er))return new Er;W_.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Mi.inherits(Er,W_);J_.ripemd160=Er;Er.blockSize=512;Er.outSize=160;Er.hmacStrength=192;Er.padLength=64;Er.prototype._update=function(t,n){for(var r=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],c=r,u=i,p=o,h=s,y=a,m=0;m<80;m++){var b=V_(lu($_(r,Y_(m,i,o,s),t[IA[m]+n],kA(m)),PA[m]),a);r=a,a=s,s=lu(o,10),o=i,i=b,b=V_(lu($_(c,Y_(79-m,u,p,h),t[OA[m]+n],AA(m)),DA[m]),y),c=y,y=h,h=lu(p,10),p=u,u=b}b=ra(this.h[1],o,h),this.h[1]=ra(this.h[2],s,y),this.h[2]=ra(this.h[3],a,c),this.h[3]=ra(this.h[4],r,u),this.h[4]=ra(this.h[0],i,p),this.h[0]=b};Er.prototype._digest=function(t){return t==="hex"?Mi.toHex32(this.h,"little"):Mi.split32(this.h,"little")};function Y_(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function kA(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function AA(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}var IA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],OA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],PA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],DA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var Z_=Fe((V5,X_)=>{"use strict";w();var NA=cr(),UA=zo();function Ho(e,t,n){if(!(this instanceof Ho))return new Ho(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(NA.toArray(t,n))}X_.exports=Ho;Ho.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),UA(t.length<=this.blockSize);for(var n=t.length;n<this.blockSize;n++)t.push(0);for(n=0;n<t.length;n++)t[n]^=54;for(this.inner=new this.Hash().update(t),n=0;n<t.length;n++)t[n]^=106;this.outer=new this.Hash().update(t)};Ho.prototype.update=function(t,n){return this.inner.update(t,n),this};Ho.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}});var tv=Fe(ev=>{w();var bn=ev;bn.utils=cr();bn.common=Bo();bn.sha=H_();bn.ripemd=Q_();bn.hmac=Z_();bn.sha1=bn.sha.sha1;bn.sha256=bn.sha.sha256;bn.sha224=bn.sha.sha224;bn.sha384=bn.sha.sha384;bn.sha512=bn.sha.sha512;bn.ripemd160=bn.ripemd.ripemd160});var yd=Fe((hu,Pv)=>{w();(function(e,t){typeof hu=="object"&&typeof Pv<"u"?t(hu):typeof define=="function"&&define.amd?define(["exports"],t):t((e=typeof globalThis<"u"?globalThis:e||self)["@castleio/castle-js"]={})})(hu,function(e){var t=["Onpxfcnpr","Qryrgr","Fcnpr","Ragre","Gno","nhqvb","ivqrb","anzr","vq","fgevat","nqqRiragYvfgrare","nggnpuRirag","qrgnpuRirag","erzbirRiragYvfgrare","ba","trgBjaCebcreglAnzrf","trgCebgbglcrBs","trgBjaCebcreglQrfpevcgbe","cyngsbez","iraqbe","hfreNtrag","cebqhpgFho","ynathntr","uneqjnerPbapheerapl","qrivprZrzbel","zvzrGlcrf","wninRanoyrq","pbbxvrRanoyrq","perqragvnyf","oyhrgbbgu","fgbentr","crezvffvbaf","freivprJbexre","qbAbgGenpx","cyhtvaf","ohvyqVQ","qrcgu","riny","bfpch","qbphzragZbqr","puebzr","bcren","bce","Vagy","QngrGvzrSbezng","erfbyirqBcgvbaf","gvzrMbar","ybpnyr","xrlhc,xrlqbja,pyvpx,zbhfrhc,zbhfrqbja,gbhpuraq,gbhpufgneg,gbhpupnapry,zbhfrzbir,gbhpuzbir,qrivprzbgvba,jurry","gbhpurf","ebgngvbaEngr","nppryrebzrgre","tlebfpbcr","zntargbzrgre","tenagrq","Lkfxnsgohq,!tr!i\xE5e!JP-mbaz\xF6!VD-uw\xE4yc.!","pnainf","13cg!obthf-sbag-kkk","16cg!Nevny","eton(102,!204,!0,!0.6123456789)","rirabqq","2q","jroty","rkcrevzragny-","JROTY_qroht_eraqrere_vasb","flfgrzKQCV","ybtvpnyKQCV","qrivprCvkryEngvb","unfNggevohgr","nggevohgrf","pnyyCunagbz","_cunagbz","cunagbz","__cunagbznf","pnyyFryravhz","qevire","rinyhngr","fpevcg_sa","fpevcg_shap","fryravhz","Fryravhz_VQR_Erpbeqre","hajenccrq","jroqevire","avtugzner","Frdhraghz","qbzNhgbzngvba","znkGbhpuCbvagf","GbhpuRirag","gbhpufgneg","vachg","rahzrengrQrivprf","zrqvnQrivprf","Sversbk","Naqebvq","trgGvzrmbarBssfrg","cebonoyl","znlor","pnaCynlGlcr","btt","jni","ibeovf","pbqrpf","zcrt","k-z4n","nnp","gurben","nip1.42R01R","ic8,!ibeovf","zc4","jroz","Znkvzhz!pnyy!fgnpx!fvmr!rkprrqrq","gbb!zhpu!erphefvba","Pnaabg!ernq!cebcregl!'o'!bs!haqrsvarq","(ibvq!0)!vf!haqrsvarq","haqrsvarq!vf!abg!na!bowrpg!(rinyhngvat!'(ibvq!0).o')","Pnaabg!ernq!cebcregvrf!bs!haqrsvarq!(ernqvat!'o')","Reebe","ZnpVagry","Jva32","vCubar","Yvahk!nezi8y","raHF","rfRF","seSE","cgOE","raTO","qrQR","ehEH","Tbbtyr!Vap.","Nccyr!Pbzchgre,!Vap.","rznvy","cubar","ertvfgrerq_ng","genvgf","fvtangher","nqqerff","wjg","hey","ersreere","inyhrf","cebcregvrf","Zngu"];function n(f){for(var _,S,O,M=t[f],q="",G=13%26,ge=0;ge<M.length;ge++)q+=(S=G,65<=(O=(_=M.charAt(ge)).charCodeAt())&&O<=90?String.fromCharCode((O-65+S)%26+65):97<=O&&O<=122?String.fromCharCode((O-97+S)%26+97):O===32?String.fromCharCode(O+1):O===33?String.fromCharCode(O-1):_);return q}var r,i,o,s,a,c,u,p,h,y,m,b,R,D,E,I,N,P,F,K,H,z,C,fe,oe,Re,T,pe,Ce,Ge,$e,Ue,Ut,wn,Tt,jt,kt,et,pn,Ht,ze,At,qt,ie=n(0),De=n(1),li=n(2),Yt=n(3),ln=n(4),Lt=[ie,De,8+"",46+""],Gt=Lt.concat([li,Yt,ln,32+"",13+"",10+""]),tt="2.1.13",j=0,U=void 0,A=null,B=Object,se=n(5),ye=n(6),ie=n(7),De=n(8),L=255,ne=15,J=n(9),_e=1535e6,Le=function(){},Te=[],ft=6,Sn=function(f,_,S){var O=U,M=A;return function(){for(var q=[],G=0;G<arguments.length;G++)q[G]=arguments[G];return clearTimeout(M),S?O=f.apply(A,q):M=setTimeout(function(){if(M=A,!S)return O=f.apply(A,q)},_),O}},Qt=B.assign||function(){for(var f=[],_=0;_<arguments.length;_++)f[_]=arguments[_];for(var S=f[0],O=void 0,M=1,q=f.length;M<q;M++)for(var G in O=f[M])O.hasOwnProperty(G)&&(S[G]=O[G]);return S},Be=function(f){return f!==U&&f!==A},an=function(f){return Be(f)&&f!==""},Nn=function(f){return typeof f===J},pr=function(f){return f!==U},rt=function(f){return f||U},en=function(f){return f?1:0},Ft=function(f,_){return-1<f.indexOf(_)},yt=function(f){return f.navigator},Xe=function(f){return f.document},Ye=function(f){return f.screen},dt=function(f){return f.location},En=function(f,_,S){return f.setAttribute(_,S)},hn=function(f,_){if(f.getAttribute)return f.getAttribute(_)},$a=function(f){return JSON.stringify(f)},io=function(f,_){for(var S=[],O=0,M=f;O<M.length;O++){var q=M[O];S.push(_(q))}return S},Ya=function(f){var _,S=[];for(_ in f)f.hasOwnProperty(_)&&S.push(f[_]);return S},nl=function(f){var _,S=[];for(_ in f)f.hasOwnProperty(_)&&S.push(_);return S},Wa=function(f,_){for(var S=Array(f),O=S.length-1;0<=O;O--)S[O]=_;return S},ls=function(f){if(B(f)!==f)return{};for(var _ in f)an(f[_])||delete f[_];return f},Ja=n(10),Qa=n(11),rl=n(12),il=n(13),Xa=n(14),Za=function(f,_,S){ec(f)?f[Ja](_,S,!0):Rt(f)&&f[Qa]("".concat(Xa).concat(_),S)},ec=function(f){return!!f[Ja]},Rt=function(f){return!!f[Qa]},jn=function(f,_){return _===void 0&&(_=2),!isFinite(f)||f==A?A:(_=Math.pow(10,_),Math.round(f*_)/_)},oo=function(f,_){return _!==j?f/_:A},Ci=function(f){return Math.random()*f|j},Un=function(f,_){return Math.abs(f-_)},fs=function(f){return j<f?1:f<j?-1:j},so=function(){return new Date},Ti=Date.now||function(){return so().getTime()},li=function(f){return new Date(f,1,1,0,0,1).toUTCString()},Qn=function(f){return!isNaN(f-parseFloat(f))},ds=function(f){return typeof f=="function"},ti=function(f,_){for(var S=[],O=0,M=0,q=f.split("");M<q.length;M++){var G=q[M],G=parseInt(G,16)^parseInt(_.charAt(O),16);S.push(G.toString(16)),O=(O+1)%_.length}return S.join("")},ao=function(f){for(var _="",S=0;S<f.length;S++)_+=it(f.charCodeAt(S));return _},ps=function(f){for(var _="",S=0;S<f.length;S++)_+=(15&f.charCodeAt(S)).toString(16);return _},it=function(f){return("0"+(f&L).toString(16)).slice(-2)},hs=function(f){return("0"+(3&f).toString(2)).slice(-2)},tc=function(f){return(f&ne).toString(16)},Xn=function(f,_){for(var S=Math.min(Math.pow(2,8*_)-1,f),O="",M=2*_;0<S;)O=it(S)+O,S>>>=8;if(M)for(;O.length<M;)O="0"+O;return O},gs=function(f){for(var _="",S=0,O=f.match(/.{2}/g);S<O.length;S++){var M=O[S];_+=String.fromCharCode(parseInt(M,16)&L)}return _},co=function(f){for(var _="",S=0,O=f;S<O.length;S++){var M=O[S];_+=it(M)}return _},nc=function(f,_){for(var S=0,O=_&&f.length>_?f.slice(0,_):f,M=O.length,q=M-1;0<=q;q--)S|=(O[q]?1:0)<<M-q-1;return _&&M<_&&(S<<=_-M),S},cn=function(f,_,S){return f.substring(_,S)},ni=function(f,_){return f&&cn(f,0,_)},Ar=function(f,_){return f+_.charAt(0).toUpperCase()+_.slice(1)},ms=function(f){return f.toLowerCase()},rc=function(){return(r=r||(f=Array(12+1).join("x"),_="-",ni(f,8)+_+ni(f,4)+_+"4"+ni(f,3)+_+"y"+ni(f,3)+_+ni(f,12))).replace(/[xy]/g,function(S){var O=Ci(16);return tc(S==="x"?O:3&O|8)});var f,_},ic=function(f,_){for(var S,O,M=0,q=[],G=0;G<f.length&&(S=[],(O=f.charCodeAt(G))<128?S.push(O):O<2048?S.push(192|O>>6,128|63&O):O<55296||57344<=O?S.push(224|O>>12,128|O>>6&63,128|63&O):(O=65536+((1023&O)<<10|1023&f.charCodeAt(++G)),S.push(240|O>>18,128|O>>12&63,128|O>>6&63,128|63&O)),!_||M+S.length<=_);G++)M+=S.length,q.push.apply(q,S);return q},oc=n(15),sc=n(16),ys=n(17),tn=function(f,_){return!!Be(f)&&f.hasOwnProperty(_)},ac=function(f){return B[sc](f)},qn=n(18),cc=n(19),mh=n(20),ol=n(21),Ir=n(22),sl=n(23),al=n(24),uo=n(25),Oe=n(26),uc=n(27),cl=n(28),_s=n(29),ul=n(30),vs=n(31),sr=n(32),ki=n(33),bs=n(34),ri=n(35),lc=n(36),ws=n(37),un=n(38),fc=n(39),at=n(40),lo=n(41),fo=n(42),Ss=n(43),g=n(44),l=n(45),d=n(46),v=n(47),x=function(f){return yt(f)[mh]},k=function(_){var _=Ye(_),S=_[Ar("color",lc)];return Be(k)?S:_[Ar("pixel",lc)]},X=function(f){return yt(f)[vs]},W=function(f){try{return f[Ss][g]()[l]()}catch(_){}},he=0,we=1,Ke=2,Z=3,ue=4,te=5,re=6,de=7,Vt=8,Zn=9,nt=10,Je=n(48).split(","),nn=0,V=1,Ae=2,Q=3,He=4,ct=[{n:nn},{n:nn},{n:V,r:!0},{n:V,r:!0},{n:V,r:!0},{n:Ae,r:!0},{n:Ae,r:!0},{n:Ae,r:!0},{t:!0,n:V},{t:!0,n:Ae},{n:Q},{n:He}],$t=500,bt=1e4,ce=500,le=200,Y=1e3,ee=1e3,We=function(f){return i[f]},It=function(){return 0<We(te)||0<We(re)||0<We(de)},Ot=function(f,_){f.u===3&&(f.i[2]=f.i[1]),f.i[1]=f.i[0],f.i[0]=_},Tn=function(f,_){var S=f instanceof Object?f:new Object(f),O=isFinite(S.length)?Math.floor(S.length):0,M=0;if(_===U)do if(M in S&&S[M]===U)return M;while(++M<O);else do if(S[M]===_)return M;while(++M<O);return-1},pt=function(f,_,S,O,M){return M===void 0&&(M=1),{c:f,f:S,o:O,v:_,i:Array(M),u:M,_:j}},hr=function(f,_){f.f&&!f.f(f,_)||f.v&&Tn(f.v,_.h)<j||(Ot(f,_),f.o&&!f.o(f)||(_=f.c)&&!_.apply(A,f.i)||f._++)},Gn=function(f,_,S){return!f||!_||!S},Ai=function(f,_){if(f!==0||_!==0)return Math.sqrt(Math.pow(f,2)+Math.pow(_,2))},po=function(f,_){return Un(f.g,_.g)},yh=function(f,_){var S;if(f.p!==A&&f.y!==A&&_.p!==A&&_.y!==A)return S=f.p-_.p,f=f.y-_.y,Ai(S,f)},_h=function(f,_,S){if(!Gn(f,_,S)){var M=S.p-_.p,S=S.y-_.y,O=f.p-_.p,f=f.y-_.y,_=M*O+S*f,M=Ai(M,S),S=Ai(O,f);if(2<M&&2<S)return 180*Math.acos(jn(_/(M*S),10))/Math.PI}},TS=function(f,_,S){var O,M;if(!Gn(f,_,S))return M=S.p-_.p,S=S.y-_.y,O=f.p-_.p,f=f.y-_.y,_=Un(M*f,O*S),(M=Ai(M-O,S-f))?_/M:0},vh=function(f,_){var S;if(f&&_&&f.g-_.g!=0&&yh(f,_))return S=_.p-f.p,_=_.y-f.y,180*Math.atan2(_,S)/Math.PI+180},ll=function(f,_){if(f&&_)return yh(f,_)},kS=function(f,_){if(f&&_&&f.p!==A&&f.y!==A&&f.l!==A&&_.p!==A&&_.y!==A&&_.l!==A)return Math.abs(10*f.p)+Math.abs(10*f.y)+Math.abs(10*f.l)},Kn=function(f,_){if(f&&_)return po(f,_)},AS=function(f,_){if(f&&_)return f.q===_.q?po(f,_):void 0},Es=function(f,_){if(f&&_)return f.q!==_.q?po(f,_):void 0},IS=function(f){return Tn(Lt,f.q)>=j},fl=function(f,_){return f!==_&&fs(f)-fs(_)===j},OS=function(f,_){return!f||!_||fl(f.p,_.p)||fl(f.y,_.y)||fl(f.l,_.l)},dc=0,dl=1,xs=2,pl=0,bh=1,wh=2,hl=3,pc=function(f,_){return o[f]=_},ho=function(f){return o[f]},gl=function(f){return f.z===j||f.z==1&&f.h===re},PS=function(f){return!gl(f)},go=function(f){return!!f.i[1]&&f.i[0].h===f.v[1]&&f.i[1].h===f.v[0]},DS=function(f){return!!f.i[1]&&f.i[1].h===re&&f.i[0].h!=re},NS=function(f){return!!f.i[1]&&f.i[0].h===re&&f.i[1].h!=re},US=function(f){return!!f.i[1]&&f.i[1].w==dc&&f.i[0].w==dl},LS=function(f){return!!f.i[1]&&f.i[1].w==dl&&f.i[0].w==xs},FS=function(f){return!!f.i[1]&&f.i[1].w==xs&&f.i[0].w==xs},MS=function(f){return!!f.i[1]&&f.i[1].w==dc&&f.i[0].w==dc},ml=.5,Sh=function(f,S){if(!f.length)return A;var S=Be(S)?S:ml,S=(f.length-1)*S,O=S,M=Number.isInteger;return(Be(M)?M(O):typeof O=="number"&&isFinite(O)&&Math.floor(O)===O)?f[S]:(M=Math.floor(S))+1<=f.length?(f[M]+f[M+1])/2:f[M]},Eh=function(f,_){f.push(_);for(var S=f.length-1,O=f[S];0<S&&O<f[S-1];)f[S]=f[S-1],--S;f[S]=O},xh=function(f){return{M:[],k:Be(f)?f:le}},Rh=function(f){if(f.M.length<2)return A;for(var _=yl(f,ml),S=[],O=0,M=f.M;O<M.length;O++){var q=M[O];Eh(S,Un(q,_))}return Sh(S,ml)},yl=function(f,_){return Sh(f.M,_)},Ch=function(f,_){var S,O=f.M;O.length>=f.k&&(S=Ci((f=O).length-2)+1,f.splice(S,1)),Eh(O,_)},Or=function(f,_){var S={x:A,j:xh(_),_:j,I:j,S:j,R:U,C:U};return f&&(S.T=xh(_)),S},ii=function(f,_){var S,O;f._++,f.I+=_,Ch(f.j,_),Be(f.x)?(S=Un(_,f.x),f.S+=S,f.T&&(O=f.x+_,Ch(f.T,O==j?j:S/f.x+_)),_>f.C&&(f.C=_),_<f.R&&(f.R=_)):f.R=f.C=_,f.x=_},_t=function(f,_,S,O,M,q,G,ge){return q===void 0&&(q=2),{c:f,f:O,o:M,v:S,i:Array(q),O:_,A:0,u:q,P:Or(G,ge)}},ht=function(f,_){f.v&&Tn(f.v,_.h)<j||f.f&&!f.f(_)||(f.O&&!f.A&&(f.A=1),Ot(f,_),f.o&&!f.o(f)||(f.O&&f.O.apply(A,f.i)?f.A++:(_=f.c.apply(A,f.i),Qn(_)&&ii(f.P,_))))},Th=function(f){f.i=Array(f.u),f.P=Or(!!f.P.T,f.P.j.k),f.A=0},Yt=function(f){return function(_,S){if(_&&S)return _.g-S.g>f}},Ii=Yt(ce),kh=Yt(1e3),hc=function(f,_){if(f&&_)return Tn(Gt,f.q)>=j||Tn(Gt,_.q)>j?!0:(f=ho(bh),!!(f&&f.g>_.g)||void 0)},gc=function(f){return 1<f._?jn(oo(f.S,f._-1)):A},_l=function(f){return jn(oo(f.I,f._))},Mt=function(f){return jn(yl(f.j))},Ah=function(f){return f.T&&jn(yl(f.T))},zt=function(f){return jn(Rh(f.j))},Ih=function(f){return f.T&&jn(Rh(f.T))},vl=function(f){return jn(f.I)},Oh=function(f){var _,S,O;!function(){if(f.F)return!0;var M=ho(wh);return!M||f.g-M.g>ce}()||(ht(Re,f),S=zt(ze.P),Qn(S)&&ii(wn,S),_=Mt(ze.P),Qn(_)&&ii(Tt,_),O=Ih(ze.P),Qn(O)&&ii(jt,S),O=Ah(ze.P),Qn(O)&&ii(kt,_),S=vl(ze.P),Qn(S)&&ii(et,S),O=vl(At.P),Qn(O)&&ii(pn,O),Qn(S)&&Qn(O)&&0<O&&ii(Ht,S/O),Th(ze),Th(At))},zS=/[a-zA-Z]/,BS=/\d/,jS=n(49),qS=n(50),Ph=function(f,_){var S,O;_&&(S=_.clientX,O=_.clientY),f.p=Be(S)?S:A,f.y=Be(S)?O:A},Dh=Le,Nh=function(f,_,S){return S[_].n===Q?f:Xe(f)},GS=function(f,q,S,O,Ee){var Ie=O,q=function($,Pe,qe){var xe=Tn(Je,$.type),ae={h:xe,g:Pe};switch(ct[xe].n){case V:Ph(ae,$),ae.q=$.button;break;case nn:ae.N=Be($.keyCode)?$.keyCode:$.which,ae.Q=$.code,ae.q=Be(ae.Q)?ae.Q:Be(ae.N)?ae.N+"":A,ae.V=Be($.key)?$.key:Be(ae.N)?String.fromCharCode(ae.N):A,ae.w=(ve=ae.V,!Be(ve)||1<ve.length?xs:zS.test(ve)?dc:BS.test(ve)?dl:xs);break;case He:ae.p=$.deltaX,ae.y=$.deltaY,ae.l=$.deltaZ;break;case Ae:var ve=$[jS];Be(ve)&&(Ph(ae,ve[0]),ae.z=ve.length);break;case Q:ve=$[qS],ve?(ae.p=ve.alpha,ae.y=ve.beta,ae.l=ve.gamma):ae.p=ae.y=ae.l=A}return qe&&qe.G(ae,$),Pe=ho(hl),Pe&&Pe.h!=ae.h&&(Pe.F=!0),ae}(q,Ti(),Ee),G=q,ge=Ie,Ie=Ee,be=G.h,Se=ge[be],Ee=ho(hl);switch(ht(Ut,G),Se.n){case nn:Be(G.q)?(ht(E,G),ht(I,G),ht(C,G),ht(N,G),ht(F,G),ht(K,G),ht(P,G),ht(Ce,G),ht(Ge,G),ht($e,G),ht(Ue,G),hr(s,G)):hr(c,G);break;case Q:ht(H,G);break;case He:hr(a,G);break;case Ae:Se.t?(ht(m,G),ht(b,G),ht(R,G)):(ht(T,G),ht(pe,G),hr(u,G));break;case V:Se.t&&(ht(p,G),ht(h,G),ht(y,G),ht(fe,G),ht(oe,G),Oh(G),ht(ze,G),ht(At,G)),ge[be].r&&(ht(D,G),ht(z,G),ht(C,G))}Ie&&Ie.D(G),Se.n!=nn&&pc(bh,G),Ee&&Ee.F&&(Ie=ge[Ee.h]).n==V&&Ie.t&&Oh(Ee),Se.n==V&&Se.t&&(pc(wh,G),ho(pl)||(pc(pl,G),ht(Re,G))),pc(hl,G),Ie=q,Dh(),Ee=f,q=S,O=(f=O)[S=Ie.h],i[S]++>(O.t?bt:$t)&&(Ie=Nh(Ee,S,f),O=q[S],Ee=qt,ec(Ie)?Ie[il](O,Ee,!0):Rt(Ie)&&Ie[rl]("".concat(Xa).concat(O),Ee))},ln=n(51),Yt=n(52),Ln=n(53),KS=n(54),Uh=[ln,Yt,Ln],Lh=!1,HS=300,Fh=10,ln=8,bl=ln-1,wl=Math.pow(2,bl),Mh=Math.pow(2,ln),VS=(Mh-wl)/(16-bl),Pr=function(f){return f<wl?f:Math.min(Mh,Math.floor((Math.log(f)*Math.LOG2E-bl)*VS+wl))},mc=function(f,_,S,O){return _=f.slice(0,_),f=parseInt(S,16),_=(S=_.split("")).length,Array.prototype.unshift.apply(S,Array.prototype.splice.call(S,f%_,_)),f=S.join(""),ti(O,f)},zh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Bh=function(f,_){return function(S,O){if(S.btoa)return S.btoa(O);for(var M,q,G=String(O),ge=0,Ie=zh,be="";G.charAt(0|ge)||(Ie="=",ge%1);be+=Ie.charAt(63&M>>8-ge%1*8)){if(q=G.charCodeAt(ge+=3/4),L<q)return A;M=M<<8|q}return be}(f,_).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},jh=function(f,_){if(_=_.replace(/\-/g,"+").replace(/_/g,"/")+"==".substring(0,3*_.length%4),f.atob)return f.atob(_);var S,O,M,q,G,ge=String(_).replace(/=+$/,"");if(ge.length%4==1)return null;for(q=S=0,G="";M=ge.charAt(q++);~M&&(O=S%4?64*O+M:M,S++%4)&&(G+=String.fromCharCode(255&O>>(-2*S&6))))M=zh.indexOf(M);return G},Yt=4,Ln=3,ln=(Sl.prototype.e=function(_){var _=function(M){var q=2,G=j,ge=j;if(M===0)return{s:j,m:j,e:j};for(M<j&&(G=1,M=-M);q<=M;)M/=q,ge++;for(;M<1;)M*=q,ge--;return{s:G,m:M,e:ge}}(_),S=(S=_.e,O=this.exp,Math.min(S,(1<<O)-1)),O=function(G,q){var G=G-Math.floor(G),ge=j;if(0<G)for(var Ie=1,be=G;!(be===0||q<Ie);){be*=2;var Se=Math.floor(be);ge|=Se<<q-Ie,be-=Se,Ie++}return ge}(_.m,this.man);return S<<this.man|O},Sl.prototype.d=function(S){var _=S>>this.man&this.a,S=S&this.b,O=this.man;return(S/Math.pow(2,O)+1)*Math.pow(2,_)},Sl);function Sl(f,_){this.exp=f,this.man=_,this.a=(1<<f)-1,this.b=(1<<_)-1}var El,qh,Gh,yc,xl,mo,$S=new ln(Yt,Ln),YS=new ln(Yt-2,Ln+1),Kh=function(f){return f=Math.floor(f/1e3-_e),f=Math.max(Math.min(f,268435455),0),co([f>>24,f>>16,f>>8,f])},Hh=function(f){var _=tc(Ci(16));return(f=ti(cn(f,1,f.length),_))+_},Vh=function(f,_){for(var S,O=3&f.length,M=f.length-O,q=_,G=3432918353,ge=461845907,Ie=0,be=0;Ie<M;)be=255&f.charCodeAt(Ie)|(255&f.charCodeAt(++Ie))<<8|(255&f.charCodeAt(++Ie))<<16|(255&f.charCodeAt(++Ie))<<24,++Ie,q=(65535&(S=5*(65535&(q=(q^=be=(65535&(be=(be=(65535&be)*G+(((be>>>16)*G&65535)<<16)&4294967295)<<15|be>>>17))*ge+(((be>>>16)*ge&65535)<<16)&4294967295)<<13|q>>>19))+((5*(q>>>16)&65535)<<16)&4294967295))+27492+(((S>>>16)+58964&65535)<<16);switch(be=0,O){case 3:be^=(255&f.charCodeAt(Ie+2))<<16;case 2:be^=(255&f.charCodeAt(Ie+1))<<8;case 1:q^=be=(65535&(be=(be=(65535&(be^=255&f.charCodeAt(Ie)))*G+(((be>>>16)*G&65535)<<16)&4294967295)<<15|be>>>17))*ge+(((be>>>16)*ge&65535)<<16)&4294967295}return q=2246822507*(65535&(q=(q^=f.length)^q>>>16))+((2246822507*(q>>>16)&65535)<<16)&4294967295,((q=3266489909*(65535&(q^=q>>>13))+((3266489909*(q>>>16)&65535)<<16)&4294967295)^q>>>16)>>>0},WS=n(55),$h=n(56),JS=n(57),QS=n(58),XS=n(59),ZS=n(60),eE=n(61),Yh=n(62),tE=n(63),nE=n(64),Wh=function(f){if(f=f.toDataURL(),f)return Vh(f).toString(16)},Rl=n(65),Cl=n(66),Jh=n(67),Qh=n(68),Xh=n(69),Tl=function(f,_){return f[Qh]?f[Qh](_):!(!f[Xh][_]||!f[Xh][_].specified)},_c=[n(70),n(71),n(72),n(73)],rE=n(74),Rs=n(75),vc=n(76),Zh=n(77),iE=n(78),bc=n(79),oE=n(80),wc=n(81),oi=n(82),sE=n(83),aE=n(84),eg=n(85),tg=function(f){return-1<Tn(f,!0)},kl=n(86),cE=n(87),uE=n(88),Yt=n(89),lE=ye+Yt,ng=se+Yt,rg=0,ig=1,og=2,sg=n(90),fE=n(91),dE=n(92),pE=n(93),hE=function(f,_){var S,O,M=yt(f),q=[];try{var G=x(f),ge=Ft(G,dE)&&Ft(G,pE),Ie=M[fE];Ie&&Ie[sg]&&!ge?(q=[!1,!1,!1],S=function(be){if(be)for(var Se=0,Ee=be;Se<Ee.length;Se++){var $=Ee[Se].kind;$!==ng&&$!==se||(q[rg]=!0),$===ng&&(q[ig]=!0),$!==lE&&$!==ye||(q[og]=!0)}_(q)},(O=Ie[sg]())&&O.then?O.then(S,function(){return _(q)}):_(q)):_(q)}catch(be){_(q)}},Al=n(94),gE=n(95),mE=n(96),yE=n(97),ag=function(f,_){switch(f[yE](_.replace("'",'"'))){case gE:return 2;case mE:return 1;case"":return 0;default:return 3}},Cs=function(f,_){return ag(f,"".concat(se,"/").concat(_))},Il=function(f,_){return ag(f,"".concat(ye,"/").concat(_))},Ln=n(98),ln=n(99),Yt=n(100),yr=n(101),_E="".concat(Ln,"; ").concat(yr,'="').concat(Yt,'"'),vE=n(102),bE="".concat(ln,"; ").concat(yr,"=1"),wE=n(103),SE=n(104),Yt=n(105),ln=n(106),Tc=n(107),ui=n(108),So=n(109),EE="".concat(Ln,"; ").concat(yr,'="').concat(Yt,'"'),xE="".concat(ui,"; ").concat(yr,'="').concat(ln,'"'),RE="".concat(So,"; ").concat(yr,'="').concat(Tc,'"'),cg=function(){El++,cg()},CE=function(){El=0;try{cg()}catch(f){return{J:El,L:f.message,Z:f.name,B:f.stack?f.stack.toString().length:j}}},TE=function(){try{return(void 0).b,""}catch(f){return f.message}},kE=function(){try{throw""}catch(f){try{return f.toSource(),!0}catch(_){}}return!1},ug=n(110),AE="".concat(ug,"."),IE=n(111),OE=n(112),PE=n(113),DE=n(114),NE=n(115),Ol=n(116),UE="Internal".concat(Ol),LE="Range".concat(Ol),FE=1,lg=2,Pl=3,si=4,Oi=5,fg=6,gr=7,Sc=function(f){return f=ic(f,L),it(f.length)+co(f)},dg=function(f,_){return f=ic(f,_),_=function(S){for(var O=0;S!=0;)S>>=8,O++;return O}(f.length),ft<_?it(j):it(_)+Xn(f.length,_)+co(f)},ai=function(f,_,S){var O=it((31&f)<<3|7&_);switch(_){case fg:O+=it(Math.round(10*S));break;case Pl:O+=it(S);break;case Oi:O+=S<=127?it(S):Xn(1<<15|32767&S,2);break;case si:O+=Sc(S);break;case lg:case FE:break;case gr:O+=S}return O},ME=0,zE=1,BE=2,jE=3,qE=4,GE=5,KE=6,HE=7,VE=8,$E=9,YE=10,WE=11,JE=12,QE=13,XE=14,ZE=15,ex=16,tx=17,nx=18,rx=19,ix=20,ox=21,sx=22,ax=23,cx=24,ux=25,lx=26,fx=27,dx=28,px=29,hx=30,gx=31,mx=0,yx=1,_x=2,vx=0,Ec="__cid",yo="__cuid",Ln="Castle: ",_o=Ln+"missing or wrong publishableKey",Dl=Ln+"missing user or event data",pg=Ln+"missing configuration",bx=300,vo={},hg={},xc=j,Nl=!1,Ul=!1,Ll=function(){Ul=!0,qh()},wx=function(){Ul||Ll()},gn=function(f,_,S){Be(S)&&(vo[f]=ai(f,_,S))},gg=function(f,_){_&&(vo[f]=ai(f,lg))},Fl=function(f,_){_.length>j&&(vo[f]=ai(f,gr,(_=Vh((f=_).sort().join("")),it(f.length)+Xn(_,4))))},mg=function(f,_){Be(_)&&(vo[f]=25.5<_?ai(f,Oi,Math.round(_)):ai(f,fg,_))},ci=function(f,_,S){Be(_)&&(S=Tn(S,_),vo[f]=j<=S?ai(f,Pl,S):ai(f,si,_))},yg=function(f,_){return f&=32767,_&=65535,f==_?Xn(32768|f,2):Xn(f,2)+Xn(_,2)},Ml=function(f){var _=io(f,function(O){return en(O)}),S=nc(_,U);return it(f.length)+Xn(S,Math.ceil(_.length/8))},Sx=n(117),Ex=n(118),xx=n(119),Rx=n(120),_g=n(121),Cx=n(122),Tx=n(123),kx=n(124),vg=n(125),Ax=n(126),Ix=n(127),Dr=function(f){return cn(f,0,2)+"-"+cn(f,2,2)},Ox=n(128),Px=n(129),Dx="20181001000000",Nx=["20030107","20100101"],zl=function(f,_,S){Be(S)&&(hg[f]=ai(f,_,S))},Ux=(Yt=2,ui=tt.split("."),ln=parseInt(ui[0],10)-1,So=parseInt(ui[1],10),yr=parseInt(ui[2],10),Xn(Yt<<13|(3&ln)<<11|(31&So)<<6|63&yr,2)),Lx=0,Fx=4,Mx=it(L),zx=3,bg=function(f,_){return it((7&f)<<5|31&_)},Bx=function(f,_,S,O){var M,G=Ya(vo),Ie=Ya(hg),be=(be=[0<E.P._,It(),0<We(Ke),0<c._,We(nt)>Fh&&gc(H.P)>Fh,0<s._,0<u._,!!(be=ho(pl))&&be.p===j&&be.y===j],Se=It()?p:m,q=Mt(Ce.P),Ee=zt(Ce.P),M=[gc(h.P),gc(b.P),_l(I.P),_l(K.P),_l(D.P),gc(Se.P),Mt(z.P),zt(z.P),Mt(D.P),zt(D.P),Mt(C.P),zt(C.P),Mt(F.P),zt(F.P),Mt(K.P),zt(K.P),Mt(N.P),zt(N.P),Mt(P.P),zt(P.P),Mt(fe.P),zt(fe.P),Mt(oe.P),zt(oe.P),Mt(Re.P),zt(Re.P),(Se=Re.P,jn(Se.R)),(Se=Re.P,jn(Se.C)),Mt(pe.P),zt(pe.P),Mt(T.P),zt(T.P),Un(Mt(Ge.P),q),Un(zt(Ge.P),Ee),Un(Mt($e.P),q),Un(zt($e.P),Ee),Un(Mt(Ue.P),q),Un(zt(Ue.P),Ee),Mt(Tt),zt(wn),Mt(kt),zt(jt),Ah(y.P),Ih(y.P),Mt(pn),zt(pn),Mt(et),zt(et),Mt(Ht),zt(Ht),vl(y.P),Mt(Ut.P),zt(Ut.P)],Se=[Pr(We(Vt)),Pr(We(he)),Pr(We(Ke)),Pr(We(re)),Pr(We(we)),Pr(We(Zn)),Pr(Un(We(ue),We(Z))),Pr(1<et._?et._-1:j),Pr(a._)],q=nc(be,14),[it((Ee=zx<<14|16383&q)>>8)+it(Ee),function(){for(var $,Pe="",qe=0,xe=M;qe<xe.length;qe++)Pe+=it(Qn($=xe[qe])?($=Math.max($,0))<=15?64|YS.e($+1):128|$S.e($-14):0);return Pe}(),co(Se)]),q=it(Ci(256)),Ee=Hh(Kh(Ti())),Se=bg(Lx,G.length),ge=bg(Fx,Ie.length),Se=Se+G.join("")+ge+Ie.join("")+be.join("")+Mx,G=mc(Ee,4,Ee.charAt(3),Se),ge=mc(_,8,_.charAt(9),Ee+G),Ie=S+O+Ux+_+ge,be=it(Ie.length),Se=ti(Ie+be,q),Ee=gs(q+Se);return Bh(f,Ee)},Rc=function(f,_,S,O){f=Xe(f);try{f.cookie="".concat(_,"=").concat(S,";path=/;").concat(O).concat("SameSite=Lax")}catch(M){}},wg=function(f,_){f=Xe(f);try{return(f.cookie.match("(^|; )".concat(_,"=([^;]*)"))||0)[2]}catch(S){return null}},jx="__ctst",qx=li(1970),Bl=function(f,_,S){for(var O=0,M=dt(f).hostname,q=M.split("."),G=q.length===1;O<q.length-1||G;)M=q.slice(-1-++O).join("."),Rc(f,_,"","expires=".concat(S||qx,";domain=").concat(M,";")),G=!1},Gx=function(f,_){if(!_||_.length<76)return!1;try{return jh(f,_),!0}catch(S){return S.code!==5}},bo={H:!1,K:!0,Y:"//m.castle.io/v1/monitor",X:1e3},mr=function(){return bo},Kx=it(8),Hx=li(1970),Vx=li(2037),Sg={},jl=!1,Eg=!1,Cc=[],xg=function(f,_,M){var O=yo,M=M||Le;try{var q=f.localStorage;q||M(),q.setItem(O,_),q.getItem(O)!==_&&(q.removeItem(O),M())}catch(G){M()}},Rg=function(f,_){var S=yc,S=S?"domain=".concat(S,";"):"";Rc(f,yo,_,"expires=".concat(Vx,";").concat(S))},Cg=function(f){if(!mr().U)throw _o;if(jl){Eg=!0;for(var _=Cc.length,S=ql().$,O=0;O<_;O++)Cc[O][1]._value=S,Cc[O][0](S)}},ql=function(){return Sg[Ec]},Tg=function(f){Sg[Ec]=f},Gl=function(f,_){return f={W:_,$:mr().U?Bx(f,_,Kx,ao(mr().U.substring(3))):""},Tg(f),f},kg=function(f){var _=ql();if(_)return Gl(f,_.W)},Ts=function(f,_){return f.then=function(S,O){return S(_),f},f},$x="POST",Yx="undefined",Wx="withCredentials",Jx=4,Ag=function(f,_,S){if(S.nn&&(clearTimeout(S.nn),S.nn=U),S.rn===U)for(var O=f.length,M=0;M<O;M++)f[M](_);S.rn=_},Kl=function(f,_){f.send(_)},Qx=Sn(Kl,300),Hl=function(f,_,S,O,M,q,G){var ge,Ie,be=function(){try{if(typeof XMLHttpRequest==Yx)return;var Se=new XMLHttpRequest;if(Wx in Se)return Se}catch(Ee){}}();return be&&be.setRequestHeader?(be.open($x,_,!0),ge={rn:U,nn:U},Ie=[],be.setRequestHeader("Content-Type","application/json"),be.setRequestHeader("X-Castle-Publishable-Api-Key",S),q.then=function(Se,Ee){return ge.rn!==U?Se(ge.rn):Ie.push(Se),q},be.onreadystatechange=function(){var Se;be.readyState===Jx&&(Se=be.status,Ag(Ie,200<=Se&&Se<400,ge))},O(function(Se){ge.nn=setTimeout(function(){Ag(Ie,A,ge),be.abort()},G),M(be,$a(Se))}),q):Ts(q,!1)},Xx="Castle: ",Vl=function(f,_){tn(f,"console")&&(f=f.console,tn(f,"warn")&&f.warn(Xx+_))},Zx=0,e1=1,t1=2,n1=4,r1=5,i1=3,$l=function(f){return Nn(f)?f:$a(f)},Yl=function(f,_,S,O,M,q){return Wl(_,S,O,M,M,q)+Xn(f.length,i1)+ao(f)},Wl=function(f,_,S,O,M,q){for(var G=[],ge=q?dg:Sc,Ie=j;Ie<S.length;Ie++){var be=S[Ie],Se=Tn(O,be)>=j,Ee=Tn(M,be)>=j,$=tn(_,be)&&an(_[be]);if($||Se){var Pe=void 0;if(Se){if(Se=$?_[be]:Ee?{}:U,Se===U)continue;var qe=ls(Se),$=nl(qe).slice(j,L);Pe=it($.length);for(var xe=0,ae=$;xe<ae.length;xe++)var ve=ae[xe],Pe=(Pe+=Sc($l(ve)))+Sc($l(qe[ve]))}else Pe=ge($l(_[be]));G.push(it(Ie)+Pe)}}return it(f)+it(G.length)+G.join("")},o1=De,s1=n(130),a1=n(131),c1=n(132),Ig=n(133),u1=n(134),Og=n(135),l1=ie,Jl=function(f){return Wl(Zx,f,[o1,s1,a1,c1,Ig,u1,l1,Og],[Ig,Og],Te,!1)},f1=n(136),Ql=function(f){return Wl(n1,f,[f1],Te,Te,!0)},d1=3,Xl=function(f,Ie,G,q){var M=it(Ci(256)),be=Hh(Kh(Ti())),ge=it(q.length),Ie=Ie.substring(3),G=G+ge+q.join(),ge=it(G.length&L),q=mc(be,4,be.charAt(3),G+ge),G=mc(ps(Ie),8,ps(Ie[9]),be+q),ge=it((15&d1)<<4),Ie=ti(ge+G,M),be=gs(M+Ie);return Bh(f,be)},Zl=n(137),ef=ie,tf=n(138),p1=ie,Pg=n(139),Dg=0,h1=300,g1=ie,Ng=n(140),Ug="data-castle-value",m1="data-castle-name",y1=ie,Lg=ie,Fg="castle_request_token",wo=function(){if(xl)return xl;throw pg},Mg=!0,zg=U,Tc=function(Se){var _,S,O,M,q,G,ge,Ie,be,Se=Se||{};if((mo=tn(Se,"window")?Se.window:mo)||typeof window<"u"&&(mo=window),!mo)throw pg;if(tn(Se,"cookieDomain")&&(Ee=Se.cookieDomain,/\S+\.\S{2,}$/.test(Ee)&&(yc=Ee)),tn(Se,"avoidCookies")&&(Ee=!!Se.avoidCookies,bo.H=Ee),mr().H||(yc=yc||function($){for(var Pe=0,qe=Xe($),xe=dt($).hostname,ae="".concat(jx).concat(Ti()),ve=xe.split(".");Pe<ve.length-1&&(xe=ve.slice(-1-++Pe).join("."),Rc($,ae,ae,"domain=".concat(xe,";")),!Ft(qe.cookie,"".concat(ae,"=").concat(ae))););return Bl($,ae),xe}(mo)),tn(Se,"pk")){var Ee=Se.pk;if(!an(Ee)||Ee.length!==35||Ee.slice(0,3)!=="pk_")throw _o;bo.U=Ee,Cg()}if(tn(Se,"apiUrl")&&(Ee=Se.apiUrl,bo.Y=Ee),tn(Se,"timeout")&&(Ee=Se.timeout,bo.X=Ee),tn(Se,"verbose")&&(Ee=!!Se.verbose,bo.K=Ee),Mg){if(!mr().U)throw _o;Ie=_=mo,xl=be={createRequestToken:function(){var $={then:function(Pe,qe){return Eg&&!$._value&&(kg(Ie),$._value=function(){var xe;if(jl)return xe=Ie,(ql()||Gl(xe,rc())).$}()),$._value?Pe($._value):Cc.push([Pe,$]),$}};return $},page:function(ae){var Pe=Ie,qe=be.createRequestToken(),xe=ae,ae={},ve=mr();if(!ve.U)throw _o;if(!Be(xe)||!Be(xe.user)&&!Be(xe.userJwt))return ve.K&&Vl(Pe,Dl),Ts(ae,!1);var ut=tn(xe,Zl)?xe[Zl]:dt(Pe).href,Bt=tn(xe,ef)?xe[ef]:Xe(Pe).title||ut,vt=tn(xe,tf)?xe[tf]:Xe(Pe).referrer;return Hl(0,ve.Y,ve.U,function(ot){qe.then(function(Kt){var Pt=ve.U,mn={user:xe.user,userJwt:xe.userJwt,name:Bt,url:ut,referrer:vt},Pt=Xl(Pe,Pt,mn.userJwt?Ql({jwt:mn.userJwt}):Jl(mn.user),[Yl(Kt,e1,mn,[ef,Zl,tf],Te,!1)]);ot({data:Pt})})},Qx,ae,ve.X)},form:function(ae){var Pe=Ie,qe=be.createRequestToken(),xe=ae,ae={},ve=mr();if(!ve.U)throw _o;if(!Be(xe)||!Be(xe.user)&&!Be(xe.userJwt)||!Be(xe.name))return ve.K&&Vl(Pe,Dl),Ts(ae,!1);var ut=Ti();return ut-Dg<h1?Ts(ae,!1):(Dg=ut,Hl(0,ve.Y,ve.U,function(Bt){qe.then(function(Kt){var ot=ve.U,Kt=Xl(Pe,ot,(ot=xe).userJwt?Ql({jwt:ot.userJwt}):Jl(ot.user),[Yl(Kt,t1,ot,[p1,Pg],[Pg],!1)]);Bt({data:Kt})})},Kl,ae,ve.X))},custom:function(ae){var Pe=Ie,qe=be.createRequestToken(),xe=ae,ae={},ve=mr();if(ve.U)return Be(xe)&&(Be(xe.user)||Be(xe.userJwt))&&Be(xe.name)?Hl(0,ve.Y,ve.U,function(ut){qe.then(function(ot){var vt=ve.U,ot=Xl(Pe,vt,(vt=xe).userJwt?Ql({jwt:vt.userJwt}):Jl(vt.user),[Yl(ot,r1,vt,[g1,Ng],[Ng],!1)]);ut({data:ot})})},Kl,ae,ve.X):(ve.K&&Vl(Pe,Dl),Ts(ae,!1));throw _o},injectTokenOnSubmit:function($,Pe){$.preventDefault?$.preventDefault():$.returnValue=!1;var qe=$.target||$.srcElement;be.createRequestToken().then(function(xe){En(function(ae,ve){for(var ut=0,Bt=ve.childNodes;ut<Bt.length;ut++){var vt=Bt[ut];if(hn(vt,Lg)===Fg)return vt}return ae=Xe(ae).createElement("input"),En(ae,"type","hidden"),En(ae,Lg,Fg),ve.appendChild(ae),ae}(Ie,qe),"value",xe),Pe?Pe($):qe.submit()})},formEventOnSubmit:function($,ve,qe,xe){if(!$.preventDefault)return!xe||void xe($,null);$.preventDefault();var ae=$.target||$.srcElement,ve=Qt(Nn(ve)?{userJwt:ve}:{user:ve||{}},function(ut){for(var Bt=new FormData(ut),vt={},ot=0,Kt=ut.querySelectorAll("[".concat(Ug,"]"));ot<Kt.length;ot++){var Pt=Kt[ot],mn=hn(Pt,Ug),Pt=hn(Pt,y1);Bt.has(Pt)&&(vt[mn]=""+Bt.get(Pt))}return{name:hn(ut,m1),values:vt}}(ae));be.form(ve).then(function(ut){qe&&qe.injectToken?be.injectTokenOnSubmit($,function(Bt){return xe?xe(Bt,ut):ae.submit()}):xe?xe($,ut):ae.submit()})}},o=Wa(4,A),p=_t(Kn,Ii),h=_t(vh,Ii),m=_t(Kn,Ii),b=_t(vh,Ii),R=_t(ll,Ii),y=_t(ll,Ii,A,A,A,2,!0,Y),wn=Or(!1,Y),Tt=Or(!1,Y),jt=Or(!1,Y),kt=Or(!1,Y),et=Or(!1,Y),pn=Or(!1,Y),Ht=Or(!1,Y),ze=_t(ll,A,A,A,A,2,!0,Y),At=_t(Kn,A,A,A,A,2,!0,Y),D=_t(Kn,A,[ue,Z],A,go),E=_t(Es,kh,[we,he],A,go),I=_t(AS,kh,[we,he],A,go),F=_t(Kn,hc,[we]),K=_t(Kn,hc,[he]),N=_t(Kn,hc,[we,he],A,go),P=_t(Kn,hc,[he,we],A,go),T=_t(Kn,A,[re,te,de],gl,NS),pe=_t(Kn,A,[re,te,de],gl,DS),H=_t(kS),z=_t(Kn,A,[Ke]),fe=_t(_h,A,A,A,A,3,!1,Y),oe=_t(_h,Ii,A,A,A,3,!1,Y),Re=_t(TS,A,A,A,A,3,!1,Y),C=_t(Kn,A,[Ke,we],A,go),Ce=_t(Es,A,[we],A,MS),Ge=_t(Es,A,[we],A,US),$e=_t(Es,A,[we],A,LS),Ue=_t(Es,A,[we],A,FS),Ut=_t(Kn,A,A,A,A,2,!0,ee),s=pt(IS,[we]),a=pt(OS),u=pt(A,[re],PS),c=pt(A),i=Wa(Je.length,0),Se=_,Nl||(qh=function(){var $,Pe,qe,xe,ae,ve,ut=Pe=_,Bt=Je,vt=ct,ot=void 0;Dh=Sn(Le,HS,void 0);for(var Kt=ut,mn=qt=function(As){return GS(ut,As,Bt,vt,ot)},Pt=Bt,nf=vt,ks=X(Kt),er=Pt.length-1;0<=er;er--){var Bg=Nh(Kt,er,nf);if(er===nt&&ks&&ks.query)for(var rf=Uh.length-1;0<=rf;rf--)(function(As,of,kc,jg){As.query({name:Uh[rf]}).then(function(sf){sf=sf.state,Lh||sf===KS&&(Lh=!0,Za(of,kc,jg))}).catch(Le)})(ks,Bg,Pt[er],mn);else Za(Bg,Pt[er],mn)}$=wg(Pe,Ec),ae=function(As,of){try{var kc=As.localStorage;return kc?kc.getItem(of):null}catch(jg){return null}}(ae=Pe,yo)||wg(ae,yo)||(ae=Pe,!(ve=$)||ve.length!==61&&ve.length!==57&&ve.length!==36&&ve.length!==75?Gx(ae,ve)?(ae=jh(ae,ve),ae=ao(ae),ti(ae.slice(2,ae.length-2),ae.slice(0,2)).slice(4,36)):rc().replace(/[-]/g,""):ve.split("-").slice(0,5).join("")),Pe=Gl(ve=Pe,ae),$&&Bl(ve,Ec),mr().H?Rc(ve,yo,"","expires=".concat(Hx,";")):Bl(ve,yo),qe=ve,Tg(xe=Pe),mr().H?xg(qe,xe.W,function(){return Rg(qe,xe.W)}):(Rg(qe,xe.W),xg(qe,xe.W)),jl=!0,Cg()},Gh=function(){return kg(_)},ci(ME,(Ee=Se,yt(Ee)[qn]),[Sx,Ex,xx,Rx]),ci(zE,yt(Ee)[cc],[Ox,Px]),ci(BE,function($){return $=yt($),$[Ir]||$[Ar("user",Ir)]||$[Ar("browser",Ir)]||$[Ar("system",Ir)]}(Ee),[Dr(_g),Dr(Cx),Dr(Tx),Dr(kx),Dr(vg),Dr(Ax),Dr(Ix),ms(Dr(_g)),ms(Dr(vg))]),mg(jE,rt(yt(Ee)[al])),gn(qE,gr,yg(rt(Ye(ge=Ee).width),rt(Ye(ge).availWidth))+yg(rt(Ye(ge).height),rt(Ye(ge).availHeight))),gn(GE,Oi,k(Ee)),gn(KE,Oi,rt(yt(Ee)[sl])),mg(HE,(G=Ye(ge=Ee),Be(G[Rl])&&Be(G[Cl])&&G[Rl]>G[Cl]?oo(G[Rl],G[Cl]):Be(ge[Jh])?ge[Jh]:1)),gn(VE,gr,(G=so()[Al]()/15,(ge=so()).setDate(1),ge.setMonth(0),q=ge[Al](),ge.setMonth(6),q=Un(q,ge[Al]())/15,it(G)+it(q))),Fl($E,io(yt(Ee)[uo],function($){return $.type})),Fl(YE,io(yt(Ee)[bs],function($){return $.name+$.description+$.length+$.filename})),gn(WE,gr,function($){return $=[kE(),Xe($)[fc],$[fo]||$[lo],yt($)[un],yt($)[oi]===!0,$[at],yt($)[sr],X($),yt($)[ul],yt($)[_s],yt($)[cl],yt($)[uc]],Ml($)}(Ee)),gn(ox,gr,Ml([!!(ge=Ee)["__".concat(sE)],tg([_c[0]in(G=ge),_c[1]in G,_c[2]in G,_c[3]in G]),(M=(q=Xe(G=ge)).documentElement,tg([oi in G,"_".concat(oE)in G,rE in G,"_".concat(bc)in G,"__".concat(oi,"_").concat(Zh)in q,"__".concat(Rs,"_").concat(vc)in q,"__".concat(oi,"_").concat(vc)in q,"__".concat(bc,"_").concat(vc)in q,"__fx".concat(Rs,"_").concat(vc)in q,"__".concat(Rs,"_").concat(wc)in q,"__".concat(oi,"_").concat(wc)in q,"__".concat(bc,"_").concat(wc)in q,"__fx".concat(Rs,"_").concat(wc)in q,"__".concat(oi,"_").concat(Zh)in q,"__".concat(oi,"_").concat(iE)in q,Tl(M,bc),Tl(M,oi),Tl(M,Rs)])),!!ge.external&&ds(ge.external.toString)&&Ft(ge.external.toString(),aE),!!ge.spawn,!(!ge[eg]&&!ge["".concat(eg,"Controller")]),!!ge.emit,!!ge.Buffer])),G=JE,q=x(Ee),Be(q)&&gn(G,gr,dg(q,512)),(M=function($){var Pe;try{Pe=function(qe){var xe,ae,ve,ut=Xe(qe).createElement($h),Bt=ut&&ut.getContext&&ut.toDataURL?ut.getContext(eE):U;if(Bt)return{tn:(ae=Bt,(xe=ut).width=500,xe.height=100,ve=WS+String.fromCharCode(55357,56836),ae.textBaseline="alphabetic",ae.fillStyle="#f60",ae.fillRect(125,1,62,20),ae.fillStyle="#069",ae.font=JS,ae.fillText(ve,2,20),ae.fillStyle=XS,ae.font=QS,ae.fillText(ve,4,22),Wh(xe)),en:function(vt,ot){vt.height=200,vt.width=400;var Kt=2*Math.PI;ot.globalCompositeOperation="multiply";for(var mn=0,Pt=[["#f0f",50,50],["#0ff",100,50],["#f70",75,100]];mn<Pt.length;mn++){var er=Pt[mn],nf=er[0],ks=er[1],er=er[2];ot.fillStyle=nf,ot.beginPath(),ot.arc(ks,er,50,0,Kt,!0),ot.closePath(),ot.fill()}return ot.fillStyle="#70f",ot.arc(75,75,75,0,Kt,!0),ot.arc(75,75,25,0,Kt,!0),ot.fill(ZS),Wh(vt)}(ut,Bt),un:function(){var vt=Xe(qe).createElement($h);try{var ot=vt.getContext(Yh)||vt.getContext(tE+Yh),Kt=ot.getExtension(nE);return Kt?ot.getParameter(Kt.UNMASKED_RENDERER_WEBGL):U}catch(mn){return U}}()}}($)}catch(qe){}return Pe}(Ee))&&(gn(QE,si,M.tn),gn(nx,si,M.en),gn(rx,si,M.un)),gg(ZE,function($){return $=yt($),$[ki]||$[Ar("ms",ki)]?1:U}(Ee)),gg(ex,function($){try{var Pe=yt($)[Oe];return ds(Pe)&&Pe()?1:U}catch(qe){return U}}(Ee)),ci(tx,yt(Ee)[ol],Nx),gn(ix,si,((ge=so()).setTime(0),ge.toLocaleString())),gn(sx,Oi,(G=Ee)[ws]?G[ws].toString().length:j),ci(ax,yt(Ee)[ri],[Dx]),q=CE(),gn(cx,Oi,q.J),ci(ux,q.L,[ug,AE,IE]),ci(lx,q.Z,[UE,LE,Ol]),gn(fx,Oi,q.B),gn(dx,gr,(M=function($){var Pe,qe,xe=yt($),ae=Xe($),ve=0;Be(xe[kl])?ve=xe[kl]:(qe=xe["ms".concat(kl)],Be(xe[qe])&&(ve=xe[qe]));try{ae.createEvent(cE),Pe=!0}catch(ut){Pe=!1}return{in:ve,cn:Pe,fn:"on".concat(uE)in $}}(M=Ee),ge=parseInt("".concat(en(M.cn)).concat(en(M.fn)),2),it((63&M.in)<<2|ge))),ci(px,TE(),[OE,PE,DE,NE]),Fl(hx,function($){var Pe=[];if(!(tn(B,oc)&&tn(B,sc)&&tn(B,ys)))return Pe;var qe,xe=yt($),ae=xe;do for(var ve=0,ut=(qe=ae,B[oc](qe));ve<ut.length;ve++){var Bt=ut[ve];Pe.push(Bt)}while(ae=ac(ae));for(var vt,ot=[],Kt=0,mn=Pe;Kt<mn.length;Kt++){var Bt=mn[Kt],Pt=(Pt=ac(xe),B[ys](Pt,Bt));Be(Pt)?pr(Pt.value)?vt=Pt.value.toString():pr(Pt.get)&&(vt=Pt.get.toString()):vt="",ot.push("".concat(Bt,"~~~").concat(vt))}return ot}(Ee)),gn(gx,gr,function($){if($.length)return Xn(parseInt(io($,hs).join(""),2),2)}(function($){try{return qe=Xe($).createElement(ye),[Il(qe,RE),Il(qe,xE),Il(qe,EE)].concat((Pe=Xe($).createElement(se),[Cs(Pe,SE),Cs(Pe,wE),Cs(Pe,bE),Cs(Pe,vE),Cs(Pe,_E)]))}catch(xe){return[]}var Pe,qe}(Ee))),O=function($){$.length&&gn(XE,gr,Ml([$[og],$[ig],$[rg]]))},xc+=1,hE.apply(A,[Ee].concat([function($){Ul?Gh():(O($),--xc,Nl&&xc===j&&Ll())}])),G=Se,zl(mx,Pl,vx),zl(yx,si,function($){if($=W($),$)return $[d]}(G)),zl(_x,si,(M=yt(q=G)[Ir+"s"],q=W(q),ge=M,Se=Array.isArray,(ds(Se)?Se(ge):B.prototype.toString.call(ge)==="[object Array]")&&M.length&&(S=M.join(",")),q&&(Se=q[v])&&(S?Ft(M,Se)||(S=S+","+Se):S=Se),S)),Nl=!0,xc===j?Ll():setTimeout(wx,bx)),Mg=!1}return zg},Ln=function(f,_){return wo().injectTokenOnSubmit(f,_)},ui=function(f,_,S,O){return wo().formEventOnSubmit(f,_,S,O)},Yt=function(){return wo().createRequestToken()},ln=function(f){return wo().page(f)},So=function(f){return wo().form(f)},yr=function(f){return wo().custom(f)},li=function(){return tt},zg={configure:Tc,createRequestToken:Yt,injectTokenOnSubmit:Ln,formEventOnSubmit:ui,page:ln,form:So,custom:yr,getVersion:li};e.configure=Tc,e.createRequestToken=Yt,e.custom=yr,e.form=So,e.formEventOnSubmit=ui,e.getVersion=li,e.injectTokenOnSubmit=Ln,e.page=ln,Object.defineProperty(e,"__esModule",{value:!0})})});var Dv=Fe((_d,vd)=>{w();(function(e,t){typeof _d=="object"&&typeof vd<"u"?vd.exports=t():typeof define=="function"&&define.amd?define("amplitude",t):(e=e||self,e.amplitude=t())})(_d,function(){"use strict";function e(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(l){return typeof l}:e=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(g)}function t(g,l){if(!(g instanceof l))throw new TypeError("Cannot call a class as a function")}function n(g,l){for(var d=0;d<l.length;d++){var v=l[d];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}function r(g,l,d){return l&&n(g.prototype,l),d&&n(g,d),g}function i(g,l,d){return l in g?Object.defineProperty(g,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):g[l]=d,g}function o(g){for(var l=1;l<arguments.length;l++){var d=arguments[l]!=null?arguments[l]:{},v=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(d).filter(function(x){return Object.getOwnPropertyDescriptor(d,x).enumerable}))),v.forEach(function(x){i(g,x,d[x])})}return g}function s(g){return a(g)||c(g)||u()}function a(g){if(Array.isArray(g)){for(var l=0,d=new Array(g.length);l<g.length;l++)d[l]=g[l];return d}}function c(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var p;(function(g){g.IDENTIFY="$identify"})(p||(p={}));var h;(function(g){g.SET="$set",g.SET_ONCE="$setOnce",g.ADD="$add",g.APPEND="$append",g.PREPEND="$prepend",g.REMOVE="$remove",g.PREINSERT="$preinsert",g.POSTINSERT="$postinsert",g.UNSET="$unset",g.CLEAR_ALL="$clearAll"})(h||(h={}));var y;(function(g){g[g.None=0]="None",g[g.Error=1]="Error",g[g.Warn=2]="Warn",g[g.Verbose=3]="Verbose"})(y||(y={}));var m;(function(g){g.Unknown="unknown",g.Skipped="skipped",g.Success="success",g.RateLimit="rate_limit",g.PayloadTooLarge="payload_too_large",g.Invalid="invalid",g.Failed="failed"})(m||(m={})),function(g){function l(d){return d>=200&&d<300?g.Success:d===429?g.RateLimit:d===413?g.PayloadTooLarge:d>=400&&d<500?g.Invalid:d>=500?g.Failed:g.Unknown}g.fromHttpCode=l}(m||(m={}));var b={status:m.Skipped,statusCode:0};function R(){var g;return typeof process=="object"&&((g=process==null?void 0:process.versions)===null||g===void 0?void 0:g.node)!==void 0}function D(){return typeof window=="object"&&(window==null?void 0:window.document)!==void 0}var E={},I=function(){return R()||typeof window<"u"?window:typeof self<"u"?self:E},N=function(){var g=I();return g.__AMPLITUDE__=g.__AMPLITUDE__||{},g.__AMPLITUDE__},P=function(){var g;if(D()){var l=window,d=Array;if(l.Prototype!==void 0&&((g=d.prototype)===null||g===void 0?void 0:g.toJSON)!==void 0)return delete d.prototype.toJSON,!0}return!1},F=N(),K="Amplitude Logger ",H=function(){function g(){this._logLevel=0}return g.prototype.disable=function(){this._logLevel=0},g.prototype.enable=function(l){l===void 0&&(l=y.Warn),this._logLevel=l},g.prototype.log=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];this._logLevel<y.Verbose||window.console.log(K+"[Log]: "+l.join(" "))},g.prototype.warn=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];this._logLevel<y.Warn||window.console.warn(K+"[Warn]: "+l.join(" "))},g.prototype.error=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];this._logLevel<y.Error||window.console.error(K+"[Error]: "+l.join(" "))},g}(),z=F.logger||(F.logger=new H),C={DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",GROUP_IDENTIFY_EVENT:"$groupidentify",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",DEVICE_ID_INDEX:0,USER_ID_INDEX:1,OPT_OUT_INDEX:2,SESSION_ID_INDEX:3,LAST_EVENT_TIME_INDEX:4,EVENT_ID_INDEX:5,IDENTIFY_ID_INDEX:6,SEQUENCE_NUMBER_INDEX:7,COOKIE_TEST_PREFIX:"amp_cookie_test",COOKIE_PREFIX:"amp",STORAGE_DEFAULT:"",STORAGE_COOKIES:"cookies",STORAGE_NONE:"none",STORAGE_LOCAL:"localStorage",STORAGE_SESSION:"sessionStorage",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id",REFERRER:"referrer",UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_TERM:"utm_term",UTM_CONTENT:"utm_content",ATTRIBUTION_EVENT:"[Amplitude] Attribution Captured",TRANSPORT_HTTP:"http",TRANSPORT_BEACON:"beacon"},fe={encode:function(l){for(var d="",v=0;v<l.length;v++){var x=l.charCodeAt(v);x<128?d+=String.fromCharCode(x):x>127&&x<2048?(d+=String.fromCharCode(x>>6|192),d+=String.fromCharCode(x&63|128)):(d+=String.fromCharCode(x>>12|224),d+=String.fromCharCode(x>>6&63|128),d+=String.fromCharCode(x&63|128))}return d},decode:function(l){for(var d="",v=0,x=0,k=0,X=0;v<l.length;)x=l.charCodeAt(v),x<128?(d+=String.fromCharCode(x),v++):x>191&&x<224?(k=l.charCodeAt(v+1),d+=String.fromCharCode((x&31)<<6|k&63),v+=2):(k=l.charCodeAt(v+1),X=l.charCodeAt(v+2),d+=String.fromCharCode((x&15)<<12|(k&63)<<6|X&63),v+=3);return d}},oe={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(l){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(l)))}catch(d){}return oe._encode(l)},_encode:function(l){var d="",v,x,k,X,W,he,we,Ke=0;for(l=fe.encode(l);Ke<l.length;)v=l.charCodeAt(Ke++),x=l.charCodeAt(Ke++),k=l.charCodeAt(Ke++),X=v>>2,W=(v&3)<<4|x>>4,he=(x&15)<<2|k>>6,we=k&63,isNaN(x)?he=we=64:isNaN(k)&&(we=64),d=d+oe._keyStr.charAt(X)+oe._keyStr.charAt(W)+oe._keyStr.charAt(he)+oe._keyStr.charAt(we);return d},decode:function(l){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(l)))}catch(d){}return oe._decode(l)},_decode:function(l){var d="",v,x,k,X,W,he,we,Ke=0;for(l=l.replace(/[^A-Za-z0-9+/=]/g,"");Ke<l.length;)X=oe._keyStr.indexOf(l.charAt(Ke++)),W=oe._keyStr.indexOf(l.charAt(Ke++)),he=oe._keyStr.indexOf(l.charAt(Ke++)),we=oe._keyStr.indexOf(l.charAt(Ke++)),v=X<<2|W>>4,x=(W&15)<<4|he>>2,k=(he&3)<<6|we,d=d+String.fromCharCode(v),he!==64&&(d=d+String.fromCharCode(x)),we!==64&&(d=d+String.fromCharCode(k));return d=fe.decode(d),d}},Re=Object.prototype.toString;function T(g){switch(Re.call(g)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return g===null?"null":g===void 0?"undefined":g!==g?"nan":g&&g.nodeType===1?"element":typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(g)?"buffer":(g=g.valueOf?g.valueOf():Object.prototype.valueOf.apply(g),e(g))}var pe={DISABLE:0,ERROR:1,WARN:2,INFO:3},Ce=pe.WARN,Ge=function(l){Object.prototype.hasOwnProperty.call(pe,l)&&(Ce=pe[l])},$e=function(){return Ce},Ue={error:function(l){Ce>=pe.ERROR&&Ut(l)},warn:function(l){Ce>=pe.WARN&&Ut(l)},info:function(l){Ce>=pe.INFO&&Ut(l)}},Ut=function(l){try{console.log("[Amplitude] "+l)}catch(d){}},wn=function(l){return!l||l.length===0},Tt=function(){try{if(window.sessionStorage)return!0}catch(l){}return!1},jt=function g(l){if(T(l)==="array")for(var d=0;d<l.length;d++)l[d]=g(l[d]);else if(T(l)==="object")for(var v in l)v in l&&(l[v]=g(l[v]));else l=kt(l);return l},kt=function(l){return T(l)==="string"&&l.length>C.MAX_STRING_LENGTH?l.substring(0,C.MAX_STRING_LENGTH):l},et=function(l,d,v){return T(l)!==v?(Ue.error("Invalid "+d+" input type. Expected "+v+" but received "+T(l)),!1):!0},pn=function(l){return et(l,"deviceId","string")?l.includes(".")?(Ue.error(`Device IDs may not contain '.' characters. Value will be ignored: "`.concat(l,'"')),!1):!0:!1},Ht=function(l){return et(l,"transport","string")?l!==C.TRANSPORT_HTTP&&l!==C.TRANSPORT_BEACON?(Ue.error("transport value must be one of '".concat(C.TRANSPORT_BEACON,"' or '").concat(C.TRANSPORT_HTTP,"'")),!1):l!==C.TRANSPORT_HTTP&&!navigator.sendBeacon?(Ue.error("browser does not support sendBeacon, so transport must be HTTP"),!1):!0:!1},ze=function(l){var d=T(l);if(d!=="object")return Ue.error("Error: invalid properties format. Expecting Javascript object, received "+d+", ignoring"),{};if(Object.keys(l).length>C.MAX_PROPERTY_KEYS)return Ue.error("Error: too many properties (more than 1000), ignoring"),{};var v={};for(var x in l)if(Object.prototype.hasOwnProperty.call(l,x)){var k=x,X=T(k);X!=="string"&&(k=String(k),Ue.warn("WARNING: Non-string property key, received type "+X+', coercing to string "'+k+'"'));var W=qt(k,l[x]);W!==null&&(v[k]=W)}return v},At=["nan","function","arguments","regexp","element"],qt=function g(l,d){var v=T(d);if(At.indexOf(v)!==-1)Ue.warn('WARNING: Property key "'+l+'" with invalid value type '+v+", ignoring"),d=null;else if(v==="undefined")d=null;else if(v==="error")d=String(d),Ue.warn('WARNING: Property key "'+l+'" with value type error, coercing to '+d);else if(v==="array"){for(var x=[],k=0;k<d.length;k++){var X=d[k],W=T(X);if(W==="array"){Ue.warn("WARNING: Cannot have "+W+" nested in an array property value, skipping");continue}else W==="object"?x.push(ze(X)):x.push(g(l,X))}d=x}else v==="object"&&(d=ze(d));return d},Lt=function(l){var d=T(l);if(d!=="object")return Ue.error("Error: invalid groups format. Expecting Javascript object, received "+d+", ignoring"),{};var v={};for(var x in l)if(Object.prototype.hasOwnProperty.call(l,x)){var k=x,X=T(k);X!=="string"&&(k=String(k),Ue.warn("WARNING: Non-string groupType, received type "+X+', coercing to string "'+k+'"'));var W=Gt(k,l[x]);W!==null&&(v[k]=W)}return v},Gt=function(l,d){var v=T(d);if(v==="string")return d;if(v==="date"||v==="number"||v==="boolean")return d=String(d),Ue.warn("WARNING: Non-string groupName, received type "+v+', coercing to string "'+d+'"'),d;if(v==="array"){for(var x=[],k=0;k<d.length;k++){var X=d[k],W=T(X);if(W==="array"||W==="object"){Ue.warn("WARNING: Skipping nested "+W+" in array groupName");continue}else W==="string"?x.push(X):(W==="date"||W==="number"||W==="boolean")&&(X=String(X),Ue.warn("WARNING: Non-string groupName, received type "+W+', coercing to string "'+X+'"'),x.push(X))}return x}Ue.warn("WARNING: Non-string groupName, received type "+v+". Please use strings or array of strings for groupName")},tt=function(l,d){l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var v=new RegExp("[\\?&]"+l+"=([^&#]*)"),x=v.exec(d);return x===null?void 0:decodeURIComponent(x[1].replace(/\+/g," "))},j={setLogLevel:Ge,getLogLevel:$e,logLevels:pe,log:Ue,isEmptyString:wn,getQueryParam:tt,sessionStorageEnabled:Tt,truncate:jt,validateGroups:Lt,validateInput:et,validateProperties:ze,validateDeviceId:pn,validateTransport:Ht},U=function(){return window.location},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",B=function(){for(var l="",d=0;d<22;++d)l+=A.charAt(Math.floor(Math.random()*64));return l},se=function(l){try{for(var d=document.cookie.split(";"),v=null,x=0;x<d.length;x++){for(var k=d[x];k.charAt(0)===" ";)k=k.substring(1,k.length);if(k.indexOf(l)===0){v=k.substring(l.length,k.length);break}}return v}catch(X){return null}},ye=function(l){try{var d=document.cookie.split(";").map(function(Ke){return Ke.trimStart()}),v=[],x=!0,k=!1,X=void 0;try{for(var W=d[Symbol.iterator](),he;!(x=(he=W.next()).done);x=!0){for(var we=he.value;we.charAt(0)===" ";)we=we.substring(1);we.indexOf(l)===0&&v.push(we.substring(l.length))}}catch(Ke){k=!0,X=Ke}finally{try{!x&&W.return!=null&&W.return()}finally{if(k)throw X}}return v}catch(Ke){return[]}},ie=function(l,d,v){var x=d!==null?v.expirationDays:-1;if(x){var k=new Date;k.setTime(k.getTime()+x*24*60*60*1e3),x=k}var X=l+"="+d;x&&(X+="; expires="+x.toUTCString()),X+="; path=/",v.domain&&(X+="; domain="+v.domain),v.secure&&(X+="; Secure"),v.sameSite&&(X+="; SameSite="+v.sameSite),document.cookie=X},De=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",d=l.split(".")[C.LAST_EVENT_TIME_INDEX],v;return d&&(v=parseInt(d,32)),v||(j.log.warn("unable to parse malformed cookie: ".concat(l)),0)},L=function(l){return s(l).sort(function(d,v){var x=De(d),k=De(v);return k-x})},ne=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=C.COOKIE_TEST_PREFIX+B(),v=!1;try{var x=String(new Date);ie(d,x,l),j.log.info("Testing if cookies available"),v=se(d+"=")===x}catch(k){j.log.warn('Error thrown when checking for cookies. Reason: "'.concat(k,'"'))}finally{j.log.info("Cleaning up cookies availability test"),ie(d,null,l)}return v},J={set:ie,get:se,getAll:ye,getLastEventTime:De,sortByEventTime:L,areCookiesEnabled:ne},_e=function(l){var d=document.createElement("a");return d.href=l,d.hostname||location.hostname},Le=function(l){for(var d=_e(l),v=d.split("."),x=[],k="_tldtest_"+B(),X=v.length-2;X>=0;--X)x.push(v.slice(X).join("."));for(var W=0;W<x.length;++W){var he=x[W],we={domain:"."+he};if(J.set(k,1,we),J.get(k))return J.set(k,null,we),he}return""},Te={expirationDays:void 0,domain:void 0},ft=function(){Te={expirationDays:void 0,domain:void 0}},Sn=function(l){if(arguments.length===0)return Te;l=l||{},Te.expirationDays=l.expirationDays,Te.secure=l.secure,Te.sameSite=l.sameSite;var d=j.isEmptyString(l.domain)?"."+Le(U().href):l.domain,v=Math.random();Te.domain=d,an("amplitude_test",v);var x=Be("amplitude_test");return(!x||x!==v)&&(d=null),rt("amplitude_test"),Te.domain=d,Te},Qt=function(l){var d="";return Te.domain&&(d=Te.domain.charAt(0)==="."?Te.domain.substring(1):Te.domain),l+d},Be=function(l){var d=Qt(l)+"=",v=J.get(d);try{if(v)return JSON.parse(oe.decode(v))}catch(x){return null}return null},an=function(l,d){try{return J.set(Qt(l),oe.encode(JSON.stringify(d)),Te),!0}catch(v){return!1}},Nn=function(l,d){try{return J.set(Qt(l),d,Te),!0}catch(v){return!1}},pr=function(l){var d=Qt(l)+"=";return J.get(d)},rt=function(l){try{return J.set(Qt(l),null,Te),!0}catch(d){return!1}},en={reset:ft,options:Sn,get:Be,set:an,remove:rt,setRaw:Nn,getRaw:pr},Ft;{var yt=function(){var l=new Date,d;try{return window.localStorage.setItem(l,l),d=window.localStorage.getItem(l)===String(l),window.localStorage.removeItem(l),d}catch(v){}return!1};if(yt())Ft=window.localStorage;else if(window.globalStorage)try{Ft=window.globalStorage[window.location.hostname]}catch(g){}else if(typeof document<"u"){var Xe=document.createElement("div"),Ye="localStorage";Xe.style.display="none",document.getElementsByTagName("head")[0].appendChild(Xe),Xe.addBehavior&&(Xe.addBehavior("#default#userdata"),Ft={length:0,setItem:function(l,d){Xe.load(Ye),Xe.getAttribute(l)||this.length++,Xe.setAttribute(l,d),Xe.save(Ye)},getItem:function(l){return Xe.load(Ye),Xe.getAttribute(l)},removeItem:function(l){Xe.load(Ye),Xe.getAttribute(l)&&this.length--,Xe.removeAttribute(l),Xe.save(Ye)},clear:function(){Xe.load(Ye);for(var l=0,d;d=Xe.XMLDocument.documentElement.attributes[l++];)Xe.removeAttribute(d.name);Xe.save(Ye),this.length=0},key:function(l){return Xe.load(Ye),Xe.XMLDocument.documentElement.attributes[l]}},Xe.load(Ye),Ft.length=Xe.XMLDocument.documentElement.attributes.length)}Ft||(Ft={length:0,setItem:function(l,d){},getItem:function(l){},removeItem:function(l){},clear:function(){},key:function(l){}})}var dt=Ft,En=function(){this.storage=null};En.prototype.getStorage=function(){if(this.storage!==null)return this.storage;if(J.areCookiesEnabled())this.storage=en;else{var g="amp_cookiestore_";this.storage={_options:{expirationDays:void 0,domain:void 0,secure:!1},reset:function(){this._options={expirationDays:void 0,domain:void 0,secure:!1}},options:function(d){return arguments.length===0?this._options:(d=d||{},this._options.expirationDays=d.expirationDays||this._options.expirationDays,this._options.domain=d.domain||this._options.domain||window&&window.location&&window.location.hostname,this._options.secure=d.secure||!1)},get:function(d){try{return JSON.parse(dt.getItem(g+d))}catch(v){}return null},set:function(d,v){try{return dt.setItem(g+d,JSON.stringify(v)),!0}catch(x){}return!1},remove:function(d){try{dt.removeItem(g+d)}catch(v){return!1}}}}return this.storage};var hn,$a=(hn={},i(hn,C.STORAGE_COOKIES,!0),i(hn,C.STORAGE_NONE,!0),i(hn,C.STORAGE_LOCAL,!0),i(hn,C.STORAGE_SESSION,!0),hn),io=function(){function g(l){var d=l.storageKey,v=l.disableCookies,x=l.domain,k=l.secure,X=l.sameSite,W=l.expirationDays,he=l.storage;t(this,g),this.storageKey=d,this.domain=x,this.secure=k,this.sameSite=X,this.expirationDays=W,this.cookieDomain="";var we=Le(U().href);if(this.cookieDomain=x||(we?"."+we:null),$a[he])this.storage=he;else{var Ke=v||!J.areCookiesEnabled({domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:this.expirationDays});Ke?this.storage=C.STORAGE_LOCAL:this.storage=C.STORAGE_COOKIES}}return r(g,[{key:"getCookieStorageKey",value:function(){if(!this.domain)return this.storageKey;var d=this.domain.charAt(0)==="."?this.domain.substring(1):this.domain;return"".concat(this.storageKey).concat(d?"_".concat(d):"")}},{key:"save",value:function(d){var v=d.deviceId,x=d.userId,k=d.optOut,X=d.sessionId,W=d.lastEventTime,he=d.eventId,we=d.identifyId,Ke=d.sequenceNumber;if(this.storage!==C.STORAGE_NONE){var Z=[v,oe.encode(x||""),k?"1":"",X?X.toString(32):"0",W?W.toString(32):"0",he?he.toString(32):"0",we?we.toString(32):"0",Ke?Ke.toString(32):"0"].join(".");switch(this.storage){case C.STORAGE_SESSION:window.sessionStorage&&window.sessionStorage.setItem(this.storageKey,Z);break;case C.STORAGE_LOCAL:dt.setItem(this.storageKey,Z);break;case C.STORAGE_COOKIES:this.saveCookie(Z);break}}}},{key:"saveCookie",value:function(d){J.set(this.getCookieStorageKey(),d,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:this.expirationDays})}},{key:"load",value:function(){var d=this,v;if(this.storage===C.STORAGE_COOKIES){var x=this.getCookieStorageKey()+"=",k=J.getAll(x);if(k.length===0||k.length===1)v=k[0];else{var X=J.sortByEventTime(k)[0];k.forEach(function(){return J.set(d.getCookieStorageKey(),null,{})}),this.saveCookie(X),v=J.get(x)}}if(v||(v=dt.getItem(this.storageKey)),!v)try{v=window.sessionStorage&&window.sessionStorage.getItem(this.storageKey)}catch(we){j.log.info('window.sessionStorage unavailable. Reason: "'.concat(we,'"'))}if(!v)return null;var W=v.split("."),he=null;if(W[C.USER_ID_INDEX])try{he=oe.decode(W[C.USER_ID_INDEX])}catch(we){he=null}return{deviceId:W[C.DEVICE_ID_INDEX],userId:he,optOut:W[C.OPT_OUT_INDEX]==="1",sessionId:parseInt(W[C.SESSION_ID_INDEX],32),lastEventTime:parseInt(W[C.LAST_EVENT_TIME_INDEX],32),eventId:parseInt(W[C.EVENT_ID_INDEX],32),identifyId:parseInt(W[C.IDENTIFY_ID_INDEX],32),sequenceNumber:parseInt(W[C.SEQUENCE_NUMBER_INDEX],32)}}},{key:"clear",value:function(){var d;if(this.storage===C.STORAGE_COOKIES&&(d=J.get(this.getCookieStorageKey()+"="),J.set(this.getCookieStorageKey(),null,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:0})),d||(d=dt.getItem(this.storageKey),dt.clear()),!d)try{d=window.sessionStorage&&window.sessionStorage.getItem(this.storageKey),window.sessionStorage.clear()}catch(v){j.log.info('window.sessionStorage unavailable. Reason: "'.concat(v,'"'))}return!!d}}]),g}(),Ya=function(l,d){var v=l?"?"+l.split(".").slice(-1)[0].replace(/\|/g,"&"):"",x=function(te,re,de,Vt){return j.getQueryParam(te,re)||j.getQueryParam(de,Vt)},k=x(C.UTM_SOURCE,d,"utmcsr",v),X=x(C.UTM_MEDIUM,d,"utmcmd",v),W=x(C.UTM_CAMPAIGN,d,"utmccn",v),he=x(C.UTM_TERM,d,"utmctr",v),we=x(C.UTM_CONTENT,d,"utmcct",v),Ke={},Z=function(te,re){j.isEmptyString(re)||(Ke[te]=re)};return Z(C.UTM_SOURCE,k),Z(C.UTM_MEDIUM,X),Z(C.UTM_CAMPAIGN,W),Z(C.UTM_TERM,he),Z(C.UTM_CONTENT,we),Ke},nl="$add",Wa="$append",ls="$clearAll",Ja="$prepend",Qa="$set",rl="$setOnce",il="$unset",Xa="$preInsert",Za="$postInsert",ec="$remove",Rt=function(){this.userPropertiesOperations={},this.properties=[]};Rt.prototype.add=function(g,l){return T(l)==="number"||T(l)==="string"?this._addOperation(nl,g,l):j.log.error("Unsupported type for value: "+T(l)+", expecting number or string"),this},Rt.prototype.append=function(g,l){return this._addOperation(Wa,g,l),this},Rt.prototype.clearAll=function(){return Object.keys(this.userPropertiesOperations).length>0?(Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,ls)||j.log.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"),this):(this.userPropertiesOperations[ls]="-",this)},Rt.prototype.prepend=function(g,l){return this._addOperation(Ja,g,l),this},Rt.prototype.set=function(g,l){return this._addOperation(Qa,g,l),this},Rt.prototype.setOnce=function(g,l){return this._addOperation(rl,g,l),this},Rt.prototype.unset=function(g){return this._addOperation(il,g,"-"),this},Rt.prototype.preInsert=function(g,l){return this._addOperation(Xa,g,l),this},Rt.prototype.postInsert=function(g,l){return this._addOperation(Za,g,l),this},Rt.prototype.remove=function(g,l){return this._addOperation(ec,g,l),this},Rt.prototype._addOperation=function(g,l,d){if(Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,ls)){j.log.error("This identify already contains a $clearAll operation, skipping operation "+g);return}if(this.properties.indexOf(l)!==-1){j.log.error('User property "'+l+'" already used in this identify, skipping operation '+g);return}Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,g)||(this.userPropertiesOperations[g]={}),this.userPropertiesOperations[g][l]=d,this.properties.push(l)};var jn=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function oo(g,l){return l={exports:{}},g(l,l.exports),l.exports}var Ci=oo(function(g){(function(l){function d(V,Ae){var Q=(V&65535)+(Ae&65535),He=(V>>16)+(Ae>>16)+(Q>>16);return He<<16|Q&65535}function v(V,Ae){return V<<Ae|V>>>32-Ae}function x(V,Ae,Q,He,ct,$t){return d(v(d(d(Ae,V),d(He,$t)),ct),Q)}function k(V,Ae,Q,He,ct,$t,bt){return x(Ae&Q|~Ae&He,V,Ae,ct,$t,bt)}function X(V,Ae,Q,He,ct,$t,bt){return x(Ae&He|Q&~He,V,Ae,ct,$t,bt)}function W(V,Ae,Q,He,ct,$t,bt){return x(Ae^Q^He,V,Ae,ct,$t,bt)}function he(V,Ae,Q,He,ct,$t,bt){return x(Q^(Ae|~He),V,Ae,ct,$t,bt)}function we(V,Ae){V[Ae>>5]|=128<<Ae%32,V[(Ae+64>>>9<<4)+14]=Ae;var Q,He,ct,$t,bt,ce=1732584193,le=-271733879,Y=-1732584194,ee=271733878;for(Q=0;Q<V.length;Q+=16)He=ce,ct=le,$t=Y,bt=ee,ce=k(ce,le,Y,ee,V[Q],7,-680876936),ee=k(ee,ce,le,Y,V[Q+1],12,-389564586),Y=k(Y,ee,ce,le,V[Q+2],17,606105819),le=k(le,Y,ee,ce,V[Q+3],22,-1044525330),ce=k(ce,le,Y,ee,V[Q+4],7,-176418897),ee=k(ee,ce,le,Y,V[Q+5],12,1200080426),Y=k(Y,ee,ce,le,V[Q+6],17,-1473231341),le=k(le,Y,ee,ce,V[Q+7],22,-45705983),ce=k(ce,le,Y,ee,V[Q+8],7,1770035416),ee=k(ee,ce,le,Y,V[Q+9],12,-1958414417),Y=k(Y,ee,ce,le,V[Q+10],17,-42063),le=k(le,Y,ee,ce,V[Q+11],22,-1990404162),ce=k(ce,le,Y,ee,V[Q+12],7,1804603682),ee=k(ee,ce,le,Y,V[Q+13],12,-40341101),Y=k(Y,ee,ce,le,V[Q+14],17,-1502002290),le=k(le,Y,ee,ce,V[Q+15],22,1236535329),ce=X(ce,le,Y,ee,V[Q+1],5,-165796510),ee=X(ee,ce,le,Y,V[Q+6],9,-1069501632),Y=X(Y,ee,ce,le,V[Q+11],14,643717713),le=X(le,Y,ee,ce,V[Q],20,-373897302),ce=X(ce,le,Y,ee,V[Q+5],5,-701558691),ee=X(ee,ce,le,Y,V[Q+10],9,38016083),Y=X(Y,ee,ce,le,V[Q+15],14,-660478335),le=X(le,Y,ee,ce,V[Q+4],20,-405537848),ce=X(ce,le,Y,ee,V[Q+9],5,568446438),ee=X(ee,ce,le,Y,V[Q+14],9,-1019803690),Y=X(Y,ee,ce,le,V[Q+3],14,-187363961),le=X(le,Y,ee,ce,V[Q+8],20,1163531501),ce=X(ce,le,Y,ee,V[Q+13],5,-1444681467),ee=X(ee,ce,le,Y,V[Q+2],9,-51403784),Y=X(Y,ee,ce,le,V[Q+7],14,1735328473),le=X(le,Y,ee,ce,V[Q+12],20,-1926607734),ce=W(ce,le,Y,ee,V[Q+5],4,-378558),ee=W(ee,ce,le,Y,V[Q+8],11,-2022574463),Y=W(Y,ee,ce,le,V[Q+11],16,1839030562),le=W(le,Y,ee,ce,V[Q+14],23,-35309556),ce=W(ce,le,Y,ee,V[Q+1],4,-1530992060),ee=W(ee,ce,le,Y,V[Q+4],11,1272893353),Y=W(Y,ee,ce,le,V[Q+7],16,-155497632),le=W(le,Y,ee,ce,V[Q+10],23,-1094730640),ce=W(ce,le,Y,ee,V[Q+13],4,681279174),ee=W(ee,ce,le,Y,V[Q],11,-358537222),Y=W(Y,ee,ce,le,V[Q+3],16,-722521979),le=W(le,Y,ee,ce,V[Q+6],23,76029189),ce=W(ce,le,Y,ee,V[Q+9],4,-640364487),ee=W(ee,ce,le,Y,V[Q+12],11,-421815835),Y=W(Y,ee,ce,le,V[Q+15],16,530742520),le=W(le,Y,ee,ce,V[Q+2],23,-995338651),ce=he(ce,le,Y,ee,V[Q],6,-198630844),ee=he(ee,ce,le,Y,V[Q+7],10,1126891415),Y=he(Y,ee,ce,le,V[Q+14],15,-1416354905),le=he(le,Y,ee,ce,V[Q+5],21,-57434055),ce=he(ce,le,Y,ee,V[Q+12],6,1700485571),ee=he(ee,ce,le,Y,V[Q+3],10,-1894986606),Y=he(Y,ee,ce,le,V[Q+10],15,-1051523),le=he(le,Y,ee,ce,V[Q+1],21,-2054922799),ce=he(ce,le,Y,ee,V[Q+8],6,1873313359),ee=he(ee,ce,le,Y,V[Q+15],10,-30611744),Y=he(Y,ee,ce,le,V[Q+6],15,-1560198380),le=he(le,Y,ee,ce,V[Q+13],21,1309151649),ce=he(ce,le,Y,ee,V[Q+4],6,-145523070),ee=he(ee,ce,le,Y,V[Q+11],10,-1120210379),Y=he(Y,ee,ce,le,V[Q+2],15,718787259),le=he(le,Y,ee,ce,V[Q+9],21,-343485551),ce=d(ce,He),le=d(le,ct),Y=d(Y,$t),ee=d(ee,bt);return[ce,le,Y,ee]}function Ke(V){var Ae,Q="",He=V.length*32;for(Ae=0;Ae<He;Ae+=8)Q+=String.fromCharCode(V[Ae>>5]>>>Ae%32&255);return Q}function Z(V){var Ae,Q=[];for(Q[(V.length>>2)-1]=void 0,Ae=0;Ae<Q.length;Ae+=1)Q[Ae]=0;var He=V.length*8;for(Ae=0;Ae<He;Ae+=8)Q[Ae>>5]|=(V.charCodeAt(Ae/8)&255)<<Ae%32;return Q}function ue(V){return Ke(we(Z(V),V.length*8))}function te(V,Ae){var Q,He=Z(V),ct=[],$t=[],bt;for(ct[15]=$t[15]=void 0,He.length>16&&(He=we(He,V.length*8)),Q=0;Q<16;Q+=1)ct[Q]=He[Q]^909522486,$t[Q]=He[Q]^1549556828;return bt=we(ct.concat(Z(Ae)),512+Ae.length*8),Ke(we($t.concat(bt),512+128))}function re(V){var Ae="0123456789abcdef",Q="",He,ct;for(ct=0;ct<V.length;ct+=1)He=V.charCodeAt(ct),Q+=Ae.charAt(He>>>4&15)+Ae.charAt(He&15);return Q}function de(V){return unescape(encodeURIComponent(V))}function Vt(V){return ue(de(V))}function Zn(V){return re(Vt(V))}function nt(V,Ae){return te(de(V),de(Ae))}function Je(V,Ae){return re(nt(V,Ae))}function nn(V,Ae,Q){return Ae?Q?nt(Ae,V):Je(Ae,V):Q?Vt(V):Zn(V)}g.exports?g.exports=nn:l.md5=nn})(jn)}),Un=function(g){return encodeURIComponent(g).replace(/[!'()*]/g,function(l){return"%"+l.charCodeAt(0).toString(16).toUpperCase()})};var fs=Object.getOwnPropertySymbols,so=Object.prototype.hasOwnProperty,Ti=Object.prototype.propertyIsEnumerable;function Qn(g){if(g==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}function ds(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de",Object.getOwnPropertyNames(g)[0]==="5")return!1;for(var l={},d=0;d<10;d++)l["_"+String.fromCharCode(d)]=d;var v=Object.getOwnPropertyNames(l).map(function(k){return l[k]});if(v.join("")!=="0123456789")return!1;var x={};return"abcdefghijklmnopqrst".split("").forEach(function(k){x[k]=k}),Object.keys(Object.assign({},x)).join("")==="abcdefghijklmnopqrst"}catch(k){return!1}}var ti=ds()?Object.assign:function(g,l){for(var d,v=Qn(g),x,k=1;k<arguments.length;k++){d=Object(arguments[k]);for(var X in d)so.call(d,X)&&(v[X]=d[X]);if(fs){x=fs(d);for(var W=0;W<x.length;W++)Ti.call(d,x[W])&&(v[x[W]]=d[x[W]])}}return v},ao="%[a-f0-9]{2}",ps=new RegExp(ao,"gi"),it=new RegExp("("+ao+")+","gi");function hs(g,l){try{return decodeURIComponent(g.join(""))}catch(x){}if(g.length===1)return g;l=l||1;var d=g.slice(0,l),v=g.slice(l);return Array.prototype.concat.call([],hs(d),hs(v))}function tc(g){try{return decodeURIComponent(g)}catch(v){for(var l=g.match(ps),d=1;d<l.length;d++)g=hs(l,d).join(""),l=g.match(ps);return g}}function Xn(g){for(var l={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},d=it.exec(g);d;){try{l[d[0]]=decodeURIComponent(d[0])}catch(W){var v=tc(d[0]);v!==d[0]&&(l[d[0]]=v)}d=it.exec(g)}l["%C2"]="\uFFFD";for(var x=Object.keys(l),k=0;k<x.length;k++){var X=x[k];g=g.replace(new RegExp(X,"g"),l[X])}return g}var gs=function(g){if(typeof g!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof g+"`");try{return g=g.replace(/\+/g," "),decodeURIComponent(g)}catch(l){return Xn(g)}};function co(g){switch(g.arrayFormat){case"index":return function(l,d,v){return d===null?[cn(l,g),"[",v,"]"].join(""):[cn(l,g),"[",cn(v,g),"]=",cn(d,g)].join("")};case"bracket":return function(l,d){return d===null?cn(l,g):[cn(l,g),"[]=",cn(d,g)].join("")};default:return function(l,d){return d===null?cn(l,g):[cn(l,g),"=",cn(d,g)].join("")}}}function nc(g){var l;switch(g.arrayFormat){case"index":return function(d,v,x){if(l=/\[(\d*)\]$/.exec(d),d=d.replace(/\[\d*\]$/,""),!l){x[d]=v;return}x[d]===void 0&&(x[d]={}),x[d][l[1]]=v};case"bracket":return function(d,v,x){if(l=/(\[\])$/.exec(d),d=d.replace(/\[\]$/,""),l){if(x[d]===void 0){x[d]=[v];return}}else{x[d]=v;return}x[d]=[].concat(x[d],v)};default:return function(d,v,x){if(x[d]===void 0){x[d]=v;return}x[d]=[].concat(x[d],v)}}}function cn(g,l){return l.encode?l.strict?Un(g):encodeURIComponent(g):g}function ni(g){return Array.isArray(g)?g.sort():typeof g=="object"?ni(Object.keys(g)).sort(function(l,d){return Number(l)-Number(d)}).map(function(l){return g[l]}):g}function Ar(g){var l=g.indexOf("?");return l===-1?"":g.slice(l+1)}function ms(g,l){l=ti({arrayFormat:"none"},l);var d=nc(l),v=Object.create(null);return typeof g!="string"||(g=g.trim().replace(/^[?#&]/,""),!g)?v:(g.split("&").forEach(function(x){var k=x.replace(/\+/g," ").split("="),X=k.shift(),W=k.length>0?k.join("="):void 0;W=W===void 0?null:gs(W),d(gs(X),W,v)}),Object.keys(v).sort().reduce(function(x,k){var X=v[k];return Boolean(X)&&typeof X=="object"&&!Array.isArray(X)?x[k]=ni(X):x[k]=X,x},Object.create(null)))}var rc=Ar,ic=ms,oc=function(g,l){var d={encode:!0,strict:!0,arrayFormat:"none"};l=ti(d,l),l.sort===!1&&(l.sort=function(){});var v=co(l);return g?Object.keys(g).sort(l.sort).map(function(x){var k=g[x];if(k===void 0)return"";if(k===null)return cn(x,l);if(Array.isArray(k)){var X=[];return k.slice().forEach(function(W){W!==void 0&&X.push(v(x,W,X.length))}),X.join("&")}return cn(x,l)+"="+cn(k,l)}).filter(function(x){return x.length>0}).join("&"):""},sc=function(g,l){return{url:g.split("?")[0]||"",query:ms(Ar(g),l)}},ys={extract:rc,parse:ic,stringify:oc,parseUrl:sc},tn=function(l,d,v){this.url=l,this.data=d||{},this.headers=v};function ac(g,l){for(var d in l)g.setRequestHeader(d,l[d])}tn.prototype.send=function(g){var l=!!window.XDomainRequest;if(l){var d=new window.XDomainRequest;d.open("POST",this.url,!0),d.onload=function(){g(200,d.responseText)},d.onerror=function(){d.responseText==="Request Entity Too Large"?g(413,d.responseText):g(500,d.responseText)},d.ontimeout=function(){},d.onprogress=function(){},d.send(ys.stringify(this.data))}else{var v=new XMLHttpRequest;v.open("POST",this.url,!0),v.onreadystatechange=function(){v.readyState===4&&g(v.status,v.responseText)},ac(v,this.headers),v.send(ys.stringify(this.data))}};var qn=function(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null};qn.prototype.setProductId=function(l){return T(l)!=="string"?j.log.error("Unsupported type for productId: "+T(l)+", expecting string"):j.isEmptyString(l)?j.log.error("Invalid empty productId"):this._productId=l,this},qn.prototype.setQuantity=function(l){return T(l)!=="number"?j.log.error("Unsupported type for quantity: "+T(l)+", expecting number"):this._quantity=parseInt(l),this},qn.prototype.setPrice=function(l){return T(l)!=="number"?j.log.error("Unsupported type for price: "+T(l)+", expecting number"):this._price=l,this},qn.prototype.setRevenueType=function(l){return T(l)!=="string"?j.log.error("Unsupported type for revenueType: "+T(l)+", expecting string"):this._revenueType=l,this},qn.prototype.setEventProperties=function(l){return T(l)!=="object"?j.log.error("Unsupported type for eventProperties: "+T(l)+", expecting object"):this._properties=j.validateProperties(l),this},qn.prototype._isValidRevenue=function(){return T(this._price)!=="number"?(j.log.error("Invalid revenue, need to set price field"),!1):!0},qn.prototype._toJSONObject=function(){var l=T(this._properties)==="object"?this._properties:{};return this._productId!==null&&(l[C.REVENUE_PRODUCT_ID]=this._productId),this._quantity!==null&&(l[C.REVENUE_QUANTITY]=this._quantity),this._price!==null&&(l[C.REVENUE_PRICE]=this._price),this._revenueType!==null&&(l[C.REVENUE_REVENUE_TYPE]=this._revenueType),l};var cc=oo(function(g,l){(function(d,v){var x="0.7.21",k="",X="?",W="function",he="object",we="string",Ke="major",Z="model",ue="name",te="type",re="vendor",de="version",Vt="architecture",Zn="console",nt="mobile",Je="tablet",nn="smarttv",V="wearable",Ae="embedded",Q={extend:function(Y,ee){var We={};for(var It in Y)ee[It]&&ee[It].length%2===0?We[It]=ee[It].concat(Y[It]):We[It]=Y[It];return We},has:function(Y,ee){return typeof Y=="string"?ee.toLowerCase().indexOf(Y.toLowerCase())!==-1:!1},lowerize:function(Y){return Y.toLowerCase()},major:function(Y){return typeof Y===we?Y.replace(/[^\d\.]/g,"").split(".")[0]:v},trim:function(Y){return Y.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},He={rgx:function(Y,ee){for(var We=0,It,Ot,Tn,pt,hr,Gn;We<ee.length&&!hr;){var Ai=ee[We],po=ee[We+1];for(It=Ot=0;It<Ai.length&&!hr;)if(hr=Ai[It++].exec(Y),hr)for(Tn=0;Tn<po.length;Tn++)Gn=hr[++Ot],pt=po[Tn],typeof pt===he&&pt.length>0?pt.length==2?typeof pt[1]==W?this[pt[0]]=pt[1].call(this,Gn):this[pt[0]]=pt[1]:pt.length==3?typeof pt[1]===W&&!(pt[1].exec&&pt[1].test)?this[pt[0]]=Gn?pt[1].call(this,Gn,pt[2]):v:this[pt[0]]=Gn?Gn.replace(pt[1],pt[2]):v:pt.length==4&&(this[pt[0]]=Gn?pt[3].call(this,Gn.replace(pt[1],pt[2])):v):this[pt]=Gn||v;We+=2}},str:function(Y,ee){for(var We in ee)if(typeof ee[We]===he&&ee[We].length>0){for(var It=0;It<ee[We].length;It++)if(Q.has(ee[We][It],Y))return We===X?v:We}else if(Q.has(ee[We],Y))return We===X?v:We;return Y}},ct={browser:{oldsafari:{version:{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},$t={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[ue,de],[/(opios)[\/\s]+([\w\.]+)/i],[[ue,"Opera Mini"],de],[/\s(opr)\/([\w\.]+)/i],[[ue,"Opera"],de],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[ue,de],[/(konqueror)\/([\w\.]+)/i],[[ue,"Konqueror"],de],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[ue,"IE"],de],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[ue,"Edge"],de],[/(yabrowser)\/([\w\.]+)/i],[[ue,"Yandex"],de],[/(Avast)\/([\w\.]+)/i],[[ue,"Avast Secure Browser"],de],[/(AVG)\/([\w\.]+)/i],[[ue,"AVG Secure Browser"],de],[/(puffin)\/([\w\.]+)/i],[[ue,"Puffin"],de],[/(focus)\/([\w\.]+)/i],[[ue,"Firefox Focus"],de],[/(opt)\/([\w\.]+)/i],[[ue,"Opera Touch"],de],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[ue,"UCBrowser"],de],[/(comodo_dragon)\/([\w\.]+)/i],[[ue,/_/g," "],de],[/(windowswechat qbcore)\/([\w\.]+)/i],[[ue,"WeChat(Win) Desktop"],de],[/(micromessenger)\/([\w\.]+)/i],[[ue,"WeChat"],de],[/(brave)\/([\w\.]+)/i],[[ue,"Brave"],de],[/(qqbrowserlite)\/([\w\.]+)/i],[ue,de],[/(QQ)\/([\d\.]+)/i],[ue,de],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[ue,de],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[ue,de],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[ue,de],[/(MetaSr)[\/\s]?([\w\.]+)/i],[ue],[/(LBBROWSER)/i],[ue],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[de,[ue,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[de,[ue,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[ue,de],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[de,[ue,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[ue,/(.+)/,"$1 WebView"],de],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[ue,/(.+(?:g|us))(.+)/,"$1 $2"],de],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[ue,"Chrome Mobile"],de],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[de,[ue,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[ue,"Sailfish Browser"],de],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[ue,de],[/(dolfin)\/([\w\.]+)/i],[[ue,"Dolphin"],de],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[ue,"360 Browser"]],[/(coast)\/([\w\.]+)/i],[[ue,"Opera Coast"],de],[/fxios\/([\w\.-]+)/i],[de,[ue,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[de,[ue,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[de,ue],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[ue,"GSA"],de],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[ue,[de,He.str,ct.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[ue,de],[/(navigator|netscape)\/([\w\.-]+)/i],[[ue,"Netscape"],de],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[ue,de]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[Vt,"amd64"]],[/(ia32(?=;))/i],[[Vt,Q.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[Vt,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[Vt,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[Vt,/ower/,"",Q.lowerize]],[/(sun4\w)[;\)]/i],[[Vt,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[Vt,Q.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[Z,re,[te,Je]],[/applecoremedia\/[\w\.]+ \((ipad)/],[Z,[re,"Apple"],[te,Je]],[/(apple\s{0,1}tv)/i],[[Z,"Apple TV"],[re,"Apple"],[te,nn]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[re,Z,[te,Je]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[Z,[re,"Amazon"],[te,Je]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[Z,He.str,ct.device.amazon.model],[re,"Amazon"],[te,nt]],[/android.+aft([bms])\sbuild/i],[Z,[re,"Amazon"],[te,nn]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[Z,re,[te,nt]],[/\((ip[honed|\s\w*]+);/i],[Z,[re,"Apple"],[te,nt]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[re,Z,[te,nt]],[/\(bb10;\s(\w+)/i],[Z,[re,"BlackBerry"],[te,nt]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[Z,[re,"Asus"],[te,Je]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[re,"Sony"],[Z,"Xperia Tablet"],[te,Je]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[Z,[re,"Sony"],[te,nt]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[re,Z,[te,Zn]],[/android.+;\s(shield)\sbuild/i],[Z,[re,"Nvidia"],[te,Zn]],[/(playstation\s[34portablevi]+)/i],[Z,[re,"Sony"],[te,Zn]],[/(sprint\s(\w+))/i],[[re,He.str,ct.device.sprint.vendor],[Z,He.str,ct.device.sprint.model],[te,nt]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[re,[Z,/_/g," "],[te,nt]],[/(nexus\s9)/i],[Z,[re,"HTC"],[te,Je]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[Z,[re,"Huawei"],[te,nt]],[/android.+(bah2?-a?[lw]\d{2})/i],[Z,[re,"Huawei"],[te,Je]],[/(microsoft);\s(lumia[\s\w]+)/i],[re,Z,[te,nt]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[Z,[re,"Microsoft"],[te,Zn]],[/(kin\.[onetw]{3})/i],[[Z,/\./g," "],[re,"Microsoft"],[te,nt]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[Z,[re,"Motorola"],[te,nt]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[Z,[re,"Motorola"],[te,Je]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[re,Q.trim],[Z,Q.trim],[te,nn]],[/hbbtv.+maple;(\d+)/i],[[Z,/^/,"SmartTV"],[re,"Samsung"],[te,nn]],[/\(dtv[\);].+(aquos)/i],[Z,[re,"Sharp"],[te,nn]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[re,"Samsung"],Z,[te,Je]],[/smart-tv.+(samsung)/i],[re,[te,nn],Z],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[re,"Samsung"],Z,[te,nt]],[/sie-(\w*)/i],[Z,[re,"Siemens"],[te,nt]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[re,"Nokia"],Z,[te,nt]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[Z,[re,"Acer"],[te,Je]],[/android.+([vl]k\-?\d{3})\s+build/i],[Z,[re,"LG"],[te,Je]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[re,"LG"],Z,[te,Je]],[/(lg) netcast\.tv/i],[re,Z,[te,nn]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[Z,[re,"LG"],[te,nt]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[re,Z,[te,Je]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[Z,[re,"Lenovo"],[te,Je]],[/(lenovo)[_\s-]?([\w-]+)/i],[re,Z,[te,nt]],[/linux;.+((jolla));/i],[re,Z,[te,nt]],[/((pebble))app\/[\d\.]+\s/i],[re,Z,[te,V]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[re,Z,[te,nt]],[/crkey/i],[[Z,"Chromecast"],[re,"Google"],[te,nn]],[/android.+;\s(glass)\s\d/i],[Z,[re,"Google"],[te,V]],[/android.+;\s(pixel c)[\s)]/i],[Z,[re,"Google"],[te,Je]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[Z,[re,"Google"],[te,nt]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[Z,/_/g," "],[re,"Xiaomi"],[te,nt]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[Z,/_/g," "],[re,"Xiaomi"],[te,Je]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[Z,[re,"Meizu"],[te,nt]],[/(mz)-([\w-]{2,})/i],[[re,"Meizu"],Z,[te,nt]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[Z,[re,"OnePlus"],[te,nt]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[Z,[re,"RCA"],[te,Je]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[Z,[re,"Dell"],[te,Je]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[Z,[re,"Verizon"],[te,Je]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[re,"Barnes & Noble"],Z,[te,Je]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[Z,[re,"NuVision"],[te,Je]],[/android.+;\s(k88)\sbuild/i],[Z,[re,"ZTE"],[te,Je]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[Z,[re,"Swiss"],[te,nt]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[Z,[re,"Swiss"],[te,Je]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[Z,[re,"Zeki"],[te,Je]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[re,"Dragon Touch"],Z,[te,Je]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[Z,[re,"Insignia"],[te,Je]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[Z,[re,"NextBook"],[te,Je]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[re,"Voice"],Z,[te,nt]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[re,"LvTel"],Z,[te,nt]],[/android.+;\s(PH-1)\s/i],[Z,[re,"Essential"],[te,nt]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[Z,[re,"Envizen"],[te,Je]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[re,Z,[te,Je]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[Z,[re,"MachSpeed"],[te,Je]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[re,Z,[te,Je]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[Z,[re,"Rotor"],[te,Je]],[/android.+(KS(.+))\s+build/i],[Z,[re,"Amazon"],[te,Je]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[re,Z,[te,Je]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[te,Q.lowerize],re,Z],[/[\s\/\(](smart-?tv)[;\)]/i],[[te,nn]],[/(android[\w\.\s\-]{0,9});.+build/i],[Z,[re,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[de,[ue,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[de,[ue,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[ue,de],[/rv\:([\w\.]{1,9}).+(gecko)/i],[de,ue]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[ue,de],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[ue,He.str,ct.os.windows.name],[de,He.str,ct.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[ue,"Windows"],[de,He.str,ct.os.windows.version]],[/\((bb)(10);/i],[[ue,"BlackBerry"],de],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[ue,de],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[ue,"Symbian"],de],[/\((series40);/i],[ue],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[ue,"Firefox OS"],de],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[[ue,"Linux"],de],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[ue,"Chromium OS"],de],[/(sunos)\s?([\w\.\d]*)/i],[[ue,"Solaris"],de],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[[ue,"Linux"],de],[/(iphone)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[ue,"iPhone"],[de,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[ue,"iPad"],[de,/_/g,"."]],[/(haiku)\s(\w+)/i],[ue,de],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[de,/_/g,"."],[ue,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[ue,"Mac"],[de,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[ue,de]]},bt=function(Y,ee){if(typeof Y=="object"&&(ee=Y,Y=v),!(this instanceof bt))return new bt(Y,ee).getResult();var We=Y||(d&&d.navigator&&d.navigator.userAgent?d.navigator.userAgent:k),It=ee?Q.extend($t,ee):$t;return this.getBrowser=function(){var Ot={name:v,version:v};return He.rgx.call(Ot,We,It.browser),Ot.major=Q.major(Ot.version),Ot},this.getCPU=function(){var Ot={architecture:v};return He.rgx.call(Ot,We,It.cpu),Ot},this.getDevice=function(){var Ot={vendor:v,model:v,type:v};return He.rgx.call(Ot,We,It.device),Ot},this.getEngine=function(){var Ot={name:v,version:v};return He.rgx.call(Ot,We,It.engine),Ot},this.getOS=function(){var Ot={name:v,version:v};return He.rgx.call(Ot,We,It.os),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return We},this.setUA=function(Ot){return We=Ot,this},this};bt.VERSION=x,bt.BROWSER={NAME:ue,MAJOR:Ke,VERSION:de},bt.CPU={ARCHITECTURE:Vt},bt.DEVICE={MODEL:Z,VENDOR:re,TYPE:te,CONSOLE:Zn,MOBILE:nt,SMARTTV:nn,TABLET:Je,WEARABLE:V,EMBEDDED:Ae},bt.ENGINE={NAME:ue,VERSION:de},bt.OS={NAME:ue,VERSION:de},g.exports&&(l=g.exports=bt),l.UAParser=bt;var ce=d&&(d.jQuery||d.Zepto);if(ce&&!ce.ua){var le=new bt;ce.ua=le.getResult(),ce.ua.get=function(){return le.getUA()},ce.ua.set=function(Y){le.setUA(Y);var ee=le.getResult();for(var We in ee)ce.ua[We]=ee[We]}}})(typeof window=="object"?window:jn)}),mh=cc.UAParser,ol=function g(l){return l?(l^Math.random()*16>>l/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,g)},Ir="8.5.0",sl=function(){return navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||""},al={getLanguage:sl},uo={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:365,cookieName:"amplitude_id",sameSiteCookie:"Lax",cookieForceUpgrade:!1,deferInitialization:!1,disableCookies:!1,deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:30*1e3,eventUploadThreshold:30,forceHttps:!0,includeFbclid:!1,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:al.getLanguage(),logLevel:"WARN",logAttributionCapturedEvent:!1,optOut:!1,onError:function(){},onExitPage:function(){},platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,secureCookie:!1,sessionTimeout:30*60*1e3,storage:C.STORAGE_DEFAULT,trackingOptions:{city:!0,country:!0,carrier:!0,device_manufacturer:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},transport:C.TRANSPORT_HTTP,unsetParamsReferrerOnNewSession:!1,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},Oe=function(l){D()||j.log.warn("amplitude-js will not work in a non-browser environment. If you are planning to add Amplitude to a node environment, please use @amplitude/node"),this._instanceName=j.isEmptyString(l)?C.DEFAULT_INSTANCE:l.toLowerCase(),this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new cc(navigator.userAgent).getResult(),this.options=o({},uo,{trackingOptions:o({},uo.trackingOptions)}),this.cookieStorage=new En().getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._onInit=[],this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._isInitialized=!1,this._userAgent=navigator&&navigator.userAgent||null};Oe.prototype.Identify=Rt,Oe.prototype.Revenue=qn,Oe.prototype.init=function(l,d,v,x){var k=this;if(T(l)!=="string"||j.isEmptyString(l)){j.log.error("Invalid apiKey. Please re-initialize with a valid apiKey");return}try{cl(this.options,v),D()&&window.Prototype!==void 0&&Array.prototype.toJSON&&(P(),j.log.warn("Prototype.js injected Array.prototype.toJSON. Deleting Array.prototype.toJSON to prevent double-stringify")),this.options.cookieName!==uo.cookieName&&j.log.warn("The cookieName option is deprecated. We will be ignoring it for newer cookies"),this.options.apiKey=l,this._storageSuffix="_"+l+(this._instanceName===C.DEFAULT_INSTANCE?"":"_"+this._instanceName),this._storageSuffixV5=l.slice(0,6),this._oldCookiename=this.options.cookieName+this._storageSuffix,this._unsentKey=this.options.unsentKey+this._storageSuffix,this._unsentIdentifyKey=this.options.unsentIdentifyKey+this._storageSuffix,this._cookieName=C.COOKIE_PREFIX+"_"+this._storageSuffixV5,this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie}),this._metadataStorage=new io({storageKey:this._cookieName,disableCookies:this.options.disableCookies,expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie,storage:this.options.storage});var X=!!this.cookieStorage.get(this._oldCookiename),W=!!this._metadataStorage.load();this._useOldCookie=!W&&X&&!this.options.cookieForceUpgrade;var he=W||X;if(this.options.domain=this.cookieStorage.options().domain,this.options.deferInitialization&&!he){this._deferInitialization(l,d,v,x);return}T(this.options.logLevel)==="string"&&j.setLogLevel(this.options.logLevel);var we=lc(this);this._apiPropertiesTrackingOptions=Object.keys(we).length>0?{tracking_options:we}:{},this.options.cookieForceUpgrade&&X&&(W||ul(this),this.cookieStorage.remove(this._oldCookiename)),_s(this),this._pendingReadStorage=!0;var Ke=function(re){v&&v.deviceId&&!j.validateDeviceId(v.deviceId)&&(j.log.error('Invalid device ID rejected. Randomly generated UUID will be used instead of "'.concat(v.deviceId,'"')),delete v.deviceId),k.options.deviceId=k._getInitialDeviceId(v&&v.deviceId,re),k.options.userId=T(d)==="string"&&!j.isEmptyString(d)&&d||T(d)==="number"&&d.toString()||k.options.userId||null;var de=new Date().getTime();(!k._sessionId||!k._lastEventTime||de-k._lastEventTime>k.options.sessionTimeout)&&(k.options.unsetParamsReferrerOnNewSession&&k._unsetUTMParams(),k._newSession=!0,k._sessionId=de,k.options.saveParamsReferrerOncePerSession&&k._trackParamsAndReferrer()),k.options.saveParamsReferrerOncePerSession||k._trackParamsAndReferrer(),k.options.saveEvents&&(uc(k._unsentEvents),uc(k._unsentIdentifys)),k._lastEventTime=de,sr(k),k._pendingReadStorage=!1,k._sendEventsIfReady();for(var Vt=0;Vt<k._onInit.length;Vt++)k._onInit[Vt](k);k._onInit=[],k._isInitialized=!0};this.options.saveEvents&&(this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey).map(function(te){return{event:te}}).concat(this._unsentEvents),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey).map(function(te){return{event:te}}).concat(this._unsentIdentifys)),Ke(),this.runQueuedFunctions(),T(x)==="function"&&x(this);var Z=this.options.onExitPage;if(T(Z)==="function"&&!this.pageHandlersAdded){this.pageHandlersAdded=!0;var ue=function(){var re=k.options.transport;k.setTransport(C.TRANSPORT_BEACON),Z(),k.setTransport(re)};window.addEventListener("pagehide",function(){ue()},!1)}}catch(te){j.log.error(te),T(v.onError)==="function"&&v.onError(te)}},Oe.prototype.deleteLowerLevelDomainCookies=function(){var g=_e(),l=this.options.domain&&this.options.domain[0]==="."?this.options.domain.slice(1):this.options.domain;if(l&&g!==l&&new RegExp(l+"$").test(g)){for(var d=g.split("."),v=l.split("."),x=d.length;x>v.length;--x){var k=d.slice(d.length-x).join(".");J.set(this._cookieName,null,{domain:"."+k})}J.set(this._cookieName,null,{})}},Oe.prototype._getInitialDeviceId=function(g,l){if(g)return g;if(this.options.deviceIdFromUrlParam){var d=this._getDeviceIdFromUrlParam(this._getUrlParams());if(d)return d}return this.options.deviceId?this.options.deviceId:l||B()};var uc=function(l){for(var d=0;d<l.length;d++){var v=l[d].event.user_properties,x=l[d].event.event_properties,k=l[d].event.groups;l[d].event.user_properties=j.validateProperties(v),l[d].event.event_properties=j.validateProperties(x),l[d].event.groups=j.validateGroups(k)}};Oe.prototype._trackParamsAndReferrer=function(){var l,d,v,x;if(this.options.includeUtm&&(l=this._initUtmData()),this.options.includeReferrer&&(d=this._saveReferrer(this._getReferrer())),this.options.includeGclid&&(v=this._saveGclid(this._getUrlParams())),this.options.includeFbclid&&(x=this._saveFbclid(this._getUrlParams())),this.options.logAttributionCapturedEvent){var k=o({},l,d,v,x);Object.keys(k).length>0&&this.logEvent(C.ATTRIBUTION_EVENT,k)}};var cl=function g(l,d){if(T(d)==="object"){var v=new Set(["headers"]),x=function(W){if(Object.prototype.hasOwnProperty.call(l,W)){var he=d[W],we=T(l[W]);W==="transport"&&!j.validateTransport(he)||j.validateInput(he,W+" option",we)&&(we==="boolean"?l[W]=!!he:we==="string"&&!j.isEmptyString(he)||we==="number"&&he>0||we==="function"?l[W]=he:we==="object"&&g(l[W],he))}};for(var k in d)v.has(k)?l[k]=o({},l[k],d[k]):Object.prototype.hasOwnProperty.call(d,k)&&x(k)}};Oe.prototype.runQueuedFunctions=function(){var g=this._q;this._q=[];for(var l=0;l<g.length;l++){var d=this[g[l][0]];T(d)==="function"&&d.apply(this,g[l].slice(1))}},Oe.prototype._apiKeySet=function(l){return j.isEmptyString(this.options.apiKey)?(j.log.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+l),!1):!0},Oe.prototype._loadSavedUnsentEvents=function(l){var d=this._getFromStorage(dt,l),v=this._parseSavedUnsentEventsString(d,l);return this._setInStorage(dt,l,JSON.stringify(v)),v},Oe.prototype._parseSavedUnsentEventsString=function(l,d){if(j.isEmptyString(l))return[];if(T(l)==="string")try{var v=JSON.parse(l);if(T(v)==="array")return v}catch(x){}return j.log.error("Unable to load "+d+" events. Restart with a new empty queue."),[]},Oe.prototype.isNewSession=function(){return this._newSession},Oe.prototype.onInit=function(g){this._isInitialized?g(this):this._onInit.push(g)},Oe.prototype.getSessionId=function(){return this._sessionId},Oe.prototype.nextEventId=function(){return this._eventId++,this._eventId},Oe.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},Oe.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber},Oe.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length},Oe.prototype._sendEventsIfReady=function(){return this._unsentCount()===0?!1:this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(),!0):this.options.transport===C.TRANSPORT_BEACON?(this.sendEvents(),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(),!0)},Oe.prototype.clearStorage=function(){return this._metadataStorage.clear()},Oe.prototype._getFromStorage=function(l,d){return l.getItem(d+this._storageSuffix)},Oe.prototype._setInStorage=function(l,d,v){l.setItem(d+this._storageSuffix,v)};var _s=function(l){if(!l._useOldCookie){var d=l._metadataStorage.load();T(d)==="object"&&vs(l,d);return}var v=l.cookieStorage.get(l._oldCookiename);if(T(v)==="object"){vs(l,v);return}},ul=function(l){var d=l.cookieStorage.get(l._oldCookiename);T(d)==="object"&&(vs(l,d),sr(l))},vs=function(l,d){d.deviceId&&(l.options.deviceId=d.deviceId),d.userId&&(l.options.userId=d.userId),d.optOut!==null&&d.optOut!==void 0&&d.optOut!==!1&&(l.options.optOut=d.optOut),d.sessionId&&(l._sessionId=parseInt(d.sessionId,10)),d.lastEventTime&&(l._lastEventTime=parseInt(d.lastEventTime,10)),d.eventId&&(l._eventId=parseInt(d.eventId,10)),d.identifyId&&(l._identifyId=parseInt(d.identifyId,10)),d.sequenceNumber&&(l._sequenceNumber=parseInt(d.sequenceNumber,10))},sr=function(l){var d={deviceId:l.options.deviceId,userId:l.options.userId,optOut:l.options.optOut,sessionId:l._sessionId,lastEventTime:l._lastEventTime,eventId:l._eventId,identifyId:l._identifyId,sequenceNumber:l._sequenceNumber};l._useOldCookie?l.cookieStorage.set(l.options.cookieName+l._storageSuffix,d):l._metadataStorage.save(d)};Oe.prototype._initUtmData=function(l,d){l=l||this._getUrlParams(),d=d||this.cookieStorage.get("__utmz");var v=Ya(d,l);return ki(this,v),v},Oe.prototype._unsetUTMParams=function(){var l=new Rt;l.unset(C.REFERRER),l.unset(C.UTM_SOURCE),l.unset(C.UTM_MEDIUM),l.unset(C.UTM_CAMPAIGN),l.unset(C.UTM_TERM),l.unset(C.UTM_CONTENT),this.identify(l)};var ki=function(l,d){if(!(T(d)!=="object"||Object.keys(d).length===0)){var v=new Rt;for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&(v.setOnce("initial_"+x,d[x]),v.set(x,d[x]));l.identify(v)}};Oe.prototype._getReferrer=function(){return document.referrer},Oe.prototype._getUrlParams=function(){return location.search},Oe.prototype._saveGclid=function(l){var d=j.getQueryParam("gclid",l);if(!j.isEmptyString(d)){var v={gclid:d};return ki(this,v),v}},Oe.prototype._saveFbclid=function(l){var d=j.getQueryParam("fbclid",l);if(!j.isEmptyString(d)){var v={fbclid:d};return ki(this,v),v}},Oe.prototype._getDeviceIdFromUrlParam=function(l){return j.getQueryParam(C.AMP_DEVICE_ID_PARAM,l)},Oe.prototype._getReferringDomain=function(l){if(j.isEmptyString(l))return null;var d=l.split("/");return d.length>=3?d[2]:null},Oe.prototype._saveReferrer=function(l){if(!j.isEmptyString(l)){var d={referrer:l,referring_domain:this._getReferringDomain(l)};return ki(this,d),d}},Oe.prototype.saveEvents=function(){try{var l=JSON.stringify(this._unsentEvents.map(function(v){var x=v.event;return x}));this._setInStorage(dt,this.options.unsentKey,l)}catch(v){}try{var d=JSON.stringify(this._unsentIdentifys.map(function(v){return v.event}));this._setInStorage(dt,this.options.unsentIdentifyKey,d)}catch(v){}},Oe.prototype.setDomain=function(l){if(this._shouldDeferCall())return this._q.push(["setDomain"].concat(Array.prototype.slice.call(arguments,0)));if(j.validateInput(l,"domain","string"))try{this.cookieStorage.options({expirationDays:this.options.cookieExpiration,secure:this.options.secureCookie,domain:l,sameSite:this.options.sameSiteCookie}),this.options.domain=this.cookieStorage.options().domain,_s(this),sr(this)}catch(d){j.log.error(d)}},Oe.prototype.setUserId=function(l){if(this._shouldDeferCall())return this._q.push(["setUserId"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.userId=l!=null&&""+l||null,sr(this)}catch(d){j.log.error(d)}},Oe.prototype.setGroup=function(g,l){if(this._shouldDeferCall())return this._q.push(["setGroup"].concat(Array.prototype.slice.call(arguments,0)));if(!(!this._apiKeySet("setGroup()")||!j.validateInput(g,"groupType","string")||j.isEmptyString(g))){var d={};d[g]=l;var v=new Rt().set(g,l);this._logEvent(C.IDENTIFY_EVENT,null,null,v.userPropertiesOperations,d,null,null,null)}},Oe.prototype.setOptOut=function(l){if(this._shouldDeferCall())return this._q.push(["setOptOut"].concat(Array.prototype.slice.call(arguments,0)));if(j.validateInput(l,"enable","boolean"))try{this.options.optOut=l,sr(this)}catch(d){j.log.error(d)}},Oe.prototype.setSessionId=function(l){if(j.validateInput(l,"sessionId","number"))try{this._sessionId=l,sr(this)}catch(d){j.log.error(d)}},Oe.prototype.resetSessionId=function(){this.setSessionId(new Date().getTime())},Oe.prototype.regenerateDeviceId=function(){if(this._shouldDeferCall())return this._q.push(["regenerateDeviceId"].concat(Array.prototype.slice.call(arguments,0)));this.setDeviceId(B())},Oe.prototype.setDeviceId=function(l){if(this._shouldDeferCall())return this._q.push(["setDeviceId"].concat(Array.prototype.slice.call(arguments,0)));if(j.validateDeviceId(l))try{j.isEmptyString(l)||(this.options.deviceId=""+l,sr(this))}catch(d){j.log.error(d)}},Oe.prototype.setTransport=function(l){if(this._shouldDeferCall())return this._q.push(["setTransport"].concat(Array.prototype.slice.call(arguments,0)));j.validateTransport(l)&&(this.options.transport=l)},Oe.prototype.setUserProperties=function(l){if(this._shouldDeferCall())return this._q.push(["setUserProperties"].concat(Array.prototype.slice.call(arguments,0)));if(!(!this._apiKeySet("setUserProperties()")||!j.validateInput(l,"userProperties","object"))){var d=j.truncate(j.validateProperties(l));if(Object.keys(d).length!==0){var v=new Rt;for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&v.set(x,d[x]);this.identify(v)}}},Oe.prototype.clearUserProperties=function(){if(this._shouldDeferCall())return this._q.push(["clearUserProperties"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("clearUserProperties()")){var l=new Rt;l.clearAll(),this.identify(l)}};var bs=function(l,d){for(var v=0;v<d._q.length;v++){var x=l[d._q[v][0]];T(x)==="function"&&x.apply(l,d._q[v].slice(1))}return l};Oe.prototype.identify=function(g,l,d){if(this._shouldDeferCall())return this._q.push(["identify"].concat(Array.prototype.slice.call(arguments,0)));if(!this._apiKeySet("identify()")){un(l,d,0,"No request sent",{reason:"API key is not set"});return}if(T(g)==="object"&&Object.prototype.hasOwnProperty.call(g,"_q")&&(g=bs(new Rt,g)),g instanceof Rt){if(Object.keys(g.userPropertiesOperations).length>0)return this._logEvent(C.IDENTIFY_EVENT,null,null,g.userPropertiesOperations,null,null,null,l,d);un(l,d,0,"No request sent",{reason:"No user property operations"})}else j.log.error("Invalid identify input type. Expected Identify object but saw "+T(g)),un(l,d,0,"No request sent",{reason:"Invalid identify input type"})},Oe.prototype.groupIdentify=function(g,l,d,v,x){if(this._shouldDeferCall())return this._q.push(["groupIdentify"].concat(Array.prototype.slice.call(arguments,0)));if(!this._apiKeySet("groupIdentify()")){un(v,x,0,"No request sent",{reason:"API key is not set"});return}if(!j.validateInput(g,"group_type","string")||j.isEmptyString(g)){un(v,x,0,"No request sent",{reason:"Invalid group type"});return}if(l==null){un(v,x,0,"No request sent",{reason:"Invalid group name"});return}if(T(d)==="object"&&Object.prototype.hasOwnProperty.call(d,"_q")&&(d=bs(new Rt,d)),d instanceof Rt){if(Object.keys(d.userPropertiesOperations).length>0)return this._logEvent(C.GROUP_IDENTIFY_EVENT,null,null,null,i({},g,l),d.userPropertiesOperations,null,v,x);un(v,x,0,"No request sent",{reason:"No group property operations"})}else j.log.error("Invalid identify input type. Expected Identify object but saw "+T(d)),un(v,x,0,"No request sent",{reason:"Invalid identify input type"})},Oe.prototype.setVersionName=function(l){if(this._shouldDeferCall())return this._q.push(["setVersionName"].concat(Array.prototype.slice.call(arguments,0)));j.validateInput(l,"versionName","string")&&(this.options.versionName=l)},Oe.prototype._logEvent=function(l,d,v,x,k,X,W,he,we){if(_s(this),!l){un(he,we,0,"No request sent",{reason:"Missing eventType"});return}if(this.options.optOut){un(he,we,0,"No request sent",{reason:"optOut is set to true"});return}try{var Ke;l===C.IDENTIFY_EVENT||l===C.GROUP_IDENTIFY_EVENT?Ke=this.nextIdentifyId():Ke=this.nextEventId();var Z=this.nextSequenceNumber(),ue=T(W)==="number"?W:new Date().getTime();(!this._sessionId||!this._lastEventTime||ue-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=ue),this._lastEventTime=ue,sr(this);var te=this._ua.browser.name,re=this._ua.browser.major,de=this._ua.os.name;x=x||{};var Vt=o({},this._apiPropertiesTrackingOptions);v=o({},v||{},Vt),d=d||{},k=k||{},X=X||{};var Zn={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:ue,event_id:Ke,session_id:this._sessionId||-1,event_type:l,version_name:this.options.versionName||null,platform:ri(this,"platform")?this.options.platform:null,os_name:ri(this,"os_name")&&te||null,os_version:ri(this,"os_version")&&re||null,device_model:ri(this,"device_model")&&de||null,language:ri(this,"language")?this.options.language:null,api_properties:v,event_properties:j.truncate(j.validateProperties(d)),user_properties:j.truncate(j.validateProperties(x)),uuid:ol(),library:{name:"amplitude-js",version:Ir},sequence_number:Z,groups:j.truncate(j.validateGroups(k)),group_properties:j.truncate(j.validateProperties(X)),user_agent:this._userAgent};return l===C.IDENTIFY_EVENT||l===C.GROUP_IDENTIFY_EVENT?(this._unsentIdentifys.push({event:Zn,callback:he,errorCallback:we}),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push({event:Zn,callback:he,errorCallback:we}),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(),Ke}catch(nt){j.log.error(nt)}};var ri=function(l,d){return!!l.options.trackingOptions[d]},lc=function(l){for(var d=["city","country","dma","ip_address","region"],v={},x=0;x<d.length;x++){var k=d[x];ri(l,k)||(v[k]=!1)}return v};Oe.prototype._limitEventsQueued=function(l){if(l.length>this.options.savedMaxCount){var d=l.splice(0,l.length-this.options.savedMaxCount);d.forEach(function(v){un(v.callback,v.errorCallback,0,"No request sent",{reason:"Event dropped because options.savedMaxCount exceeded. User may be offline or have a content blocker"})})}},Oe.prototype.logEvent=function(l,d,v,x){return this._shouldDeferCall()?this._q.push(["logEvent"].concat(Array.prototype.slice.call(arguments,0))):this.logEventWithTimestamp(l,d,null,v,x)},Oe.prototype.logEventWithTimestamp=function(l,d,v,x,k){return this._shouldDeferCall()?this._q.push(["logEventWithTimestamp"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logEvent()")?j.validateInput(l,"eventType","string")?j.isEmptyString(l)?(un(x,k,0,"No request sent",{reason:"Missing eventType"}),-1):this._logEvent(l,d,null,null,null,null,v,x,k):(un(x,k,0,"No request sent",{reason:"Invalid type for eventType"}),-1):(un(x,k,0,"No request sent",{reason:"API key not set"}),-1)},Oe.prototype.logEventWithGroups=function(g,l,d,v,x){return this._shouldDeferCall()?this._q.push(["logEventWithGroups"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logEventWithGroups()")?j.validateInput(g,"eventType","string")?this._logEvent(g,l,null,null,d,null,null,v,x):(un(event.callback,event.errorCallback,0,"No request sent",{reason:"Invalid type for eventType"}),-1):(un(event.callback,event.errorCallback,0,"No request sent",{reason:"API key not set"}),-1)};var ws=function(l){return!isNaN(parseFloat(l))&&isFinite(l)},un=function(l,d,v,x,k){T(l)==="function"&&l(v,x,k),T(d)==="function"&&d(v,x,k)};Oe.prototype.logRevenueV2=function(l){if(this._shouldDeferCall())return this._q.push(["logRevenueV2"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("logRevenueV2()"))if(T(l)==="object"&&Object.prototype.hasOwnProperty.call(l,"_q")&&(l=bs(new qn,l)),l instanceof qn){if(l&&l._isValidRevenue())return this.logEvent(C.REVENUE_EVENT,l._toJSONObject())}else j.log.error("Invalid revenue input type. Expected Revenue object but saw "+T(l))},Oe.prototype.logRevenue=function(l,d,v){return this._shouldDeferCall()?this._q.push(["logRevenue"].concat(Array.prototype.slice.call(arguments,0))):!this._apiKeySet("logRevenue()")||!ws(l)||d!==void 0&&!ws(d)?-1:this._logEvent(C.REVENUE_EVENT,{},{productId:v,special:"revenue_amount",quantity:d||1,price:l},null,null,null,null,null)},Oe.prototype._logErrorsOnEvents=function(l,d,v,x){for(var k=["_unsentEvents","_unsentIdentifys"],X=0;X<k.length;X++)for(var W=k[X],he=W==="_unsentEvents"?l:d,we=0;we<this[W].length;we++){var Ke=this[W][we];Ke.event.event_id<=he&&Ke.errorCallback&&Ke.errorCallback(v,x)}},Oe.prototype.removeEvents=function(l,d,v,x){fc(this,"_unsentEvents",l,v,x),fc(this,"_unsentIdentifys",d,v,x)};var fc=function(l,d,v,x,k){if(!(v<0)){for(var X=[],W=0;W<l[d].length;W++){var he=l[d][W];he.event.event_id>v?X.push(he):he.callback&&he.callback(x,k)}l[d]=X}};Oe.prototype.sendEvents=function(){if(!this._apiKeySet("sendEvents()")){this.removeEvents(1/0,1/0,0,"No request sent",{reason:"API key not set"});return}if(this.options.optOut){this.removeEvents(1/0,1/0,0,"No request sent",{reason:"Opt out is set to true"});return}if(this._unsentCount()!==0){if(this.options.transport!==C.TRANSPORT_BEACON){if(this._sending)return;this._sending=!0}var l=this.options.forceHttps||window.location.protocol==="https:"?"https":"http",d=l+"://"+this.options.apiEndpoint,v=Math.min(this._unsentCount(),this.options.uploadBatchSize),x=this._mergeEventsAndIdentifys(v),k=x.maxEventId,X=x.maxIdentifyId,W=JSON.stringify(x.eventsToSend.map(function(ue){var te=ue.event;return te})),he=new Date().getTime(),we={client:this.options.apiKey,e:W,v:C.API_VERSION,upload_time:he,checksum:Ci(C.API_VERSION+this.options.apiKey+W+he)};if(this.options.transport===C.TRANSPORT_BEACON){var Ke=navigator.sendBeacon(d,new URLSearchParams(we));Ke?(this.removeEvents(k,X,200,"success"),this.options.saveEvents&&this.saveEvents()):this._logErrorsOnEvents(k,X,0,"");return}var Z=this;new tn(d,we,this.options.headers).send(function(ue,te){Z._sending=!1;try{ue===200&&te==="success"?(Z.removeEvents(k,X,ue,te),Z.options.saveEvents&&Z.saveEvents(),Z._sendEventsIfReady()):(Z._logErrorsOnEvents(k,X,ue,te),ue===413&&(Z.options.uploadBatchSize===1&&Z.removeEvents(k,X,ue,te),Z.options.uploadBatchSize=Math.ceil(v/2),Z.sendEvents()))}catch(re){}})}},Oe.prototype._mergeEventsAndIdentifys=function(l){for(var d=[],v=0,x=-1,k=0,X=-1;d.length<l;){var W=void 0,he=k>=this._unsentIdentifys.length,we=v>=this._unsentEvents.length;if(we&&he){j.log.error("Merging Events and Identifys, less events and identifys than expected");break}else he?(W=this._unsentEvents[v++],x=W.event.event_id):we?(W=this._unsentIdentifys[k++],X=W.event.event_id):!("sequence_number"in this._unsentEvents[v].event)||this._unsentEvents[v].event.sequence_number<this._unsentIdentifys[k].event.sequence_number?(W=this._unsentEvents[v++],x=W.event.event_id):(W=this._unsentIdentifys[k++],X=W.event.event_id);d.push(W)}return{eventsToSend:d,maxEventId:x,maxIdentifyId:X}},Oe.prototype.setGlobalUserProperties=function(l){this.setUserProperties(l)},Oe.prototype.__VERSION__=Ir,Oe.prototype._shouldDeferCall=function(){return this._pendingReadStorage||this._initializationDeferred},Oe.prototype._deferInitialization=function(){this._initializationDeferred=!0,this._q.push(["init"].concat(Array.prototype.slice.call(arguments,0)))},Oe.prototype.enableTracking=function(){this._initializationDeferred=!1,sr(this),this.runQueuedFunctions()};var at=function(){this.options=o({},uo),this._q=[],this._instances={}};at.prototype.Identify=Rt,at.prototype.Revenue=qn,at.prototype.getInstance=function(l){l=j.isEmptyString(l)?C.DEFAULT_INSTANCE:l.toLowerCase();var d=this._instances[l];return d===void 0&&(d=new Oe(l),this._instances[l]=d),d},at.prototype.runQueuedFunctions=function(){for(var g=0;g<this._q.length;g++){var l=this[this._q[g][0]];T(l)==="function"&&l.apply(this,this._q[g].slice(1))}this._q=[];for(var d in this._instances)Object.prototype.hasOwnProperty.call(this._instances,d)&&this._instances[d].runQueuedFunctions()},at.prototype.init=function(l,d,v,x){this.getInstance().init(l,d,v,function(k){this.options=k.options,T(x)==="function"&&x(k)}.bind(this))},at.prototype.isNewSession=function(){return this.getInstance().isNewSession()},at.prototype.getSessionId=function(){return this.getInstance().getSessionId()},at.prototype.nextEventId=function(){return this.getInstance().nextEventId()},at.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},at.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},at.prototype.saveEvents=function(){this.getInstance().saveEvents()},at.prototype.setDomain=function(l){this.getInstance().setDomain(l)},at.prototype.setUserId=function(l){this.getInstance().setUserId(l)},at.prototype.setGroup=function(g,l){this.getInstance().setGroup(g,l)},at.prototype.setOptOut=function(l){this.getInstance().setOptOut(l)},at.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},at.prototype.setDeviceId=function(l){this.getInstance().setDeviceId(l)},at.prototype.setUserProperties=function(l){this.getInstance().setUserProperties(l)},at.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},at.prototype.identify=function(g,l){this.getInstance().identify(g,l)},at.prototype.setVersionName=function(l){this.getInstance().setVersionName(l)},at.prototype.logEvent=function(l,d,v){return this.getInstance().logEvent(l,d,v)},at.prototype.logEventWithGroups=function(g,l,d,v){return this.getInstance().logEventWithGroups(g,l,d,v)},at.prototype.logRevenueV2=function(l){return this.getInstance().logRevenueV2(l)},at.prototype.logRevenue=function(l,d,v){return this.getInstance().logRevenue(l,d,v)},at.prototype.removeEvents=function(l,d){this.getInstance().removeEvents(l,d)},at.prototype.sendEvents=function(l){this.getInstance().sendEvents(l)},at.prototype.setGlobalUserProperties=function(l){this.getInstance().setUserProperties(l)},at.prototype.__VERSION__=Ir;var lo=window.amplitude||{},fo=new at;fo._q=lo._q||[];for(var Ss in lo._iq)Object.prototype.hasOwnProperty.call(lo._iq,Ss)&&(fo.getInstance(Ss)._q=lo._iq[Ss]._q||[]);return fo.runQueuedFunctions(),fo})});var bd=Fe((Nv,Uv)=>{w();(function(e){var t;if(typeof define=="function"&&define.amd&&(define(e),t=!0),typeof Nv=="object"&&(Uv.exports=e(),t=!0),!t){var n=window.Cookies,r=window.Cookies=e();r.noConflict=function(){return window.Cookies=n,r}}})(function(){function e(){for(var r=0,i={};r<arguments.length;r++){var o=arguments[r];for(var s in o)i[s]=o[s]}return i}function t(r){return r.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(r){function i(){}function o(a,c,u){if(!(typeof document>"u")){u=e({path:"/"},i.defaults,u),typeof u.expires=="number"&&(u.expires=new Date(new Date*1+u.expires*864e5)),u.expires=u.expires?u.expires.toUTCString():"";try{var p=JSON.stringify(c);/^[\{\[]/.test(p)&&(c=p)}catch(m){}c=r.write?r.write(c,a):encodeURIComponent(String(c)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),a=encodeURIComponent(String(a)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var h="";for(var y in u)u[y]&&(h+="; "+y,u[y]!==!0&&(h+="="+u[y].split(";")[0]));return document.cookie=a+"="+c+h}}function s(a,c){if(!(typeof document>"u")){for(var u={},p=document.cookie?document.cookie.split("; "):[],h=0;h<p.length;h++){var y=p[h].split("="),m=y.slice(1).join("=");!c&&m.charAt(0)==='"'&&(m=m.slice(1,-1));try{var b=t(y[0]);if(m=(r.read||r)(m,b)||t(m),c)try{m=JSON.parse(m)}catch(R){}if(u[b]=m,a===b)break}catch(R){}}return a?u[a]:u}}return i.set=o,i.get=function(a){return s(a,!1)},i.getJSON=function(a){return s(a,!0)},i.remove=function(a,c){o(a,"",e(c,{expires:-1}))},i.defaults={},i.withConverter=n,i}return n(function(){})})});var Xi=Fe((zM,$0)=>{w();var gP=Object.prototype.hasOwnProperty,mP=Object.prototype.toString;$0.exports=function(t,n,r){if(mP.call(n)!=="[object Function]")throw new TypeError("iterator must be a function");var i=t.length;if(i===+i)for(var o=0;o<i;o++)n.call(r,t[o],o,t);else for(var s in t)gP.call(t,s)&&n.call(r,t[s],s,t)}});var Zi=Fe((jM,W0)=>{"use strict";w();var Y0=ko();function $u(e,t){var n=Xi(),r=this;typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):r.stack=new Error().stack||"Cannot get a stacktrace, browser is too old",this.name="AlgoliaSearchError",this.message=e||"Unknown error",t&&n(t,function(o,s){r[s]=o})}Y0($u,Error);function xi(e,t){function n(){var r=Array.prototype.slice.call(arguments,0);typeof r[0]!="string"&&r.unshift(t),$u.apply(this,r),this.name="AlgoliaSearch"+e+"Error"}return Y0(n,$u),n}W0.exports={AlgoliaSearchError:$u,UnparsableJSON:xi("UnparsableJSON","Could not parse the incoming response as JSON, see err.more for details"),RequestTimeout:xi("RequestTimeout","Request timed out before getting a response"),Network:xi("Network","Network issue, see err.more for details"),JSONPScriptFail:xi("JSONPScriptFail","<script> was loaded but did not call our provided callback"),ValidUntilNotFound:xi("ValidUntilNotFound","The SecuredAPIKey does not have a validUntil parameter."),JSONPScriptError:xi("JSONPScriptError","<script> unable to load due to an `error` event on it"),ObjectNotFound:xi("ObjectNotFound","Object not found"),Unknown:xi("Unknown","Unknown error occured")}});var Yp=Fe((GM,J0)=>{w();J0.exports=_P;var yP=Zi();function _P(e,t){return function(r,i,o){if(typeof r=="function"&&typeof i=="object"||typeof o=="object")throw new yP.AlgoliaSearchError("index.search usage is index.search(query, params, cb)");arguments.length===0||typeof r=="function"?(o=r,r=""):(arguments.length===1||typeof i=="function")&&(o=i,i=void 0),typeof r=="object"&&r!==null?(i=r,r=void 0):r==null&&(r="");var s="";r!==void 0&&(s+=e+"="+encodeURIComponent(r));var a;return i!==void 0&&(i.additionalUA&&(a=i.additionalUA,delete i.additionalUA),s=this.as._getSearchParams(i,s)),this._search(s,t,o,a)}}});var Yu=Fe((HM,Q0)=>{w();Q0.exports=function(t,n){var r=!1;function i(){return r||(console.warn(n),r=!0),t.apply(this,arguments)}return i}});var Wu=Fe(($M,X0)=>{w();X0.exports=function(t,n){var r=t.toLowerCase().replace(/[\.\(\)]/g,"");return"algoliasearch: `"+t+"` was replaced by `"+n+"`. Please see https://github.com/algolia/algoliasearch-client-javascript/wiki/Deprecated#"+r}});var Wp=Fe((WM,Z0)=>{w();var vP=Xi();Z0.exports=function e(t){var n=Array.prototype.slice.call(arguments);return vP(n,function(r){for(var i in r)r.hasOwnProperty(i)&&(typeof t[i]=="object"&&typeof r[i]=="object"?t[i]=e({},t[i],r[i]):r[i]!==void 0&&(t[i]=r[i]))}),t}});var Qr=Fe((QM,ew)=>{w();ew.exports=function(t){return JSON.parse(JSON.stringify(t))}});var Jp=Fe((ZM,nw)=>{"use strict";w();var tw=Object.prototype.toString;nw.exports=function(t){var n=tw.call(t),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&tw.call(t.callee)==="[object Function]"),r}});var fw=Fe((tz,lw)=>{"use strict";w();var uw;Object.keys||(Pa=Object.prototype.hasOwnProperty,Qp=Object.prototype.toString,rw=Jp(),Xp=Object.prototype.propertyIsEnumerable,iw=!Xp.call({toString:null},"toString"),ow=Xp.call(function(){},"prototype"),Da=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ju=function(e){var t=e.constructor;return t&&t.prototype===e},sw={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},aw=function(){if(typeof window>"u")return!1;for(var e in window)try{if(!sw["$"+e]&&Pa.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{Ju(window[e])}catch(t){return!0}}catch(t){return!0}return!1}(),cw=function(e){if(typeof window>"u"||!aw)return Ju(e);try{return Ju(e)}catch(t){return!1}},uw=function(t){var n=t!==null&&typeof t=="object",r=Qp.call(t)==="[object Function]",i=rw(t),o=n&&Qp.call(t)==="[object String]",s=[];if(!n&&!r&&!i)throw new TypeError("Object.keys called on a non-object");var a=ow&&r;if(o&&t.length>0&&!Pa.call(t,0))for(var c=0;c<t.length;++c)s.push(String(c));if(i&&t.length>0)for(var u=0;u<t.length;++u)s.push(String(u));else for(var p in t)!(a&&p==="prototype")&&Pa.call(t,p)&&s.push(String(p));if(iw)for(var h=cw(t),y=0;y<Da.length;++y)!(h&&Da[y]==="constructor")&&Pa.call(t,Da[y])&&s.push(Da[y]);return s});var Pa,Qp,rw,Xp,iw,ow,Da,Ju,sw,aw,cw;lw.exports=uw});var gw=Fe((rz,hw)=>{"use strict";w();var bP=Array.prototype.slice,wP=Jp(),dw=Object.keys,Qu=dw?function(t){return dw(t)}:fw(),pw=Object.keys;Qu.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(r){return wP(r)?pw(bP.call(r)):pw(r)})}else Object.keys=Qu;return Object.keys||Qu};hw.exports=Qu});var Zp=Fe((oz,mw)=>{w();mw.exports=function(t,n){var r=gw(),i=Xi(),o={};return i(r(t),function(a){n(a)!==!0&&(o[a]=t[a])}),o}});var zn=Fe((az,yw)=>{w();var SP={}.toString;yw.exports=Array.isArray||function(e){return SP.call(e)=="[object Array]"}});var eo=Fe((uz,_w)=>{w();var EP=Xi();_w.exports=function(t,n){var r=[];return EP(t,function(i,o){r.push(n(i,o,t))}),r}});var eh=Fe((fz,Sw)=>{w();var vw=Yp(),bw=Yu(),ww=Wu();Sw.exports=Pn;function Pn(e,t){this.indexName=t,this.as=e,this.typeAheadArgs=null,this.typeAheadValueOption=null,this.cache={}}Pn.prototype.clearCache=function(){this.cache={}};Pn.prototype.search=vw("query");Pn.prototype.similarSearch=bw(vw("similarQuery"),ww("index.similarSearch(query[, callback])","index.search({ similarQuery: query }[, callback])"));Pn.prototype.browse=function(e,t,n){var r=Wp(),i=this,o,s;arguments.length===0||arguments.length===1&&typeof arguments[0]=="function"?(o=0,n=arguments[0],e=void 0):typeof arguments[0]=="number"?(o=arguments[0],typeof arguments[1]=="number"?s=arguments[1]:typeof arguments[1]=="function"&&(n=arguments[1],s=void 0),e=void 0,t=void 0):typeof arguments[0]=="object"?(typeof arguments[1]=="function"&&(n=arguments[1]),t=arguments[0],e=void 0):typeof arguments[0]=="string"&&typeof arguments[1]=="function"&&(n=arguments[1],t=void 0),t=r({},t||{},{page:o,hitsPerPage:s,query:e});var a=this.as._getSearchParams(t,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(i.indexName)+"/browse",body:{params:a},hostType:"read",callback:n})};Pn.prototype.browseFrom=function(e,t){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{cursor:e},hostType:"read",callback:t})};Pn.prototype.searchForFacetValues=function(e,t){var n=Qr(),r=Zp(),i="Usage: index.searchForFacetValues({facetName, facetQuery, ...params}[, callback])";if(e.facetName===void 0||e.facetQuery===void 0)throw new Error(i);var o=e.facetName,s=r(n(e),function(c){return c==="facetName"}),a=this.as._getSearchParams(s,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/facets/"+encodeURIComponent(o)+"/query",hostType:"read",body:{params:a},callback:t})};Pn.prototype.searchFacet=bw(function(e,t){return this.searchForFacetValues(e,t)},ww("index.searchFacet(params[, callback])","index.searchForFacetValues(params[, callback])"));Pn.prototype._search=function(e,t,n,r){return this.as._jsonRequest({cache:this.cache,method:"POST",url:t||"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:e},hostType:"read",fallback:{method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName),body:{params:e}},callback:n,additionalUA:r})};Pn.prototype.getObject=function(e,t,n){var r=this;(arguments.length===1||typeof t=="function")&&(n=t,t=void 0);var i="";if(t!==void 0){i="?attributes=";for(var o=0;o<t.length;++o)o!==0&&(i+=","),i+=t[o]}return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/"+encodeURIComponent(e)+i,hostType:"read",callback:n})};Pn.prototype.getObjects=function(e,t,n){var r=zn(),i=eo(),o="Usage: index.getObjects(arrayOfObjectIDs[, callback])";if(!r(e))throw new Error(o);var s=this;(arguments.length===1||typeof t=="function")&&(n=t,t=void 0);var a={requests:i(e,function(u){var p={indexName:s.indexName,objectID:u};return t&&(p.attributesToRetrieve=t.join(",")),p})};return this.as._jsonRequest({method:"POST",url:"/1/indexes/*/objects",hostType:"read",body:a,callback:n})};Pn.prototype.as=null;Pn.prototype.indexName=null;Pn.prototype.typeAheadArgs=null;Pn.prototype.typeAheadValueOption=null});var th=Fe((pz,Ew)=>{w();Ew.exports=function(t,n){n(t,0)}});var Cw=Fe((gz,Rw)=>{w();function dn(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}Rw.exports=dn;dn.EventEmitter=dn;dn.prototype._events=void 0;dn.prototype._maxListeners=void 0;dn.defaultMaxListeners=10;dn.prototype.setMaxListeners=function(e){if(!xP(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this};dn.prototype.emit=function(e){var t,n,r,i,o,s;if(this._events||(this._events={}),e==="error"&&(!this._events.error||Na(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var a=new Error('Uncaught, unspecified "error" event. ('+t+")");throw a.context=t,a}if(n=this._events[e],xw(n))return!1;if(Xr(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(Na(n))for(i=Array.prototype.slice.call(arguments,1),s=n.slice(),r=s.length,o=0;o<r;o++)s[o].apply(this,i);return!0};dn.prototype.addListener=function(e,t){var n;if(!Xr(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,Xr(t.listener)?t.listener:t),this._events[e]?Na(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,Na(this._events[e])&&!this._events[e].warned&&(xw(this._maxListeners)?n=dn.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this};dn.prototype.on=dn.prototype.addListener;dn.prototype.once=function(e,t){if(!Xr(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this};dn.prototype.removeListener=function(e,t){var n,r,i,o;if(!Xr(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||Xr(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(Na(n)){for(o=i;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;n.length===1?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this};dn.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],Xr(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this};dn.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:Xr(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t};dn.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(Xr(t))return 1;if(t)return t.length}return 0};dn.listenerCount=function(e,t){return e.listenerCount(t)};function Xr(e){return typeof e=="function"}function xP(e){return typeof e=="number"}function Na(e){return typeof e=="object"&&e!==null}function xw(e){return e===void 0}});var kw=Fe((yz,Tw)=>{"use strict";w();Tw.exports=to;var RP=ko(),CP=Cw().EventEmitter;function to(){}RP(to,CP);to.prototype.stop=function(){this._stopped=!0,this._clean()};to.prototype._end=function(){this.emit("end"),this._clean()};to.prototype._error=function(e){this.emit("error",e),this._clean()};to.prototype._result=function(e){this.emit("result",e)};to.prototype._clean=function(){this.removeAllListeners("stop"),this.removeAllListeners("end"),this.removeAllListeners("error"),this.removeAllListeners("result")}});var Pw=Fe((vz,Ow)=>{w();var TP=ko(),Aw=eh(),Bn=Yu(),Jn=Wu(),Xu=th(),Zu=Zi(),Ua=Bn(function(){},Jn("forwardToSlaves","forwardToReplicas"));Ow.exports=Ve;function Ve(){Aw.apply(this,arguments)}TP(Ve,Aw);Ve.prototype.addObject=function(e,t,n){var r=this;return(arguments.length===1||typeof t=="function")&&(n=t,t=void 0),this.as._jsonRequest({method:t!==void 0?"PUT":"POST",url:"/1/indexes/"+encodeURIComponent(r.indexName)+(t!==void 0?"/"+encodeURIComponent(t):""),body:e,hostType:"write",callback:n})};Ve.prototype.addObjects=function(e,t){var n=zn(),r="Usage: index.addObjects(arrayOfObjects[, callback])";if(!n(e))throw new Error(r);for(var i=this,o={requests:[]},s=0;s<e.length;++s){var a={action:"addObject",body:e[s]};o.requests.push(a)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(i.indexName)+"/batch",body:o,hostType:"write",callback:t})};Ve.prototype.partialUpdateObject=function(e,t,n){(arguments.length===1||typeof t=="function")&&(n=t,t=void 0);var r=this,i="/1/indexes/"+encodeURIComponent(r.indexName)+"/"+encodeURIComponent(e.objectID)+"/partial";return t===!1&&(i+="?createIfNotExists=false"),this.as._jsonRequest({method:"POST",url:i,body:e,hostType:"write",callback:n})};Ve.prototype.partialUpdateObjects=function(e,t,n){(arguments.length===1||typeof t=="function")&&(n=t,t=!0);var r=zn(),i="Usage: index.partialUpdateObjects(arrayOfObjects[, callback])";if(!r(e))throw new Error(i);for(var o=this,s={requests:[]},a=0;a<e.length;++a){var c={action:t===!0?"partialUpdateObject":"partialUpdateObjectNoCreate",objectID:e[a].objectID,body:e[a]};s.requests.push(c)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(o.indexName)+"/batch",body:s,hostType:"write",callback:n})};Ve.prototype.saveObject=function(e,t){var n=this;return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/"+encodeURIComponent(e.objectID),body:e,hostType:"write",callback:t})};Ve.prototype.saveObjects=function(e,t){var n=zn(),r="Usage: index.saveObjects(arrayOfObjects[, callback])";if(!n(e))throw new Error(r);for(var i=this,o={requests:[]},s=0;s<e.length;++s){var a={action:"updateObject",objectID:e[s].objectID,body:e[s]};o.requests.push(a)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(i.indexName)+"/batch",body:o,hostType:"write",callback:t})};Ve.prototype.deleteObject=function(e,t){if(typeof e=="function"||typeof e!="string"&&typeof e!="number"){var n=new Zu.AlgoliaSearchError(e&&typeof e!="function"?"ObjectID must be a string":"Cannot delete an object without an objectID");return t=e,typeof t=="function"?t(n):this.as._promise.reject(n)}var r=this;return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/"+encodeURIComponent(e),hostType:"write",callback:t})};Ve.prototype.deleteObjects=function(e,t){var n=zn(),r=eo(),i="Usage: index.deleteObjects(arrayOfObjectIDs[, callback])";if(!n(e))throw new Error(i);var o=this,s={requests:r(e,function(c){return{action:"deleteObject",objectID:c,body:{objectID:c}}})};return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(o.indexName)+"/batch",body:s,hostType:"write",callback:t})};Ve.prototype.deleteByQuery=Bn(function(e,t,n){var r=Qr(),i=eo(),o=this,s=o.as;arguments.length===1||typeof t=="function"?(n=t,t={}):t=r(t),t.attributesToRetrieve="objectID",t.hitsPerPage=1e3,t.distinct=!1,this.clearCache();var a=this.search(e,t).then(c);function c(m){if(m.nbHits===0)return m;var b=i(m.hits,function(D){return D.objectID});return o.deleteObjects(b).then(u).then(p)}function u(m){return o.waitTask(m.taskID)}function p(){return o.deleteByQuery(e,t)}if(!n)return a;a.then(h,y);function h(){Xu(function(){n(null)},s._setTimeout||setTimeout)}function y(m){Xu(function(){n(m)},s._setTimeout||setTimeout)}},Jn("index.deleteByQuery()","index.deleteBy()"));Ve.prototype.deleteBy=function(e,t){var n=this;return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/deleteByQuery",body:{params:n.as._getSearchParams(e,"")},hostType:"write",callback:t})};Ve.prototype.browseAll=function(e,t){typeof e=="object"&&(t=e,e=void 0);var n=Wp(),r=kw(),i=new r,o=this.as,s=this,a=o._getSearchParams(n({},t||{},{query:e}),"");c();function c(p){if(!i._stopped){var h;p!==void 0?h={cursor:p}:h={params:a},o._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(s.indexName)+"/browse",hostType:"read",body:h,callback:u})}}function u(p,h){if(!i._stopped){if(p){i._error(p);return}if(i._result(h),h.cursor===void 0){i._end();return}c(h.cursor)}}return i};Ve.prototype.ttAdapter=Bn(function(e){var t=this;return function(r,i,o){var s;typeof o=="function"?s=o:s=i,t.search(r,e,function(c,u){if(c){s(c);return}s(u.hits)})}},`ttAdapter is not necessary anymore and will be removed in the next version,
have a look at autocomplete.js (https://github.com/algolia/autocomplete.js)`);Ve.prototype.waitTask=function(e,t){var n=100,r=5e3,i=0,o=this,s=o.as,a=c();function c(){return s._jsonRequest({method:"GET",hostType:"read",url:"/1/indexes/"+encodeURIComponent(o.indexName)+"/task/"+e}).then(function(y){i++;var m=n*i*i;return m>r&&(m=r),y.status!=="published"?s._promise.delay(m).then(c):y})}if(!t)return a;a.then(u,p);function u(h){Xu(function(){t(null,h)},s._setTimeout||setTimeout)}function p(h){Xu(function(){t(h)},s._setTimeout||setTimeout)}};Ve.prototype.clearIndex=function(e){var t=this;return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(t.indexName)+"/clear",hostType:"write",callback:e})};Ve.prototype.getSettings=function(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={}),e=e||{};var n=encodeURIComponent(this.indexName);return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+n+"/settings?getVersion=2"+(e.advanced?"&advanced="+e.advanced:""),hostType:"read",callback:t})};Ve.prototype.searchSynonyms=function(e,t){return typeof e=="function"?(t=e,e={}):e===void 0&&(e={}),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/search",body:e,hostType:"read",callback:t})};function Iw(e,t,n){function r(i,o){var s={page:i||0,hitsPerPage:t||100},a=o||[];return e(s).then(function(c){var u=c.hits,p=c.nbHits,h=u.map(function(m){return delete m._highlightResult,m}),y=a.concat(h);return y.length<p?r(s.page+1,y):y})}return r().then(function(i){if(typeof n=="function"){n(i);return}return i})}Ve.prototype.exportSynonyms=function(e,t){return Iw(this.searchSynonyms.bind(this),e,t)};Ve.prototype.saveSynonym=function(e,t,n){typeof t=="function"?(n=t,t={}):t===void 0&&(t={}),t.forwardToSlaves!==void 0&&Ua();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/"+encodeURIComponent(e.objectID)+"?forwardToReplicas="+r,body:e,hostType:"write",callback:n})};Ve.prototype.getSynonym=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/"+encodeURIComponent(e),hostType:"read",callback:t})};Ve.prototype.deleteSynonym=function(e,t,n){typeof t=="function"?(n=t,t={}):t===void 0&&(t={}),t.forwardToSlaves!==void 0&&Ua();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/"+encodeURIComponent(e)+"?forwardToReplicas="+r,hostType:"write",callback:n})};Ve.prototype.clearSynonyms=function(e,t){typeof e=="function"?(t=e,e={}):e===void 0&&(e={}),e.forwardToSlaves!==void 0&&Ua();var n=e.forwardToSlaves||e.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/clear?forwardToReplicas="+n,hostType:"write",callback:t})};Ve.prototype.batchSynonyms=function(e,t,n){typeof t=="function"?(n=t,t={}):t===void 0&&(t={}),t.forwardToSlaves!==void 0&&Ua();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/batch?forwardToReplicas="+r+"&replaceExistingSynonyms="+(t.replaceExistingSynonyms?"true":"false"),hostType:"write",body:e,callback:n})};Ve.prototype.searchRules=function(e,t){return typeof e=="function"?(t=e,e={}):e===void 0&&(e={}),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/search",body:e,hostType:"read",callback:t})};Ve.prototype.exportRules=function(e,t){return Iw(this.searchRules.bind(this),e,t)};Ve.prototype.saveRule=function(e,t,n){if(typeof t=="function"?(n=t,t={}):t===void 0&&(t={}),!e.objectID)throw new Zu.AlgoliaSearchError("Missing or empty objectID field for rule");var r=t.forwardToReplicas===!0?"true":"false";return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/"+encodeURIComponent(e.objectID)+"?forwardToReplicas="+r,body:e,hostType:"write",callback:n})};Ve.prototype.getRule=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/"+encodeURIComponent(e),hostType:"read",callback:t})};Ve.prototype.deleteRule=function(e,t,n){typeof t=="function"?(n=t,t={}):t===void 0&&(t={});var r=t.forwardToReplicas===!0?"true":"false";return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/"+encodeURIComponent(e)+"?forwardToReplicas="+r,hostType:"write",callback:n})};Ve.prototype.clearRules=function(e,t){typeof e=="function"?(t=e,e={}):e===void 0&&(e={});var n=e.forwardToReplicas===!0?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/clear?forwardToReplicas="+n,hostType:"write",callback:t})};Ve.prototype.batchRules=function(e,t,n){typeof t=="function"?(n=t,t={}):t===void 0&&(t={});var r=t.forwardToReplicas===!0?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/batch?forwardToReplicas="+r+"&clearExistingRules="+(t.clearExistingRules===!0?"true":"false"),hostType:"write",body:e,callback:n})};Ve.prototype.exists=function(e){var t=this.getSettings().then(function(){return!0}).catch(function(n){if(n instanceof Zu.AlgoliaSearchError&&n.statusCode===404)return!1;throw n});if(typeof e!="function")return t;t.then(function(n){e(null,n)}).catch(function(n){e(n)})};Ve.prototype.findObject=function(e,t,n){t=t===void 0?{}:t;var r=t.paginate!==void 0?t.paginate:!0,i=t.query!==void 0?t.query:"",o=this,s=0,a=function(){return t.page=s,o.search(i,t).then(function(u){for(var p=u.hits,h=0;h<p.length;h++){var y=p[h];if(e(y))return{object:y,position:h,page:s}}if(s+=1,!r||s>=u.nbPages)throw new Zu.ObjectNotFound("Object not found");return a()})},c=a(s);if(n===void 0)return c;c.then(function(u){n(null,u)}).catch(function(u){n(u)})};Ve.prototype.getObjectPosition=function(e,t){for(var n=e.hits,r=0;r<n.length;r++)if(n[r].objectID===t)return r;return-1};Ve.prototype.setSettings=function(e,t,n){(arguments.length===1||typeof t=="function")&&(n=t,t={}),t.forwardToSlaves!==void 0&&Ua();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false",i=this;return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(i.indexName)+"/settings?forwardToReplicas="+r,hostType:"write",body:e,callback:n})};Ve.prototype.listUserKeys=Bn(function(e){return this.listApiKeys(e)},Jn("index.listUserKeys()","client.listApiKeys()"));Ve.prototype.listApiKeys=Bn(function(e){var t=this;return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(t.indexName)+"/keys",hostType:"read",callback:e})},Jn("index.listApiKeys()","client.listApiKeys()"));Ve.prototype.getUserKeyACL=Bn(function(e,t){return this.getApiKey(e,t)},Jn("index.getUserKeyACL()","client.getApiKey()"));Ve.prototype.getApiKey=Bn(function(e,t){var n=this;return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/keys/"+e,hostType:"read",callback:t})},Jn("index.getApiKey()","client.getApiKey()"));Ve.prototype.deleteUserKey=Bn(function(e,t){return this.deleteApiKey(e,t)},Jn("index.deleteUserKey()","client.deleteApiKey()"));Ve.prototype.deleteApiKey=Bn(function(e,t){var n=this;return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(n.indexName)+"/keys/"+e,hostType:"write",callback:t})},Jn("index.deleteApiKey()","client.deleteApiKey()"));Ve.prototype.addUserKey=Bn(function(e,t,n){return this.addApiKey(e,t,n)},Jn("index.addUserKey()","client.addApiKey()"));Ve.prototype.addApiKey=Bn(function(e,t,n){var r=zn(),i="Usage: index.addApiKey(arrayOfAcls[, params, callback])";if(!r(e))throw new Error(i);(arguments.length===1||typeof t=="function")&&(n=t,t=null);var o={acl:e};return t&&(o.validity=t.validity,o.maxQueriesPerIPPerHour=t.maxQueriesPerIPPerHour,o.maxHitsPerQuery=t.maxHitsPerQuery,o.description=t.description,t.queryParameters&&(o.queryParameters=this.as._getSearchParams(t.queryParameters,"")),o.referers=t.referers),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys",body:o,hostType:"write",callback:n})},Jn("index.addApiKey()","client.addApiKey()"));Ve.prototype.addUserKeyWithValidity=Bn(function(t,n,r){return this.addApiKey(t,n,r)},Jn("index.addUserKeyWithValidity()","client.addApiKey()"));Ve.prototype.updateUserKey=Bn(function(e,t,n,r){return this.updateApiKey(e,t,n,r)},Jn("index.updateUserKey()","client.updateApiKey()"));Ve.prototype.updateApiKey=Bn(function(e,t,n,r){var i=zn(),o="Usage: index.updateApiKey(key, arrayOfAcls[, params, callback])";if(!i(t))throw new Error(o);(arguments.length===2||typeof n=="function")&&(r=n,n=null);var s={acl:t};return n&&(s.validity=n.validity,s.maxQueriesPerIPPerHour=n.maxQueriesPerIPPerHour,s.maxHitsPerQuery=n.maxHitsPerQuery,s.description=n.description,n.queryParameters&&(s.queryParameters=this.as._getSearchParams(n.queryParameters,"")),s.referers=n.referers),this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys/"+e,body:s,hostType:"write",callback:r})},Jn("index.updateApiKey()","client.updateApiKey()"))});var Nw=Fe((wz,Dw)=>{w();var La=1e3,Fa=La*60,Ma=Fa*60,za=Ma*24,kP=za*365.25;Dw.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return AP(e);if(n==="number"&&isNaN(e)===!1)return t.long?OP(e):IP(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function AP(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*kP;case"days":case"day":case"d":return n*za;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ma;case"minutes":case"minute":case"mins":case"min":case"m":return n*Fa;case"seconds":case"second":case"secs":case"sec":case"s":return n*La;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function IP(e){return e>=za?Math.round(e/za)+"d":e>=Ma?Math.round(e/Ma)+"h":e>=Fa?Math.round(e/Fa)+"m":e>=La?Math.round(e/La)+"s":e+"ms"}function OP(e){return el(e,za,"day")||el(e,Ma,"hour")||el(e,Fa,"minute")||el(e,La,"second")||e+" ms"}function el(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}});var Lw=Fe((gt,Uw)=>{w();gt=Uw.exports=rh.debug=rh.default=rh;gt.coerce=LP;gt.disable=NP;gt.enable=DP;gt.enabled=UP;gt.humanize=Nw();gt.names=[];gt.skips=[];gt.formatters={};var nh;function PP(e){var t=0,n;for(n in e)t=(t<<5)-t+e.charCodeAt(n),t|=0;return gt.colors[Math.abs(t)%gt.colors.length]}function rh(e){function t(){if(t.enabled){var n=t,r=+new Date,i=r-(nh||r);n.diff=i,n.prev=nh,n.curr=r,nh=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=gt.coerce(o[0]),typeof o[0]!="string"&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(u,p){if(u==="%%")return u;a++;var h=gt.formatters[p];if(typeof h=="function"){var y=o[a];u=h.call(n,y),o.splice(a,1),a--}return u}),gt.formatArgs.call(n,o);var c=t.log||gt.log||console.log.bind(console);c.apply(n,o)}}return t.namespace=e,t.enabled=gt.enabled(e),t.useColors=gt.useColors(),t.color=PP(e),typeof gt.init=="function"&&gt.init(t),t}function DP(e){gt.save(e),gt.names=[],gt.skips=[];for(var t=(typeof e=="string"?e:"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&(e=t[r].replace(/\*/g,".*?"),e[0]==="-"?gt.skips.push(new RegExp("^"+e.substr(1)+"$")):gt.names.push(new RegExp("^"+e+"$")))}function NP(){gt.enable("")}function UP(e){var t,n;for(t=0,n=gt.skips.length;t<n;t++)if(gt.skips[t].test(e))return!1;for(t=0,n=gt.names.length;t<n;t++)if(gt.names[t].test(e))return!0;return!1}function LP(e){return e instanceof Error?e.stack||e.message:e}});var Ba=Fe((Dn,Mw)=>{w();Dn=Mw.exports=Lw();Dn.log=zP;Dn.formatArgs=MP;Dn.save=BP;Dn.load=Fw;Dn.useColors=FP;Dn.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:jP();Dn.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function FP(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}Dn.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function MP(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+Dn.humanize(this.diff),!!t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(o){o!=="%%"&&(r++,o==="%c"&&(i=r))}),e.splice(i,0,n)}}function zP(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function BP(e){try{e==null?Dn.storage.removeItem("debug"):Dn.storage.debug=e}catch(t){}}function Fw(){var e;try{e=Dn.storage.debug}catch(t){}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}Dn.enable(Fw());function jP(){try{return window.localStorage}catch(e){}}});var Gw=Fe((Rz,qw)=>{w();var qP=Ba()("algoliasearch:src/hostIndexState.js"),as="algoliasearch-client-js",ja,ih={state:{},set:function(e,t){return this.state[e]=t,this.state[e]},get:function(e){return this.state[e]||null}},GP={set:function(e,t){ih.set(e,t);try{var n=JSON.parse(window.localStorage[as]);return n[e]=t,window.localStorage[as]=JSON.stringify(n),n[e]}catch(r){return zw(e,r)}},get:function(e){try{return JSON.parse(window.localStorage[as])[e]||null}catch(t){return zw(e,t)}}};function zw(e,t){return qP("localStorage failed with",t),KP(),ja=ih,ja.get(e)}ja=jw()?GP:ih;qw.exports={get:Bw,set:Bw,supportsLocalStorage:jw};function Bw(e,t){return arguments.length===1?ja.get(e):ja.set(e,t)}function jw(){try{return"localStorage"in window&&window.localStorage!==null?(window.localStorage[as]||window.localStorage.setItem(as,JSON.stringify({})),!0):!1}catch(e){return!1}}function KP(){try{window.localStorage.removeItem(as)}catch(e){}}});var Ww=Fe((Tz,Yw)=>{w();Yw.exports=mt;var kr=Zi(),Kw=th(),HP=eh(),$w=Gw(),VP=500,$P=60*2*1e3;function mt(e,t,n){var r=Ba()("algoliasearch"),i=Qr(),o=zn(),s=eo(),a="Usage: algoliasearch(applicationID, apiKey, opts)";if(n._allowEmptyCredentials!==!0&&!e)throw new kr.AlgoliaSearchError("Please provide an application ID. "+a);if(n._allowEmptyCredentials!==!0&&!t)throw new kr.AlgoliaSearchError("Please provide an API key. "+a);this.applicationID=e,this.apiKey=t,this.hosts={read:[],write:[]},n=n||{},this._timeouts=n.timeouts||{connect:1*1e3,read:2*1e3,write:30*1e3},n.timeout&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=n.timeout);var c=n.protocol||"https:";if(/:$/.test(c)||(c=c+":"),c!=="http:"&&c!=="https:")throw new kr.AlgoliaSearchError("protocol must be `http:` or `https:` (was `"+n.protocol+"`)");if(this._checkAppIdData(),n.hosts)o(n.hosts)?(this.hosts.read=i(n.hosts),this.hosts.write=i(n.hosts)):(this.hosts.read=i(n.hosts.read),this.hosts.write=i(n.hosts.write));else{var u=s(this._shuffleResult,function(h){return e+"-"+h+".algolianet.com"}),p=(n.dsn===!1?"":"-dsn")+".algolia.net";this.hosts.read=[this.applicationID+p].concat(u),this.hosts.write=[this.applicationID+".algolia.net"].concat(u)}this.hosts.read=s(this.hosts.read,Hw(c)),this.hosts.write=s(this.hosts.write,Hw(c)),this.extraHeaders={},this.cache=n._cache||{},this._ua=n._ua,this._useCache=n._useCache===void 0||n._cache?!0:n._useCache,this._useRequestCache=this._useCache&&n._useRequestCache,this._useFallback=n.useFallback===void 0?!0:n.useFallback,this._setTimeout=n._setTimeout,r("init done, %j",this)}mt.prototype.initIndex=function(e){return new HP(this,e)};mt.prototype.setExtraHeader=function(e,t){this.extraHeaders[e.toLowerCase()]=t};mt.prototype.getExtraHeader=function(e){return this.extraHeaders[e.toLowerCase()]};mt.prototype.unsetExtraHeader=function(e){delete this.extraHeaders[e.toLowerCase()]};mt.prototype.addAlgoliaAgent=function(e){var t="; "+e;this._ua.indexOf(t)===-1&&(this._ua+=t)};mt.prototype._jsonRequest=function(e){this._checkAppIdData();var t=Ba()("algoliasearch:"+e.url),n,r,i=e.additionalUA||"",o=e.cache,s=this,a=0,c=!1,u=s._useFallback&&s._request.fallback&&e.fallback,p;this.apiKey.length>VP&&e.body!==void 0&&(e.body.params!==void 0||e.body.requests!==void 0)?(e.body.apiKey=this.apiKey,p=this._computeRequestHeaders({additionalUA:i,withApiKey:!1,headers:e.headers})):p=this._computeRequestHeaders({additionalUA:i,headers:e.headers}),e.body!==void 0&&(n=oh(e.body)),t("request start");var h=[];function y(I,N){s._checkAppIdData();var P=new Date;if(s._useCache&&!s._useRequestCache&&(r=e.url),s._useCache&&!s._useRequestCache&&n&&(r+="_body_"+N.body),m(!s._useRequestCache,o,r)){t("serving response from cache");var F=o[r];return s._promise.resolve({body:JSON.parse(F),responseText:F})}if(a>=s.hosts[e.hostType].length)return!u||c?(t("could not get any response"),s._promise.reject(new kr.AlgoliaSearchError("Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue. Application id was: "+s.applicationID,{debugData:h}))):(t("switching to fallback"),a=0,N.method=e.fallback.method,N.url=e.fallback.url,N.jsonBody=e.fallback.body,N.jsonBody&&(N.body=oh(N.jsonBody)),p=s._computeRequestHeaders({additionalUA:i,headers:e.headers}),N.timeouts=s._getTimeoutsForRequest(e.hostType),s._setHostIndexByType(0,e.hostType),c=!0,y(s._request.fallback,N));var K=s._getHostByType(e.hostType),H=K+N.url,z={body:N.body,jsonBody:N.jsonBody,method:N.method,headers:p,timeouts:N.timeouts,debug:t,forceAuthHeaders:N.forceAuthHeaders};return t("method: %s, url: %s, headers: %j, timeouts: %d",z.method,H,z.headers,z.timeouts),I===s._request.fallback&&t("using fallback"),I.call(s,H,z).then(C,fe);function C(T){var pe=T&&T.body&&T.body.message&&T.body.status||T.statusCode||T&&T.body&&200;t("received response: statusCode: %s, computed statusCode: %d, headers: %j",T.statusCode,pe,T.headers);var Ce=Math.floor(pe/100)===2,Ge=new Date;if(h.push({currentHost:K,headers:Vw(p),content:n||null,contentLength:n!==void 0?n.length:null,method:N.method,timeouts:N.timeouts,url:N.url,startTime:P,endTime:Ge,duration:Ge-P,statusCode:pe}),Ce)return s._useCache&&!s._useRequestCache&&o&&(o[r]=T.responseText),{responseText:T.responseText,body:T.body};var $e=Math.floor(pe/100)!==4;if($e)return a+=1,oe();t("unrecoverable error");var Ue=new kr.AlgoliaSearchError(T.body&&T.body.message,{debugData:h,statusCode:pe});return s._promise.reject(Ue)}function fe(T){t("error: %s, stack: %s",T.message,T.stack);var pe=new Date;return h.push({currentHost:K,headers:Vw(p),content:n||null,contentLength:n!==void 0?n.length:null,method:N.method,timeouts:N.timeouts,url:N.url,startTime:P,endTime:pe,duration:pe-P}),T instanceof kr.AlgoliaSearchError||(T=new kr.Unknown(T&&T.message,T)),a+=1,T instanceof kr.Unknown||T instanceof kr.UnparsableJSON||a>=s.hosts[e.hostType].length&&(c||!u)?(T.debugData=h,s._promise.reject(T)):T instanceof kr.RequestTimeout?Re():oe()}function oe(){return t("retrying request"),s._incrementHostIndex(e.hostType),y(I,N)}function Re(){return t("retrying request with higher timeout"),s._incrementHostIndex(e.hostType),s._incrementTimeoutMultipler(),N.timeouts=s._getTimeoutsForRequest(e.hostType),y(I,N)}}function m(I,N,P){return s._useCache&&I&&N&&N[P]!==void 0}function b(I,N){if(m(s._useRequestCache,o,r)&&I.catch(function(){delete o[r]}),typeof e.callback=="function")I.then(function(F){Kw(function(){e.callback(null,N(F))},s._setTimeout||setTimeout)},function(F){Kw(function(){e.callback(F)},s._setTimeout||setTimeout)});else return I.then(N)}if(s._useCache&&s._useRequestCache&&(r=e.url),s._useCache&&s._useRequestCache&&n&&(r+="_body_"+n),m(s._useRequestCache,o,r)){t("serving request from cache");var R=o[r],D=typeof R.then!="function"?s._promise.resolve({responseText:R}):R;return b(D,function(I){return JSON.parse(I.responseText)})}var E=y(s._request,{url:e.url,method:e.method,body:n,jsonBody:e.body,timeouts:s._getTimeoutsForRequest(e.hostType),forceAuthHeaders:e.forceAuthHeaders});return s._useCache&&s._useRequestCache&&o&&(o[r]=E),b(E,function(I){return I.body})};mt.prototype._getSearchParams=function(e,t){if(e==null)return t;for(var n in e)n!==null&&e[n]!==void 0&&e.hasOwnProperty(n)&&(t+=t===""?"":"&",t+=n+"="+encodeURIComponent(Object.prototype.toString.call(e[n])==="[object Array]"?oh(e[n]):e[n]));return t};mt.prototype._computeRequestHeaders=function(e){var t=Xi(),n=e.additionalUA?this._ua+"; "+e.additionalUA:this._ua,r={"x-algolia-agent":n,"x-algolia-application-id":this.applicationID};return e.withApiKey!==!1&&(r["x-algolia-api-key"]=this.apiKey),this.userToken&&(r["x-algolia-usertoken"]=this.userToken),this.securityTags&&(r["x-algolia-tagfilters"]=this.securityTags),t(this.extraHeaders,function(o,s){r[s]=o}),e.headers&&t(e.headers,function(o,s){r[s]=o}),r};mt.prototype.search=function(e,t,n){var r=zn(),i=eo(),o="Usage: client.search(arrayOfQueries[, callback])";if(!r(e))throw new Error(o);typeof t=="function"?(n=t,t={}):t===void 0&&(t={});var s=this,a={requests:i(e,function(h){var y="";return h.query!==void 0&&(y+="query="+encodeURIComponent(h.query)),{indexName:h.indexName,params:s._getSearchParams(h.params,y)}})},c=i(a.requests,function(h,y){return y+"="+encodeURIComponent("/1/indexes/"+encodeURIComponent(h.indexName)+"?"+h.params)}).join("&"),u="/1/indexes/*/queries";return t.strategy!==void 0&&(a.strategy=t.strategy),this._jsonRequest({cache:this.cache,method:"POST",url:u,body:a,hostType:"read",fallback:{method:"GET",url:"/1/indexes/*",body:{params:c}},callback:n})};mt.prototype.searchForFacetValues=function(e){var t=zn(),n=eo(),r="Usage: client.searchForFacetValues([{indexName, params: {facetName, facetQuery, ...params}}, ...queries])";if(!t(e))throw new Error(r);var i=this;return i._promise.all(n(e,function(s){if(!s||s.indexName===void 0||s.params.facetName===void 0||s.params.facetQuery===void 0)throw new Error(r);var a=Qr(),c=Zp(),u=s.indexName,p=s.params,h=p.facetName,y=c(a(p),function(b){return b==="facetName"}),m=i._getSearchParams(y,"");return i._jsonRequest({cache:i.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(u)+"/facets/"+encodeURIComponent(h)+"/query",hostType:"read",body:{params:m}})}))};mt.prototype.setSecurityTags=function(e){if(Object.prototype.toString.call(e)==="[object Array]"){for(var t=[],n=0;n<e.length;++n)if(Object.prototype.toString.call(e[n])==="[object Array]"){for(var r=[],i=0;i<e[n].length;++i)r.push(e[n][i]);t.push("("+r.join(",")+")")}else t.push(e[n]);e=t.join(",")}this.securityTags=e};mt.prototype.setUserToken=function(e){this.userToken=e};mt.prototype.clearCache=function(){this.cache={}};mt.prototype.setRequestTimeout=function(e){e&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=e)};mt.prototype.setTimeouts=function(e){this._timeouts=e};mt.prototype.getTimeouts=function(){return this._timeouts};mt.prototype._getAppIdData=function(){var e=$w.get(this.applicationID);return e!==null&&this._cacheAppIdData(e),e};mt.prototype._setAppIdData=function(e){return e.lastChange=new Date().getTime(),this._cacheAppIdData(e),$w.set(this.applicationID,e)};mt.prototype._checkAppIdData=function(){var e=this._getAppIdData(),t=new Date().getTime();return e===null||t-e.lastChange>$P?this._resetInitialAppIdData(e):e};mt.prototype._resetInitialAppIdData=function(e){var t=e||{};return t.hostIndexes={read:0,write:0},t.timeoutMultiplier=1,t.shuffleResult=t.shuffleResult||YP([1,2,3]),this._setAppIdData(t)};mt.prototype._cacheAppIdData=function(e){this._hostIndexes=e.hostIndexes,this._timeoutMultiplier=e.timeoutMultiplier,this._shuffleResult=e.shuffleResult};mt.prototype._partialAppIdDataUpdate=function(e){var t=Xi(),n=this._getAppIdData();return t(e,function(r,i){n[i]=r}),this._setAppIdData(n)};mt.prototype._getHostByType=function(e){return this.hosts[e][this._getHostIndexByType(e)]};mt.prototype._getTimeoutMultiplier=function(){return this._timeoutMultiplier};mt.prototype._getHostIndexByType=function(e){return this._hostIndexes[e]};mt.prototype._setHostIndexByType=function(e,t){var n=Qr(),r=n(this._hostIndexes);return r[t]=e,this._partialAppIdDataUpdate({hostIndexes:r}),e};mt.prototype._incrementHostIndex=function(e){return this._setHostIndexByType((this._getHostIndexByType(e)+1)%this.hosts[e].length,e)};mt.prototype._incrementTimeoutMultipler=function(){var e=Math.max(this._timeoutMultiplier+1,4);return this._partialAppIdDataUpdate({timeoutMultiplier:e})};mt.prototype._getTimeoutsForRequest=function(e){return{connect:this._timeouts.connect*this._timeoutMultiplier,complete:this._timeouts[e]*this._timeoutMultiplier}};function Hw(e){return function(n){return e+"//"+n.toLowerCase()}}function oh(e){if(Array.prototype.toJSON===void 0)return JSON.stringify(e);var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e);return Array.prototype.toJSON=t,n}function YP(e){for(var t=e.length,n,r;t!==0;)r=Math.floor(Math.random()*t),t-=1,n=e[t],e[t]=e[r],e[r]=n;return e}function Vw(e){var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;n==="x-algolia-api-key"||n==="x-algolia-application-id"?r="**hidden for security purposes**":r=e[n],t[n]=r}return t}});var Qw=Fe((Az,Jw)=>{w();Jw.exports=JP;var WP=sh();function JP(e,t,n){var r={};return n=n||{},n.hosts=n.hosts||["analytics.algolia.com","analytics.algolia.com","analytics.algolia.com","analytics.algolia.com"],n.protocol=n.protocol||"https:",r.as=WP(e,t,n),r.getABTests=function(i,o){var s=s||{},a=s.offset||0,c=s.limit||10;return this.as._jsonRequest({method:"GET",url:"/2/abtests?offset="+encodeURIComponent(a)+"&limit="+encodeURIComponent(c),hostType:"read",forceAuthHeaders:!0,callback:o})},r.getABTest=function(i,o){return this.as._jsonRequest({method:"GET",url:"/2/abtests/"+encodeURIComponent(i),hostType:"read",forceAuthHeaders:!0,callback:o})},r.addABTest=function(i,o){return this.as._jsonRequest({method:"POST",url:"/2/abtests",body:i,hostType:"read",forceAuthHeaders:!0,callback:o})},r.stopABTest=function(i,o){return this.as._jsonRequest({method:"POST",url:"/2/abtests/"+encodeURIComponent(i)+"/stop",hostType:"read",forceAuthHeaders:!0,callback:o})},r.deleteABTest=function(i,o){return this.as._jsonRequest({method:"DELETE",url:"/2/abtests/"+encodeURIComponent(i),hostType:"write",forceAuthHeaders:!0,callback:o})},r.waitTask=function(i,o,s){return this.as.initIndex(i).waitTask(o,s)},r}});var eS=Fe((Oz,Zw)=>{w();Zw.exports=Qe;var QP=Pw(),Zr=Yu(),ei=Wu(),Xw=Ww(),XP=ko(),qa=Zi();function Qe(){Xw.apply(this,arguments)}XP(Qe,Xw);Qe.prototype.deleteIndex=function(e,t){return this._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(e),hostType:"write",callback:t})};Qe.prototype.moveIndex=function(e,t,n){var r={operation:"move",destination:t};return this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:r,hostType:"write",callback:n})};Qe.prototype.copyIndex=function(e,t,n,r){var i={operation:"copy",destination:t},o=r;if(typeof n=="function")o=n;else if(Array.isArray(n)&&n.length>0)i.scope=n;else if(typeof n<"u")throw new Error("the scope given to `copyIndex` was not an array with settings, synonyms or rules");return this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:i,hostType:"write",callback:o})};Qe.prototype.getLogs=function(e,t,n){var r=Qr(),i={};return typeof e=="object"?(i=r(e),n=t):arguments.length===0||typeof e=="function"?n=e:arguments.length===1||typeof t=="function"?(n=t,i.offset=e):(i.offset=e,i.length=t),i.offset===void 0&&(i.offset=0),i.length===void 0&&(i.length=10),this._jsonRequest({method:"GET",url:"/1/logs?"+this._getSearchParams(i,""),hostType:"read",callback:n})};Qe.prototype.listIndexes=function(e,t){var n="";return e===void 0||typeof e=="function"?t=e:n="?page="+e,this._jsonRequest({method:"GET",url:"/1/indexes"+n,hostType:"read",callback:t})};Qe.prototype.initIndex=function(e){return new QP(this,e)};Qe.prototype.initAnalytics=function(e){var t=Qw();return t(this.applicationID,this.apiKey,e)};Qe.prototype.listUserKeys=Zr(function(e){return this.listApiKeys(e)},ei("client.listUserKeys()","client.listApiKeys()"));Qe.prototype.listApiKeys=function(e){return this._jsonRequest({method:"GET",url:"/1/keys",hostType:"read",callback:e})};Qe.prototype.getUserKeyACL=Zr(function(e,t){return this.getApiKey(e,t)},ei("client.getUserKeyACL()","client.getApiKey()"));Qe.prototype.getApiKey=function(e,t){return this._jsonRequest({method:"GET",url:"/1/keys/"+e,hostType:"read",callback:t})};Qe.prototype.deleteUserKey=Zr(function(e,t){return this.deleteApiKey(e,t)},ei("client.deleteUserKey()","client.deleteApiKey()"));Qe.prototype.deleteApiKey=function(e,t){return this._jsonRequest({method:"DELETE",url:"/1/keys/"+e,hostType:"write",callback:t})};Qe.prototype.restoreApiKey=function(e,t){return this._jsonRequest({method:"POST",url:"/1/keys/"+e+"/restore",hostType:"write",callback:t})};Qe.prototype.addUserKey=Zr(function(e,t,n){return this.addApiKey(e,t,n)},ei("client.addUserKey()","client.addApiKey()"));Qe.prototype.addApiKey=function(e,t,n){var r=zn(),i="Usage: client.addApiKey(arrayOfAcls[, params, callback])";if(!r(e))throw new Error(i);(arguments.length===1||typeof t=="function")&&(n=t,t=null);var o={acl:e};return t&&(o.validity=t.validity,o.maxQueriesPerIPPerHour=t.maxQueriesPerIPPerHour,o.maxHitsPerQuery=t.maxHitsPerQuery,o.indexes=t.indexes,o.description=t.description,t.queryParameters&&(o.queryParameters=this._getSearchParams(t.queryParameters,"")),o.referers=t.referers),this._jsonRequest({method:"POST",url:"/1/keys",body:o,hostType:"write",callback:n})};Qe.prototype.addUserKeyWithValidity=Zr(function(e,t,n){return this.addApiKey(e,t,n)},ei("client.addUserKeyWithValidity()","client.addApiKey()"));Qe.prototype.updateUserKey=Zr(function(e,t,n,r){return this.updateApiKey(e,t,n,r)},ei("client.updateUserKey()","client.updateApiKey()"));Qe.prototype.updateApiKey=function(e,t,n,r){var i=zn(),o="Usage: client.updateApiKey(key, arrayOfAcls[, params, callback])";if(!i(t))throw new Error(o);(arguments.length===2||typeof n=="function")&&(r=n,n=null);var s={acl:t};return n&&(s.validity=n.validity,s.maxQueriesPerIPPerHour=n.maxQueriesPerIPPerHour,s.maxHitsPerQuery=n.maxHitsPerQuery,s.indexes=n.indexes,s.description=n.description,n.queryParameters&&(s.queryParameters=this._getSearchParams(n.queryParameters,"")),s.referers=n.referers),this._jsonRequest({method:"PUT",url:"/1/keys/"+e,body:s,hostType:"write",callback:r})};Qe.prototype.startQueriesBatch=Zr(function(){this._batch=[]},ei("client.startQueriesBatch()","client.search()"));Qe.prototype.addQueryInBatch=Zr(function(t,n,r){this._batch.push({indexName:t,query:n,params:r})},ei("client.addQueryInBatch()","client.search()"));Qe.prototype.sendQueriesBatch=Zr(function(t){return this.search(this._batch,t)},ei("client.sendQueriesBatch()","client.search()"));Qe.prototype.batch=function(e,t){var n=zn(),r="Usage: client.batch(operations[, callback])";if(!n(e))throw new Error(r);return this._jsonRequest({method:"POST",url:"/1/indexes/*/batch",body:{requests:e},hostType:"write",callback:t})};Qe.prototype.assignUserID=function(e,t){if(!e.userID||!e.cluster)throw new qa.AlgoliaSearchError("You have to provide both a userID and cluster",e);return this._jsonRequest({method:"POST",url:"/1/clusters/mapping",hostType:"write",body:{cluster:e.cluster},callback:t,headers:{"x-algolia-user-id":e.userID}})};Qe.prototype.assignUserIDs=function(e,t){if(!e.userIDs||!e.cluster)throw new qa.AlgoliaSearchError("You have to provide both an array of userIDs and cluster",e);return this._jsonRequest({method:"POST",url:"/1/clusters/mapping/batch",hostType:"write",body:{cluster:e.cluster,users:e.userIDs},callback:t})};Qe.prototype.getTopUserID=function(e){return this._jsonRequest({method:"GET",url:"/1/clusters/mapping/top",hostType:"read",callback:e})};Qe.prototype.getUserID=function(e,t){if(!e.userID)throw new qa.AlgoliaSearchError("You have to provide a userID",{debugData:e});return this._jsonRequest({method:"GET",url:"/1/clusters/mapping/"+e.userID,hostType:"read",callback:t})};Qe.prototype.listClusters=function(e){return this._jsonRequest({method:"GET",url:"/1/clusters",hostType:"read",callback:e})};Qe.prototype.listUserIDs=function(e,t){return this._jsonRequest({method:"GET",url:"/1/clusters/mapping",body:e,hostType:"read",callback:t})};Qe.prototype.removeUserID=function(e,t){if(!e.userID)throw new qa.AlgoliaSearchError("You have to provide a userID",{debugData:e});return this._jsonRequest({method:"DELETE",url:"/1/clusters/mapping",hostType:"write",callback:t,headers:{"x-algolia-user-id":e.userID}})};Qe.prototype.searchUserIDs=function(e,t){return this._jsonRequest({method:"POST",url:"/1/clusters/mapping/search",body:e,hostType:"read",callback:t})};Qe.prototype.setPersonalizationStrategy=function(e,t){return this._jsonRequest({method:"POST",url:"/1/recommendation/personalization/strategy",body:e,hostType:"write",callback:t})};Qe.prototype.getPersonalizationStrategy=function(e){return this._jsonRequest({method:"GET",url:"/1/recommendation/personalization/strategy",hostType:"read",callback:e})};Qe.prototype.destroy=no;Qe.prototype.enableRateLimitForward=no;Qe.prototype.disableRateLimitForward=no;Qe.prototype.useSecuredAPIKey=no;Qe.prototype.disableSecuredAPIKey=no;Qe.prototype.generateSecuredApiKey=no;Qe.prototype.getSecuredApiKeyRemainingValidity=no;function no(){var e=`Not implemented in this environment.
If you feel this is a mistake, write to support@algolia.com`;throw new qa.AlgoliaSearchError(e)}});var nS=Fe((Dz,tS)=>{w();var Ga;typeof window<"u"||typeof window<"u"?Ga=window:typeof self<"u"?Ga=self:Ga={};tS.exports=Ga});var rS=Fe((ah,ch)=>{w();(function(e,t){typeof ah=="object"&&typeof ch<"u"?ch.exports=t():typeof define=="function"&&define.amd?define(t):e.ES6Promise=t()})(ah,function(){"use strict";function e(L){var ne=typeof L;return L!==null&&(ne==="object"||ne==="function")}function t(L){return typeof L=="function"}var n=void 0;Array.isArray?n=Array.isArray:n=function(L){return Object.prototype.toString.call(L)==="[object Array]"};var r=n,i=0,o=void 0,s=void 0,a=function(ne,J){P[i]=ne,P[i+1]=J,i+=2,i===2&&(s?s(F):H())};function c(L){s=L}function u(L){a=L}var p=typeof window<"u"?window:void 0,h=p||{},y=h.MutationObserver||h.WebKitMutationObserver,m=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",b=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function R(){return function(){return process.nextTick(F)}}function D(){return typeof o<"u"?function(){o(F)}:N()}function E(){var L=0,ne=new y(F),J=document.createTextNode("");return ne.observe(J,{characterData:!0}),function(){J.data=L=++L%2}}function I(){var L=new MessageChannel;return L.port1.onmessage=F,function(){return L.port2.postMessage(0)}}function N(){var L=setTimeout;return function(){return L(F,1)}}var P=new Array(1e3);function F(){for(var L=0;L<i;L+=2){var ne=P[L],J=P[L+1];ne(J),P[L]=void 0,P[L+1]=void 0}i=0}function K(){try{var L=Function("return this")().require("vertx");return o=L.runOnLoop||L.runOnContext,D()}catch(ne){return N()}}var H=void 0;m?H=R():y?H=E():b?H=I():p===void 0&&typeof qg=="function"?H=K():H=N();function z(L,ne){var J=this,_e=new this.constructor(oe);_e[fe]===void 0&&Gt(_e);var Le=J._state;if(Le){var Te=arguments[Le-1];a(function(){return ze(Le,_e,Te,J._result)})}else pn(J,_e,L,ne);return _e}function C(L){var ne=this;if(L&&typeof L=="object"&&L.constructor===ne)return L;var J=new ne(oe);return Tt(J,L),J}var fe=Math.random().toString(36).substring(2);function oe(){}var Re=void 0,T=1,pe=2;function Ce(){return new TypeError("You cannot resolve a promise with itself")}function Ge(){return new TypeError("A promises callback cannot return that same promise.")}function $e(L,ne,J,_e){try{L.call(ne,J,_e)}catch(Le){return Le}}function Ue(L,ne,J){a(function(_e){var Le=!1,Te=$e(J,ne,function(ft){Le||(Le=!0,ne!==ft?Tt(_e,ft):kt(_e,ft))},function(ft){Le||(Le=!0,et(_e,ft))},"Settle: "+(_e._label||" unknown promise"));!Le&&Te&&(Le=!0,et(_e,Te))},L)}function Ut(L,ne){ne._state===T?kt(L,ne._result):ne._state===pe?et(L,ne._result):pn(ne,void 0,function(J){return Tt(L,J)},function(J){return et(L,J)})}function wn(L,ne,J){ne.constructor===L.constructor&&J===z&&ne.constructor.resolve===C?Ut(L,ne):J===void 0?kt(L,ne):t(J)?Ue(L,ne,J):kt(L,ne)}function Tt(L,ne){if(L===ne)et(L,Ce());else if(e(ne)){var J=void 0;try{J=ne.then}catch(_e){et(L,_e);return}wn(L,ne,J)}else kt(L,ne)}function jt(L){L._onerror&&L._onerror(L._result),Ht(L)}function kt(L,ne){L._state===Re&&(L._result=ne,L._state=T,L._subscribers.length!==0&&a(Ht,L))}function et(L,ne){L._state===Re&&(L._state=pe,L._result=ne,a(jt,L))}function pn(L,ne,J,_e){var Le=L._subscribers,Te=Le.length;L._onerror=null,Le[Te]=ne,Le[Te+T]=J,Le[Te+pe]=_e,Te===0&&L._state&&a(Ht,L)}function Ht(L){var ne=L._subscribers,J=L._state;if(ne.length!==0){for(var _e=void 0,Le=void 0,Te=L._result,ft=0;ft<ne.length;ft+=3)_e=ne[ft],Le=ne[ft+J],_e?ze(J,_e,Le,Te):Le(Te);L._subscribers.length=0}}function ze(L,ne,J,_e){var Le=t(J),Te=void 0,ft=void 0,Sn=!0;if(Le){try{Te=J(_e)}catch(Qt){Sn=!1,ft=Qt}if(ne===Te){et(ne,Ge());return}}else Te=_e;ne._state!==Re||(Le&&Sn?Tt(ne,Te):Sn===!1?et(ne,ft):L===T?kt(ne,Te):L===pe&&et(ne,Te))}function At(L,ne){try{ne(function(_e){Tt(L,_e)},function(_e){et(L,_e)})}catch(J){et(L,J)}}var qt=0;function Lt(){return qt++}function Gt(L){L[fe]=qt++,L._state=void 0,L._result=void 0,L._subscribers=[]}function tt(){return new Error("Array Methods must be provided an Array")}var j=function(){function L(ne,J){this._instanceConstructor=ne,this.promise=new ne(oe),this.promise[fe]||Gt(this.promise),r(J)?(this.length=J.length,this._remaining=J.length,this._result=new Array(this.length),this.length===0?kt(this.promise,this._result):(this.length=this.length||0,this._enumerate(J),this._remaining===0&&kt(this.promise,this._result))):et(this.promise,tt())}return L.prototype._enumerate=function(J){for(var _e=0;this._state===Re&&_e<J.length;_e++)this._eachEntry(J[_e],_e)},L.prototype._eachEntry=function(J,_e){var Le=this._instanceConstructor,Te=Le.resolve;if(Te===C){var ft=void 0,Sn=void 0,Qt=!1;try{ft=J.then}catch(an){Qt=!0,Sn=an}if(ft===z&&J._state!==Re)this._settledAt(J._state,_e,J._result);else if(typeof ft!="function")this._remaining--,this._result[_e]=J;else if(Le===ie){var Be=new Le(oe);Qt?et(Be,Sn):wn(Be,J,ft),this._willSettleAt(Be,_e)}else this._willSettleAt(new Le(function(an){return an(J)}),_e)}else this._willSettleAt(Te(J),_e)},L.prototype._settledAt=function(J,_e,Le){var Te=this.promise;Te._state===Re&&(this._remaining--,J===pe?et(Te,Le):this._result[_e]=Le),this._remaining===0&&kt(Te,this._result)},L.prototype._willSettleAt=function(J,_e){var Le=this;pn(J,void 0,function(Te){return Le._settledAt(T,_e,Te)},function(Te){return Le._settledAt(pe,_e,Te)})},L}();function U(L){return new j(this,L).promise}function A(L){var ne=this;return r(L)?new ne(function(J,_e){for(var Le=L.length,Te=0;Te<Le;Te++)ne.resolve(L[Te]).then(J,_e)}):new ne(function(J,_e){return _e(new TypeError("You must pass an array to race."))})}function B(L){var ne=this,J=new ne(oe);return et(J,L),J}function se(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ye(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ie=function(){function L(ne){this[fe]=Lt(),this._result=this._state=void 0,this._subscribers=[],oe!==ne&&(typeof ne!="function"&&se(),this instanceof L?At(this,ne):ye())}return L.prototype.catch=function(J){return this.then(null,J)},L.prototype.finally=function(J){var _e=this,Le=_e.constructor;return t(J)?_e.then(function(Te){return Le.resolve(J()).then(function(){return Te})},function(Te){return Le.resolve(J()).then(function(){throw Te})}):_e.then(J,J)},L}();ie.prototype.then=z,ie.all=U,ie.race=A,ie.resolve=C,ie.reject=B,ie._setScheduler=c,ie._setAsap=u,ie._asap=a;function De(){var L=void 0;if(typeof window<"u")L=window;else if(typeof self<"u")L=self;else try{L=Function("return this")()}catch(_e){throw new Error("polyfill failed because global object is unavailable in this environment")}var ne=L.Promise;if(ne){var J=null;try{J=Object.prototype.toString.call(ne.resolve())}catch(_e){}if(J==="[object Promise]"&&!ne.cast)return}L.Promise=ie}return ie.polyfill=De,ie.Promise=ie,ie})});var uh=Fe((Fz,oS)=>{"use strict";w();var Ka=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};oS.exports=function(e,t,n,r){return t=t||"&",n=n||"=",e===null&&(e=void 0),typeof e=="object"?iS(e2(e),function(i){var o=encodeURIComponent(Ka(i))+n;return ZP(e[i])?iS(e[i],function(s){return o+encodeURIComponent(Ka(s))}).join(t):o+encodeURIComponent(Ka(e[i]))}).join(t):r?encodeURIComponent(Ka(r))+n+encodeURIComponent(Ka(e)):""};var ZP=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function iS(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var e2=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}});var aS=Fe((zz,sS)=>{"use strict";w();sS.exports=n2;var t2=uh();function n2(e,t){return/\?/.test(e)?e+="&":e+="?",e+t2(t)}});var lS=Fe((jz,uS)=>{"use strict";w();uS.exports=r2;var lh=Zi(),cS=0;function r2(e,t,n){if(t.method!=="GET"){n(new Error("Method "+t.method+" "+e+" is not supported by JSONP."));return}t.debug("JSONP: start");var r=!1,i=!1;cS+=1;var o=document.getElementsByTagName("head")[0],s=document.createElement("script"),a="algoliaJSONP_"+cS,c=!1;window[a]=function(D){if(m(),i){t.debug("JSONP: Late answer, ignoring");return}r=!0,y(),n(null,{body:D,responseText:JSON.stringify(D)})},e+="&callback="+a,t.jsonBody&&t.jsonBody.params&&(e+="&"+t.jsonBody.params);var u=setTimeout(b,t.timeouts.complete);s.onreadystatechange=h,s.onload=p,s.onerror=R,s.async=!0,s.defer=!0,s.src=e,o.appendChild(s);function p(){t.debug("JSONP: success"),!(c||i)&&(c=!0,r||(t.debug("JSONP: Fail. Script loaded but did not call the callback"),y(),n(new lh.JSONPScriptFail)))}function h(){(this.readyState==="loaded"||this.readyState==="complete")&&p()}function y(){clearTimeout(u),s.onload=null,s.onreadystatechange=null,s.onerror=null,o.removeChild(s)}function m(){try{delete window[a],delete window[a+"_loaded"]}catch(D){window[a]=window[a+"_loaded"]=void 0}}function b(){t.debug("JSONP: Script timeout"),i=!0,y(),n(new lh.RequestTimeout)}function R(){t.debug("JSONP: Script error"),!(c||i)&&(y(),n(new lh.JSONPScriptError))}}});var dS=Fe((Gz,fS)=>{"use strict";w();function i2(e,t){return Object.prototype.hasOwnProperty.call(e,t)}fS.exports=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if(typeof e!="string"||e.length===0)return i;var o=/\+/g;e=e.split(t);var s=1e3;r&&typeof r.maxKeys=="number"&&(s=r.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var u=e[c].replace(o,"%20"),p=u.indexOf(n),h,y,m,b;p>=0?(h=u.substr(0,p),y=u.substr(p+1)):(h=u,y=""),m=decodeURIComponent(h),b=decodeURIComponent(y),i2(i,m)?o2(i[m])?i[m].push(b):i[m]=[i[m],b]:i[m]=b}return i};var o2=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var pS=Fe(Ha=>{"use strict";w();Ha.decode=Ha.parse=dS();Ha.encode=Ha.stringify=uh()});var gS=Fe(($z,hS)=>{w();hS.exports=c2;var s2=pS(),a2=Yp();function c2(e){return function(n,r,i){var o=Qr();i=i&&o(i)||{},i.hosts=i.hosts||["places-dsn.algolia.net","places-1.algolianet.com","places-2.algolianet.com","places-3.algolianet.com"],(arguments.length===0||typeof n=="object"||n===void 0)&&(n="",r="",i._allowEmptyCredentials=!0);var s=e(n,r,i),a=s.initIndex("places");return a.search=a2("query","/1/places/query"),a.reverse=function(c,u){var p=s2.encode(c);return this.as._jsonRequest({method:"GET",url:"/1/places/reverse?"+p,hostType:"read",callback:u})},a.getObject=function(c,u){return this.as._jsonRequest({method:"GET",url:"/1/places/"+encodeURIComponent(c),hostType:"read",callback:u})},a}}});var yS=Fe((Wz,mS)=>{"use strict";w();mS.exports="3.35.1"});var vS=Fe((Qz,_S)=>{"use strict";w();var tl=nS(),cs=tl.Promise||rS().Promise;_S.exports=function(t,n){var r=ko(),i=Zi(),o=aS(),s=lS(),a=gS();n=n||"";function c(h,y,m){var b=Qr();return m=b(m||{}),m._ua=m._ua||c.ua,new p(h,y,m)}c.version=yS(),c.ua="Algolia for JavaScript ("+c.version+"); "+n,c.initPlaces=a(c),tl.__algolia={debug:Ba(),algoliasearch:c};var u={hasXMLHttpRequest:"XMLHttpRequest"in tl,hasXDomainRequest:"XDomainRequest"in tl};u.hasXMLHttpRequest&&(u.cors="withCredentials"in new XMLHttpRequest);function p(){t.apply(this,arguments)}return r(p,t),p.prototype._request=function(y,m){return new cs(function(R,D){if(!u.cors&&!u.hasXDomainRequest){D(new i.Network("CORS not supported"));return}y=o(y,m.headers);var E=m.body,I=u.cors?new XMLHttpRequest:new XDomainRequest,N,P,F=!1;N=setTimeout(z,m.timeouts.connect),I.onprogress=fe,"onreadystatechange"in I&&(I.onreadystatechange=oe),I.onload=K,I.onerror=H,I instanceof XMLHttpRequest?(I.open(m.method,y,!0),m.forceAuthHeaders&&(I.setRequestHeader("x-algolia-application-id",m.headers["x-algolia-application-id"]),I.setRequestHeader("x-algolia-api-key",m.headers["x-algolia-api-key"]))):I.open(m.method,y),u.cors&&(E&&(m.method==="POST"?I.setRequestHeader("content-type","application/x-www-form-urlencoded"):I.setRequestHeader("content-type","application/json")),I.setRequestHeader("accept","application/json")),E?I.send(E):I.send();function K(){if(!P){clearTimeout(N);var Re;try{Re={body:JSON.parse(I.responseText),responseText:I.responseText,statusCode:I.status,headers:I.getAllResponseHeaders&&I.getAllResponseHeaders()||{}}}catch(T){Re=new i.UnparsableJSON({more:I.responseText})}Re instanceof i.UnparsableJSON?D(Re):R(Re)}}function H(Re){P||(clearTimeout(N),D(new i.Network({more:Re})))}function z(){P=!0,I.abort(),D(new i.RequestTimeout)}function C(){F=!0,clearTimeout(N),N=setTimeout(z,m.timeouts.complete)}function fe(){F||C()}function oe(){!F&&I.readyState>1&&C()}})},p.prototype._request.fallback=function(y,m){return y=o(y,m.headers),new cs(function(R,D){s(y,m,function(I,N){if(I){D(I);return}R(N)})})},p.prototype._promise={reject:function(y){return cs.reject(y)},resolve:function(y){return cs.resolve(y)},delay:function(y){return new cs(function(b){setTimeout(b,y)})},all:function(y){return cs.all(y)}},c}});var sh=Fe((Zz,bS)=>{"use strict";w();var u2=eS(),l2=vS();bS.exports=l2(u2,"Browser")});w();w();w();var qm=Ac?"http":"https";function bf(){return Kg?E1():Km()}function Gm(){return`${qm}://${bf()}`}function E1(){if(!Hg)return Km()}function Km(){var e;return Ac?"localhost:5000":((e=yn.app)==null?void 0:e.domain)||yn.firebase.authDomain}w();w();var Ne=Oc,wf=0;function Sf(){return wf>0}function x1(){wf++,setTimeout(()=>{wf--})}function Lr(e,t={},n){if(typeof e!="function")return e;try{let i=e.__sentry_wrapped__;if(i)return i;if(Dc(e))return e}catch(i){return e}let r=function(){let i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);let o=i.map(s=>Lr(s,t));return e.apply(this,o)}catch(o){throw x1(),gf(s=>{s.addEventProcessor(a=>(t.mechanism&&(Ps(a,void 0,void 0),di(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),Ro(o)}),o}};try{for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch(i){}Zg(r,e),Xg(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch(i){}return r}w();w();function Rf(e,t){let n=Cf(e,t),r={type:t&&t.name,value:k1(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function R1(e,t,n,r){let o=Ze().getClient(),s=o&&o.getOptions().normalizeDepth,a={exception:{values:[{type:uf(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:`Non-Error ${r?"promise rejection":"exception"} captured with keys: ${em(t)}`}]},extra:{__serialized__:cm(t,s)}};if(n){let c=Cf(e,n);c.length&&(a.exception.values[0].stacktrace={frames:c})}return a}function Ef(e,t){return{exception:{values:[Rf(e,t)]}}}function Cf(e,t){let n=t.stacktrace||t.stack||"",r=T1(t);try{return e(n,r)}catch(i){}return[]}var C1=/Minified React error #\d+;/i;function T1(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(C1.test(e.message))return 1}return 0}function k1(e){let t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Tf(e,t,n,r){let i=n&&n.syntheticException||void 0,o=Mc(e,t,i,r);return di(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),xo(o)}function kf(e,t,n="info",r,i){let o=r&&r.syntheticException||void 0,s=xf(e,t,o,i);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),xo(s)}function Mc(e,t,n,r,i){let o;if(Ic(t)&&t.error)return Ef(e,t.error);if(af(t)||Yg(t)){let s=t;if("stack"in t)o=Ef(e,t);else{let a=s.name||(af(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;o=xf(e,c,n,r),Ps(o,c)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}return $g(t)?Ef(e,t):Jg(t)||uf(t)?(o=R1(e,t,n,i),di(o,{synthetic:!0}),o):(o=xf(e,t,n,r),Ps(o,`${t}`,void 0),di(o,{synthetic:!0}),o)}function xf(e,t,n,r){let i={message:t};if(r&&n){let o=Cf(e,n);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]})}return i}w();var zc=1024,Af="Breadcrumbs",Hn=class{static __initStatic(){this.id=Af}__init(){this.name=Hn.id}constructor(t){Hn.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t}}setupOnce(){this.options.console&&xn("console",I1),this.options.dom&&xn("dom",A1(this.options.dom)),this.options.xhr&&xn("xhr",O1),this.options.fetch&&xn("fetch",P1),this.options.history&&xn("history",D1)}addSentryBreadcrumb(t){this.options.sentry&&Ze().addBreadcrumb({category:`sentry.${t.type==="transaction"?"transaction":"event"}`,event_id:t.event_id,level:t.level,message:om(t)},{event:t})}};Hn.__initStatic();function A1(e){function t(n){let r,i=typeof e=="object"?e.serializeAttribute:void 0,o=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;o&&o>zc&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.warn(`\`dom.maxStringLength\` cannot exceed ${zc}, but a value of ${o} was configured. Sentry will use ${zc} instead.`),o=zc),typeof i=="string"&&(i=[i]);try{let s=n.event;r=N1(s)?Is(s.target,{keyAttrs:i,maxStringLength:o}):Is(s,{keyAttrs:i,maxStringLength:o})}catch(s){r="<unknown>"}r.length!==0&&Ze().addBreadcrumb({category:`ui.${n.name}`,message:r},{event:n.event,name:n.name,global:n.global})}return t}function I1(e){for(let n=0;n<e.args.length;n++)if(e.args[n]==="ref=Ref<"){e.args[n+1]="viewRef";break}let t={category:"console",data:{arguments:e.args,logger:"console"},level:fm(e.level),message:ff(e.args," ")};if(e.level==="assert")if(e.args[0]===!1)t.message=`Assertion failed: ${ff(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1);else return;Ze().addBreadcrumb(t,{input:e.args,level:e.level})}function O1(e){let{startTimestamp:t,endTimestamp:n}=e;if(!t||!n||!e.xhr.__sentry_xhr__)return;let{method:r,url:i,status_code:o,body:s}=e.xhr.__sentry_xhr__,a={method:r,url:i,status_code:o},c={xhr:e.xhr,input:s,startTimestamp:t,endTimestamp:n};Ze().addBreadcrumb({category:"xhr",data:a,type:"http"},c)}function P1(e){let{startTimestamp:t,endTimestamp:n}=e;if(n&&!(e.fetchData.url.match(/sentry_key/)&&e.fetchData.method==="POST"))if(e.error){let r=e.fetchData,i={data:e.error,input:e.args,startTimestamp:t,endTimestamp:n};Ze().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},i)}else{let r={...e.fetchData,status_code:e.response&&e.response.status},i={input:e.args,response:e.response,startTimestamp:t,endTimestamp:n};Ze().addBreadcrumb({category:"fetch",data:r,type:"http"},i)}}function D1(e){let t=e.from,n=e.to,r=Nc(Ne.location.href),i=Nc(t),o=Nc(n);i.path||(i=r),r.protocol===o.protocol&&r.host===o.host&&(n=o.relative),r.protocol===i.protocol&&r.host===i.host&&(t=i.relative),Ze().addBreadcrumb({category:"navigation",data:{from:t,to:n}})}function N1(e){return e&&!!e.target}var Fs=class extends Em{constructor(t){let n=Ne.SENTRY_SDK_SOURCE||sm();t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:Lc}],version:Lc},super(t),t.sendClientReports&&Ne.document&&Ne.document.addEventListener("visibilitychange",()=>{Ne.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return Tf(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return kf(this._options.stackParser,t,n,r,this._options.attachStacktrace)}sendEvent(t,n){let r=this.getIntegrationById(Af);r&&r.addSentryBreadcrumb&&r.addSentryBreadcrumb(t),super.sendEvent(t,n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){let t=this._clearOutcomes();if(t.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("Sending outcomes:",t);let n=ym(t,this._options.tunnel&&Pc(this._dsn));this._sendEnvelope(n)}};w();w();var Ms;function Hm(){if(Ms)return Ms;if(im(Ne.fetch))return Ms=Ne.fetch.bind(Ne);let e=Ne.document,t=Ne.fetch;if(e&&typeof e.createElement=="function")try{let n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);let r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return Ms=t.bind(Ne)}function Vm(){Ms=void 0}function If(e,t=Hm()){let n=0,r=0;function i(o){let s=o.body.length;n+=s,r++;let a={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then(c=>(n-=s,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return Vm(),n-=s,r--,um(c)}}return Ds(e,i)}w();var U1=4;function Of(e){function t(n){return new lm((r,i)=>{let o=new XMLHttpRequest;o.onerror=i,o.onreadystatechange=()=>{o.readyState===U1&&r({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(let s in e.headers)Object.prototype.hasOwnProperty.call(e.headers,s)&&o.setRequestHeader(s,e.headers[s]);o.send(n.body)})}return Ds(e,t)}w();var Io="?",L1=10,F1=20,M1=30,z1=40,B1=50;function zs(e,t,n,r){let i={filename:e,function:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}var j1=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?(?:async )?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,q1=/\((\S*)(?::(\d+))(?::(\d+))\)/,G1=e=>{let t=j1.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){let o=q1.exec(t[2]);o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3])}let[r,i]=Qm(t[1]||Io,t[2]);return zs(i,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},$m=[M1,G1],K1=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,H1=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,V1=e=>{let t=K1.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let o=H1.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],i=t[1]||Io;return[i,r]=Qm(i,r),zs(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Ym=[B1,V1],$1=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Y1=e=>{let t=$1.exec(e);return t?zs(t[2],t[1]||Io,+t[3],t[4]?+t[4]:void 0):void 0},Wm=[z1,Y1],W1=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,J1=e=>{let t=W1.exec(e);return t?zs(t[2],t[3]||Io,+t[1]):void 0},Q1=[L1,J1],X1=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Z1=e=>{let t=X1.exec(e);return t?zs(t[5],t[3]||t[4]||Io,+t[1],+t[2]):void 0},eR=[F1,Z1],Jm=[$m,Ym,Wm],Pf=tm(...Jm),Qm=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Io,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};w();w();var Fn=class{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=Fn.id}__init2(){this._installFunc={onerror:tR,onunhandledrejection:nR}}constructor(t){Fn.prototype.__init.call(this),Fn.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...t}}setupOnce(){Error.stackTraceLimit=50;let t=this._options;for(let n in t){let r=this._installFunc[n];r&&t[n]&&(oR(n),r(),this._installFunc[n]=void 0)}}};Fn.__initStatic();function tR(){xn("error",e=>{let[t,n,r]=ey();if(!t.getIntegration(Fn))return;let{msg:i,url:o,line:s,column:a,error:c}=e;if(Sf()||c&&c.__sentry_own_request__)return;let u=c===void 0&&cf(i)?iR(i,o,s,a):Xm(Mc(n,c||i,void 0,r,!1),o,s,a);u.level="error",Zm(t,c,u,"onerror")})}function nR(){xn("unhandledrejection",e=>{let[t,n,r]=ey();if(!t.getIntegration(Fn))return;let i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch(s){}if(Sf()||i&&i.__sentry_own_request__)return!0;let o=Wg(i)?rR(i):Mc(n,i,void 0,r,!0);o.level="error",Zm(t,i,o,"onunhandledrejection")})}function rR(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function iR(e,t,n,r){let i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,o=Ic(e)?e.message:e,s="Error",a=o.match(i);return a&&(s=a[1],o=a[2]),Xm({exception:{values:[{type:s,value:o}]}},t,n,r)}function Xm(e,t,n,r){let i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,p=isNaN(parseInt(n,10))?void 0:n,h=cf(t)&&t.length>0?t:Qg();return c.length===0&&c.push({colno:u,filename:h,function:"?",in_app:!0,lineno:p}),e}function oR(e){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log(`Global Handler attached: ${e}`)}function Zm(e,t,n,r){di(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function ey(){let e=Ze(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}w();var sR=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],ar=class{static __initStatic(){this.id="TryCatch"}__init(){this.name=ar.id}constructor(t){ar.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t}}setupOnce(){this._options.setTimeout&&fi(Ne,"setTimeout",ty),this._options.setInterval&&fi(Ne,"setInterval",ty),this._options.requestAnimationFrame&&fi(Ne,"requestAnimationFrame",aR),this._options.XMLHttpRequest&&"XMLHttpRequest"in Ne&&fi(XMLHttpRequest.prototype,"send",cR);let t=this._options.eventTarget;t&&(Array.isArray(t)?t:sR).forEach(uR)}};ar.__initStatic();function ty(e){return function(...t){let n=t[0];return t[0]=Lr(n,{mechanism:{data:{function:Di(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function aR(e){return function(t){return e.apply(this,[Lr(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Di(e)},handled:!0,type:"instrument"}})])}}function cR(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&fi(n,i,function(o){let s={mechanism:{data:{function:i,handler:Di(o)},handled:!0,type:"instrument"}},a=Dc(o);return a&&(s.mechanism.data.handler=Di(a)),Lr(o,s)})}),e.apply(this,t)}}function uR(e){let t=Ne,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(fi(n,"addEventListener",function(r){return function(i,o,s){try{typeof o.handleEvent=="function"&&(o.handleEvent=Lr(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Di(o),target:e},handled:!0,type:"instrument"}}))}catch(a){}return r.apply(this,[i,Lr(o,{mechanism:{data:{function:"addEventListener",handler:Di(o),target:e},handled:!0,type:"instrument"}}),s])}}),fi(n,"removeEventListener",function(r){return function(i,o,s){let a=o;try{let c=a&&a.__sentry_wrapped__;c&&r.call(this,i,c,s)}catch(c){}return r.call(this,i,a,s)}}))}w();var lR="cause",fR=5,tr=class{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=tr.id}constructor(t={}){tr.prototype.__init.call(this),this._key=t.key||lR,this._limit=t.limit||fR}setupOnce(){let t=Ze().getClient();t&&Ni((n,r)=>{let i=Ze().getIntegration(tr);return i?dR(t.getOptions().stackParser,i._key,i._limit,n,r):n})}};tr.__initStatic();function dR(e,t,n,r,i){if(!r.exception||!r.exception.values||!i||!lf(i.originalException,Error))return r;let o=ny(e,n,i.originalException,t);return r.exception.values=[...o,...r.exception.values],r}function ny(e,t,n,r,i=[]){if(!lf(n[r],Error)||i.length+1>=t)return i;let o=Rf(e,n[r]);return ny(e,t,n[r],r,[o,...i])}w();var nr=class{constructor(){nr.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=nr.id}setupOnce(){Ni(t=>{if(Ze().getIntegration(nr)){if(!Ne.navigator&&!Ne.location&&!Ne.document)return t;let n=t.request&&t.request.url||Ne.location&&Ne.location.href,{referrer:r}=Ne.document||{},{userAgent:i}=Ne.navigator||{},o={...t.request&&t.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}},s={...t.request,...n&&{url:n},headers:o};return{...t,request:s}}return t})}};nr.__initStatic();w();var rr=class{constructor(){rr.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=rr.id}setupOnce(t,n){let r=i=>{if(i.type)return i;let o=n().getIntegration(rr);if(o){try{if(pR(i,o._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(s){return o._previousEvent=i}return o._previousEvent=i}return i};r.id=this.name,t(r)}};rr.__initStatic();function pR(e,t){return t?!!(hR(e,t)||gR(e,t)):!1}function hR(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!sy(e,t)||!oy(e,t))}function gR(e,t){let n=ry(t),r=ry(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!sy(e,t)||!oy(e,t))}function oy(e,t){let n=iy(e),r=iy(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){let o=r[i],s=n[i];if(o.filename!==s.filename||o.lineno!==s.lineno||o.colno!==s.colno||o.function!==s.function)return!1}return!0}function sy(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch(i){return!1}}function ry(e){return e.exception&&e.exception.values&&e.exception.values[0]}function iy(e){let t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(n){return}}var cy=[new Ns.InboundFilters,new Ns.FunctionToString,new ar,new Hn,new Fn,new tr,new rr,new nr];function Df(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=cy),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),Ne.SENTRY_RELEASE&&Ne.SENTRY_RELEASE.id&&(e.release=Ne.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);let t={...e,stackParser:nm(e.stackParser||Pf),integrations:wm(e),transport:e.transport||(rm()?If:Of)};xm(Fs,t),e.autoSessionTracking&&SR()}function mR(e={},t=Ze()){if(!Ne.document){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("Global document not defined in showReportDialog call");return}let{client:n,scope:r}=t.getStackTop(),i=e.dsn||n&&n.getDsn();if(!i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("DSN not configured for showReportDialog call");return}r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());let o=Ne.document.createElement("script");o.async=!0,o.src=bm(i,e),e.onLoad&&(o.onload=e.onLoad);let s=Ne.document.head||Ne.document.body;s?s.appendChild(o):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("Not injecting report dialog. No injection point found in HTML")}function yR(){return Ze().lastEventId()}function _R(){}function vR(e){e()}function uy(e){let t=Ze().getClient();return t?t.flush(e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.warn("Cannot flush events. No client defined."),xo(!1))}function bR(e){let t=Ze().getClient();return t?t.close(e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.warn("Cannot flush events and disable SDK. No client defined."),xo(!1))}function wR(e){return Lr(e)()}function ay(e){e.startSession({ignoreDuration:!0}),e.captureSession()}function SR(){if(typeof Ne.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}let e=Ze();e.captureSession&&(ay(e),xn("history",({from:t,to:n})=>{t===void 0||t===n||ay(Ze())}))}var Nf={};_1(Nf,{Breadcrumbs:()=>Hn,Dedupe:()=>rr,GlobalHandlers:()=>Fn,HttpContext:()=>nr,LinkedErrors:()=>tr,TryCatch:()=>ar});w();w();var Xt=Oc,Iy="sentryReplaySession",ER="replay_event",Qf="Unable to send Replay",xR=3e5,RR=36e5,CR=5e3,TR=5500,kR=6e4,AR=5e3,IR=3,OR=3e5,fn;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(fn||(fn={}));function PR(e){return e.nodeType===e.ELEMENT_NODE}function Gs(e){let t=e==null?void 0:e.host;return Boolean(t&&t.shadowRoot&&t.shadowRoot===e)}function Oy({maskInputOptions:e,tagName:t,type:n}){t.toLowerCase()==="option"&&(t="select");let r=typeof n=="string"?n.toLowerCase():void 0;return e[t.toLowerCase()]||r&&e[r]||r==="password"||t==="input"&&!n&&e.text}function DR({tagName:e,type:t,maskInputOptions:n,maskInputSelector:r}){return r||Oy({maskInputOptions:n,tagName:e,type:t})}function Kc({input:e,maskInputSelector:t,unmaskInputSelector:n,maskInputOptions:r,tagName:i,type:o,value:s,maskInputFn:a}){let c=s||"";return n&&e.matches(n)||(e.hasAttribute("rr_is_password")&&(o="password"),(Oy({maskInputOptions:r,tagName:i,type:o})||t&&e.matches(t))&&(a?c=a(c):c="*".repeat(c.length))),c}var ly="__rrweb_original__";function NR(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let i=0;i<e.height;i+=n){let o=t.getImageData,s=ly in o?o[ly]:o;if(new Uint32Array(s.call(t,r,i,Math.min(n,e.width-r),Math.min(n,e.height-i)).data.buffer).some(c=>c!==0))return!1}return!0}var UR=1,LR=new RegExp("[^a-z0-9-_:]"),Ys=-2;function Py(e){return e?e.replace(/[\S]/g,"*"):""}function FR(){return UR++}function MR(e){if(e instanceof HTMLFormElement)return"form";let t=e.tagName.toLowerCase().trim();return LR.test(t)?"div":t}function Lf(e){try{let t=e.rules||e.cssRules;return t?Array.from(t).map(zR).join(""):null}catch(t){return null}}function zR(e){let t=e.cssText;if(BR(e))try{t=Lf(e.styleSheet)||t}catch(n){}return t}function BR(e){return"styleSheet"in e}function jR(e){return e.cssRules?Array.from(e.cssRules).map(t=>t.cssText||"").join(""):""}function qR(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var Oo,fy,GR=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,KR=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,HR=/^(data:)([^,]*),(.*)/i;function qc(e,t){return(e||"").replace(GR,(n,r,i,o,s,a)=>{let c=i||s||a,u=r||o||"";if(!c)return n;if(!KR.test(c))return`url(${u}${c}${u})`;if(HR.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${qR(t)+c}${u})`;let p=t.split("/"),h=c.split("/");p.pop();for(let y of h)y!=="."&&(y===".."?p.pop():p.push(y));return`url(${u}${p.join("/")}${u})`})}var VR=/^[^ \t\n\r\u000c]+/,$R=/^[, \t\n\r\u000c]+/;function YR(e,t){if(t.trim()==="")return t;let n=0;function r(o){let s,a=o.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let i=[];for(;r($R),!(n>=t.length);){let o=r(VR);if(o.slice(-1)===",")o=Do(e,o.substring(0,o.length-1)),i.push(o);else{let s="";o=Do(e,o);let a=!1;for(;;){let c=t.charAt(n);if(c===""){i.push((o+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,i.push((o+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return i.join(", ")}function Do(e,t){if(!t||t.trim()==="")return t;let n=e.createElement("a");return n.href=t,n.href}function WR(e){return Boolean(e.tagName==="svg"||e.ownerSVGElement)}function Ff(){let e=document.createElement("a");return e.href="",e.href}function Dy(e,t,n,r,i,o,s,a){if(!i)return i;let c=r.toLowerCase(),u=n.toLowerCase();return c==="src"||c==="href"||c==="xlink:href"&&i[0]!=="#"||c==="background"&&(u==="table"||u==="td"||u==="th")?Do(e,i):c==="srcset"?YR(e,i):c==="style"?qc(i,Ff()):u==="object"&&c==="data"?Do(e,i):o&&JR(t,c,u,s)?a?a(i):Py(i):i}function JR(e,t,n,r){return r&&e.matches(r)?!1:["placeholder","title","aria-label"].indexOf(t)>-1||n==="input"&&t==="value"&&e.hasAttribute("type")&&["submit","button"].indexOf(e.getAttribute("type").toLowerCase())>-1}function QR(e,t,n,r){if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let i=0;i<e.classList.length;i++){let o=e.classList[i];if(t.test(o))return!0}return n?e.matches(n):!1}function Hc(e,t,n,r,i){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return Hc(e.parentNode,t,n,r,i);if(r&&(e.matches(r)||e.closest(r)))return!1;if(i)return!0;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=0;o<e.classList.length;o++){let s=e.classList[o];if(t.test(s))return!0}return n&&e.matches(n)?!0:Hc(e.parentNode,t,n,r,i)}function XR(e,t,n){let r=e.contentWindow;if(!r)return;let i=!1,o;try{o=r.document.readyState}catch(a){return}if(o!=="complete"){let a=setTimeout(()=>{i||(t(),i=!0)},n);e.addEventListener("load",()=>{clearTimeout(a),i=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src===""){setTimeout(t,0);return}e.addEventListener("load",t)}function ZR(e,t){var n;let{doc:r,blockClass:i,blockSelector:o,unblockSelector:s,maskTextClass:a,maskTextSelector:c,unmaskTextSelector:u,inlineStylesheet:p,maskInputSelector:h,unmaskInputSelector:y,maskAllText:m,maskInputOptions:b={},maskTextFn:R,maskInputFn:D,dataURLOptions:E={},inlineImages:I,recordCanvas:N,keepIframeSrcFn:P}=t,F;if(r.__sn){let K=r.__sn.id;F=K===1?void 0:K}switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:fn.Document,childNodes:[],compatMode:e.compatMode,rootId:F}:{type:fn.Document,childNodes:[],rootId:F};case e.DOCUMENT_TYPE_NODE:return{type:fn.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:F};case e.ELEMENT_NODE:let K=QR(e,i,o,s),H=MR(e),z={};for(let{name:T,value:pe}of Array.from(e.attributes))nC(H,T)||(z[T]=Dy(r,e,H,T,pe,m,u,R));if(H==="link"&&p){let T=Array.from(r.styleSheets).find(Ce=>Ce.href===e.href),pe=null;T&&(pe=Lf(T)),pe&&(delete z.rel,delete z.href,z._cssText=qc(pe,T.href))}if(H==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let T=Lf(e.sheet);T&&(z._cssText=qc(T,Ff()))}if(H==="input"||H==="textarea"||H==="select"||H==="option"){let T=e,pe=rC(H,T,z),Ce=e.checked;z.type!=="submit"&&z.type!=="button"&&pe&&(z.value=Kc({input:T,type:z.type,tagName:H,value:pe,maskInputSelector:h,unmaskInputSelector:y,maskInputOptions:b,maskInputFn:D})),Ce&&(z.checked=Ce)}if(H==="option"&&(e.selected&&!b.select?z.selected=!0:delete z.selected),H==="canvas"&&N){if(e.__context==="2d")NR(e)||(z.rr_dataURL=e.toDataURL(E.type,E.quality));else if(!("__context"in e)){let T=e.toDataURL(E.type,E.quality),pe=document.createElement("canvas");pe.width=e.width,pe.height=e.height;let Ce=pe.toDataURL(E.type,E.quality);T!==Ce&&(z.rr_dataURL=T)}}if(H==="img"&&I){Oo||(Oo=r.createElement("canvas"),fy=Oo.getContext("2d"));let T=e,pe=T.crossOrigin;T.crossOrigin="anonymous";let Ce=()=>{try{Oo.width=T.naturalWidth,Oo.height=T.naturalHeight,fy.drawImage(T,0,0),z.rr_dataURL=Oo.toDataURL(E.type,E.quality)}catch(Ge){console.warn(`Cannot inline img src=${T.currentSrc}! Error: ${Ge}`)}pe?z.crossOrigin=pe:delete z.crossOrigin};T.complete&&T.naturalWidth!==0?Ce():T.onload=Ce}if((H==="audio"||H==="video")&&(z.rr_mediaState=e.paused?"paused":"played",z.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(z.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(z.rr_scrollTop=e.scrollTop),K){let{width:T,height:pe}=e.getBoundingClientRect();z={class:z.class,rr_width:`${T}px`,rr_height:`${pe}px`}}return H==="iframe"&&!P(z.src)&&(e.contentDocument||(z.rr_src=z.src),delete z.src),{type:fn.Element,tagName:H,attributes:z,childNodes:[],isSVG:WR(e)||void 0,needBlock:K,rootId:F};case e.TEXT_NODE:let C=e.parentNode&&e.parentNode.tagName,fe=e.textContent,oe=C==="STYLE"?!0:void 0,Re=C==="SCRIPT"?!0:void 0;if(oe&&fe){try{e.nextSibling||e.previousSibling||!((n=e.parentNode.sheet)===null||n===void 0)&&n.cssRules&&(fe=jR(e.parentNode.sheet))}catch(T){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${T}`,e)}fe=qc(fe,Ff())}if(Re&&(fe="SCRIPT_PLACEHOLDER"),C==="TEXTAREA"&&fe)fe="";else if(C==="OPTION"&&fe){let T=e.parentNode;fe=Kc({input:T,type:null,tagName:C,value:fe,maskInputSelector:h,unmaskInputSelector:y,maskInputOptions:b,maskInputFn:D})}else!oe&&!Re&&Hc(e,a,c,u,m)&&fe&&(fe=R?R(fe):Py(fe));return{type:fn.Text,textContent:fe||"",isStyle:oe,rootId:F};case e.CDATA_SECTION_NODE:return{type:fn.CDATA,textContent:"",rootId:F};case e.COMMENT_NODE:return{type:fn.Comment,textContent:e.textContent||"",rootId:F};default:return!1}}function Et(e){return e==null?"":e.toLowerCase()}function eC(e,t){if(t.comment&&e.type===fn.Comment)return!0;if(e.type===fn.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Et(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Et(e.attributes.name)==="application-name"||Et(e.attributes.rel)==="icon"||Et(e.attributes.rel)==="apple-touch-icon"||Et(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Et(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Et(e.attributes.property).match(/^(og|twitter|fb):/)||Et(e.attributes.name).match(/^(og|twitter):/)||Et(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Et(e.attributes.name)==="robots"||Et(e.attributes.name)==="googlebot"||Et(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Et(e.attributes.name)==="author"||Et(e.attributes.name)==="generator"||Et(e.attributes.name)==="framework"||Et(e.attributes.name)==="publisher"||Et(e.attributes.name)==="progid"||Et(e.attributes.property).match(/^article:/)||Et(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Et(e.attributes.name)==="google-site-verification"||Et(e.attributes.name)==="yandex-verification"||Et(e.attributes.name)==="csrf-token"||Et(e.attributes.name)==="p:domain_verify"||Et(e.attributes.name)==="verify-v1"||Et(e.attributes.name)==="verification"||Et(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ks(e,t){let{doc:n,map:r,blockClass:i,blockSelector:o,unblockSelector:s,maskTextClass:a,maskTextSelector:c,unmaskTextSelector:u,skipChild:p=!1,inlineStylesheet:h=!0,maskInputSelector:y,unmaskInputSelector:m,maskAllText:b,maskInputOptions:R={},maskTextFn:D,maskInputFn:E,slimDOMOptions:I,dataURLOptions:N={},inlineImages:P=!1,recordCanvas:F=!1,onSerialize:K,onIframeLoad:H,iframeLoadTimeout:z=5e3,keepIframeSrcFn:C=()=>!1}=t,{preserveWhiteSpace:fe=!0}=t,oe=ZR(e,{doc:n,blockClass:i,blockSelector:o,unblockSelector:s,maskTextClass:a,maskTextSelector:c,unmaskTextSelector:u,inlineStylesheet:h,maskInputSelector:y,unmaskInputSelector:m,maskAllText:b,maskInputOptions:R,maskTextFn:D,maskInputFn:E,dataURLOptions:N,inlineImages:P,recordCanvas:F,keepIframeSrcFn:C});if(!oe)return console.warn(e,"not serialized"),null;let Re;"__sn"in e?Re=e.__sn.id:eC(oe,I)||!fe&&oe.type===fn.Text&&!oe.isStyle&&!oe.textContent.replace(/^\s+|\s+$/gm,"").length?Re=Ys:Re=FR();let T=Object.assign(oe,{id:Re});if(e.__sn=T,Re===Ys)return null;r[Re]=e,K&&K(e);let pe=!p;if(T.type===fn.Element&&(pe=pe&&!T.needBlock,delete T.needBlock,e.shadowRoot&&(T.isShadowHost=!0)),(T.type===fn.Document||T.type===fn.Element)&&pe){I.headWhitespace&&oe.type===fn.Element&&oe.tagName==="head"&&(fe=!1);let Ce={doc:n,map:r,blockClass:i,blockSelector:o,unblockSelector:s,maskTextClass:a,maskTextSelector:c,unmaskTextSelector:u,skipChild:p,inlineStylesheet:h,maskInputSelector:y,unmaskInputSelector:m,maskAllText:b,maskInputOptions:R,maskTextFn:D,maskInputFn:E,slimDOMOptions:I,dataURLOptions:N,inlineImages:P,recordCanvas:F,preserveWhiteSpace:fe,onSerialize:K,onIframeLoad:H,iframeLoadTimeout:z,keepIframeSrcFn:C};for(let Ge of Array.from(e.childNodes)){let $e=Ks(Ge,Ce);$e&&T.childNodes.push($e)}if(PR(e)&&e.shadowRoot)for(let Ge of Array.from(e.shadowRoot.childNodes)){let $e=Ks(Ge,Ce);$e&&($e.isShadow=!0,T.childNodes.push($e))}}return e.parentNode&&Gs(e.parentNode)&&(T.isShadow=!0),T.type===fn.Element&&T.tagName==="iframe"&&XR(e,()=>{let Ce=e.contentDocument;if(Ce&&H){let Ge=Ks(Ce,{doc:Ce,map:r,blockClass:i,blockSelector:o,unblockSelector:s,maskTextClass:a,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputSelector:y,unmaskInputSelector:m,maskAllText:b,maskInputOptions:R,maskTextFn:D,maskInputFn:E,slimDOMOptions:I,dataURLOptions:N,inlineImages:P,recordCanvas:F,preserveWhiteSpace:fe,onSerialize:K,onIframeLoad:H,iframeLoadTimeout:z,keepIframeSrcFn:C});Ge&&H(e,Ge)}},z),T}function tC(e,t){let{blockClass:n="rr-block",blockSelector:r=null,unblockSelector:i=null,maskTextClass:o="rr-mask",maskTextSelector:s=null,unmaskTextSelector:a=null,inlineStylesheet:c=!0,inlineImages:u=!1,recordCanvas:p=!1,maskInputSelector:h=null,unmaskInputSelector:y=null,maskAllText:m=!1,maskAllInputs:b=!1,maskTextFn:R,maskInputFn:D,slimDOM:E=!1,dataURLOptions:I,preserveWhiteSpace:N,onSerialize:P,onIframeLoad:F,iframeLoadTimeout:K,keepIframeSrcFn:H=()=>!1}=t||{},z={};return[Ks(e,{doc:e,map:z,blockClass:n,blockSelector:r,unblockSelector:i,maskTextClass:o,maskTextSelector:s,unmaskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputSelector:h,unmaskInputSelector:y,maskAllText:m,maskInputOptions:b===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:b===!1?{}:b,maskTextFn:R,maskInputFn:D,slimDOMOptions:E===!0||E==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:E==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:E===!1?{}:E,dataURLOptions:I,inlineImages:u,recordCanvas:p,preserveWhiteSpace:N,onSerialize:P,onIframeLoad:F,iframeLoadTimeout:K,keepIframeSrcFn:H}),z]}function nC(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function rC(e,t,n){return e==="input"&&(n.type==="radio"||n.type==="checkbox")?t.getAttribute("value")||"":t.value}var xt;(function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"})(xt||(xt={}));var vn;(function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"})(vn||(vn={}));var Vc;(function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"})(Vc||(Vc={}));var Uo;(function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"})(Uo||(Uo={}));var dy;(function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"})(dy||(dy={}));var py;(function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"})(py||(py={}));function Vn(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function iC(){return{map:{},getId(e){return!e||!e.__sn?-1:e.__sn.id},getNode(e){return this.map[e]||null},removeNodeFromMap(e){let t=e.__sn&&e.__sn.id;delete this.map[t],e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))},has(e){return this.map.hasOwnProperty(e)},reset(){this.map={}}}}var Po=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,hy={map:{},getId(){return console.error(Po),-1},getNode(){return console.error(Po),null},removeNodeFromMap(){console.error(Po)},has(){return console.error(Po),!1},reset(){console.error(Po)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(hy=new Proxy(hy,{get(e,t,n){return t==="map"&&console.error(Po),Reflect.get(e,t,n)}}));function Ws(e,t,n={}){let r=null,i=0;return function(o){let s=Date.now();!i&&n.leading===!1&&(i=s);let a=t-(s-i),c=this,u=arguments;a<=0||a>t?(r&&(clearTimeout(r),r=null),i=s,e.apply(c,u)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{i=n.leading===!1?0:Date.now(),r=null,e.apply(c,u)},a))}}function Zc(e,t,n,r,i=window){let o=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set(s){setTimeout(()=>{n.set.call(this,s)},0),o&&o.set&&o.set.call(this,s)}}),()=>Zc(e,t,o||{},!0)}function Lo(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],i=n(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=i,()=>{e[t]=r}}catch(r){return()=>{}}}function Ny(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Uy(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function An(e,t,n,r){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){let i=!1,o=r&&e.matches(r);return typeof t=="string"?e.closest!==void 0?i=!o&&e.closest("."+t)!==null:i=!o&&e.classList.contains(t):!o&&e.classList.forEach(s=>{t.test(s)&&(i=!0)}),!i&&n&&(i=e.matches(n)),!o&&i||An(e.parentNode,t,n,r)}return e.nodeType===e.TEXT_NODE,An(e.parentNode,t,n,r)}function Uf(e){return"__sn"in e?e.__sn.id===Ys:!1}function Ly(e,t){if(Gs(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Ly(e.parentNode,t):!0:!0}function Fy(e){return Boolean(e.changedTouches)}function oC(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(n){if(!(0 in arguments))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function My(e){return"__sn"in e?e.__sn.type===fn.Element&&e.__sn.tagName==="iframe":!1}function zy(e){return Boolean(e==null?void 0:e.shadowRoot)}function gy(e){return"__ln"in e}var Mf=class{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=(n==null?void 0:n.next)||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&gy(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&gy(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next&&(n.next.previous=n.previous)):(this.head=n.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}},my=(e,t)=>`${e}@${t}`;function yy(e){return"__sn"in e}var zf=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Mf,r=a=>{let c=a,u=Ys;for(;u===Ys;)c=c&&c.nextSibling,u=c&&this.mirror.getId(c);return u},i=a=>{var c,u,p,h,y;let m=a.getRootNode?(c=a.getRootNode())===null||c===void 0?void 0:c.host:null,b=m;for(;!((p=(u=b==null?void 0:b.getRootNode)===null||u===void 0?void 0:u.call(b))===null||p===void 0)&&p.host;)b=((y=(h=b==null?void 0:b.getRootNode)===null||h===void 0?void 0:h.call(b))===null||y===void 0?void 0:y.host)||null;let R=!this.doc.contains(a)&&(!b||!this.doc.contains(b));if(!a.parentNode||R)return;let D=Gs(a.parentNode)?this.mirror.getId(m):this.mirror.getId(a.parentNode),E=r(a);if(D===-1||E===-1)return n.addNode(a);let I=Ks(a,{doc:this.doc,map:this.mirror.map,blockClass:this.blockClass,blockSelector:this.blockSelector,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,maskInputSelector:this.maskInputSelector,unmaskInputSelector:this.unmaskInputSelector,skipChild:!0,inlineStylesheet:this.inlineStylesheet,maskAllText:this.maskAllText,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:N=>{My(N)&&this.iframeManager.addIframe(N),zy(a)&&this.shadowDomManager.addShadowRoot(a.shadowRoot,document)},onIframeLoad:(N,P)=>{this.iframeManager.attachIframe(N,P),this.shadowDomManager.observeAttachShadow(N)}});I&&t.push({parentId:D,nextId:E,node:I})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let a of this.movedSet)jf(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||i(a);for(let a of this.addedSet)!qf(this.droppedSet,a)&&!jf(this.removes,a,this.mirror)||qf(this.movedSet,a)?i(a):this.droppedSet.add(a);let o=null;for(;n.length;){let a=null;if(o){let c=this.mirror.getId(o.value.parentNode),u=r(o.value);c!==-1&&u!==-1&&(a=o)}if(!a)for(let c=n.length-1;c>=0;c--){let u=n.get(c);if(u){let p=this.mirror.getId(u.value.parentNode),h=r(u.value);if(p!==-1&&h!==-1){a=u;break}}}if(!a){for(;n.head;)n.removeNode(n.head.value);break}o=a.previous,n.removeNode(a.value),i(a.value)}let s={texts:this.texts.map(a=>({id:this.mirror.getId(a.node),value:a.value})).filter(a=>this.mirror.has(a.id)),attributes:this.attributes.map(a=>({id:this.mirror.getId(a.node),attributes:a.attributes})).filter(a=>this.mirror.has(a.id)),removes:this.removes,adds:t};!s.texts.length&&!s.attributes.length&&!s.removes.length&&!s.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=t=>{if(!Uf(t.target))switch(t.type){case"characterData":{let n=t.target.textContent;!An(t.target,this.blockClass,this.blockSelector,this.unblockSelector)&&n!==t.oldValue&&this.texts.push({value:Hc(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=n.getAttribute(t.attributeName);if(t.attributeName==="value"&&(r=Kc({input:n,maskInputSelector:this.maskInputSelector,unmaskInputSelector:this.unmaskInputSelector,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:n.getAttribute("type"),value:r,maskInputFn:this.maskInputFn})),An(t.target,this.blockClass,this.blockSelector,this.unblockSelector)||r===t.oldValue)return;let i=this.attributes.find(o=>o.node===t.target);if(i||(i={node:t.target,attributes:{}},this.attributes.push(i)),t.attributeName==="type"&&t.target.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&t.target.setAttribute("rr_is_password","true"),t.attributeName==="style"){let o=this.doc.createElement("span");t.oldValue&&o.setAttribute("style",t.oldValue),(i.attributes.style===void 0||i.attributes.style===null)&&(i.attributes.style={});try{let s=i.attributes.style;for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);(c!==o.style.getPropertyValue(a)||u!==o.style.getPropertyPriority(a))&&(u===""?s[a]=c:s[a]=[c,u])}for(let a of Array.from(o.style))n.style.getPropertyValue(a)===""&&(s[a]=!1)}catch(s){console.warn("[rrweb] Error when parsing update to style attribute:",s)}}else{let o=t.target;i.attributes[t.attributeName]=Dy(this.doc,o,o.tagName,t.attributeName,r,this.maskAllText,this.unmaskTextSelector,this.maskTextFn)}break}case"childList":{t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),i=Gs(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);An(t.target,this.blockClass,this.blockSelector,this.unblockSelector)||Uf(n)||(this.addedSet.has(n)?(Bf(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Ly(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[my(r,i)]?Bf(this.movedSet,n):this.removes.push({parentId:i,id:r,isShadow:Gs(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!(n&&An(n,this.blockClass,this.blockSelector,this.unblockSelector))){if(yy(t)){if(Uf(t))return;this.movedSet.add(t);let r=null;n&&yy(n)&&(r=n.__sn.id),r&&(this.movedMap[my(t.__sn.id,r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);An(t,this.blockClass,this.blockSelector,this.unblockSelector)||t.childNodes.forEach(r=>this.genAdds(r))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskTextClass","maskTextSelector","unmaskTextSelector","maskInputSelector","unmaskInputSelector","inlineStylesheet","maskAllText","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function Bf(e,t){e.delete(t),t.childNodes.forEach(n=>Bf(e,n))}function jf(e,t,n){let{parentNode:r}=t;if(!r)return!1;let i=n.getId(r);return e.some(o=>o.id===i)?!0:jf(e,r,n)}function qf(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:qf(e,n):!1}var lt=e=>(...n)=>{try{return e(...n)}catch(r){try{r.__rrweb__=!0}catch(i){}throw r}},Ui=[];function Js(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(t){}return e&&e.target}function By(e,t){var n,r;let i=new zf;Ui.push(i),i.init(e);let o=window.MutationObserver||window.__rrMutationObserver,s=(r=(n=window==null?void 0:window.Zone)===null||n===void 0?void 0:n.__symbol__)===null||r===void 0?void 0:r.call(n,"MutationObserver");s&&window[s]&&(o=window[s]);let a=new o(lt(c=>{e.onMutation&&e.onMutation(c)===!1||i.processMutations(c)}));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function sC({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let i=typeof t.mousemove=="number"?t.mousemove:50,o=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=Ws(h=>{let y=Date.now()-a;lt(e)(s.map(m=>(m.timeOffset-=y,m)),h),s=[],a=null},o),u=Ws(h=>{let y=Js(h),{clientX:m,clientY:b}=Fy(h)?h.changedTouches[0]:h;a||(a=Date.now()),s.push({x:m,y:b,id:r.getId(y),timeOffset:Date.now()-a}),c(typeof DragEvent<"u"&&h instanceof DragEvent?vn.Drag:h instanceof MouseEvent?vn.MouseMove:vn.TouchMove)},i,{trailing:!1}),p=[Vn("mousemove",lt(u),n),Vn("touchmove",lt(u),n),Vn("drag",lt(u),n)];return lt(()=>{p.forEach(h=>h())})}function aC({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=p=>h=>{let y=Js(h);if(An(y,r,i,o))return;let m=Fy(h)?h.changedTouches[0]:h;if(!m)return;let b=n.getId(y),{clientX:R,clientY:D}=m;lt(e)({type:Vc[p],id:b,x:R,y:D})};return Object.keys(Vc).filter(p=>Number.isNaN(Number(p))&&!p.endsWith("_Departed")&&a[p]!==!1).forEach(p=>{let h=p.toLowerCase(),y=lt(u(p));c.push(Vn(h,y,t))}),lt(()=>{c.forEach(p=>p())})}function jy({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,sampling:s}){let a=Ws(c=>{let u=Js(c);if(!u||An(u,r,i,o))return;let p=n.getId(u);if(u===t){let h=t.scrollingElement||t.documentElement;lt(e)({id:p,x:h.scrollLeft,y:h.scrollTop})}else lt(e)({id:p,x:u.scrollLeft,y:u.scrollTop})},s.scroll||100);return Vn("scroll",lt(a),t)}function cC({viewportResizeCb:e}){let t=-1,n=-1,r=Ws(()=>{let i=Ny(),o=Uy();(t!==i||n!==o)&&(lt(e)({width:Number(o),height:Number(i)}),t=i,n=o)},200);return Vn("resize",lt(r),window)}function _y(e,t){let n=Object.assign({},e);return t||delete n.userTriggered,n}var uC=["INPUT","TEXTAREA","SELECT"],vy=new WeakMap;function lC({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,ignoreClass:s,ignoreSelector:a,maskInputSelector:c,unmaskInputSelector:u,maskInputOptions:p,maskInputFn:h,sampling:y,userTriggeredOnInput:m}){function b(P){let F=Js(P),K=F&&F.tagName,H=P.isTrusted;if(K==="OPTION"&&(F=F.parentElement),!F||!K||uC.indexOf(K)<0||An(F,r,i,o))return;let z=F.type;if(F.classList.contains(s)||a&&F.matches(a))return;let C=F.value,fe=!1;F.hasAttribute("rr_is_password")&&(z="password"),z==="radio"||z==="checkbox"?fe=F.checked:DR({maskInputOptions:p,maskInputSelector:c,tagName:K,type:z})&&(C=Kc({input:F,maskInputOptions:p,maskInputSelector:c,unmaskInputSelector:u,tagName:K,type:z,value:C,maskInputFn:h})),R(F,lt(_y)({text:C,isChecked:fe,userTriggered:H},m));let oe=F.name;z==="radio"&&oe&&fe&&t.querySelectorAll(`input[type="radio"][name="${oe}"]`).forEach(Re=>{Re!==F&&R(Re,lt(_y)({text:Re.value,isChecked:!fe,userTriggered:!1},m))})}function R(P,F){let K=vy.get(P);if(!K||K.text!==F.text||K.isChecked!==F.isChecked){vy.set(P,F);let H=n.getId(P);e(Object.assign(Object.assign({},F),{id:H}))}}let E=(y.input==="last"?["change"]:["input","change"]).map(P=>Vn(P,lt(b),t)),I=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),N=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return I&&I.set&&E.push(...N.map(P=>Zc(P[0],P[1],{set(){lt(b)({target:this})}}))),lt(()=>{E.forEach(P=>P())})}function $c(e){let t=[];function n(r,i){if(Bc("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Bc("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Bc("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Bc("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(s)}else{let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(s)}return i}return n(e,t)}function fC({styleSheetRuleCb:e,mirror:t},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};let r=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(r,{apply:lt((a,c,u)=>{let[p,h]=u,y=t.getId(c.ownerNode);return y!==-1&&e({id:y,adds:[{rule:p,index:h}]}),a.apply(c,u)})});let i=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:lt((a,c,u)=>{let[p]=u,h=t.getId(c.ownerNode);return h!==-1&&e({id:h,removes:[{index:p}]}),a.apply(c,u)})});let o={};jc("CSSGroupingRule")?o.CSSGroupingRule=n.CSSGroupingRule:(jc("CSSMediaRule")&&(o.CSSMediaRule=n.CSSMediaRule),jc("CSSConditionRule")&&(o.CSSConditionRule=n.CSSConditionRule),jc("CSSSupportsRule")&&(o.CSSSupportsRule=n.CSSSupportsRule));let s={};return Object.entries(o).forEach(([a,c])=>{s[a]={insertRule:c.prototype.insertRule,deleteRule:c.prototype.deleteRule},c.prototype.insertRule=new Proxy(s[a].insertRule,{apply:lt((u,p,h)=>{let[y,m]=h,b=t.getId(p.parentStyleSheet.ownerNode);return b!==-1&&e({id:b,adds:[{rule:y,index:[...$c(p),m||0]}]}),u.apply(p,h)})}),c.prototype.deleteRule=new Proxy(s[a].deleteRule,{apply:lt((u,p,h)=>{let[y]=h,m=t.getId(p.parentStyleSheet.ownerNode);return m!==-1&&e({id:m,removes:[{index:[...$c(p),y]}]}),u.apply(p,h)})})}),lt(()=>{n.CSSStyleSheet.prototype.insertRule=r,n.CSSStyleSheet.prototype.deleteRule=i,Object.entries(o).forEach(([a,c])=>{c.prototype.insertRule=s[a].insertRule,c.prototype.deleteRule=s[a].deleteRule})})}function dC({styleDeclarationCb:e,mirror:t},{win:n}){let r=n.CSSStyleDeclaration.prototype.setProperty;n.CSSStyleDeclaration.prototype.setProperty=new Proxy(r,{apply:lt((o,s,a)=>{var c,u;let[p,h,y]=a,m=t.getId((u=(c=s.parentRule)===null||c===void 0?void 0:c.parentStyleSheet)===null||u===void 0?void 0:u.ownerNode);return m!==-1&&e({id:m,set:{property:p,value:h,priority:y},index:$c(s.parentRule)}),o.apply(s,a)})});let i=n.CSSStyleDeclaration.prototype.removeProperty;return n.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:lt((o,s,a)=>{var c,u;let[p]=a,h=t.getId((u=(c=s.parentRule)===null||c===void 0?void 0:c.parentStyleSheet)===null||u===void 0?void 0:u.ownerNode);return h!==-1&&e({id:h,remove:{property:p},index:$c(s.parentRule)}),o.apply(s,a)})}),lt(()=>{n.CSSStyleDeclaration.prototype.setProperty=r,n.CSSStyleDeclaration.prototype.removeProperty=i})}function pC({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:i,sampling:o}){let s=c=>Ws(lt(u=>{let p=Js(u);if(!p||An(p,t,n,r))return;let{currentTime:h,volume:y,muted:m}=p;e({type:c,id:i.getId(p),currentTime:h,volume:y,muted:m})}),o.media||500),a=[Vn("play",s(0)),Vn("pause",s(1)),Vn("seeked",s(2)),Vn("volumechange",s(3))];return lt(()=>{a.forEach(c=>c())})}function hC({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],i=new WeakMap,o=n.FontFace;n.FontFace=function(c,u,p){let h=new o(c,u,p);return i.set(h,{family:c,buffer:typeof u!="string",descriptors:p,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),h};let s=Lo(t.fonts,"add",function(a){return function(c){return setTimeout(()=>{let u=i.get(c);u&&(e(u),i.delete(c))},0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=o}),r.push(s),lt(()=>{r.forEach(a=>a())})}function gC(e,t){let{mutationCb:n,mousemoveCb:r,mouseInteractionCb:i,scrollCb:o,viewportResizeCb:s,inputCb:a,mediaInteractionCb:c,styleSheetRuleCb:u,styleDeclarationCb:p,canvasMutationCb:h,fontCb:y}=e;e.mutationCb=(...m)=>{t.mutation&&t.mutation(...m),n(...m)},e.mousemoveCb=(...m)=>{t.mousemove&&t.mousemove(...m),r(...m)},e.mouseInteractionCb=(...m)=>{t.mouseInteraction&&t.mouseInteraction(...m),i(...m)},e.scrollCb=(...m)=>{t.scroll&&t.scroll(...m),o(...m)},e.viewportResizeCb=(...m)=>{t.viewportResize&&t.viewportResize(...m),s(...m)},e.inputCb=(...m)=>{t.input&&t.input(...m),a(...m)},e.mediaInteractionCb=(...m)=>{t.mediaInteaction&&t.mediaInteaction(...m),c(...m)},e.styleSheetRuleCb=(...m)=>{t.styleSheetRule&&t.styleSheetRule(...m),u(...m)},e.styleDeclarationCb=(...m)=>{t.styleDeclaration&&t.styleDeclaration(...m),p(...m)},e.canvasMutationCb=(...m)=>{t.canvasMutation&&t.canvasMutation(...m),h(...m)},e.fontCb=(...m)=>{t.font&&t.font(...m),y(...m)}}function mC(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};gC(e,t);let r=By(e,e.doc),i=sC(e),o=aC(e),s=jy(e),a=cC(e),c=lC(e),u=pC(e),p=fC(e,{win:n}),h=dC(e,{win:n}),y=e.collectFonts?hC(e):()=>{},m=[];for(let b of e.plugins)m.push(b.observer(b.callback,n,b.options));return lt(()=>{Ui.forEach(b=>b.reset()),r.disconnect(),i(),o(),s(),a(),c(),u();try{p(),h()}catch(b){}y(),m.forEach(b=>b())})}function Bc(e){return typeof window[e]<"u"}function jc(e){return Boolean(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var Gf=class{constructor(t){this.iframes=new WeakMap,this.mutationCb=t.mutationCb}addIframe(t){this.iframes.set(t,!0)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var r;this.mutationCb({adds:[{parentId:t.__sn.id,nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(r=this.loadListener)===null||r===void 0||r.call(this,t)}},Kf=class{constructor(t){this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;let n=this;this.restorePatches.push(Lo(HTMLElement.prototype,"attachShadow",function(r){return function(){let i=r.apply(this,arguments);return this.shadowRoot&&n.addShadowRoot(this.shadowRoot,this.ownerDocument),i}}))}addShadowRoot(t,n){By(Object.assign(Object.assign({},this.bypassOptions),{doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),jy(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))}observeAttachShadow(t){if(t.contentWindow){let n=this;this.restorePatches.push(Lo(t.contentWindow.HTMLElement.prototype,"attachShadow",function(r){return function(){let i=r.apply(this,arguments);return this.shadowRoot&&n.addShadowRoot(this.shadowRoot,t.contentDocument),i}}))}}reset(){this.restorePatches.forEach(t=>t())}};function yC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function _C(e,t,n,r,i,o){let s=[],a=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let c of a)try{if(typeof t.CanvasRenderingContext2D.prototype[c]!="function")continue;let u=Lo(t.CanvasRenderingContext2D.prototype,c,function(p){return function(...h){return An(this.canvas,n,i,r)||setTimeout(()=>{let y=[...h];if(c==="drawImage"&&y[0]&&y[0]instanceof HTMLCanvasElement){let m=y[0],b=m.getContext("2d"),R=b==null?void 0:b.getImageData(0,0,m.width,m.height),D=R==null?void 0:R.data;y[0]=JSON.stringify(D)}e(this.canvas,{type:Uo["2D"],property:c,args:y})},0),p.apply(this,h)}});s.push(u)}catch(u){let p=Zc(t.CanvasRenderingContext2D.prototype,c,{set(h){e(this.canvas,{type:Uo["2D"],property:c,args:[h],setter:!0})}});s.push(p)}return()=>{s.forEach(c=>c())}}function vC(e,t,n,r){let i=[];try{let o=Lo(e.HTMLCanvasElement.prototype,"getContext",function(s){return function(a,...c){return An(this,t,n,r)||"__context"in this||(this.__context=a),s.apply(this,[a,...c])}});i.push(o)}catch(o){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}var No="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Bs=0;Bs<No.length;Bs++)bC[No.charCodeAt(Bs)]=Bs;var Bs,wC=function(e){var t=new Uint8Array(e),n,r=t.length,i="";for(n=0;n<r;n+=3)i+=No[t[n]>>2],i+=No[(t[n]&3)<<4|t[n+1]>>4],i+=No[(t[n+1]&15)<<2|t[n+2]>>6],i+=No[t[n+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i},by=new Map;function SC(e,t){let n=by.get(e);return n||(n=new Map,by.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}var qy=(e,t,n)=>{if(!e||!(Gy(e,t)||typeof e=="object"))return;let r=e.constructor.name,i=SC(n,r),o=i.indexOf(e);return o===-1&&(o=i.length,i.push(e)),o};function Gc(e,t,n){if(e instanceof Array)return e.map(r=>Gc(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let r=e.constructor.name,i=wC(e);return{rr_type:r,base64:i}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Gc(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let r=e.constructor.name,{src:i}=e;return{rr_type:r,src:i}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Gc(e.data,t,n),e.width,e.height]};if(Gy(e,t)||typeof e=="object"){let r=e.constructor.name,i=qy(e,t,n);return{rr_type:r,index:i}}}}return e}var EC=(e,t,n)=>[...e].map(r=>Gc(r,t,n)),Gy=(e,t)=>{let r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof t[i]=="function");return Boolean(r.find(i=>e instanceof t[i]))};function wy(e,t,n,r,i,o,s,a){let c=[],u=Object.getOwnPropertyNames(e);for(let p of u)try{if(typeof e[p]!="function")continue;let h=Lo(e,p,function(y){return function(...m){let b=y.apply(this,m);if(qy(b,a,e),!An(this.canvas,r,o,i)){let R=s.getId(this.canvas),D=EC([...m],a,e),E={type:t,property:p,args:D};n(this.canvas,E)}return b}});c.push(h)}catch(h){let y=Zc(e,p,{set(m){n(this.canvas,{type:t,property:p,args:[m],setter:!0})}});c.push(y)}return c}function xC(e,t,n,r,i,o){let s=[];return s.push(...wy(t.WebGLRenderingContext.prototype,Uo.WebGL,e,n,r,i,o,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...wy(t.WebGL2RenderingContext.prototype,Uo.WebGL2,e,n,r,i,o,t)),()=>{s.forEach(a=>a())}}var Hf=class{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(n,r){(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(n)||this.pendingCanvasMutations.set(n,[]),this.pendingCanvasMutations.get(n).push(r)},this.mutationCb=t.mutationCb,this.mirror=t.mirror,t.recordCanvas===!0&&this.initCanvasMutationObserver(t.win,t.blockClass,t.blockSelector,t.unblockSelector)}initCanvasMutationObserver(t,n,r,i){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let o=vC(t,n,i,r),s=_C(this.processMutation.bind(this),t,n,i,r,this.mirror),a=xC(this.processMutation.bind(this),t,n,i,r,this.mirror);this.resetObservers=()=>{o(),s(),a()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=n=>{this.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{let r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;let i=r.map(s=>yC(s,["type"])),{type:o}=r[0];this.mutationCb({id:n,type:o,commands:i}),this.pendingCanvasMutations.delete(t)}};function _n(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}var on,Hs,qs=iC();function Li(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:o=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskTextClass:u="rr-mask",maskTextSelector:p=null,maskInputSelector:h=null,unmaskTextSelector:y=null,unmaskInputSelector:m=null,inlineStylesheet:b=!0,maskAllText:R=!1,maskAllInputs:D,maskInputOptions:E,slimDOMOptions:I,maskInputFn:N,maskTextFn:P,hooks:F,packFn:K,sampling:H={},mousemoveWait:z,recordCanvas:C=!1,userTriggeredOnInput:fe=!1,collectFonts:oe=!1,inlineImages:Re=!1,plugins:T,keepIframeSrcFn:pe=()=>!1,onMutation:Ce}=e;if(!t)throw new Error("emit function is required");z!==void 0&&H.mousemove===void 0&&(H.mousemove=z);let Ge=D===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:E!==void 0?E:{},$e=I===!0||I==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:I==="all",headMetaDescKeywords:I==="all"}:I||{};oC();let Ue,Ut=0,wn=ze=>{for(let At of T||[])At.eventProcessor&&(ze=At.eventProcessor(ze));return K&&(ze=K(ze)),ze};on=(ze,At)=>{var qt;if(!((qt=Ui[0])===null||qt===void 0)&&qt.isFrozen()&&ze.type!==xt.FullSnapshot&&!(ze.type===xt.IncrementalSnapshot&&ze.data.source===vn.Mutation)&&Ui.forEach(Lt=>Lt.unfreeze()),t(wn(ze),At),ze.type===xt.FullSnapshot)Ue=ze,Ut=0;else if(ze.type===xt.IncrementalSnapshot){if(ze.data.source===vn.Mutation&&ze.data.isAttachIframe)return;Ut++;let Lt=r&&Ut>=r,Gt=n&&ze.timestamp-Ue.timestamp>n;(Lt||Gt)&&Hs(!0)}};let Tt=ze=>{on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.Mutation},ze)}))},jt=ze=>on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.Scroll},ze)})),kt=ze=>on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.CanvasMutation},ze)})),et=new Gf({mutationCb:Tt}),pn=new Hf({recordCanvas:C,mutationCb:kt,win:window,blockClass:i,blockSelector:o,unblockSelector:s,mirror:qs}),Ht=new Kf({mutationCb:Tt,scrollCb:jt,bypassOptions:{onMutation:Ce,blockClass:i,blockSelector:o,unblockSelector:s,maskTextClass:u,maskTextSelector:p,unmaskTextSelector:y,maskInputSelector:h,unmaskInputSelector:m,inlineStylesheet:b,maskAllText:R,maskInputOptions:Ge,maskTextFn:P,maskInputFn:N,recordCanvas:C,inlineImages:Re,sampling:H,slimDOMOptions:$e,iframeManager:et,canvasManager:pn},mirror:qs});Hs=(ze=!1)=>{var At,qt,Lt,Gt;on(_n({type:xt.Meta,data:{href:window.location.href,width:Uy(),height:Ny()}}),ze),Ui.forEach(U=>U.lock());let[tt,j]=tC(document,{blockClass:i,blockSelector:o,unblockSelector:s,maskTextClass:u,maskTextSelector:p,unmaskTextSelector:y,maskInputSelector:h,unmaskInputSelector:m,inlineStylesheet:b,maskAllText:R,maskAllInputs:Ge,maskTextFn:P,slimDOM:$e,recordCanvas:C,inlineImages:Re,onSerialize:U=>{My(U)&&et.addIframe(U),zy(U)&&Ht.addShadowRoot(U.shadowRoot,document)},onIframeLoad:(U,A)=>{et.attachIframe(U,A),Ht.observeAttachShadow(U)},keepIframeSrcFn:pe});if(!tt)return console.warn("Failed to snapshot the document");qs.map=j,on(_n({type:xt.FullSnapshot,data:{node:tt,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:(document==null?void 0:document.documentElement.scrollLeft)||((qt=(At=document==null?void 0:document.body)===null||At===void 0?void 0:At.parentElement)===null||qt===void 0?void 0:qt.scrollLeft)||(document==null?void 0:document.body.scrollLeft)||0,top:window.pageYOffset!==void 0?window.pageYOffset:(document==null?void 0:document.documentElement.scrollTop)||((Gt=(Lt=document==null?void 0:document.body)===null||Lt===void 0?void 0:Lt.parentElement)===null||Gt===void 0?void 0:Gt.scrollTop)||(document==null?void 0:document.body.scrollTop)||0}}})),Ui.forEach(U=>U.unlock())};try{let ze=[];ze.push(Vn("DOMContentLoaded",()=>{on(_n({type:xt.DomContentLoaded,data:{}}))}));let At=Lt=>{var Gt;return lt(mC)({onMutation:Ce,mutationCb:Tt,mousemoveCb:(tt,j)=>on(_n({type:xt.IncrementalSnapshot,data:{source:j,positions:tt}})),mouseInteractionCb:tt=>on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.MouseInteraction},tt)})),scrollCb:jt,viewportResizeCb:tt=>on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.ViewportResize},tt)})),inputCb:tt=>on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.Input},tt)})),mediaInteractionCb:tt=>on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.MediaInteraction},tt)})),styleSheetRuleCb:tt=>on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.StyleSheetRule},tt)})),styleDeclarationCb:tt=>on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.StyleDeclaration},tt)})),canvasMutationCb:kt,fontCb:tt=>on(_n({type:xt.IncrementalSnapshot,data:Object.assign({source:vn.Font},tt)})),blockClass:i,ignoreClass:a,ignoreSelector:c,maskTextClass:u,maskTextSelector:p,unmaskTextSelector:y,maskInputSelector:h,unmaskInputSelector:m,maskInputOptions:Ge,inlineStylesheet:b,sampling:H,recordCanvas:C,inlineImages:Re,userTriggeredOnInput:fe,collectFonts:oe,doc:Lt,maskAllText:R,maskInputFn:N,maskTextFn:P,blockSelector:o,unblockSelector:s,slimDOMOptions:$e,mirror:qs,iframeManager:et,shadowDomManager:Ht,canvasManager:pn,plugins:((Gt=T==null?void 0:T.filter(tt=>tt.observer))===null||Gt===void 0?void 0:Gt.map(tt=>({observer:tt.observer,options:tt.options,callback:j=>on(_n({type:xt.Plugin,data:{plugin:tt.name,payload:j}}))})))||[]},F)};et.addLoadListener(Lt=>{try{ze.push(At(Lt.contentDocument))}catch(Gt){console.warn(Gt)}});let qt=()=>{Hs(),ze.push(At(document))};return document.readyState==="interactive"||document.readyState==="complete"?qt():ze.push(Vn("load",()=>{on(_n({type:xt.Load,data:{}})),qt()},window)),()=>{ze.forEach(Lt=>Lt())}}catch(ze){console.warn(ze)}}Li.addCustomEvent=(e,t)=>{if(!on)throw new Error("please add custom event after start recording");on(_n({type:xt.Custom,data:{tag:e,payload:t}}))};Li.freezePage=()=>{Ui.forEach(e=>e.freeze())};Li.takeFullSnapshot=e=>{if(!Hs)throw new Error("please take full snapshot after start recording");Hs(e)};Li.mirror=qs;var RC=["name","type","startTime","transferSize","duration"];function Sy(e){return function(t){return RC.every(n=>e[n]===t[n])}}function CC(e,t){let[n,r,i]=e.reduce((c,u)=>(u.entryType==="navigation"?c[0].push(u):u.entryType==="largest-contentful-paint"?c[1].push(u):c[2].push(u),c),[[],[],[]]),o=[],s=[],a=r.length?r[r.length-1]:void 0;return t.forEach(c=>{if(c.entryType==="largest-contentful-paint"){(!a||a.startTime<c.startTime)&&(a=c);return}if(c.entryType==="navigation"){let u=c;c.duration>0&&!n.find(Sy(u))&&!s.find(Sy(u))&&s.push(u);return}o.push(c)}),[...a?[a]:[],...n,...i,...o,...s].sort((c,u)=>c.startTime-u.startTime)}function TC(e){let t=r=>{let i=CC(e.performanceEvents,r.getEntries());e.performanceEvents=i},n=new PerformanceObserver(t);return["element","event","first-input","largest-contentful-paint","layout-shift","longtask","navigation","paint","resource"].forEach(r=>{try{n.observe({type:r,buffered:!0})}catch(i){}}),n}var kC=`/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */
function t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const r=new Array(60);t(r);const o=new Array(512);t(o);const l=new Array(256);t(l);const h=new Array(29);t(h);const d=new Array(30);function _(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let f,c,u;function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(d);const m=t=>t<256?o[t]:o[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},g=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},p=(t,e,a)=>{g(t,a[2*e],a[2*e+1])},k=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},v=(t,e,a)=>{const i=new Array(16);let n,s,r=0;for(n=1;n<=15;n++)r=r+a[n-1]<<1,i[n]=r;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=k(i[e]++,e))}},y=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},x=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},z=(t,e,a,i)=>{const n=2*e,s=2*a;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[a]},A=(t,e,a)=>{const i=t.heap[a];let n=a<<1;for(;n<=t.heap_len&&(n<t.heap_len&&z(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!z(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i},E=(t,i,n)=>{let s,r,o,_,f=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+f++],s+=(255&t.pending_buf[t.sym_buf+f++])<<8,r=t.pending_buf[t.sym_buf+f++],0===s?p(t,r,i):(o=l[r],p(t,o+256+1,i),_=e[o],0!==_&&(r-=h[o],g(t,r,_)),s--,o=m(s),p(t,o,n),_=a[o],0!==_&&(s-=d[o],g(t,s,_)))}while(f<t.sym_next);p(t,256,i)},R=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let r,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<s;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,a[2*l]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)A(t,a,r);l=s;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*l]=a[2*r]+a[2*o],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=l,t.heap[1]=l++,A(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,_,f,c,u,w=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)d=t.heap[h],f=a[2*a[2*d+1]+1]+1,f>l&&(f=l,w++),a[2*d+1]=f,d>i||(t.bl_count[f]++,c=0,d>=o&&(c=r[d-o]),u=a[2*d],t.opt_len+=u*(f+c),s&&(t.static_len+=u*(n[2*d+1]+c)));if(0!==w){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(f=l;0!==f;f--)for(d=t.bl_count[f];0!==d;)_=t.heap[--h],_>i||(a[2*_+1]!==f&&(t.opt_len+=(f-a[2*_+1])*a[2*_],a[2*_+1]=f),d--)}})(t,e),v(a,h,t.bl_count)},Z=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=r,r=e[2*(i+1)+1],++o<l&&n===r||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4))},U=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),i=0;i<=a;i++)if(n=r,r=e[2*(i+1)+1],!(++o<l&&n===r)){if(o<h)do{p(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(p(t,n,t.bl_tree),o--),p(t,16,t.bl_tree),g(t,o-3,2)):o<=10?(p(t,17,t.bl_tree),g(t,o-3,3)):(p(t,18,t.bl_tree),g(t,o-11,7));o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4)}};let S=!1;const D=(t,e,a,i)=>{g(t,0+(i?1:0),3),x(t),b(t,a),b(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a};var T=(t,e,a,i)=>{let o,l,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),R(t,t.l_desc),R(t,t.d_desc),h=(t=>{let e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*n[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=o&&(o=l)):o=l=a+5,a+4<=o&&-1!==e?D(t,e,a,i):4===t.strategy||l===o?(g(t,2+(i?1:0),3),E(t,s,r)):(g(t,4+(i?1:0),3),((t,e,a,i)=>{let s;for(g(t,e-257,5),g(t,a-1,5),g(t,i-4,4),s=0;s<i;s++)g(t,t.bl_tree[2*n[s]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),E(t,t.dyn_ltree,t.dyn_dtree)),y(t),i&&x(t)},O={_tr_init:t=>{S||((()=>{let t,n,w,m,b;const g=new Array(16);for(w=0,m=0;m<28;m++)for(h[m]=w,t=0;t<1<<e[m];t++)l[w++]=m;for(l[w-1]=m,b=0,m=0;m<16;m++)for(d[m]=b,t=0;t<1<<a[m];t++)o[b++]=m;for(b>>=7;m<30;m++)for(d[m]=b<<7,t=0;t<1<<a[m]-7;t++)o[256+b++]=m;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,g[8]++;for(;t<=255;)s[2*t+1]=9,t++,g[9]++;for(;t<=279;)s[2*t+1]=7,t++,g[7]++;for(;t<=287;)s[2*t+1]=8,t++,g[8]++;for(v(s,287,g),t=0;t<30;t++)r[2*t+1]=5,r[2*t]=k(t,5);f=new _(s,e,257,286,15),c=new _(r,a,0,30,15),u=new _(new Array(0),i,0,19,7)})(),S=!0),t.l_desc=new w(t.dyn_ltree,f),t.d_desc=new w(t.dyn_dtree,c),t.bl_desc=new w(t.bl_tree,u),t.bi_buf=0,t.bi_valid=0,y(t)},_tr_stored_block:D,_tr_flush_block:T,_tr_tally:(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(l[a]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{g(t,2,3),p(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,a,i)=>{let n=65535&t|0,s=t>>>16&65535|0,r=0;for(;0!==a;){r=a>2e3?2e3:a,a-=r;do{n=n+e[i++]|0,s=s+n|0}while(--r);n%=65521,s%=65521}return n|s<<16|0};const L=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var N=(t,e,a,i)=>{const n=L,s=i+a;t^=-1;for(let a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t},I={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:C,_tr_stored_block:H,_tr_flush_block:M,_tr_tally:j,_tr_align:K}=O,{Z_NO_FLUSH:P,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:G,Z_FINISH:X,Z_BLOCK:W,Z_OK:q,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:V,Z_BUF_ERROR:$,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:at,Z_RLE:it,Z_FIXED:nt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:rt,Z_DEFLATED:ot}=B,lt=(t,e)=>(t.msg=I[e],e),ht=t=>2*t-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},_t=t=>{let e,a,i,n=t.w_size;e=t.hash_size,i=e;do{a=t.head[--i],t.head[i]=a>=n?a-n:0}while(--e);e=n,i=e;do{a=t.prev[--i],t.prev[i]=a>=n?a-n:0}while(--e)};let ft=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const ct=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},ut=(t,e)=>{M(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ct(t.strm)},wt=(t,e)=>{t.pending_buf[t.pending++]=e},mt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bt=(t,e,a,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),a),1===t.state.wrap?t.adler=F(t.adler,e,n,a):2===t.state.wrap&&(t.adler=N(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)},gt=(t,e)=>{let a,i,n=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,h=t.window,d=t.w_mask,_=t.prev,f=t.strstart+258;let c=h[s+r-1],u=h[s+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+r]===u&&h[a+r-1]===c&&h[a]===h[s]&&h[++a]===h[s+1]){s+=2,a++;do{}while(h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&s<f);if(i=258-(f-s),s=f-258,i>r){if(t.match_start=e,r=i,i>=o)break;c=h[s+r-1],u=h[s+r]}}}while((e=_[e&d])>l&&0!=--n);return r<=t.lookahead?r:t.lookahead},pt=t=>{const e=t.w_size;let a,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),_t(t),i+=e),0===t.strm.avail_in)break;if(a=bt(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=ft(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},kt=(t,e)=>{let a,i,n,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,i=t.strstart-t.block_start,a>i+t.strm.avail_in&&(a=i+t.strm.avail_in),a>n&&(a=n),a<s&&(0===a&&e!==X||e===P||a!==i+t.strm.avail_in))break;r=e===X&&a===i+t.strm.avail_in?1:0,H(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,ct(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(bt(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==P&&e!==X&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(bt(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n,s=n>t.w_size?t.w_size:n,i=t.strstart-t.block_start,(i>=s||(i||e===X)&&e!==P&&0===t.strm.avail_in&&i<=n)&&(a=i>n?n:i,r=e===X&&0===t.strm.avail_in&&a===i?1:0,H(t,t.block_start,a,r),t.block_start+=a,ct(t.strm)),r?3:1)},vt=(t,e)=>{let a,i;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a)),t.match_length>=3)if(i=j(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else i=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2},yt=(t,e)=>{let a,i,n;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=j(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(ut(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=j(t,0,t.window[t.strstart-1]),i&&ut(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=j(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2};function xt(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}const zt=[new xt(0,0,0,0,kt),new xt(4,4,8,4,vt),new xt(4,5,16,8,vt),new xt(4,6,32,32,vt),new xt(4,4,16,16,yt),new xt(8,16,32,32,yt),new xt(8,16,128,128,yt),new xt(8,32,128,256,yt),new xt(32,128,258,1024,yt),new xt(32,258,258,4096,yt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Et=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},Rt=t=>{if(Et(t))return lt(t,Q);t.total_in=t.total_out=0,t.data_type=rt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,C(e),q},Zt=t=>{const e=Rt(t);var a;return e===q&&((a=t.state).window_size=2*a.w_size,dt(a.head),a.max_lazy_match=zt[a.level].max_lazy,a.good_match=zt[a.level].good_length,a.nice_match=zt[a.level].nice_length,a.max_chain_length=zt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},Ut=(t,e,a,i,n,s)=>{if(!t)return Q;let r=1;if(e===tt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||a!==ot||i<8||i>15||e<0||e>9||s<0||s>nt||8===i&&1!==r)return lt(t,Q);8===i&&(i=9);const o=new At;return t.state=o,o.strm=t,o.status=42,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=a,Zt(t)};var St={deflateInit:(t,e)=>Ut(t,e,ot,15,8,st),deflateInit2:Ut,deflateReset:Zt,deflateResetKeep:Rt,deflateSetHeader:(t,e)=>Et(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,q),deflate:(t,e)=>{if(Et(t)||e>W||e<0)return t?lt(t,Q):Q;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===a.status&&e!==X)return lt(t,0===t.avail_out?$:Q);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(ct(t),0===t.avail_out)return a.last_flush=-1,q}else if(0===t.avail_in&&ht(e)<=ht(i)&&e!==X)return lt(t,$);if(666===a.status&&0!==t.avail_in)return lt(t,$);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let e=ot+(a.w_bits-8<<4)<<8,i=-1;if(i=a.strategy>=at||a.level<2?0:a.level<6?1:6===a.level?2:3,e|=i<<6,0!==a.strstart&&(e|=32),e+=31-e%31,mt(a,e),0!==a.strstart&&(mt(a,t.adler>>>16),mt(a,65535&t.adler)),t.adler=1,a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(57===a.status)if(t.adler=0,wt(a,31),wt(a,139),wt(a,8),a.gzhead)wt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),wt(a,255&a.gzhead.time),wt(a,a.gzhead.time>>8&255),wt(a,a.gzhead.time>>16&255),wt(a,a.gzhead.time>>24&255),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(wt(a,255&a.gzhead.extra.length),wt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=N(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,3),a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let n=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=n,ct(t),0!==a.pending)return a.last_flush=-1,q;e=0,i-=n}let n=new Uint8Array(a.gzhead.extra);a.pending_buf.set(n.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(ct(t),0!==a.pending))return a.last_flush=-1,q;wt(a,255&t.adler),wt(a,t.adler>>8&255),t.adler=0}if(a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(0!==t.avail_in||0!==a.lookahead||e!==P&&666!==a.status){let i=0===a.level?kt(a,e):a.strategy===at?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(pt(t),0===t.lookahead)){if(e===P)return 1;break}if(t.match_length=0,a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):a.strategy===it?((t,e)=>{let a,i,n,s;const r=t.window;for(;;){if(t.lookahead<=258){if(pt(t),t.lookahead<=258&&e===P)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=r[n],i===r[++n]&&i===r[++n]&&i===r[++n])){s=t.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<s);t.match_length=258-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=j(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):zt[a.level].func(a,e);if(3!==i&&4!==i||(a.status=666),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),q;if(2===i&&(e===Y?K(a):e!==W&&(H(a,0,0,!1),e===G&&(dt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ct(t),0===t.avail_out))return a.last_flush=-1,q}return e!==X?q:a.wrap<=0?J:(2===a.wrap?(wt(a,255&t.adler),wt(a,t.adler>>8&255),wt(a,t.adler>>16&255),wt(a,t.adler>>24&255),wt(a,255&t.total_in),wt(a,t.total_in>>8&255),wt(a,t.total_in>>16&255),wt(a,t.total_in>>24&255)):(mt(a,t.adler>>>16),mt(a,65535&t.adler)),ct(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?q:J)},deflateEnd:t=>{if(Et(t))return Q;const e=t.state.status;return t.state=null,113===e?lt(t,V):q},deflateSetDictionary:(t,e)=>{let a=e.length;if(Et(t))return Q;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Q;if(1===n&&(t.adler=F(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===n&&(dt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const s=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,pt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=ft(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,pt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=s,i.wrap=n,q},deflateInfo:"pako deflate (from Nodeca project)"};const Dt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Tt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)Dt(a,e)&&(t[e]=a[e])}}return t},Ot=t=>{let e=0;for(let a=0,i=t.length;a<i;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];a.set(n,i),i+=n.length}return a};let Ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ft=!1}const Lt=new Uint8Array(256);for(let t=0;t<256;t++)Lt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Lt[254]=Lt[254]=1;var Nt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,n,s,r=t.length,o=0;for(n=0;n<r;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},It=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,n;const s=new Array(2*a);for(n=0,i=0;i<a;){let e=t[i++];if(e<128){s[n++]=e;continue}let r=Lt[e];if(r>4)s[n++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ft)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a})(s,n)},Bt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+Lt[t[a]]>e?a:e};var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Mt,Z_SYNC_FLUSH:jt,Z_FULL_FLUSH:Kt,Z_FINISH:Pt,Z_OK:Yt,Z_STREAM_END:Gt,Z_DEFAULT_COMPRESSION:Xt,Z_DEFAULT_STRATEGY:Wt,Z_DEFLATED:qt}=B;function Jt(t){this.options=Tt({level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=St.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Yt)throw new Error(I[a]);if(e.header&&St.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Nt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=St.deflateSetDictionary(this.strm,t),a!==Yt)throw new Error(I[a]);this._dict_set=!0}}function Qt(t,e){const a=new Jt(e);if(a.push(t,!0),a.err)throw a.msg||I[a.err];return a.result}Jt.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Pt:Mt,"string"==typeof t?a.input=Nt(t):"[object ArrayBuffer]"===Ht.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s===jt||s===Kt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(n=St.deflate(a,s),n===Gt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=St.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Yt;if(0!==a.avail_out){if(s>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===Yt&&(this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vt={Deflate:Jt,deflate:Qt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Qt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Qt(t,e)},constants:B};var $t=function(t,e){let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,i=a+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),r=n+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,_=E.window,f=E.hold,c=E.bits,u=E.lencode,w=E.distcode,m=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;t:do{c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=u[f&m];e:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,0===p)A[n++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=u[(65535&g)+(f&(1<<p)-1)];continue e}if(32&p){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=16209;break t}k=65535&g,p&=15,p&&(c<p&&(f+=z[a++]<<c,c+=8),k+=f&(1<<p)-1,f>>>=p,c-=p),c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=w[f&b];a:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,!(16&p)){if(0==(64&p)){g=w[(65535&g)+(f&(1<<p)-1)];continue a}t.msg="invalid distance code",E.mode=16209;break t}if(v=65535&g,p&=15,c<p&&(f+=z[a++]<<c,c+=8,c<p&&(f+=z[a++]<<c,c+=8)),v+=f&(1<<p)-1,v>o){t.msg="invalid distance too far back",E.mode=16209;break t}if(f>>>=p,c-=p,p=n-s,v>p){if(p=v-p,p>h&&E.sane){t.msg="invalid distance too far back",E.mode=16209;break t}if(y=0,x=_,0===d){if(y+=l-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}else if(d<p){if(y+=l+d-p,p-=d,p<k){k-=p;do{A[n++]=_[y++]}while(--p);if(y=0,d<k){p=d,k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}}else if(y+=d-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}for(;k>2;)A[n++]=x[y++],A[n++]=x[y++],A[n++]=x[y++],k-=3;k&&(A[n++]=x[y++],k>1&&(A[n++]=x[y++]))}else{y=n-v;do{A[n++]=A[y++],A[n++]=A[y++],A[n++]=A[y++],k-=3}while(k>2);k&&(A[n++]=A[y++],k>1&&(A[n++]=A[y++]))}break}}break}}while(a<i&&n<r);k=c>>3,a-=k,c-=k<<3,f&=(1<<c)-1,t.next_in=a,t.next_out=n,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=n<r?r-n+257:257-(n-r),E.hold=f,E.bits=c};const te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ee=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,a,i,n,s,r,o)=>{const l=o.bits;let h,d,_,f,c,u,w=0,m=0,b=0,g=0,p=0,k=0,v=0,y=0,x=0,z=0,A=null;const E=new Uint16Array(16),R=new Uint16Array(16);let Z,U,S,D=null;for(w=0;w<=15;w++)E[w]=0;for(m=0;m<i;m++)E[e[a+m]]++;for(p=l,g=15;g>=1&&0===E[g];g--);if(p>g&&(p=g),0===g)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(b=1;b<g&&0===E[b];b++);for(p<b&&(p=b),y=1,w=1;w<=15;w++)if(y<<=1,y-=E[w],y<0)return-1;if(y>0&&(0===t||1!==g))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+E[w];for(m=0;m<i;m++)0!==e[a+m]&&(r[R[e[a+m]]++]=m);if(0===t?(A=D=r,u=20):1===t?(A=te,D=ee,u=257):(A=ae,D=ie,u=0),z=0,m=0,w=b,c=s,k=p,v=0,_=-1,x=1<<p,f=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){Z=w-v,r[m]+1<u?(U=0,S=r[m]):r[m]>=u?(U=D[r[m]-u],S=A[r[m]-u]):(U=96,S=0),h=1<<w-v,d=1<<k,b=d;do{d-=h,n[c+(z>>v)+d]=Z<<24|U<<16|S|0}while(0!==d);for(h=1<<w-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,m++,0==--E[w]){if(w===g)break;w=e[a+r[m]]}if(w>p&&(z&f)!==_){for(0===v&&(v=p),c+=b,k=w-v,y=1<<k;k+v<g&&(y-=E[k+v],!(y<=0));)k++,y<<=1;if(x+=1<<k,1===t&&x>852||2===t&&x>592)return 1;_=z&f,n[_]=p<<24|k<<16|c-s|0}}return 0!==z&&(n[c+z]=w-v<<24|64<<16|0),o.bits=p,0};const{Z_FINISH:se,Z_BLOCK:re,Z_TREES:oe,Z_OK:le,Z_STREAM_END:he,Z_NEED_DICT:de,Z_STREAM_ERROR:_e,Z_DATA_ERROR:fe,Z_MEM_ERROR:ce,Z_BUF_ERROR:ue,Z_DEFLATED:we}=B,me=16209,be=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ge(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pe=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<16180||e.mode>16211?1:0},ke=t=>{if(pe(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=16180,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,le},ve=t=>{if(pe(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ke(t)},ye=(t,e)=>{let a;if(pe(t))return _e;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,ve(t))},xe=(t,e)=>{if(!t)return _e;const a=new ge;t.state=a,a.strm=t,a.window=null,a.mode=16180;const i=ye(t,e);return i!==le&&(t.state=null),i};let ze,Ae,Ee=!0;const Re=t=>{if(Ee){ze=new Int32Array(512),Ae=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,ze,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,Ae,0,t.work,{bits:5}),Ee=!1}t.lencode=ze,t.lenbits=9,t.distcode=Ae,t.distbits=5},Ze=(t,e,a,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(a-s.wsize,a),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(a-i,a-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(a-i,a),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var Ue={inflateReset:ve,inflateReset2:ye,inflateResetKeep:ke,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z=0;const A=new Uint8Array(4);let E,R;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pe(t)||!t.output||!t.input&&0!==t.avail_in)return _e;a=t.state,16191===a.mode&&(a.mode=16192),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,_=o,f=l,x=le;t:for(;;)switch(a.mode){case 16180:if(0===a.wrap){a.mode=16192;break}for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(2&a.wrap&&35615===h){0===a.wbits&&(a.wbits=15),a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0),h=0,d=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=me;break}if((15&h)!==we){t.msg="unknown compression method",a.mode=me;break}if(h>>>=4,d-=4,y=8+(15&h),0===a.wbits&&(a.wbits=y),y>15||y>a.wbits){t.msg="invalid window size",a.mode=me;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&h?16189:16191,h=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==we){t.msg="unknown compression method",a.mode=me;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=me;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=N(a.check,A,4,0)),h=0,d=0,a.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16184;case 16184:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(c=a.length,c>o&&(c=o),c&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(s,s+c),y)),512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,a.length-=c),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=me;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}t.adler=a.check=be(h),h=0,d=0,a.mode=16190;case 16190:if(0===a.havedict)return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,de;t.adler=a.check=1,a.mode=16191;case 16191:if(e===re||e===oe)break t;case 16192:if(a.last){h>>>=7&d,d-=7&d,a.mode=16206;break}for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}switch(a.last=1&h,h>>>=1,d-=1,3&h){case 0:a.mode=16193;break;case 1:if(Re(a),a.mode=16199,e===oe){h>>>=2,d-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=me}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=me;break}if(a.length=65535&h,h=0,d=0,a.mode=16194,e===oe)break t;case 16194:a.mode=16195;case 16195:if(c=a.length,c){if(c>o&&(c=o),c>l&&(c=l),0===c)break t;n.set(i.subarray(s,s+c),r),o-=c,s+=c,l-=c,r+=c,a.length-=c;break}a.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=me;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.lens[Z[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[Z[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=ne(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=me;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(g<16)h>>>=m,d-=m,a.lens[a.have++]=g;else{if(16===g){for(R=m+2;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(h>>>=m,d-=m,0===a.have){t.msg="invalid bit length repeat",a.mode=me;break}y=a.lens[a.have-1],c=3+(3&h),h>>>=2,d-=2}else if(17===g){for(R=m+3;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=3+(7&h),h>>>=3,d-=3}else{for(R=m+7;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=11+(127&h),h>>>=7,d-=7}if(a.have+c>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=me;break}for(;c--;)a.lens[a.have++]=y}}if(a.mode===me)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=me;break}if(a.lenbits=9,E={bits:a.lenbits},x=ne(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=me;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=ne(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=me;break}if(a.mode=16199,e===oe)break t;case 16199:a.mode=16200;case 16200:if(o>=6&&l>=258){t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,$t(t,f),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,16191===a.mode&&(a.back=-1);break}for(a.back=0;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(b&&0==(240&b)){for(p=m,k=b,v=g;z=a.lencode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,a.length=g,0===b){a.mode=16205;break}if(32&b){a.back=-1,a.mode=16191;break}if(64&b){t.msg="invalid literal/length code",a.mode=me;break}a.extra=15&b,a.mode=16201;case 16201:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;z=a.distcode[h&(1<<a.distbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(0==(240&b)){for(p=m,k=b,v=g;z=a.distcode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,64&b){t.msg="invalid distance code",a.mode=me;break}a.offset=g,a.extra=15&b,a.mode=16203;case 16203:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=me;break}a.mode=16204;case 16204:if(0===l)break t;if(c=f-l,a.offset>c){if(c=a.offset-c,c>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=me;break}c>a.wnext?(c-=a.wnext,u=a.wsize-c):u=a.wnext-c,c>a.length&&(c=a.length),w=a.window}else w=n,u=r-a.offset,c=a.length;c>l&&(c=l),l-=c,a.length-=c;do{n[r++]=w[u++]}while(--c);0===a.length&&(a.mode=16200);break;case 16205:if(0===l)break t;n[r++]=a.length,l--,a.mode=16200;break;case 16206:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[s++]<<d,d+=8}if(f-=l,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,r-f):F(a.check,n,f,r-f)),f=l,4&a.wrap&&(a.flags?h:be(h))!==a.check){t.msg="incorrect data check",a.mode=me;break}h=0,d=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=me;break}h=0,d=0}a.mode=16208;case 16208:x=he;break t;case me:x=fe;break t;case 16210:return ce;default:return _e}return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||f!==t.avail_out&&a.mode<me&&(a.mode<16206||e!==se))&&Ze(t,t.output,t.next_out,f-t.avail_out),_-=t.avail_in,f-=t.avail_out,t.total_in+=_,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,t.next_out-f):F(a.check,n,f,t.next_out-f)),t.data_type=a.bits+(a.last?64:0)+(16191===a.mode?128:0)+(16199===a.mode||16194===a.mode?256:0),(0===_&&0===f||e===se)&&x===le&&(x=ue),x},inflateEnd:t=>{if(pe(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,le},inflateGetHeader:(t,e)=>{if(pe(t))return _e;const a=t.state;return 0==(2&a.wrap)?_e:(a.head=e,e.done=!1,le)},inflateSetDictionary:(t,e)=>{const a=e.length;let i,n,s;return pe(t)?_e:(i=t.state,0!==i.wrap&&16190!==i.mode?_e:16190===i.mode&&(n=1,n=F(n,e,a,0),n!==i.check)?fe:(s=Ze(t,e,a,a),s?(i.mode=16210,ce):(i.havedict=1,le)))},inflateInfo:"pako inflate (from Nodeca project)"};var Se=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const De=Object.prototype.toString,{Z_NO_FLUSH:Te,Z_FINISH:Oe,Z_OK:Fe,Z_STREAM_END:Le,Z_NEED_DICT:Ne,Z_STREAM_ERROR:Ie,Z_DATA_ERROR:Be,Z_MEM_ERROR:Ce}=B;function He(t){this.options=Tt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=Ue.inflateInit2(this.strm,e.windowBits);if(a!==Fe)throw new Error(I[a]);if(this.header=new Se,Ue.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Nt(e.dictionary):"[object ArrayBuffer]"===De.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Ue.inflateSetDictionary(this.strm,e.dictionary),a!==Fe)))throw new Error(I[a])}He.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Oe:Te,"[object ArrayBuffer]"===De.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),s=Ue.inflate(a,r),s===Ne&&n&&(s=Ue.inflateSetDictionary(a,n),s===Fe?s=Ue.inflate(a,r):s===Be&&(s=Ne));a.avail_in>0&&s===Le&&a.state.wrap>0&&0!==t[a.next_in];)Ue.inflateReset(a),s=Ue.inflate(a,r);switch(s){case Ie:case Be:case Ne:case Ce:return this.onEnd(s),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||s===Le))if("string"===this.options.to){let t=Bt(a.output,a.next_out),e=a.next_out-t,n=It(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(s!==Fe||0!==o){if(s===Le)return s=Ue.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},He.prototype.onData=function(t){this.chunks.push(t)},He.prototype.onEnd=function(t){t===Fe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const{Deflate:Me,deflate:je,deflateRaw:Ke,gzip:Pe}=Vt;var Ye=Me,Ge=je,Xe=B;const We=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const e=this._hasEvents?",":"";this.deflate.push(e+t,Xe.Z_SYNC_FLUSH),this._hasEvents=!0}finish(){if(this.deflate.push("]",Xe.Z_FINISH),this.deflate.err)throw this.deflate.err;const t=this.deflate.result;return this._init(),t}_init(){this._hasEvents=!1,this.deflate=new Ye,this.deflate.push("[",Xe.Z_NO_FLUSH)}},qe={clear:()=>{We.clear()},addEvent:t=>We.addEvent(t),finish:()=>We.finish(),compress:t=>function(t){return Ge(t)}(t)};addEventListener("message",(function(t){const e=t.data.method,a=t.data.id,i=t.data.arg;if(e in qe&&"function"==typeof qe[e])try{const t=qe[e](i);postMessage({id:a,method:e,success:!0,response:t})}catch(t){postMessage({id:a,method:e,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});`;function AC(){let e=new Blob([kC]);return URL.createObjectURL(e)}var Yc=class{constructor(){this.events=[]}get hasEvents(){return this.events.length>0}destroy(){this.events=[]}async addEvent(t,n){if(n){this.events=[t];return}this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.events=[],t(JSON.stringify(n))})}},Vf=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((i,o)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("[Replay]",c.response),o(new Error("Error in compression worker"));return}i(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},$f=class{constructor(t){this._worker=new Vf(t),this.hasEvents=!1}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}async addEvent(t,n){return this.hasEvents=!0,n&&await this._clear(),this._sendEventToWorker(t)}finish(){return this._finishRequest()}_sendEventToWorker(t){return this._worker.postMessage("addEvent",JSON.stringify(t))}async _finishRequest(){let t=await this._worker.postMessage("finish");return this.hasEvents=!1,t}_clear(){return this._worker.postMessage("clear")}},Yf=class{constructor(t){this._fallback=new Yc,this._compression=new $f(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get hasEvents(){return this._used.hasEvents}destroy(){this._fallback.destroy(),this._compression.destroy()}addEvent(t,n){return this._used.addEvent(t,n)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t}=this._fallback,n=[];for(let r of t)n.push(this._compression.addEvent(r));this._used=this._compression;try{await Promise.all(n)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.warn("[Replay] Failed to add events when switching buffers.",r)}}};function IC({useCompression:e}){if(e&&window.Worker)try{let t=AC();(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Replay] Using compression worker");let n=new Worker(t);return new Yf(n)}catch(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Replay] Failed to create compression worker")}return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Replay] Using simple buffer"),new Yc}function Wf(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Ky(e,t,n=+new Date){return Wf(e.started,t.maxSessionLife,n)||Wf(e.lastActivity,t.sessionIdle,n)}function Xf(e){if("sessionStorage"in Xt)try{Xt.sessionStorage.setItem(Iy,JSON.stringify(e))}catch(n){}}function Ey(e){return e===void 0?!1:Math.random()<e}function Zf(e){let t=Date.now(),n=e.id||Eo(),r=e.started||t,i=e.lastActivity||t,o=e.segmentId||0,s=e.sampled;return{id:n,started:r,lastActivity:i,segmentId:o,sampled:s}}function OC(e,t){return Ey(e)?"session":Ey(t)?"error":!1}function PC({sessionSampleRate:e,errorSampleRate:t,stickySession:n=!1}){let r=OC(e,t),i=Zf({sampled:r});return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log(`[Replay] Creating new session: ${i.id}`),n&&Xf(i),i}function DC(){if(!("sessionStorage"in Xt))return null;try{let t=Xt.sessionStorage.getItem(Iy);if(!t)return null;let n=JSON.parse(t);return Zf(n)}catch(t){return null}}function NC({timeouts:e,currentSession:t,stickySession:n,sessionSampleRate:r,errorSampleRate:i}){let o=t||n&&DC();if(o)if(Ky(o,e)){if(o.sampled==="error")return{type:"new",session:Zf({sampled:!1})};(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Replay] Session has expired")}else return{type:"saved",session:o};return{type:"new",session:PC({stickySession:n,sessionSampleRate:r,errorSampleRate:i})}}async function eu(e,t,n){if(!e.eventBuffer||e.isPaused())return null;let i=t.timestamp>9999999999?t.timestamp:t.timestamp*1e3;if(i+e.timeouts.sessionIdle<Date.now())return null;let o=e.getContext().earliestEvent;e.session&&e.session.segmentId===0&&(!o||i<o)&&(e.getContext().earliestEvent=i);try{return await e.eventBuffer.addEvent(t,n)}catch(s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error(s),e.stop("addEvent");let a=Ze().getClient();a&&a.recordDroppedEvent("internal_sdk_error","replay")}}function Vs(e){return!e.type}function Wc(e){return e.type==="transaction"}function UC(e){return e.type==="replay_event"}function Hy(e){let t=LC();return(n,r)=>{if(!Vs(n)&&!Wc(n))return;let i=r&&r.statusCode;if(!(t&&(!i||i<200||i>=300))){if(Wc(n)&&n.contexts&&n.contexts.trace&&n.contexts.trace.trace_id){e.getContext().traceIds.add(n.contexts.trace.trace_id);return}Vs(n)&&(n.event_id&&e.getContext().errorIds.add(n.event_id),e.recordingMode==="error"&&n.exception&&n.message!==Qf&&setTimeout(async()=>{await e.flushImmediate(),e.stopRecording()&&(e.recordingMode="session",e.startRecording())}))}}}function LC(){let e=Ze().getClient();if(!e)return!1;let t=e.getTransport();return t&&t.send.__sentry__baseTransport__||!1}var Jc;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(Jc||(Jc={}));function $s(e){return{timestamp:Date.now()/1e3,type:"default",...e}}function Vy(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(eu(e,{type:xt.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:t}}),t.category==="console")))}var FC=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid"]);function MC(e){let t={};for(let n in e)if(FC.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var zC=e=>t=>{if(!e.isEnabled())return;let n=BC(t);n&&Vy(e,n)};function BC(e){let t,n;try{n=jC(e),t=Is(n)}catch(i){t="<unknown>"}let r=n&&"__sn"in n&&n.__sn.type===Jc.Element?n.__sn:null;return $s({category:`ui.${e.name}`,message:t,data:r?{nodeId:r.id,node:{id:r.id,tagName:r.tagName,textContent:n?Array.from(n.childNodes).map(i=>"__sn"in i&&i.__sn.type===Jc.Text&&i.__sn.textContent).filter(Boolean).map(i=>i.trim()).join(""):"",attributes:MC(r.attributes)}}:{}})}function jC(e){return qC(e.event)?e.event.target:e.event}function qC(e){return!!e.target}function GC(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:t.originalException&&t.originalException.__rrweb__?!0:e.exception.values.some(n=>!n.stacktrace||!n.stacktrace.frames||!n.stacktrace.frames.length?!1:n.stacktrace.frames.some(r=>r.filename&&r.filename.includes("/rrweb/src/")))}function KC(e,t=!1){let n=t?Hy(e):void 0;return(r,i)=>{if(UC(r))return delete r.breadcrumbs,r;if(!Vs(r)&&!Wc(r))return r;if(GC(r,i)&&!e.getOptions()._experiments.captureExceptions)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Replay] Ignoring error from rrweb internals",r),null;if((Vs(r)||Wc(r)&&e.recordingMode==="session")&&(r.tags={...r.tags,replayId:e.getSessionId()}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&e.getOptions()._experiments.traceInternals&&Vs(r)){let o=VC(r);HC({message:`Tagging event (${r.event_id}) - ${r.message} - ${o.type}: ${o.value}`})}return n&&n(r,{statusCode:200}),r}}function HC(e){let{category:t,level:n,message:r,...i}=e;pf({category:t||"console",level:n||"debug",message:`[debug]: ${r}`,...i})}function VC(e){return{type:"Unknown",value:"n/a",...e.exception&&e.exception.values&&e.exception.values[0]}}function tu(e,t){return t.map(({type:n,start:r,end:i,name:o,data:s})=>eu(e,{type:xt.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:o,startTimestamp:r,endTimestamp:i,data:s}}}))}function $C(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function YC(e){return t=>{if(!e.isEnabled())return;let n=$C(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(tu(e,[n]),!1)))}}function WC(e,t){return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&e.getOptions()._experiments.traceInternals?!1:JC(t)}function JC(e){let t=Ze().getClient(),n=t&&t.getDsn();return n?e.includes(n.host):!1}function nu(e,t){e.isEnabled()&&t!==null&&(WC(e,t.name)||e.addUpdate(()=>(tu(e,[t]),!0)))}function QC(e){let{startTimestamp:t,endTimestamp:n,fetchData:r,response:i}=e;if(!n)return null;let{method:o,url:s}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:s,data:{method:o,statusCode:i&&i.status}}}function XC(e){return t=>{if(!e.isEnabled())return;let n=QC(t);nu(e,n)}}function ZC(e){let{startTimestamp:t,endTimestamp:n,xhr:r}=e;if(!t||!n||!r.__sentry_xhr__)return null;let{method:i,url:o,status_code:s}=r.__sentry_xhr__;return o===void 0?null:{type:"resource.xhr",name:o,start:t/1e3,end:n/1e3,data:{method:i,statusCode:s}}}function eT(e){return t=>{if(!e.isEnabled())return;let n=ZC(t);nu(e,n)}}function Qc(e,t){if(e)try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=Jy(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(n){}}function $y(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function Yy(e){if(typeof e=="string")return e;if(e instanceof URLSearchParams)return e.toString();if(e instanceof FormData)return Jy(e)}function Wy(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:i,method:o,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:i,data:Os({method:o,statusCode:s,request:a,response:c})}}function Jf(e){if(e){try{return JSON.parse(e)}catch(t){}return e}}function pi(e,t){if(!e)return;if(!t)return{size:e};let n={size:e};return e<OR?n.body=t:n._meta={errors:["MAX_BODY_SIZE_EXCEEDED"]},n}function Jy(e){return new URLSearchParams(e).toString()}async function tT(e,t,n){try{let r=await rT(e,t,n),i=Wy("resource.fetch",r);nu(n.replay,i)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("[Replay] Failed to capture fetch breadcrumb",r)}}function nT(e,t,n){let{input:r,response:i}=t,o=Qy(r),s=Qc(o,n.textEncoder),a=i?$y(i.headers.get("content-length")):void 0;s!==void 0&&(e.data.request_body_size=s),a!==void 0&&(e.data.response_body_size=a)}async function rT(e,t,n){let{startTimestamp:r,endTimestamp:i}=t,{url:o,method:s,status_code:a,request_body_size:c,response_body_size:u}=e.data,p=iT(n,t.input,c),h=await oT(n,t.response,u);return{startTimestamp:r,endTimestamp:i,url:o,method:s,statusCode:a||0,request:p,response:h}}function iT({captureBodies:e},t,n){if(!e)return pi(n,void 0);let r=Qy(t),i=Jf(Yy(r));return pi(n,i)}async function oT({captureBodies:e,textEncoder:t},n,r){if(!e&&r!==void 0)return pi(r,void 0);try{let i=n.clone(),{body:o,bodyText:s}=await sT(i),a=s&&s.length&&r===void 0?Qc(s,t):r;return e?pi(a,o):pi(a,void 0)}catch(i){return pi(r,void 0)}}async function sT(e){let t;try{t=await e.text()}catch(n){return{}}try{return{body:JSON.parse(t),bodyText:t}}catch(n){}return{bodyText:t,body:t}}function Qy(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}async function aT(e,t,n){try{let r=uT(e,t,n),i=Wy("resource.xhr",r);nu(n.replay,i)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("[Replay] Failed to capture fetch breadcrumb",r)}}function cT(e,t,n){let{xhr:r,input:i}=t,o=Qc(i,n.textEncoder),s=r.getResponseHeader("content-length")?$y(r.getResponseHeader("content-length")):Qc(r.response,n.textEncoder);o!==void 0&&(e.data.request_body_size=o),s!==void 0&&(e.data.response_body_size=s)}function uT(e,t,n){let{startTimestamp:r,endTimestamp:i,input:o}=t,{url:s,method:a,status_code:c,request_body_size:u,response_body_size:p}=e.data;if(!s)return null;let h=pi(u,n.captureBodies?Jf(Yy(o)):void 0),y=pi(p,n.captureBodies?Jf(t.xhr.responseText):void 0);return{startTimestamp:r,endTimestamp:i,url:s,method:a,statusCode:c||0,request:h,response:y}}function lT(e){let t=Ze().getClient();try{let n=new TextEncoder,r={replay:e,textEncoder:n,captureBodies:e.getOptions()._experiments.captureNetworkBodies||!1};t&&t.on?t.on("beforeAddBreadcrumb",(i,o)=>fT(r,i,o)):(xn("fetch",XC(e)),xn("xhr",eT(e)))}catch(n){}}function fT(e,t,n){if(t.data)try{dT(t)&&hT(n)&&(cT(t,n,e),aT(t,n,e)),pT(t)&&gT(n)&&(nT(t,n,e),tT(t,n,e))}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.warn("Error when enriching network breadcrumb")}}function dT(e){return e.category==="xhr"}function pT(e){return e.category==="fetch"}function hT(e){return e&&e.xhr}function gT(e){return e&&e.response}var xy=null,mT=e=>t=>{if(!e.isEnabled())return;let n=yT(t);n&&Vy(e,n)};function yT(e){let t=e.getLastBreadcrumb&&e.getLastBreadcrumb();return xy===t||!t||(xy=t,t.category&&(["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")))?null:$s(t)}function _T(e){let t=Ze().getScope(),n=Ze().getClient();t&&t.addScopeListener(mT(e)),xn("dom",zC(e)),xn("history",YC(e)),lT(e),Ni(KC(e,!Ry(n))),Ry(n)&&(n.on("afterSendEvent",Hy(e)),n.on("createDsc",r=>{let i=e.getSessionId();i&&(r.replay_id=i)}))}function Ry(e){return!!(e&&e.on)}async function vT(e){try{return Promise.all(tu(e,[bT(Xt.performance.memory)]))}catch(t){return[]}}function bT(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}var Cy={resource:RT,paint:ET,navigation:xT,["largest-contentful-paint"]:CT};function wT(e){return e.map(ST).filter(Boolean)}function ST(e){return Cy[e.entryType]===void 0?null:Cy[e.entryType](e)}function Fo(e){return((dm||Xt.performance.timeOrigin)+e)/1e3}function ET(e){let{duration:t,entryType:n,name:r,startTime:i}=e,o=Fo(i);return{type:n,name:r,start:o,end:o+t,data:void 0}}function xT(e){let{entryType:t,name:n,decodedBodySize:r,duration:i,domComplete:o,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:p,loadEventEnd:h,redirectCount:y,startTime:m,transferSize:b,type:R}=e;return i===0?null:{type:`${t}.${R}`,start:Fo(m),end:Fo(o),name:n,data:{size:b,decodedBodySize:r,encodedBodySize:s,duration:i,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:p,loadEventEnd:h,domComplete:o,redirectCount:y}}}function RT(e){let{entryType:t,initiatorType:n,name:r,responseEnd:i,startTime:o,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Fo(o),end:Fo(i),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function CT(e){let{entryType:t,startTime:n,size:r}=e,i=0;if(Xt.performance){let a=Xt.performance.getEntriesByType("navigation")[0];i=a&&a.activationStart||0}let o=Math.max(n-i,0),s=Fo(i)+o/1e3;return{type:t,name:t,start:s,end:s,data:{value:o,size:r,nodeId:Li.mirror.getId(e.element)}}}function TT(e,t,n){let r,i,o,s=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){i!==void 0&&clearTimeout(i),o!==void 0&&clearTimeout(o),i=o=void 0}function u(){return i!==void 0||o!==void 0?a():r}function p(){return i&&clearTimeout(i),i=setTimeout(a,t),s&&o===void 0&&(o=setTimeout(a,s)),r}return p.cancel=c,p.flush=u,p}function kT(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.warn("[Replay] Received replay event after session expired.");return}let i=r||!t;t=!0,e.addUpdate(()=>{if(e.recordingMode==="error"&&i&&e.setInitialState(),eu(e,n,i),!i)return!1;if(e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="error"&&e.session){let{earliestEvent:o}=e.getContext();o&&(e.session.started=o,e.getOptions().stickySession&&Xf(e.session))}return e.recordingMode==="session"&&e.flushImmediate(),!0})}}function AT(e,t,n,r){return Uc(mm(e,gm(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function IT({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let o=new TextEncoder().encode(r);n=new Uint8Array(o.length+e.length),n.set(o),n.set(e,o.length)}return n}async function OT({client:e,scope:t,replayId:n,event:r}){let i=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,o=await Sm(e.getOptions(),r,{event_id:n,integrations:i},t);if(!o)return null;o.platform=o.platform||"javascript";let s=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:c}=s&&s.sdk||{};return o.sdk={...o.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},o}async function PT({recordingData:e,replayId:t,segmentId:n,includeReplayStartTimestamp:r,eventContext:i,timestamp:o,session:s,options:a}){let c=IT({recordingData:e,headers:{segment_id:n}}),{urls:u,errorIds:p,traceIds:h,initialTimestamp:y}=i,m=Ze(),b=m.getClient(),R=m.getScope(),D=b&&b.getTransport(),E=b&&b.getDsn();if(!b||!R||!D||!E||!s.sampled)return;let I={type:ER,...r?{replay_start_timestamp:y/1e3}:{},timestamp:o/1e3,error_ids:p,trace_ids:h,urls:u,replay_id:t,segment_id:n,replay_type:s.sampled},N=await OT({scope:R,client:b,replayId:t,event:I});if(!N){b.recordDroppedEvent("event_processor","replay",I),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("An event processor returned `null`, will not send event.");return}N.contexts={...N.contexts,replay:{...N.contexts&&N.contexts.replay,session_sample_rate:a.sessionSampleRate,error_sample_rate:a.errorSampleRate}};let P=AT(N,c,E,b.getOptions().tunnel),F;try{F=await D.send(P)}catch(K){let H=new Error(Qf);try{H.cause=K}catch(z){}throw H}if(!F)return F;if(typeof F.statusCode=="number"&&(F.statusCode<200||F.statusCode>=300))throw new Xc(F.statusCode);return F}var Xc=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}};async function Xy(e,t={count:0,interval:AR}){let{recordingData:n,options:r}=e;if(n.length)try{return await PT(e),!0}catch(i){if(i instanceof Xc)throw i;if(hf("Replays",{_retryCount:t.count}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&r._experiments&&r._experiments.captureExceptions&&Ro(i),t.count>=IR){let o=new Error(`${Qf} - max retries exceeded`);try{o.cause=i}catch(s){}throw o}return t.interval*=++t.count,await new Promise((o,s)=>{setTimeout(async()=>{try{await Xy(e,t),o(!0)}catch(a){s(a)}},t.interval)})}}var Jt=class{__init(){this.eventBuffer=null}__init2(){this.performanceEvents=[]}__init3(){this.recordingMode="session"}__init4(){this.timeouts={sessionIdle:xR,maxSessionLife:RR}}__init5(){this._performanceObserver=null}__init6(){this._flushLock=null}__init7(){this._lastActivity=Date.now()}__init8(){this._isEnabled=!1}__init9(){this._isPaused=!1}__init10(){this._hasInitializedCoreListeners=!1}__init11(){this._stopRecording=null}__init12(){this._context={errorIds:new Set,traceIds:new Set,urls:[],earliestEvent:null,initialTimestamp:Date.now(),initialUrl:""}}constructor({options:t,recordingOptions:n}){Jt.prototype.__init.call(this),Jt.prototype.__init2.call(this),Jt.prototype.__init3.call(this),Jt.prototype.__init4.call(this),Jt.prototype.__init5.call(this),Jt.prototype.__init6.call(this),Jt.prototype.__init7.call(this),Jt.prototype.__init8.call(this),Jt.prototype.__init9.call(this),Jt.prototype.__init10.call(this),Jt.prototype.__init11.call(this),Jt.prototype.__init12.call(this),Jt.prototype.__init13.call(this),Jt.prototype.__init14.call(this),Jt.prototype.__init15.call(this),Jt.prototype.__init16.call(this),Jt.prototype.__init17.call(this),this._recordingOptions=n,this._options=t,this._debouncedFlush=TT(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay})}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}start(){if(this.setInitialState(),!!this._loadAndCheckSession()){if(!this.session){this._handleException(new Error("No session found"));return}this.session.sampled&&(this.session.sampled==="error"&&(this.recordingMode="error"),this._updateSessionActivity(),this.eventBuffer=IC({useCompression:this._options.useCompression}),this._addListeners(),this._isEnabled=!0,this.startRecording())}}startRecording(){try{this._stopRecording=Li({...this._recordingOptions,...this.recordingMode==="error"&&{checkoutEveryNms:kR},emit:kT(this),onMutation:this._onMutationHandler})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording?(this._stopRecording(),this._stopRecording=void 0,!0):!1}catch(t){return this._handleException(t),!1}}stop(t){if(this._isEnabled)try{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){let n=`[Replay] Stopping Replay${t?` triggered by ${t}`:""}`;(this.getOptions()._experiments.traceInternals?console.warn:me.log)(n)}this._isEnabled=!1,this._removeListeners(),this.stopRecording(),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,this._debouncedFlush.cancel()}catch(n){this._handleException(n)}}pause(){this._isPaused=!0,this.stopRecording()}resume(){this._loadAndCheckSession()&&(this._isPaused=!1,this.startRecording())}addUpdate(t){let n=t();this.recordingMode!=="error"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._loadAndCheckSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){let t=this.getSessionId();if(this._lastActivity&&Wf(this._lastActivity,this.timeouts.sessionIdle)&&this.session&&this.session.sampled==="session"){this.pause();return}return this._loadAndCheckSession()?t!==this.getSessionId()?(this._triggerFullSnapshot(),!1):!0:void 0}setInitialState(){let t=`${Xt.location.pathname}${Xt.location.hash}${Xt.location.search}`,n=`${Xt.location.origin}${t}`;this.performanceEvents=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}_handleException(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("[Replay]",t),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this._options._experiments&&this._options._experiments.captureExceptions&&Ro(t)}_loadAndCheckSession(){let{type:t,session:n}=NC({timeouts:this.timeouts,stickySession:Boolean(this._options.stickySession),currentSession:this.session,sessionSampleRate:this._options.sessionSampleRate,errorSampleRate:this._options.errorSampleRate});t==="new"&&this.setInitialState();let r=this.getSessionId();return n.id!==r&&(n.previousSessionId=r),this.session=n,this.session.sampled?!0:(this.stop("session unsampled"),!1)}_addListeners(){try{Xt.document.addEventListener("visibilitychange",this._handleVisibilityChange),Xt.addEventListener("blur",this._handleWindowBlur),Xt.addEventListener("focus",this._handleWindowFocus),this._hasInitializedCoreListeners||(_T(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}"PerformanceObserver"in Xt&&(this._performanceObserver=TC(this))}_removeListeners(){try{Xt.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Xt.removeEventListener("blur",this._handleWindowBlur),Xt.removeEventListener("focus",this._handleWindowFocus),this._performanceObserver&&(this._performanceObserver.disconnect(),this._performanceObserver=null)}catch(t){this._handleException(t)}}__init13(){this._handleVisibilityChange=()=>{Xt.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init14(){this._handleWindowBlur=()=>{let t=$s({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init15(){this._handleWindowFocus=()=>{let t=$s({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}_doChangeToBackgroundTasks(t){if(!this.session)return;let n=Ky(this.session,this.timeouts);t&&!n&&this._createCustomBreadcrumb(t),this._conditionalFlush()}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Replay] Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_triggerFullSnapshot(t=!0){try{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Replay] Taking full rrweb snapshot"),Li.takeFullSnapshot(t)}catch(n){this._handleException(n)}}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{eu(this,{type:xt.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=[...this.performanceEvents];return this.performanceEvents=[],Promise.all(tu(this,wT(t)))}_conditionalFlush(){this.recordingMode!=="error"&&this.flushImmediate()}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[],this._context.earliestEvent=null}_popEventContext(){this._context.earliestEvent&&this._context.earliestEvent<this._context.initialTimestamp&&(this._context.initialTimestamp=this._context.earliestEvent);let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds).filter(Boolean),traceIds:Array.from(this._context.traceIds).filter(Boolean),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){if(!this.session||!this.eventBuffer){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await vT(this),!!this.eventBuffer))try{let t=await this.eventBuffer.finish(),n=this.session.id,r=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession(),await Xy({replayId:n,recordingData:t,segmentId:i,includeReplayStartTimestamp:i===0,eventContext:r,session:this.session,options:this.getOptions(),timestamp:Date.now()})}catch(t){this._handleException(t),this.stop("sendReplay");let n=Ze().getClient();n&&n.recordDroppedEvent("send_error","replay")}}__init16(){this._flush=async()=>{if(this._isEnabled){if(!this.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error("[Replay] No session found to flush.");return}if(this._debouncedFlush.cancel(),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=null;return}try{await this._flushLock}catch(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.error(t)}finally{this._debouncedFlush()}}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Xf(this.session)}__init17(){this._onMutationHandler=t=>{let n=t.length,r=this._options._experiments.mutationLimit||0,i=this._options._experiments.mutationBreadcrumbLimit||1e3,o=r&&n>r;if(n>i||o){let s=$s({category:"replay.mutations",data:{count:n}});this._createCustomBreadcrumb(s)}return o?(this._triggerFullSnapshot(!1),!1):!0}}};function js(e,t,n,r){let i=typeof r=="string"?r.split(","):[],o=[...e,...i,...t];return typeof n<"u"&&(typeof n=="string"&&o.push(`.${n}`),console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")),o.join(",")}function DT({mask:e,unmask:t,block:n,unblock:r,ignore:i,blockClass:o,blockSelector:s,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){let p=['base[href="/"]'],h=js(e,[".sentry-mask","[data-sentry-mask]"],a,c),y=js(t,[".sentry-unmask","[data-sentry-unmask]"]),m={maskTextSelector:h,unmaskTextSelector:y,maskInputSelector:h,unmaskInputSelector:y,blockSelector:js(n,[".sentry-block","[data-sentry-block]",...p],o,s),unblockSelector:js(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:js(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return o instanceof RegExp&&(m.blockClass=o),a instanceof RegExp&&(m.maskTextClass=a),m}function Ty(){return typeof window<"u"&&(!am()||NT())}function NT(){return typeof process<"u"&&process.type==="renderer"}var ky='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Ay=!1,Fr=class{static __initStatic(){this.id="Replay"}__init(){this.name=Fr.id}constructor({flushMinDelay:t=CR,flushMaxDelay:n=TR,stickySession:r=!0,useCompression:i=!0,_experiments:o={},sessionSampleRate:s,errorSampleRate:a,maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:p=!0,mask:h=[],unmask:y=[],block:m=[],unblock:b=[],ignore:R=[],maskFn:D,blockClass:E,blockSelector:I,maskInputOptions:N,maskTextClass:P,maskTextSelector:F,ignoreClass:K}={}){if(Fr.prototype.__init.call(this),this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{...N||{},password:!0},maskTextFn:D,maskInputFn:D,...DT({mask:h,unmask:y,block:m,unblock:b,ignore:R,blockClass:E,blockSelector:I,maskTextClass:P,maskTextSelector:F,ignoreClass:K}),slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,stickySession:r,sessionSampleRate:s,errorSampleRate:a,useCompression:i,blockAllMedia:p,_experiments:o},typeof s=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${s} })`),this._initialOptions.sessionSampleRate=s),typeof a=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${a} })`),this._initialOptions.errorSampleRate=a),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${ky}`:ky),this._isInitialized&&Ty())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Ay}set _isInitialized(t){Ay=t}setupOnce(){Ty()&&(this._setup(),setTimeout(()=>this.start()))}start(){this._replay&&this._replay.start()}stop(){this._replay&&this._replay.stop()}flush(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.flushImmediate()}_setup(){let t=UT(this._initialOptions);this._replay=new Jt({options:t,recordingOptions:this._recordingOptions})}};Fr.__initStatic();function UT(e){let t=Ze().getClient(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Os(e)};return n?(e.sessionSampleRate==null&&e.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set."),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(console.warn("SDK client is not available."),r)}w();function Qs(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function LT(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=Qs(n);return i=>r.then(o=>i(o.transaction(t,"readwrite").objectStore(t)))}function Zy(e){return Qs(e.getAllKeys())}function FT(e,t,n){return e(r=>Zy(r).then(i=>{if(!(i.length>=n))return r.put(t,Math.max(...i,0)+1),Qs(r.transaction)}))}function MT(e){return e(t=>Zy(t).then(n=>{if(n.length!==0)return Qs(t.get(n[0])).then(r=>(t.delete(n[0]),Qs(t.transaction).then(()=>r)))}))}function zT(e){let t;function n(){return t==null&&(t=LT(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async r=>{try{let i=await pm(r,e.textEncoder);await FT(n(),i,e.maxQueueSize||30)}catch(i){}},pop:async()=>{try{let r=await MT(n());if(r)return hm(r,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(r){}}}}function BT(e){return t=>e({...t,createStore:zT})}function jT(e){return BT(Rm(e))}w();w();w();function qT(e){let t=[],n={};return{add(r,i){for(;t.length>=e;){let o=t.shift();o!==void 0&&delete n[o]}n[r]&&this.delete(r),t.push(r),n[r]=i},clear(){n={},t=[]},get(r){return n[r]},size(){return t.length},delete(r){if(!n[r])return!1;delete n[r];for(let i=0;i<t.length;i++)if(t[i]===r){t.splice(i,1);break}return!0}}}var Xs=qT(20);w();var e_=1e6,ru=String(0),GT="main",n_="",r_="",i_="",ed=Ne.navigator&&Ne.navigator.userAgent||"",o_="",KT=Ne.navigator&&Ne.navigator.language||Ne.navigator&&Ne.navigator.languages&&Ne.navigator.languages[0]||"";function HT(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}var t_=Ne.navigator&&Ne.navigator.userAgentData;HT(t_)&&t_.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(n_=e.platform||"",i_=e.architecture||"",o_=e.model||"",r_=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){let t=e.fullVersionList[e.fullVersionList.length-1];ed=`${t.brand} ${t.version}`}}).catch(e=>{});function VT(e){return!("thread_metadata"in e)}function $T(e){return VT(e)?XT(e):e}function YT(e){if(!(!e||!e.sdk))return{name:e.sdk.name,version:e.sdk.version}}function WT(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name||"unknown sdk",e.sdk.version=e.sdk.version||t.version||"unknown sdk version",e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function JT(e,t,n,r){let i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&{dsn:Pc(r)},...e.type==="transaction"&&i&&{trace:Os({...i})}}}function QT(e){let t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return typeof t=="string"&&t.length!==32&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function s_(e,t,n,r){if(e.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");let i=e.sdkProcessingMetadata.profile;if(i==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${i} instead.`);if(!i.profile_id)throw new TypeError("Profile is missing profile_id");if(i.samples.length<=1)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Discarding profile because it contains less than 2 samples"),null;let o=QT(e),s=YT(n);WT(e,n&&n.sdk);let a=JT(e,s,r,t),c=$T(i),u=typeof e.start_timestamp=="number"?e.start_timestamp*1e3:Date.now(),p=typeof e.timestamp=="number"?e.timestamp*1e3:Date.now(),h={event_id:i.profile_id,timestamp:new Date(u).toISOString(),platform:"javascript",version:"1",release:e.release||"",environment:e.environment||_m,runtime:{name:"javascript",version:Ne.navigator.userAgent},os:{name:n_,version:r_,build_number:ed},device:{locale:KT,model:o_,manufacturer:ed,architecture:i_,is_emulator:!1},profile:c,transactions:[{name:e.transaction||"",id:e.event_id||Eo(),trace_id:o,active_thread_id:ru,relative_start_ns:"0",relative_end_ns:((p-u)*1e6).toFixed(0)}]};return Uc(a,[[{type:"profile"},h]])}function XT(e){let t,n=0,r={samples:[],stacks:[],frames:[],thread_metadata:{[ru]:{name:GT}}};if(!e.samples.length)return r;let i=e.samples[0].timestamp;for(let o=0;o<e.samples.length;o++){let s=e.samples[o];if(s.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[o]={elapsed_since_start_ns:((s.timestamp-i)*e_).toFixed(0),stack_id:t,thread_id:ru};continue}let a=e.stacks[s.stackId],c=[];for(;a;){c.push(a.frameId);let p=e.frames[a.frameId];r.frames[a.frameId]===void 0&&(r.frames[a.frameId]={function:p.name,file:p.resourceId?e.resources[p.resourceId]:void 0,line:p.line,column:p.column}),a=a.parentId===void 0?void 0:e.stacks[a.parentId]}let u={elapsed_since_start_ns:((s.timestamp-i)*e_).toFixed(0),stack_id:n,thread_id:ru};r.stacks[n]=c,r.samples[o]=u,n++}return r}function a_(e,t){let n=Xs.get(e);if(!n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Couldn't find a transaction event for this profile, dropping it.");return}n.sdkProcessingMetadata=n.sdkProcessingMetadata||{},n.sdkProcessingMetadata&&!n.sdkProcessingMetadata.profile&&(n.sdkProcessingMetadata.profile=t);let i=Ze().getClient();if(!i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] getClient did not return a Client, removing profile from event and forwarding to next event processors.");return}let o=i.getDsn();if(!o){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] getDsn did not return a Dsn, removing profile from event and forwarding to next event processors.");return}let s=i.getTransport();if(!s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] getTransport did not return a Transport, removing profile from event and forwarding to next event processors.");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Preparing envelope and sending a profiling event");let a=s_(n,o);if(Xs.delete(e),!a){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Failed to construct envelope");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Envelope constructed, sending it"),s.send(a).then(null,c=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Error while sending event:",c)})}var c_=3e4,u_=!1;function ZT(e){return typeof e=="function"}function ek(e){return e?l_(e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Transaction is undefined, skipping profiling"),e)}function l_(e){let t=Ne.Profiler;if(!ZT(t))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."),e;if(!e.sampled)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Transaction is not sampled, skipping profiling"),e;if(u_)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Profiling has been disabled for the duration of the current user session."),e;let n=Ze().getClient(),r=n&&n.getOptions(),i=r&&r.profilesSampleRate||0;if(i===void 0)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Profiling disabled, enable it by setting `profilesSampleRate` option to SDK init call."),e;if(Math.random()>i)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Skip profiling transaction due to sampling."),e;let o=10,s=Math.floor(c_/o),a;try{a=new t({sampleInterval:o,maxBufferSize:s})}catch(b){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(me.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),me.log("[Profiling] Disabling profiling for current user session.")),u_=!0}if(!a)return e;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log(`[Profiling] started profiling transaction: ${e.name||e.description}`);let c=Eo(),u=null;function p(){if(e&&a){if(u){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] profile for:",e.name||e.description,"already exists, returning early");return}a.stop().then(b=>{if(h&&(Ne.clearTimeout(h),h=void 0),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log(`[Profiling] stopped profiling of transaction: ${e.name||e.description}`),!b){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log(`[Profiling] profiler returned null profile for: ${e.name||e.description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started");return}b.samples.length<2||(u={...b,profile_id:c},a_(c,u))}).catch(b=>((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] error while stopping profiler:",b),null))}}let h=Ne.setTimeout(()=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] max profile duration elapsed, stopping profiling for:",e.name||e.description),p()},c_),y=e.finish.bind(e);function m(){return e&&(p(),e.setContext("profile",{profile_id:c})),y()}return e.finish=m,e}function tk(e){return function(n,r){let i=e.call(this,n,r);return i===void 0?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Transaction is undefined, skipping profiling"),i):l_(i)}}function f_(){let e=vm();if(!e.__SENTRY__){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Can't find main carrier, profiling won't work.");return}if(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},!e.__SENTRY__.extensions.startTransaction){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] startTransaction does not exists, profiling will not work. Make sure you import @sentry/tracing package before @sentry/profiling-node as import order matters.");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] startTransaction exists, patching it with profiling functionality..."),e.__SENTRY__.extensions.startTransaction=tk(e.__SENTRY__.extensions.startTransaction)}w();var Zs=class{constructor(){Zs.prototype.__init.call(this)}__init(){this.name="BrowserProfilingIntegration"}setupOnce(t){f_(),t(this.handleGlobalEvent.bind(this))}handleGlobalEvent(t){let n=t.contexts&&t.contexts.profile&&t.contexts.profile.profile_id;return n&&typeof n=="string"&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&me.log("[Profiling] Profiling event found, caching it."),Xs.add(n,t)),t}};var d_={};Ne.Sentry&&Ne.Sentry.Integrations&&(d_=Ne.Sentry.Integrations);var ZN={...d_,...Ns,...Nf};w();w();var rk=Dt("exceptions"),td=class{constructor(){this.name=td.id}setupOnce(t,n){t(async(r,i)=>{var u,p;if(!r.exception||(rk.info("reporting exception to Sentry with event ID",r.event_id),!(i!=null&&i.originalException)||!((i==null?void 0:i.originalException)instanceof km)))return r;let{tags:o,extra:s,fingerprint:a,attachments:c}=i.originalException.options;return c&&(i.attachments=c.map(h=>({filename:h.name,data:h.body,contentType:h.type}))),{...r,tags:{...r.tags||{},...o||{}},extra:{...r.extra||{},...s||{}},fingerprint:(p=(u=r.fingerprint)!=null?u:a)!=null?p:[]}})}},ea=td;ea.id="ReportExceptionIntegration";Tm();function CU(e){Df({dsn:e.dsn,environment:e.projectId,release:e.release,replaysSessionSampleRate:0,replaysOnErrorSampleRate:.01,ignoreErrors:["Failed to fetch","Network Error","CustomEvent","Non-Error promise rejection captured with value: Object Not Found Matching Id",/^ResizeObserver loop limit exceeded$/],beforeSend:(t,n)=>{var i,o;let r=n.originalException;return r instanceof Error&&(r==null?void 0:r.name)==="FirebaseError"&&((i=r==null?void 0:r.message)!=null&&i.match(/Failed to get document because the client is offline/i))&&(t.fingerprint=["client-offline"]),r instanceof Error&&((o=r.stack)!=null&&o.includes("__puppeteer_evaluation_script__"))?null:t},integrations:t=>t.map(n=>n.name==="Breadcrumbs"?new Hn({console:!1}):n).concat([new mf({tracingOrigins:[],traceFetch:!1,traceXHR:!1}),new ea]).concat(e.recordReplays?[new Fr({maskAllText:!0,_experiments:{captureExceptions:!0,traceInternals:!0}})]:[]),enabled:window.location.hostname!=="localhost"&&!0,tracesSampler:({transactionContext:t})=>{var r;let n=typeof e.tracesSampling=="number"?e.tracesSampling:1;return((r=t.data)==null?void 0:r.sampleRate)||n}})}var iu=df;function ik(){return rn().collection("users")}function nd(e){return ik().doc(e)}function OU(e){return e.path.includes("users/")}w();w();function ou(e=[],t=new Date){let n=Array.isArray(e)?e:[e],r={};return n.filter(Boolean).forEach(i=>{r[i]={count:1,updatedAt:st.firestore.Timestamp.fromDate(t)}}),r}function p_(e,t,n){var o,s;let r=(n==null?void 0:n.updatedAt)||st.firestore.Timestamp.now(),i=(o=e[t])==null?void 0:o.updatedAt;return{...e,[t]:{count:(((s=e[t])==null?void 0:s.count)||0)+((n==null?void 0:n.count)||1),updatedAt:i&&i.toMillis()>r.toMillis()?i:r}}}function UU(e,t,n,r){Object.keys(r).forEach(i=>{let o=r[i];e.update(t,{[`${n}.${i}.updatedAt`]:st.firestore.Timestamp.now(),[`${n}.${i}.count`]:st.firestore.FieldValue.increment(o.count)})})}function LU(e){return Object.entries(e).sort((t,n)=>t[1].count<n[1].count?-1:t[1].count>n[1].count?1:t[1].updatedAt<n[1].updatedAt?-1:1).map(t=>t[0])}function FU(e){return h_(e,(t,n)=>t.updatedAt.toMillis()>n.updatedAt.toMillis()?-1:1)}function MU(e){return h_(e,(t,n)=>t.updatedAt.toMillis()>n.updatedAt.toMillis()?1:-1)}function h_(e,t){if(!e)return null;let n=Object.entries(e).sort((r,i)=>t(r[1],i[1]))[0];return n?{user:n[0],updatedAt:n[1].updatedAt}:null}function zU(e){return Object.entries(e).reduce((t,n)=>t+n[1].count,0)}w();function Mo(e,t){if(e==null||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e===t;if(e instanceof st.firestore.Timestamp)return t instanceof st.firestore.Timestamp?e.isEqual(t):!1;if(Array.isArray(e))return!Array.isArray(t)||e.length!==t.length?!1:!e.some((n,r)=>!Mo(n,t[r]));if(g_(e)){if(!g_(t))return!1;let n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:!n.some(i=>!Mo(e[i],t[i]))}else return!1}function g_(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}w();function su(e){if(e===null)return{__type:"null"};if(e===void 0)return{__type:"undefined"};if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.length===0?{__type:"array"}:e.filter(t=>t!==void 0).map(t=>su(t));if(e instanceof st.firestore.Timestamp)return ok(e);if(e instanceof st.firestore.Blob)return ak(e);if(typeof e=="object"){let t=Object.keys(e),n={};return t.forEach(r=>{e[r]!==void 0&&(n[r]=su(e[r]))}),t.length===0&&(n.__type="object"),n}else throw new Error(`Invalid firestore value (${typeof e})`)}function au(e){if(e==null||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(t=>au(t));if(typeof e=="object"){if("__type"in e&&e.__type==="null")return null;if("__type"in e&&e.__type==="null")return null;if("__type"in e&&e.__type==="undefined")return;if("__type"in e&&e.__type==="timestamp")return sk(e);if("__type"in e&&e.__type==="blob")return ck(e);{let t=Object.keys(e),n={};return t.forEach(r=>{r==="__type"&&(e[r]==="object"||e[r]==="array")||(n[r]=au(e[r]))}),e.__type==="array"?Object.values(n):n}}else throw new Error(`Invalid value in firestore document (${typeof e})`)}function VU(e){if(!e.path)throw new Error('"serializeFirestoreRef" do not support firebase.firestore.Query');return e.path}function $U(e){return e.split("/").length%2?rn().collection(e):rn().doc(e)}function ok(e){return{__type:"timestamp",seconds:e.seconds,nanoseconds:e.nanoseconds}}function sk(e){return new st.firestore.Timestamp(e.seconds,e.nanoseconds)}function ak(e){return{__type:"blob",buffer:e.toBase64()}}function ck(e){return st.firestore.Blob.fromBase64String(e.buffer)}var n5={...Pm,...Dm};var uk="visitor",m_=[uk,"admin-backend"];function lk(e){let t=e.match(/^([^@]*)@/);return t?t[1]:e}function fk(e){var n,r;let t={uid:e.uid,...e.email?{email:e.email}:{},displayName:e.displayName||(e.email?lk(e.email):"Anonymous"),createdAt:st.firestore.Timestamp.fromDate(new Date(e.metadata.creationTime||Date.now()))};return e.photoURL&&(t.photoURL=e.photoURL),"customClaims"in e&&((n=e.customClaims)!=null&&n.sso)&&(t.sso=(r=e.customClaims)==null?void 0:r.sso),t}async function r5(e,t){async function n(r){let i=nd(e.uid),o=await Om(r,i),s={sso:o==null?void 0:o.sso,...fk(e),defaultContent:o==null?void 0:o.defaultContent,hostname:o==null?void 0:o.hostname};return r.set(i,s),s}return t?n(t):Am(n)}async function i5(e){await nd(e.uid).set(e)}function o5(e){return!!e&&!!e.emailVerified&&!!e.email&&(e.email.endsWith("@gitbook.com")||e.email.endsWith("@gitbook.io"))}function s5(e){return e.providerData.map(t=>t.providerId)}w();w();function dk(e){let t;return e==="light"?t="matching":e==="dark"?t="contrast":t=e||"matching",t}function u5(e,t){let n=dk(e),r=t||"light";return n==="matching"?r:n==="contrast"?r==="light"?"dark":"light":n}function l5(e){return{color:e.themeMode||"light",radius:e.themeCorners||"rounded"}}var f5=["admin","create","review","edit","comment","read",null];function d5(e,t=!0){let n;if(typeof e.organization=="string")n={organization:e.organization};else if(typeof e.user=="string")n={user:e.user};else throw new Error("Invalid content ownership: no user or organization");return e.collection&&t&&(n.collection=e.collection),n}function pk(e,t,n=!1){return"user"in e&&(!("user"in t)||e.user!==t.user)?!1:!("organization"in e&&(!("organization"in t)||e.organization!==t.organization)||n&&e.collection!==t.collection)}function p5(e,t,n={}){return pk(e,t)?e.collection?t.collection===e.collection:n.includeOrphans?!0:!t.collection:!1}function h5(e){return e.collection("team-permissions")}function g5(e){return e.collection("user-permissions")}w();var fv=Wt(b1());w();var sv=Wt(v1()),av=Wt(__());w();function ta(e,t){return e.split(t).slice(1).join(t)}w();w();function Fi(e){return v_(e).trim().slice(0,100).trim()||"Untitled"}function w5(e){return v_(e).trim().slice(0,200).trim()}function v_(e){return e.replace(/(\r\n|\r|\n)/g," ")}w();var nv=Wt(tv());function X5(e,t){return!e&&!t?!1:(e==null?void 0:e.kind)!==(t==null?void 0:t.kind)?!0:(e==null?void 0:e.kind)==="url"&&(t==null?void 0:t.kind)==="url"?e.url!==t.url:(e==null?void 0:e.kind)==="file"&&(t==null?void 0:t.kind)==="file"?e.file!==t.file:(e==null?void 0:e.kind)==="page"&&(t==null?void 0:t.kind)==="page"?e.page!==t.page||e.space!==t.space:(e==null?void 0:e.kind)==="space"&&(t==null?void 0:t.kind)==="space"?e.space!==t.space:(e==null?void 0:e.kind)==="collection"&&(t==null?void 0:t.kind)==="collection"?e.collection!==t.collection:(e==null?void 0:e.kind)==="user"&&(t==null?void 0:t.kind)==="user"?e.user!==t.user:(e==null?void 0:e.kind)==="anchor"&&(t==null?void 0:t.kind)==="anchor"?e.anchor!==t.anchor||e.page!==t.page||e.space!==t.space:!0}function Z5(e){let t="";switch(e.kind){case"url":t=Lm(e.url);break;case"collection":t=`collection://${e.collection}`;break;case"user":t=`user://${e.user}`;break;case"space":t=`space://${e.space}`;break;case"page":t=`page://${e.space||""}/${e.page}`;break;case"file":t=`file://${e.file}`;break;case"anchor":t=`anchor://${e.space||""}/${e.page||""}#${e.anchor}`;break;default:To(e)}return nv.default.sha256().update(t).digest("hex")}function rv(e={}){let{key:t,title:n="Page 1",git:r,description:i="",path:o,pages:s,emoji:a,edits:c,sheet:u,cover:p,layout:h}=e;return{key:t||kn(),kind:"sheet",title:Fi(n),description:i,pages:s||[],edits:c||{},...o?{path:Co(o)}:{},...a?{emoji:a}:{},...r?{git:r}:{},...p?{coverY:0,cover:typeof p=="boolean"?void 0:p}:{},...u?{sheet:u}:{},...h?{layout:h}:{}}}function c6(e,t="Page 1",n={}){let{title:r,emoji:i}=typeof t=="string"?{title:t}:t;return{key:kn(),kind:"link",title:Fi(r),...i?{emoji:i}:{},edits:n,ref:e}}function u6(e={title:"Page 1"}){let{key:t,emoji:n,title:r,edits:i,path:o}=e;return{key:t||kn(),kind:"group",title:Fi(r),edits:i||{},pages:[],...n?{emoji:n}:{},...o?{path:Co(o)}:{}}}function l6(e,t){return{...e,edits:p_(e.edits,t)}}function fd(e){return e.kind!=="link"}function f6(e){return typeof e.coverY=="number"}function d6(e,t){let{pageKey:n,user:r,rename:i=!1}=t,o=ou([r]);switch(e.kind){case"group":return{kind:"group",key:n,emoji:e.emoji,title:i?Fi(`Copy of ${e.title}`):e.title,path:e.path,edits:o,pages:[]};case"link":return{kind:"link",key:n,emoji:e.emoji,title:i?Fi(`Copy of ${e.title}`):e.title,ref:e.ref,edits:o};case"sheet":return{kind:"sheet",key:n,emoji:e.emoji,title:i?Fi(`Copy of ${e.title}`):e.title,edits:o,description:e.description,path:e.path,cover:e.cover,coverY:e.coverY,layout:e.layout,sheet:e.sheet,pages:[]};default:To(e)}}function p6(e){var t;return(t=e==null?void 0:e.layout)!=null?t:"docs"}var LA=Dt("database:revisions");function x6(e){return e.type==="rollback"&&!!e.rollbackedBy}function FA(e){return!!e.conflicts}function R6(e){return e.type==="merge"&&!!e.mergedFrom}function C6(e){return e.type==="update"||e.type==="merge"&&!e.mergedFrom}function du(e){let t=rv({title:"Page 1",edits:e.edits});return{key:kn(),type:"edits",rootPages:[t.key],pages:{[t.key]:t},files:{},parents:[],changeRequest:null,createdAt:st.firestore.Timestamp.now(),edits:e.edits||{},...e}}function T6(e,t){if(FA(e))throw new Error("Cannot fork a revision with conflicts, those revisions should be mutated");return du({space:e.space,changeRequest:e.changeRequest||null,parents:[e.key],rootPages:Ur(e.rootPages),pages:Ur(e.pages),files:Ur(e.files),resolvedChunks:Ur(e.resolvedChunks),...t})}function fu(e){return`${e.space}-${e.key}-${e.mutationKey||""}`}function k6(e,t,n){return du({type:"rollback",space:e.space,changeRequest:e.changeRequest,parents:[t,e.key],rootPages:e.rootPages,pages:e.pages,files:e.files,edits:e.edits,rollbackedBy:n})}function ia(e,t){let n=e.pages[t];if(!n)throw new Error(`Page ${t} not found in revision ${e.key}`);return n}function A6(e){e.mutationKey=kn()}function dd(e,t){let n=ia(e,t),r=pd(e,t);return r?[...dd(e,r.key),n]:[n]}function pd(e,t){if(!e.rootPages.includes(t))return Object.values(e.pages).find(n=>fd(n)&&n.pages.includes(t))}function I6(e,t,n){return e.pages[n]?dd(e,n).some(i=>i.key===t):!1}function hd(e,t){let n=ia(e,t);if(n.kind==="link")throw new Error("No children for link page");return n.pages.map(r=>ia(e,r))}function O6(e,t,n={}){let{filterPage:r}=n;ia(e,t);let i=pd(e,t),o=i?hd(e,i.key):gd(e);r&&(o=o.filter(c=>c.key===t?!0:r(c)));let a=o.findIndex(c=>c.key===t)+1;return o[a]||null}function MA(e,t){let n=hd(e,t),r=[];return n.forEach(i=>{r.push(i),i.kind!=="link"&&r.push(...MA(e,i.key))}),r}function gd(e){return e.rootPages.map(t=>ia(e,t))}function P6(e,t){let n=t.split("/").filter(Boolean);if(n.length===0)return gd(e).find(fd)||null;let[r,...i]=n;return i.reduce((o,s)=>o?iv(e,s,o.key):null,iv(e,r))}function iv(e,t,n){let r=cv(e,n),i=r.getKey(t);if(!i&&t.endsWith(".html")&&(i=r.getKey(t.replace(/\.html$/,""))),!i)return null;let o=e.pages[i]||null;if((o==null?void 0:o.kind)==="link")throw new Error("path was associated with a page link");return o}var ov=new av.LRUMap(50);function cv(e,t,n={}){let r=t?`${fu(e)}-${t}`:fu(e),i=Object.keys(n).length===0,o=ov.get(r);if(i&&o)return o;let s=new sv.default,a=t?hd(e,t):gd(e),c=(p,h)=>{let y=`-${h}`,m=`${p.slice(0,Um-y.length)}${y}`;return s.hasValue(m)?c(p,h+1):m},u=(p,h)=>{if(!s.hasValue(h))return s.set(p,h),h;let y=c(h,1);return s.set(p,y),y};return a.forEach(p=>{p.kind!=="link"&&u(p.key,n[p.key]?Co(n[p.key]):p.path||Co(p.title))}),i&&(LA.debug(`no cache value for revision paths ${e.key} ${t?`and parent ${t}`:""}, pushing map of ${s.size} paths`),ov.set(r,s)),s}function zA(e,t,n){let r=e.pages[t];if(!r||r.kind==="link")throw new Error("page doesn't exist or is a link");let i=pd(e,t),o=cv(e,i?i.key:void 0,n?{[t]:n}:{});if(!o.has(t))throw new Error(`path not allocated for page "${t}" in "spaces/${e.space}/revisions/${e.key}"`);return o.get(t)}function D6(e,t,n=!0){return n&&e.rootPages[0]===t?"":dd(e,t).map(i=>{if(i.kind==="link")throw new Error("Ancestor should never be a link");return zA(e,i.key)}).join("/")}function N6(e,t="Page",n=!0){let i=Object.values(e.pages).map(a=>a.title),o=new Set(i);if(!n&&!o.has(t))return t;let s=a=>{let c=` ${a}`,u=`${t.slice(0,100-c.length)}${c}`;return o.has(u)?s(a+1):u};return s(1)}var gi=Dt("database:revisions");var BA=100,pu=BA;function jA(e){return rn().collection("spaces").doc(e).collection("revisions")}function md(e,t){return jA(e).doc(t)}function qA(e,t){return md(e,t).collection("chunks")}function dv(e,t,n){return qA(e,t).doc(n)}function GA(e){let t=gv(e),n=Ur({...t,resolvedChunks:void 0});if(Object.keys(t.pages).length+Object.keys(t.files).length<2*pu)return{revision:n,chunks:[]};let r=[];n.chunks={};let i=Object.entries(hv(t)),o=(s,a,c)=>{let u={key:kn(),mutationKey:t.mutationKey,pages:{},files:{}};s.forEach(y=>{u.pages[y]=t.pages[y],delete n.pages[y]}),a.forEach(y=>{u.files[y]=t.files[y],delete n.files[y]});let p=YA(u),h=c?i.find(([y])=>y===c):null;c&&h&&h[1].revision&&h[1].hash===p?(gi.info("reusing existing chunk",c,"from",h[1].revision),n.chunks[c]={revision:h[1].revision,hash:p,pages:s,files:a}):(gi.info("allocating new chunk",u.key,u,"instead of",c),r.push(u),n.chunks[u.key]={revision:n.key,hash:p,pages:s,files:a})};return i.forEach(([s,a])=>{a.pages.length+a.files.length<pu||a.pages.some(c=>!t.pages[c])||a.files.some(c=>!t.files[c])||o(a.pages,a.files,s)}),lv(Object.keys(n.pages),pu).forEach(s=>{o(s,[],void 0)}),lv(Object.keys(n.files),pu).forEach(s=>{o([],s,void 0)}),gi.info("split revision into",Object.keys(n.chunks).length,"chunks, creating",r.length,"new chunks"),{revision:n,chunks:r}}var uv=new Map;function KA(e){let t=new Nr("revisions.mergeChunksIntoRevision",{sampleRate:1e-4});return t.label("Revision",e.revision.key),t.wrapSync(()=>{let n=fu(e.revision);t.label("Cache Key",n);let r=uv.get(n);if(r)return t.label("Cached",!0),r;let i=Ur(e.revision);delete i.chunks,i.resolvedChunks={};let o=new Set(Object.keys(e.revision.chunks||{}));if(e.chunks.forEach(a=>{if(!o.has(a.key)){gi.warning(`Revision ${i.key} in ${i.space} has a non-referenced chunk ${a.key}`);return}o.delete(a.key),Object.assign(i.pages,a.pages),Object.assign(i.files,a.files),i.resolvedChunks[a.key]={revision:e.revision.key,...e.revision.chunks[a.key]}}),o.size>0)throw new Error(`Revision ${i.key} in ${i.space} is referencing ${o.size} non existing chunks`);let s=gv(i);return n&&uv.set(n,s),s})}async function HA(e,t,n={}){let i=await new yf(n.reader).getDocument(md(e,t));return i?VA(i,n):null}async function VA(e,t={}){let{concurrency:n=10}=t,r=new yf(t.reader),i=$A(e),o=i.length===0?[]:await Fm(i,async s=>{let a=await r.getDocument(dv(e.space,s.revisionKey,s.chunkKey));if(!a)throw new Error(`Chunk spaces/${e.space}/revisions/${s.revisionKey}/chunks/${s.chunkKey} not found`);return a},{concurrency:n});return KA({revision:e,chunks:o})}async function V6(e,t,n={}){let r=await HA(e,t,n);if(!r)throw new Error(`Revision ${t} does not exist.`);return r}function pv(e,t){let{revision:n,chunks:r}=GA(t);return e.set(md(n.space,n.key),n),r.forEach(i=>e.set(dv(n.space,n.key,i.key),i)),{revision:n,chunks:r}}function hv(e){return("resolvedChunks"in e?e.resolvedChunks:null)||e.chunks||{}}function $A(e){let t=Object.entries(hv(e));return t.sort((n,r)=>{let i=n[1].pages[0],o=n[1].pages[0];if(i&&o)return i.localeCompare(o);let s=n[1].files[0],a=n[1].files[0];return s&&a?s.localeCompare(a):0}),t.map(([n,{revision:r=e.key,hash:i,files:o,pages:s}])=>({revisionKey:r,chunkKey:n,chunkHash:i,files:o,pages:s}))}function YA(e){return(0,fv.default)({pages:e.pages||{},files:e.files||{}})}function gv(e){let t=new Set(Object.keys(e.pages)),n=null,r=a=>{n||(n=Ur(e)),a(n)},i=a=>{let c=new Set;return a.forEach(u=>{o(u)||c.add(u)}),c.size>0?a.filter(u=>!c.has(u)):void 0},o=a=>{if(!t.has(a))return!1;t.delete(a);let c=e.pages[a];if(!c)return!1;if(c.kind==="link")return!0;let u=i(c.pages);return u&&(r(p=>{p.pages[a].pages=u}),gi.critical(`normalizing spaces/${e.space}/revisions/${e.key}: updated children for page ${a}. New children pages:`,JSON.stringify(u))),!0},s=i(e.rootPages);if(s&&(r(a=>{a.rootPages=s}),gi.critical(`normalizing spaces/${e.space}/revisions/${e.key}: normalized root pages. New root pages:`,JSON.stringify(s))),t.size>0&&(r(a=>{t.forEach(c=>{delete a.pages[c]})}),gi.critical(`normalizing spaces/${e.space}/revisions/${e.key}: removed pages that don't have parents. Removed pages:`,JSON.stringify([...t]))),e.conflicts){let a=Object.keys(e.conflicts.pages).reduce((c,u)=>{var h,y,m;return(typeof((h=e.conflicts)==null?void 0:h.pages[u])=="boolean"||((y=e.conflicts)==null?void 0:y.pages[u])==="deleted-in-base")&&!e.pages[u]||((m=e.pages[u])==null?void 0:m.kind)==="link"?c.add(u):c},new Set);a.size>0&&r(c=>{a.forEach(u=>{delete c.conflicts.pages[u]}),Object.keys(c.conflicts.pages).length===0&&delete c.conflicts})}return n&&gi.critical(`revision spaces/${e.space}/revisions/${e.key} has been normalized`),n||e}function lv(e,t){let n=[],r=0;for(;r<e.length;)n.push(e.slice(r,r+=t));return n}var WA=50,i3="Untitled";function mv(){return rn().collection("spaces")}function o3(e){let t=mv();return"organization"in e?t=t.where("organization","==",e.organization):"user"in e?t=t.where("user","==",e.user):"collection"in e&&(t=t.where("collection","==",e.collection)),t.orderBy("orderIndex")}function yv(e){return mv().doc(e)}function JA(e){return yv(e).collection("user-permissions")}function QA(e,t){return JA(e).doc(t)}function s3(e){return e.path.includes("spaces/")}function XA(e){let{owner:t,user:n}=e,r=st.firestore.Timestamp.now(),i=e.key||kn(),o=ou([n]),s=du({space:i,edits:o}),a={key:i,inheritCustomization:!!t.collection,orderIndex:Fc(e.at),title:ZA(e.title||""),emoji:e.emoji,editMode:"live",edits:o,comments:{},defaultPermission:"inherit",visibility:"private",revision:s.key,createdAt:r,createdBy:n,private:e.private,...t};return s.activeAt=st.firestore.Timestamp.now(),{space:a,revision:s}}function a3(e,t){let{space:n,revision:r}=XA(t);return pv(e,r),e.set(yv(n.key),n),!t.owner.user&&!t.private&&e.set(QA(n.key,t.user),{user:t.user,level:t.perm||"admin",createdBy:t.user}),{space:n,revision:r}}function ZA(e){return e.replace(/(\r\n|\r|\n)/g," ").trim().slice(0,WA).trim()}var c3=7;function u3(e){return!!e.deletedAt}function _v(e){return"revision"in e}w();var h3=300,g3=2;function vv(){return rn().collection("organizations")}function bv(e){return vv().doc(e)}function m3(e){return e.path.includes("organizations/")}function y3(e){return vv().where("emailDomains","array-contains",e)}function _3(e){return{key:kn(),title:e.title,type:e.type||"business",useCase:e.useCase,communityType:e.communityType,emailDomains:e.emailDomains||[],defaultRole:"create",createdAt:st.firestore.Timestamp.now()}}w();var x3=Dt("organizations:members"),R3=100;function wv(e){return bv(e).collection("members")}function C3(e){return rn().collectionGroup("members").where("user","==",e)}function eI(e){return wv(e).where("role","==","admin").orderBy("joinedAt","asc")}function T3(e){return eI(e).limit(1)}function k3(e,t){return wv(e).doc(t)}function A3(e){let t={organization:e.org,user:e.user,role:e.role||null,joinedAt:st.firestore.Timestamp.now(),disabled:e.disabled};return e.invite&&(t.invite=e.invite),e.transferredFrom&&(t.transferredFrom=e.transferredFrom),e.dsync&&(t.dsync=e.dsync),t}w();w();var tI=50;var z3=3,nI=Gg==="test";function Sv(){return rn().collection("collections")}function B3(e){return e.path.includes("collections/")}function Ev(e){return Sv().doc(e)}function rI(e){return Ev(e).collection("user-permissions")}function iI(e,t){return rI(e).doc(t)}function j3(e){let t=Sv();return"organization"in e?t=t.where("organization","==",e.organization):"user"in e?t=t.where("user","==",e.user):"collection"in e&&(t=t.where("collection","==",e.collection)),t}function oI(e){return{key:e.key||kn(),title:sI(e.title),orderIndex:Fc(e.at),defaultPermission:"inherit",visibility:"private",createdAt:st.firestore.Timestamp.now(),createdBy:e.createdBy,...e.collection?{collection:e.collection}:{},...e.owner}}function q3(e,t){let n=oI(t);return e.set(Ev(n.key),n),t.owner.user||e.set(iI(n.key,t.createdBy),{user:t.createdBy,level:t.perm||"admin",createdBy:t.createdBy}),n}function sI(e){return e.replace(/(\r\n|\r|\n)/g," ").trim().slice(0,tI).trim()}function G3(e){let{currentSpaceKey:t,collectionSpaces:n,collection:r,paths:i}=e,o=t,s=e.pathname;if(i.basePath?s=ta(s,i.basePath):i.hostname&&s.indexOf(`/${i.hostname}/`)!==-1&&nI&&(s=ta(s,i.hostname)),i.shareLink&&(s=ta(s,i.shareLink)),!o){let a=n.find(c=>s.startsWith(`/v/${c.path}/`)||s===`/v/${c.path}`);a&&(o=a.key,s=ta(s,`/v/${a.path}`))}if(o||(o=r==null?void 0:r.primarySpace),!o)throw new Error("cannot find current space");return{spaceKey:o,pathname:s}}w();var xv=["users","collections","teams","spaces","organizations","pages","sections","files"];function Rv(e){return e.map(t=>{switch(t.type){case"space":return`space/${t.space}`;default:To(t.type)}})}function $3(e){return[`memberOfOrg:${e}`,`externalMemberOfOrg:${e}`].join(" OR ")}w();function aI(){return rn().collection("permissions")}function X3(e){return aI().doc(e)}w();var Cv={theme:"default"};function cI(e){return rn().collection("preferences").doc(e)}w();function oL(e,t){return`${e}/${t}`}function Tv(e){let t=e.split("/");return t.length===2?[t[0],t[1]]:[t[0],void 0]}w();function kv(e){let t=e.split("/");switch(t[0]){case"space":switch(t[2]){case"cr":return{type:"change_request",space:t[1],changeRequest:t[3]};case"comment":return{type:"comment",space:t[1],comment:t[3]}}case"collection":return{type:"collection",collection:t[1]};case"organization":return{type:"organization",organization:t[1]}}return null}w();function Av({topic:e,category:t}){let n=e?kv(e):null,r=t?Tv(t):null;return{...e&&n?{notificationObject:n.type,notificationObjectId:e}:{},...r?{notificationType:r[0],notificationSubscription:r[1]}:{}}}function Iv(e){let{organization:t,space:n,collection:r,changeRequest:i,integration:o,team:s,page:a,comment:c,screen:u,screenSection:p,screenTab:h,...y}=e,m={organization:t,space:n,collection:r,changeRequest:i,team:s,page:a,screen:u,screenSection:p,screenTab:h,integration:o};return Object.keys(m).forEach(b=>{m[b]||delete m[b]}),{context:m,properties:y}}function RL(e,t){return{...t,organization:typeof e=="string"?e:e.key}}function CL(e,t){return _v(e)?Vo(e,t):Ov(e,t)}function Vo(e,t){return{...t,space:e.key,organization:"organization"in e?e.organization:void 0,collection:e.collection}}function TL(e,t,n){return Vo(e,{...n,page:t.key})}function Ov(e,t){return{...t,organization:"organization"in e?e.organization:void 0,collection:e.key}}function uI(e,t,n){return Vo(e,{...n,changeRequest:typeof t=="string"?t:t.key})}function kL(e,t,n){return Vo(e,{...n,space:e.key,changeRequest:t})}function lI(e,t){return{...t,comment:typeof e=="string"?e:e.key}}function AL(e,t){let n=e.customAttributes,i={...Av({topic:e.topic,category:e.category})||{},...t,notification:e.id,isRead:e.isRead};switch(n.type){case"content_publish_state_changed":return n.contentType==="space"?Vo({key:n.space,organization:n.organization,collection:n.collection},i):Ov({key:n.collection,organization:n.organization},i);case"change_request_opened":return uI({key:n.space,organization:n.organization,collection:n.collection},n.changeRequest,i);case"comment_mention":case"comment_posted":case"comment_reply":return lI(n.comment,Vo({key:n.space,organization:n.organization,collection:n.collection},i))}return i}w();var Wo=Wt(yd()),Hb=Wt(Dv()),Ki=Wt(bd());w();w();function Lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lv(Object(n),!0).forEach(function(r){fI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lv(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mu(e){return(mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function fI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fv(e){return function(t){if(Array.isArray(t))return wd(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return wd(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wd(t,n):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qi(e){function t(n,r){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=n,this.code=r}return t.prototype=new Error,t.prototype.name=e,t.prototype.constructor=t,t}var Wv=qi("LaunchDarklyUnexpectedResponseError"),Dd=qi("LaunchDarklyInvalidEnvironmentIdError"),Td=qi("LaunchDarklyInvalidUserError"),Jv=qi("LaunchDarklyInvalidEventKeyError"),Qv=qi("LaunchDarklyInvalidArgumentError"),ji=qi("LaunchDarklyFlagFetchError"),Xv=qi("LaunchDarklyInvalidDataError");function vu(e){return!(e>=400&&e<500)||e===400||e===408||e===429}for(Nd=Object.freeze({__proto__:null,LDUnexpectedResponseError:Wv,LDInvalidEnvironmentIdError:Dd,LDInvalidUserError:Td,LDInvalidEventKeyError:Jv,LDInvalidArgumentError:Qv,LDFlagFetchError:ji,LDInvalidDataError:Xv,isHttpErrorRecoverable:vu}),fr=[],yu=[],gu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zi=0,Mv=gu.length;zi<Mv;++zi)fr[zi]=gu[zi],yu[gu.charCodeAt(zi)]=zi;var Nd,fr,yu,gu,zi,Mv;function dI(e,t,n){for(var r,i,o=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(fr[(i=r)>>18&63]+fr[i>>12&63]+fr[i>>6&63]+fr[63&i]);return o.join("")}yu["-".charCodeAt(0)]=62,yu["_".charCodeAt(0)]=63;var zv=Array.isArray,Bv=Object.keys,pI=Object.prototype.hasOwnProperty,jv=["key","secondary","ip","country","email","firstName","lastName","avatar","name"];function ua(e,t){return(e.endsWith("/")?e.substring(0,e.length-1):e)+(t.startsWith("/")?"":"/")+t}function Ud(e){return function(t){for(var n,r=t.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(dI(t,s,s+16383>a?a:s+16383));return i===1?(n=t[r-1],o.push(fr[n>>2]+fr[n<<4&63]+"==")):i===2&&(n=(t[r-2]<<8)+t[r-1],o.push(fr[n>>10]+fr[n>>4&63]+fr[n<<2&63]+"=")),o.join("")}(function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));return n}(unescape(encodeURIComponent(e))))}function la(e){return Ud(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function aa(e){return JSON.parse(JSON.stringify(e))}function kd(e,t){return function n(r,i){if(r===i)return!0;if(r&&i&&typeof r=="object"&&typeof i=="object"){var o,s,a,c=zv(r),u=zv(i);if(c&&u){if((s=r.length)!=i.length)return!1;for(o=s;o--!=0;)if(!n(r[o],i[o]))return!1;return!0}if(c!=u)return!1;var p=r instanceof Date,h=i instanceof Date;if(p!=h)return!1;if(p&&h)return r.getTime()==i.getTime();var y=r instanceof RegExp,m=i instanceof RegExp;if(y!=m)return!1;if(y&&m)return r.toString()==i.toString();var b=Bv(r);if((s=b.length)!==Bv(i).length)return!1;for(o=s;o--!=0;)if(!pI.call(i,b[o]))return!1;for(o=s;o--!=0;)if(!n(r[a=b[o]],i[a]))return!1;return!0}return r!=r&&i!=i}(e,t)}function ca(e){setTimeout(e,0)}function Bi(e,t){var n=e.then(function(r){return t&&setTimeout(function(){t(null,r)},0),r},function(r){if(!t)return Promise.reject(r);setTimeout(function(){t(r,null)},0)});return t?void 0:n}function Zv(e){var t={};for(var n in e)mi(e,n)&&(t[n]={value:e[n],version:0});return t}function Ad(e){var t={};for(var n in e)mi(e,n)&&(t[n]=e[n].value);return t}function eb(e,t){for(var n,r=t.slice(0),i=[],o=e;r.length>0;){for(n=[];o>0;){var s=r.shift();if(!s)break;(o-=la(JSON.stringify(s)).length)<0&&n.length>0?r.unshift(s):n.push(s)}o=e,i.push(n)}return i}function tb(e){var t=e.version||"3.6.0";return e.userAgent+"/"+t}function $n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(r,i){return ir(ir({},r),i)},{})}function mi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nb(e){if(!e)return e;var t;for(var n in jv){var r=jv[n],i=e[r];i!==void 0&&typeof i!="string"&&((t=t||ir({},e))[r]=String(i))}return t||e}for(Ld=Object.freeze({__proto__:null,appendUrlPath:ua,btoa:Ud,base64URLEncode:la,clone:aa,deepEquals:kd,onNextTick:ca,wrapPromiseCallback:Bi,transformValuesToVersionedValues:Zv,transformVersionedValuesToValues:Ad,chunkUserEventsForUrl:eb,getLDUserAgentString:tb,extend:$n,objectHasOwnProperty:mi,sanitizeUser:nb}),rb=function(e,t){return function(n){var r=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);n.exports=function(){return r(i),i}}else{var o=new Array(16);n.exports=function(){for(var s,a=0;a<16;a++)!(3&a)&&(s=4294967296*Math.random()),o[a]=s>>>((3&a)<<3)&255;return o}}}(t={exports:{}}),t.exports}(),Id=[],oa=0;oa<256;++oa)Id[oa]=(oa+256).toString(16).substr(1);var Ld,rb,Id,oa,qv,Sd,Ed=0,xd=0,Fd=function(e,t,n){var r=t&&n||0,i=t||[],o=(e=e||{}).node||qv,s=e.clockseq!==void 0?e.clockseq:Sd;if(o==null||s==null){var a=rb();o==null&&(o=qv=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),s==null&&(s=Sd=16383&(a[6]<<8|a[7]))}var c=e.msecs!==void 0?e.msecs:new Date().getTime(),u=e.nsecs!==void 0?e.nsecs:xd+1,p=c-Ed+(u-xd)/1e4;if(p<0&&e.clockseq===void 0&&(s=s+1&16383),(p<0||c>Ed)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ed=c,xd=u,Sd=s;var h=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=255&h;var y=c/4294967296*1e4&268435455;i[r++]=y>>>8&255,i[r++]=255&y,i[r++]=y>>>24&15|16,i[r++]=y>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var m=0;m<6;++m)i[r+m]=o[m];return t||function(b,R){var D=R||0,E=Id;return[E[b[D++]],E[b[D++]],E[b[D++]],E[b[D++]],"-",E[b[D++]],E[b[D++]],"-",E[b[D++]],E[b[D++]],"-",E[b[D++]],E[b[D++]],"-",E[b[D++]],E[b[D++]],E[b[D++]],E[b[D++]],E[b[D++]],E[b[D++]]].join("")}(i)},sa=["debug","info","warn","error","none"];function ib(e,t){if(e&&e.destination&&typeof e.destination!="function")throw new Error("destination for basicLogger was set to a non-function");function n(y){return function(m){console&&console[y]&&console[y].call(console,m)}}var r=e&&e.destination?[e.destination,e.destination,e.destination,e.destination]:[n("log"),n("info"),n("warn"),n("error")],i=!(!e||!e.destination),o=e&&e.prefix!==void 0&&e.prefix!==null?e.prefix:"[LaunchDarkly] ",s=1;if(e&&e.level)for(var a=0;a<sa.length;a++)sa[a]===e.level&&(s=a);function c(y,m,b){if(!(b.length<1)){var R,D=i?m+": "+o:o;if(b.length!==1&&t){var E=Fv(b);E[0]=D+E[0],R=t.apply(void 0,Fv(E))}else R=D+b[0];try{r[y](R)}catch(I){console&&console.log&&console.log("[LaunchDarkly] Configured logger's "+m+" method threw an exception: "+I)}}}for(var u={},p=function(y){var m=sa[y];if(m!=="none")if(y<s)u[m]=function(){};else{var b=y;u[m]=function(){c(b,m,arguments)}}},h=0;h<sa.length;h++)p(h);return u}function ob(e,t){return ib({level:e,prefix:t})}function Md(e){return e&&e.message?e.message:typeof e=="string"||e instanceof String?e:JSON.stringify(e)}var $o=" Please see https://docs.launchdarkly.com/sdk/client-side/javascript#initializing-the-client for instructions on SDK initialization.",sb=function(e){return'Expected application/json content type but got "'+e+'"'},Od=function(e){return"local storage is unavailable: "+Md(e)},ab=function(e){return"network error"+(e?" ("+e+")":"")},Pd=function(e){return'Custom event "'+e+'" does not exist'},cb=function(){return"Environment not found. Double check that you specified a valid environment/client-side ID."+$o},ub=function(){return"No environment/client-side ID was specified."+$o},_u=function(e){return"Error fetching flag settings: "+Md(e)},lb=function(){return"No user specified."+$o},fb=function(){return"Invalid user specified."+$o},db=function(){return"LaunchDarkly client was initialized with bootstrap data that did not include flag metadata. Events may not be sent correctly."+$o},pb=function(e,t){return t?'"'+e+'" is deprecated, please use "'+t+'"':'"'+e+'" is deprecated'},hb=function(e,t,n){return"Received error "+e+(e===401?" (invalid SDK key)":"")+" for "+t+" - "+(vu(e)?n:"giving up permanently")},gb=function(){return"Cannot make HTTP requests in this environment."+$o},mb=function(e){return"Opening stream connection to "+e},yb=function(e,t){return"Error on stream connection: "+Md(e)+", will continue retrying every "+t+" milliseconds."},_b=function(e){return'Ignoring unknown config option "'+e+'"'},vb=function(e,t,n){return'Config option "'+e+'" should be of type '+t+", got "+n+", using default value"},bb=function(e,t){return'Config option "'+e+'" should be a boolean, got '+t+", converting to boolean"},wb=function(e,t,n){return'Config option "'+e+'" was set to '+t+", changing to minimum value of "+n},Sb=function(e){return"polling for feature flags at "+e},Eb=function(e){return'received streaming update for flag "'+e+'"'},xb=function(e){return'received streaming update for flag "'+e+'" but ignored due to version check'},Rb=function(e){return'received streaming deletion for flag "'+e+'"'},Cb=function(e){return'received streaming deletion for flag "'+e+'" but ignored due to version check'},Tb=function(e){return'enqueueing "'+e+'" event'},kb=function(e){return"sending "+e+" events"},Ab=function(e){return'Config option "'.concat(e,'" must only contain letters, numbers, ., _ or -.')},Ib=Object.freeze({__proto__:null,clientInitialized:function(){return"LaunchDarkly client initialized"},clientNotReady:function(){return"LaunchDarkly client is not ready"},eventCapacityExceeded:function(){return"Exceeded event queue capacity. Increase capacity to avoid dropping events."},eventWithoutUser:function(){return"Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"},invalidContentType:sb,invalidKey:function(){return"Event key must be a string"},localStorageUnavailable:Od,networkError:ab,unknownCustomEventKey:Pd,environmentNotFound:cb,environmentNotSpecified:ub,errorFetchingFlags:_u,userNotSpecified:lb,invalidUser:fb,invalidData:function(){return"Invalid data received from LaunchDarkly; connection may have been interrupted"},bootstrapOldFormat:db,bootstrapInvalid:function(){return"LaunchDarkly bootstrap data is not available because the back end could not read the flags."},deprecated:pb,httpErrorMessage:hb,httpUnavailable:gb,identifyDisabled:function(){return"identify() has no effect here; it must be called on the main client instance"},streamClosing:function(){return"Closing stream connection"},streamConnecting:mb,streamError:yb,unknownOption:_b,wrongOptionType:vb,wrongOptionTypeBoolean:bb,optionBelowMinimum:wb,debugPolling:Sb,debugStreamPing:function(){return"received ping message from stream"},debugStreamPut:function(){return"received streaming update for all flags"},debugStreamPatch:Eb,debugStreamPatchIgnored:xb,debugStreamDelete:Rb,debugStreamDeleteIgnored:Cb,debugEnqueueingEvent:Tb,debugPostingEvents:kb,debugPostingDiagnosticEvent:function(e){return"sending diagnostic event ("+e.kind+")"},invalidTagValue:Ab}),Ob={baseUrl:{default:"https://app.launchdarkly.com"},streamUrl:{default:"https://clientstream.launchdarkly.com"},eventsUrl:{default:"https://events.launchdarkly.com"},sendEvents:{default:!0},streaming:{type:"boolean"},sendLDHeaders:{default:!0},requestHeaderTransform:{type:"function"},inlineUsersInEvents:{default:!1},allowFrequentDuplicateEvents:{default:!1},sendEventsOnlyForVariation:{default:!1},useReport:{default:!1},evaluationReasons:{default:!1},eventCapacity:{default:100,minimum:1},flushInterval:{default:2e3,minimum:2e3},samplingInterval:{default:0,minimum:0},streamReconnectDelay:{default:1e3,minimum:0},allAttributesPrivate:{default:!1},privateAttributeNames:{default:[]},bootstrap:{type:"string|object"},diagnosticRecordingInterval:{default:9e5,minimum:2e3},diagnosticOptOut:{default:!1},wrapperName:{type:"string"},wrapperVersion:{type:"string"},stateProvider:{type:"object"},autoAliasingOptOut:{default:!1},application:{validator:function(e,t,n,r){var i={};return n.id&&(i.id=Gv("".concat(e,".id"),t,n.id,r)),n.version&&(i.version=Gv("".concat(e,".version"),t,n.version,r)),i}}},hI=/^(\w|\.|-)+$/;function Gv(e,t,n,r){if(typeof n=="string"&&n.match(hI))return n;r.warn(Ab(e))}function Pb(e,t,n,r){var i=$n({logger:{default:r}},Ob,n),o={all_attributes_private:"allAttributesPrivate",private_attribute_names:"privateAttributeNames",samplingInterval:null};function s(c){ca(function(){t&&t.maybeReportError(new Qv(c))})}var a=$n({},e||{});return function(c){var u=c;Object.keys(o).forEach(function(p){if(u[p]!==void 0){var h=o[p];r&&r.warn(pb(p,h)),h&&(u[h]===void 0&&(u[h]=u[p]),delete u[p])}})}(a),function(c){sa.forEach(function(u){if(u!=="none"&&(!c[u]||typeof c[u]!="function"))throw new Error("Provided logger instance must support logger."+u+"(...) method")})}((a=function(c){var u=$n({},c),p=function(h){if(h===null)return"any";if(h!==void 0){if(Array.isArray(h))return"array";var y=mu(h);return y==="boolean"||y==="string"||y==="number"||y==="function"?y:"object"}};return Object.keys(c).forEach(function(h){var y=c[h];if(y!=null){var m=i[h];if(m===void 0)s(_b(h));else{var b=m.type||p(m.default),R=m.validator;if(R){var D=R(h,c,c[h],r);D!==void 0?u[h]=D:delete u[h]}else if(b!=="any"){var E=b.split("|"),I=p(y);E.indexOf(I)<0?b==="boolean"?(u[h]=!!y,s(bb(h,I))):(s(vb(h,b,I)),u[h]=m.default):I==="number"&&m.minimum!==void 0&&y<m.minimum&&(s(wb(h,y,m.minimum)),u[h]=m.minimum)}}}}),u}(a=function(c){var u=$n({},c);return Object.keys(i).forEach(function(p){u[p]!==void 0&&u[p]!==null||(u[p]=i[p]&&i[p].default)}),u}(a))).logger),a}function Db(e){var t={};return e&&(e.application&&e.application.id!==void 0&&e.application.id!==null&&(t["application-id"]=[e.application.id]),e.application&&e.application.version!==void 0&&e.application.id!==null&&(t["application-version"]=[e.application.version])),t}function zd(e,t){if(t&&!t.sendLDHeaders)return{};var n={"X-LaunchDarkly-User-Agent":tb(e)};t&&t.wrapperName&&(n["X-LaunchDarkly-Wrapper"]=t.wrapperVersion?t.wrapperName+"/"+t.wrapperVersion:t.wrapperName);var r=Db(t),i=Object.keys(r);return i.length&&(n["x-launchdarkly-tags"]=i.sort().flatMap(function(o){return Array.isArray(r[o])?r[o].sort().map(function(s){return"".concat(o,"/").concat(s)}):["".concat(o,"/").concat(r[o])]}).join(" ")),n}function Bd(e,t){return t&&t.requestHeaderTransform?t.requestHeaderTransform(ir({},e)):e}function Kv(e,t,n){var r="/a/"+t+".gif",i=$n({"Content-Type":"application/json"},zd(e,n)),o=e.httpFallbackPing,s={sendChunk:function(a,c,u,p){var h=JSON.stringify(a),y=u?null:Fd();return p?function m(b){var R=u?i:$n({},i,{"X-LaunchDarkly-Event-Schema":"3","X-LaunchDarkly-Payload-ID":y});return e.httpRequest("POST",c,Bd(R,n),h).promise.then(function(D){if(D)return D.status>=400&&vu(D.status)&&b?m(!1):function(E){var I={status:E.status},N=E.header("date");if(N){var P=Date.parse(N);P&&(I.serverTime=P)}return I}(D)}).catch(function(){return b?m(!1):Promise.reject()})}(!0).catch(function(){}):(o&&o(c+r+"?d="+la(h)),Promise.resolve())},sendEvents:function(a,c,u){if(!e.httpRequest)return Promise.resolve();var p,h=e.httpAllowsPost();p=h?[a]:eb(2e3-c.length,a);for(var y=[],m=0;m<p.length;m++)y.push(s.sendChunk(p[m],c,u,h));return Promise.all(y)}};return s}function gI(){var e={},t=0,n=0,r={};return e.summarizeEvent=function(i){if(i.kind==="feature"){var o=i.key+":"+(i.variation!==null&&i.variation!==void 0?i.variation:"")+":"+(i.version!==null&&i.version!==void 0?i.version:""),s=r[o];s?s.count=s.count+1:r[o]={count:1,key:i.key,variation:i.variation,version:i.version,value:i.value,default:i.default},(t===0||i.creationDate<t)&&(t=i.creationDate),i.creationDate>n&&(n=i.creationDate)}},e.getSummary=function(){var i={},o=!0;for(var s in r){var a=r[s],c=i[a.key];c||(c={default:a.default,counters:[]},i[a.key]=c);var u={value:a.value,count:a.count};a.variation!==void 0&&a.variation!==null&&(u.variation=a.variation),a.version?u.version=a.version:u.unknown=!0,c.counters.push(u),o=!1}return o?null:{startDate:t,endDate:n,features:i}},e.clearSummary=function(){t=0,n=0,r={}},e}function mI(e){var t={},n=e.allAttributesPrivate,r=e.privateAttributeNames||[],i={key:!0,custom:!0,anonymous:!0},o={key:!0,secondary:!0,ip:!0,country:!0,email:!0,firstName:!0,lastName:!0,avatar:!0,name:!0,anonymous:!0,custom:!0};return t.filterUser=function(s){if(!s)return null;var a=s.privateAttributeNames||[],c=function(b,R){return Object.keys(b).reduce(function(D,E){var I=D;return R(E)&&(function(N){return!i[N]&&(n||a.indexOf(N)!==-1||r.indexOf(N)!==-1)}(E)?I[1][E]=!0:I[0][E]=b[E]),I},[{},{}])},u=c(s,function(b){return o[b]}),p=u[0],h=u[1];if(s.custom){var y=c(s.custom,function(){return!0});p.custom=y[0],h=$n({},h,y[1])}var m=Object.keys(h);return m.length&&(m.sort(),p.privateAttrs=m),p},t}function yI(e,t,n,r){var i={};function o(){var s="",a=r.getUser();return a&&(s=n||Ud(JSON.stringify(a))),"ld:"+t+":"+s}return i.loadFlags=function(){return e.get(o()).then(function(s){if(s==null)return null;try{var a=JSON.parse(s);if(a){var c=a.$schema;c===void 0||c<1?a=Zv(a):delete a.$schema}return a}catch(u){return i.clearFlags().then(function(){return null})}})},i.saveFlags=function(s){var a=$n({},s,{$schema:1});return e.set(o(),JSON.stringify(a))},i.clearFlags=function(){return e.clear(o())},i}function _I(e,t,n,r){var i,o=t.streamUrl,s=t.logger,a={},c=ua(o,"/eval/"+n),u=t.useReport,p=t.evaluationReasons,h=t.streamReconnectDelay,y=zd(e,t),m=!1,b=null,R=null,D=null,E=null,I=null;function N(z){m||(s.warn(yb(z,h)),m=!0),H(!1),K(),P(h)}function P(z){R||(z?R=setTimeout(F,z):F())}function F(){var z;R=null;var C="",fe={headers:y,readTimeoutMillis:3e5};if(e.eventSourceFactory){for(var oe in E!=null&&(C="h="+E),u?e.eventSourceAllowsReport?(z=c,fe.method="REPORT",fe.headers["Content-Type"]="application/json",fe.body=JSON.stringify(D)):(z=ua(o,"/ping/"+n),C=""):z=c+"/"+la(JSON.stringify(D)),fe.headers=Bd(fe.headers,t),p&&(C=C+(C?"&":"")+"withReasons=true"),z=z+(C?"?":"")+C,K(),s.info(mb(z)),i=new Date().getTime(),b=e.eventSourceFactory(z,fe),I)mi(I,oe)&&b.addEventListener(oe,I[oe]);b.onerror=N}}function K(){b&&(s.info("Closing stream connection"),b.close(),b=null)}function H(z){i&&r&&r.recordStreamInit(i,!z,new Date().getTime()-i),i=null}return a.connect=function(z,C,fe){D=z,E=C,I={};var oe=function(T){I[T]=function(pe){m=!1,H(!0),fe[T]&&fe[T](pe)}};for(var Re in fe||{})oe(Re);P()},a.disconnect=function(){clearTimeout(R),R=null,K()},a.isConnected=function(){return!!(b&&e.eventSourceIsActive&&e.eventSourceIsActive(b))},a}function vI(e,t,n){var r=t.baseUrl,i=t.useReport,o=t.evaluationReasons,s=t.logger,a={},c={};function u(p,h){if(!e.httpRequest)return new Promise(function(E,I){I(new ji(gb()))});var y=h?"REPORT":"GET",m=zd(e,t);h&&(m["Content-Type"]="application/json");var b=c[p];b||(b=function(E){var I,N,P,F,K={addPromise:function(H,z){I=H,N&&N(),N=z,H.then(function(C){I===H&&(P(C),E&&E())},function(C){I===H&&(F(C),E&&E())})}};return K.resultPromise=new Promise(function(H,z){P=H,F=z}),K}(function(){delete c[p]}),c[p]=b);var R=e.httpRequest(y,p,Bd(m,t),h),D=R.promise.then(function(E){if(E.status===200){if(E.header("content-type")&&E.header("content-type").substring(0,16)==="application/json")return JSON.parse(E.body);var I=sb(E.header("content-type")||"");return Promise.reject(new ji(I))}return Promise.reject(function(N){return N.status===404?new Dd(cb()):new ji(_u(N.statusText||String(N.status)))}(E))},function(E){return Promise.reject(new ji(ab(E)))});return b.addPromise(D,function(){R.cancel&&R.cancel()}),b.resultPromise}return a.fetchJSON=function(p){return u(ua(r,p),null)},a.fetchFlagSettings=function(p,h){var y,m,b,R="";return i?(m=[r,"/sdk/evalx/",n,"/user"].join(""),b=JSON.stringify(p)):(y=la(JSON.stringify(p)),m=[r,"/sdk/evalx/",n,"/users/",y].join("")),h&&(R="h="+h),o&&(R=R+(R?"&":"")+"withReasons=true"),m=m+(R?"?":"")+R,s.debug(Sb(m)),u(m,b)},a}function bI(e){var t={validateUser:function(n){if(!n)return Promise.reject(new Td(lb()));var r=aa(n);return r.key!==null&&r.key!==void 0?(r.key=r.key.toString(),Promise.resolve(r)):r.anonymous?e.get("ld:$anonUserId").then(function(i){if(i)return r.key=i,r;var o=Fd();return r.key=o,function(s){return e.set("ld:$anonUserId",s)}(o).then(function(){return r})}):Promise.reject(new Td(fb()))}};return t}var Rd=Object.freeze({__proto__:null,baseOptionDefs:Ob,validate:Pb,getTags:Db}).baseOptionDefs,wI=Ld.appendUrlPath,SI=function(e){var t={diagnosticId:Fd()};return e&&(t.sdkKeySuffix=e.length>6?e.substring(e.length-6):e),t};function Nb(e,t,n,r,i){var o,s,a,c=n&&n.logger?n.logger:i&&i.logger&&i.logger.default||ob("warn"),u=function(U){var A={},B={};return A.on=function(se,ye,ie){B[se]=B[se]||[],B[se]=B[se].concat({handler:ye,context:ie})},A.off=function(se,ye,ie){if(B[se])for(var De=0;De<B[se].length;De++)B[se][De].handler===ye&&B[se][De].context===ie&&(B[se]=B[se].slice(0,De).concat(B[se].slice(De+1)))},A.emit=function(se){if(B[se])for(var ye=B[se].slice(0),ie=0;ie<ye.length;ie++)ye[ie].handler.apply(ye[ie].context,Array.prototype.slice.call(arguments,1))},A.getEvents=function(){return Object.keys(B)},A.getEventListenerCount=function(se){return B[se]?B[se].length:0},A.maybeReportError=function(se){se&&(B.error?this.emit("error",se):(U||console).error(se.message))},A}(c),p=function(U){var A=!1,B=!1,se=null,ye=null,ie=new Promise(function(De){U.on("ready",function L(){U.off("ready",L),De()})}).catch(function(){});return{getInitializationPromise:function(){return ye||(A?Promise.resolve():B?Promise.reject(se):ye=new Promise(function(De,L){U.on("initialized",function ne(){U.off("initialized",ne),De()}),U.on("failed",function ne(J){U.off("failed",ne),L(J)})}))},getReadyPromise:function(){return ie},signalSuccess:function(){A||B||(A=!0,U.emit("initialized"),U.emit("ready"))},signalFailure:function(De){A||B||(B=!0,se=De,U.emit("failed",De),U.emit("ready")),U.maybeReportError(De)}}}(u),h=Pb(n,u,i,c),y=h.sendEvents,m=e,b=h.hash,R=function(U,A){var B={},se=!1,ye=function(ie){se||(se=!0,A.warn(Od(ie)))};return B.isEnabled=function(){return!!U},B.get=function(ie){return new Promise(function(De){U?U.get(ie).then(De).catch(function(L){ye(L),De(void 0)}):De(void 0)})},B.set=function(ie,De){return new Promise(function(L){U?U.set(ie,De).then(function(){return L(!0)}).catch(function(ne){ye(ne),L(!1)}):L(!1)})},B.clear=function(ie){return new Promise(function(De){U?U.clear(ie).then(function(){return De(!0)}).catch(function(L){ye(L),De(!1)}):De(!1)})},B}(r.localStorage,c),D=Kv(r,m,h),E=h.sendEvents&&!h.diagnosticOptOut,I=E?SI(m):null,N=E?function(U){var A,B,se,ye;function ie(De){A=De,B=0,se=0,ye=[]}return ie(U),{getProps:function(){return{dataSinceDate:A,droppedEvents:B,eventsInLastBatch:se,streamInits:ye}},setProps:function(De){A=De.dataSinceDate,B=De.droppedEvents||0,se=De.eventsInLastBatch||0,ye=De.streamInits||[]},incrementDroppedEvents:function(){B++},setEventsInLastBatch:function(De){se=De},recordStreamInit:function(De,L,ne){var J={timestamp:De,failed:L,durationMillis:ne};ye.push(J)},reset:ie}}(new Date().getTime()):null,P=E?function(U,A,B,se,ye,ie,De){var L,ne,J=!!U.diagnosticUseCombinedEvent,_e="ld:"+ye+":$diagnostics",Le=wI(ie.eventsUrl,"/events/diagnostic/"+ye),Te=ie.diagnosticRecordingInterval,ft=B,Sn=!!ie.streaming,Qt={};function Be(){return{sdk:pr(),configuration:(rt={customBaseURI:ie.baseUrl!==Rd.baseUrl.default,customStreamURI:ie.streamUrl!==Rd.streamUrl.default,customEventsURI:ie.eventsUrl!==Rd.eventsUrl.default,eventsCapacity:ie.eventCapacity,eventsFlushIntervalMillis:ie.flushInterval,reconnectTimeMillis:ie.streamReconnectDelay,streamingDisabled:!Sn,allAttributesPrivate:!!ie.allAttributesPrivate,inlineUsersInEvents:!!ie.inlineUsersInEvents,diagnosticRecordingIntervalMillis:ie.diagnosticRecordingInterval,usingSecureMode:!!ie.hash,bootstrapMode:!!ie.bootstrap,fetchGoalsDisabled:!ie.fetchGoals,allowFrequentDuplicateEvents:!!ie.allowFrequentDuplicateEvents,sendEventsOnlyForVariation:!!ie.sendEventsOnlyForVariation,autoAliasingOptOut:!!ie.autoAliasingOptOut},rt),platform:U.diagnosticPlatformData};var rt}function an(rt){ie.logger&&ie.logger.debug(Ib.debugPostingDiagnosticEvent(rt)),se.sendEvents(rt,Le,!0).then(function(){}).catch(function(){})}function Nn(){var rt,en;an((rt=new Date().getTime(),en=ir({kind:J?"diagnostic-combined":"diagnostic",id:De,creationDate:rt},ft.getProps()),J&&(en=ir(ir({},en),Be())),ft.reset(rt),en)),ne=setTimeout(Nn,Te),L=new Date().getTime(),J&&function(){if(A.isEnabled()){var Ft=ir({},ft.getProps());A.set(_e,JSON.stringify(Ft))}}()}function pr(){var rt=ir({},U.diagnosticSdkData);return ie.wrapperName&&(rt.wrapperName=ie.wrapperName),ie.wrapperVersion&&(rt.wrapperVersion=ie.wrapperVersion),rt}return Qt.start=function(){J?function(rt){if(!A.isEnabled())return rt(!1);A.get(_e).then(function(en){if(en)try{var Ft=JSON.parse(en);ft.setProps(Ft),L=Ft.dataSinceDate}catch(yt){}rt(!0)}).catch(function(){rt(!1)})}(function(rt){if(rt){var en=(L||0)+Te,Ft=new Date().getTime();Ft>=en?Nn():ne=setTimeout(Nn,en-Ft)}else Math.floor(4*Math.random())===0?Nn():ne=setTimeout(Nn,Te)}):(an(ir({kind:"diagnostic-init",id:De,creationDate:ft.getProps().dataSinceDate},Be())),ne=setTimeout(Nn,Te))},Qt.stop=function(){ne&&clearTimeout(ne)},Qt.setStreaming=function(rt){Sn=rt},Qt}(r,R,N,D,m,h,I):null,F=_I(r,h,m,N),K=h.eventProcessor||function(U,A,B){var se,ye=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,ie=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,De=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,L={},ne=De||Kv(U,B,A),J=ua(A.eventsUrl,"/events/bulk/"+B),_e=gI(),Le=mI(A),Te=A.inlineUsersInEvents,ft=A.samplingInterval,Sn=A.eventCapacity,Qt=A.flushInterval,Be=A.logger,an=[],Nn=0,pr=!1,rt=!1;function en(){return ft===0||Math.floor(Math.random()*ft)===0}function Ft(Ye){return!!Ye.debugEventsUntilDate&&Ye.debugEventsUntilDate>Nn&&Ye.debugEventsUntilDate>new Date().getTime()}function yt(Ye){var dt=$n({},Ye);return Ye.kind==="alias"||(Te||Ye.kind==="identify"?dt.user=Le.filterUser(Ye.user):(dt.userKey=Ye.user.key,delete dt.user),Ye.kind==="feature"&&(delete dt.trackEvents,delete dt.debugEventsUntilDate)),dt}function Xe(Ye){an.length<Sn?(an.push(Ye),rt=!1):(rt||(rt=!0,Be.warn("Exceeded event queue capacity. Increase capacity to avoid dropping events.")),ye&&ye.incrementDroppedEvents())}return L.enqueue=function(Ye){if(!pr){var dt=!1,En=!1;if(_e.summarizeEvent(Ye),Ye.kind==="feature"?en()&&(dt=!!Ye.trackEvents,En=Ft(Ye)):dt=en(),dt&&Xe(yt(Ye)),En){var hn=$n({},Ye,{kind:"debug"});hn.user=Le.filterUser(hn.user),delete hn.trackEvents,delete hn.debugEventsUntilDate,Xe(hn)}}},L.flush=function(){if(pr)return Promise.resolve();var Ye=an,dt=_e.getSummary();return _e.clearSummary(),dt&&(dt.kind="summary",Ye.push(dt)),ye&&ye.setEventsInLastBatch(Ye.length),Ye.length===0?Promise.resolve():(an=[],Be.debug(kb(Ye.length)),ne.sendEvents(Ye,J).then(function(En){En&&(En.serverTime&&(Nn=En.serverTime),vu(En.status)||(pr=!0),En.status>=400&&ca(function(){ie.maybeReportError(new Wv(hb(En.status,"event posting","some events were dropped")))}))}))},L.start=function(){se=setTimeout(function Ye(){L.flush(),se=setTimeout(Ye,Qt)},Qt)},L.stop=function(){clearTimeout(se)},L}(r,h,m,N,u,D),H=vI(r,h,m),z={},C={},fe=h.streaming,oe=!1,Re=!1,T=!0,pe=h.stateProvider,Ce=function(U,A){var B,se={setUser:function(ye){var ie=B&&aa(B);(B=nb(ye))&&A&&A(aa(B),ie)},getUser:function(){return B?aa(B):null}};return se}(0,function(U,A){(function(B){pe||B&&Ue({kind:"identify",key:B.key,user:B,creationDate:new Date().getTime()})})(U),!h.autoAliasingOptOut&&A&&A.anonymous&&U&&!U.anonymous&&kt(U,A)}),Ge=bI(R),$e=R.isEnabled()?new yI(R,m,b,Ce,c):null;function Ue(U){if(m&&!(pe&&pe.enqueueEvent&&pe.enqueueEvent(U))){if(U.kind!=="alias"){if(!U.user)return void(T&&(c.warn("Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"),T=!1));T=!1}!y||Re||r.isDoNotTrack()||(c.debug(Tb(U.kind)),K.enqueue(U))}}function Ut(U,A,B,se){var ye=Ce.getUser(),ie=new Date,De=A?A.value:null;if(!h.allowFrequentDuplicateEvents){var L=JSON.stringify(De)+(ye&&ye.key?ye.key:"")+U,ne=z[L];if(ne&&ie-ne<3e5)return;z[L]=ie}var J={kind:"feature",key:U,user:ye,value:De,variation:A?A.variationIndex:null,default:B,creationDate:ie.getTime()};ye&&ye.anonymous&&(J.contextKind=jt(ye));var _e=C[U];_e&&(J.version=_e.flagVersion?_e.flagVersion:_e.version,J.trackEvents=_e.trackEvents,J.debugEventsUntilDate=_e.debugEventsUntilDate),(se||_e&&_e.trackReason)&&A&&(J.reason=A.reason),Ue(J)}function wn(U,A,B,se){var ye;if(C&&mi(C,U)&&C[U]&&!C[U].deleted){var ie=C[U];ye=Tt(ie),ie.value!==null&&ie.value!==void 0||(ye.value=A)}else ye={value:A,variationIndex:null,reason:{kind:"ERROR",errorKind:"FLAG_NOT_FOUND"}};return B&&Ut(U,ye,A,se),ye}function Tt(U){return{value:U.value,variationIndex:U.variation===void 0?null:U.variation,reason:U.reason||null}}function jt(U){return U.anonymous?"anonymousUser":"user"}function kt(U,A){pe||U&&A&&Ue({kind:"alias",key:U.key,contextKind:jt(U),previousKey:A.key,previousContextKind:jt(A),creationDate:new Date().getTime()})}function et(){if(s=!0,Ce.getUser()){var U=function(A){try{return JSON.parse(A)}catch(B){return void u.maybeReportError(new Xv("Invalid data received from LaunchDarkly; connection may have been interrupted"))}};F.connect(Ce.getUser(),b,{ping:function(){c.debug("received ping message from stream");var A=Ce.getUser();H.fetchFlagSettings(A,b).then(function(B){kd(A,Ce.getUser())&&Ht(B||{})}).catch(function(B){u.maybeReportError(new ji(_u(B)))})},put:function(A){var B=U(A.data);B&&(c.debug("received streaming update for all flags"),Ht(B))},patch:function(A){var B=U(A.data);if(B){var se=C[B.key];if(!se||!se.version||!B.version||se.version<B.version){c.debug(Eb(B.key));var ye={},ie=$n({},B);delete ie.key,C[B.key]=ie;var De=Tt(ie);ye[B.key]=se?{previous:se.value,current:De}:{current:De},ze(ye)}else c.debug(xb(B.key))}},delete:function(A){var B=U(A.data);if(B)if(!C[B.key]||C[B.key].version<B.version){c.debug(Rb(B.key));var se={};C[B.key]&&!C[B.key].deleted&&(se[B.key]={previous:C[B.key].value}),C[B.key]={version:B.version,deleted:!0},ze(se)}else c.debug(Cb(B.key))}})}}function pn(){s&&(F.disconnect(),s=!1)}function Ht(U){var A={};if(!U)return Promise.resolve();for(var B in C)mi(C,B)&&C[B]&&(U[B]&&!kd(U[B].value,C[B].value)?A[B]={previous:C[B].value,current:Tt(U[B])}:U[B]&&!U[B].deleted||(A[B]={previous:C[B].value}));for(var se in U)mi(U,se)&&U[se]&&(!C[se]||C[se].deleted)&&(A[se]={current:Tt(U[se])});return C=ir({},U),ze(A).catch(function(){})}function ze(U){var A=Object.keys(U);if(A.length>0){var B={};A.forEach(function(se){var ye=U[se].current,ie=ye?ye.value:void 0,De=U[se].previous;u.emit("change:"+se,ie,De),B[se]=ye?{current:ie,previous:De}:{previous:De}}),u.emit("change",B),u.emit("internal-change",C),h.sendEventsOnlyForVariation||pe||A.forEach(function(se){Ut(se,U[se].current)})}return o&&$e?$e.saveFlags(C):Promise.resolve()}function At(){var U=fe||a&&fe===void 0;U&&!s?et():!U&&s&&pn(),P&&P.setStreaming(U)}function qt(U){return U==="change"||U.substr(0,6+1)==="change:"}if(typeof h.bootstrap=="string"&&h.bootstrap.toUpperCase()==="LOCALSTORAGE"&&($e?o=!0:c.warn(Od())),mu(h.bootstrap)==="object"&&(C=function(U){var A=Object.keys(U),B=U.$flagsState;!B&&A.length&&c.warn(db()),U.$valid===!1&&c.warn("LaunchDarkly bootstrap data is not available because the back end could not read the flags.");var se={};return A.forEach(function(ye){if(ye!=="$flagsState"&&ye!=="$valid"){var ie={value:U[ye]};B&&B[ye]?ie=$n(ie,B[ye]):ie.version=0,se[ye]=ie}}),se}(h.bootstrap)),pe){var Lt=pe.getInitialState();Lt?Gt(Lt):pe.on("init",Gt),pe.on("update",function(U){U.user&&Ce.setUser(U.user),U.flags&&Ht(U.flags)})}else(e?Ge.validateUser(t).then(function(U){return Ce.setUser(U),mu(h.bootstrap)==="object"?tt():o?$e.loadFlags().then(function(A){return A==null?(C={},H.fetchFlagSettings(Ce.getUser(),b).then(function(B){return Ht(B||{})}).then(tt).catch(function(B){j(new ji(_u(B)))})):(C=A,ca(tt),H.fetchFlagSettings(Ce.getUser(),b).then(function(B){return Ht(B)}).catch(function(B){return u.maybeReportError(B)}))}):H.fetchFlagSettings(Ce.getUser(),b).then(function(A){C=A||{},tt()}).catch(function(A){C={},j(A)})}):Promise.reject(new Dd(ub()))).catch(j);function Gt(U){m=U.environment,Ce.setUser(U.user),C=ir({},U.flags),ca(tt)}function tt(){c.info("LaunchDarkly client initialized"),oe=!0,At(),p.signalSuccess()}function j(U){p.signalFailure(U)}return{client:{waitForInitialization:function(){return p.getInitializationPromise()},waitUntilReady:function(){return p.getReadyPromise()},identify:function(U,A,B){return Re?Bi(Promise.resolve({}),B):pe?(c.warn("identify() has no effect here; it must be called on the main client instance"),Bi(Promise.resolve(Ad(C)),B)):Bi((o&&$e?$e.clearFlags():Promise.resolve()).then(function(){return Ge.validateUser(U)}).then(function(se){return H.fetchFlagSettings(se,A).then(function(ye){var ie=Ad(ye);return Ce.setUser(se),b=A,ye?Ht(ye).then(function(){return ie}):ie})}).then(function(se){return s&&et(),se}).catch(function(se){return u.maybeReportError(se),Promise.reject(se)}),B)},getUser:function(){return Ce.getUser()},variation:function(U,A){return wn(U,A,!0,!1).value},variationDetail:function(U,A){return wn(U,A,!0,!0)},track:function(U,A,B){if(typeof U=="string"){r.customEventFilter&&!r.customEventFilter(U)&&c.warn(Pd(U));var se=Ce.getUser(),ye={kind:"custom",key:U,user:se,url:r.getCurrentUrl(),creationDate:new Date().getTime()};se&&se.anonymous&&(ye.contextKind=jt(se)),A!=null&&(ye.data=A),B!=null&&(ye.metricValue=B),Ue(ye)}else u.maybeReportError(new Jv(Pd(U)))},alias:kt,on:function(U,A,B){qt(U)?(a=!0,oe&&At(),u.on(U,A,B)):u.on.apply(u,arguments)},off:function(U){if(u.off.apply(u,arguments),qt(U)){var A=!1;u.getEvents().forEach(function(B){qt(B)&&u.getEventListenerCount(B)>0&&(A=!0)}),A||(a=!1,s&&fe===void 0&&pn())}},setStreaming:function(U){var A=U===null?void 0:U;A!==fe&&(fe=A,At())},flush:function(U){return Bi(y?K.flush():Promise.resolve(),U)},allFlags:function(){var U={};if(!C)return U;for(var A in C)mi(C,A)&&(U[A]=wn(A,null,!h.sendEventsOnlyForVariation).value);return U},close:function(U){if(Re)return Bi(Promise.resolve(),U);var A=function(){Re=!0,C={}};return Bi(Promise.resolve().then(function(){if(pn(),P&&P.stop(),y)return K.stop(),K.flush()}).then(A).catch(A),U)}},options:h,emitter:u,ident:Ce,logger:c,requestor:H,start:function(){y&&(P&&P.start(),K.start())},enqueueEvent:Ue,getFlagsInternal:function(){return C},getEnvironmentId:function(){return m},internalChangeEventName:"internal-change"}}function Hv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hv(Object(n),!0).forEach(function(r){EI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hv(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var UL=Object.freeze({__proto__:null,commonBasicLogger:ib,createConsoleLogger:ob,errors:Nd,initialize:Nb,messages:Ib,utils:Ld,version:"3.6.0"}).commonBasicLogger;var $v={promise:Promise.resolve({status:200,header:function(){return null},body:null})};function xI(e,t,n,r,i){if(i&&!function(){var u=window.navigator&&window.navigator.userAgent;if(u){var p=u.match(/Chrom(e|ium)\/([0-9]+)\./);if(p)return parseInt(p[2],10)<73}return!0}())return $v;var o=new window.XMLHttpRequest;for(var s in o.open(e,t,!i),n||{})Object.prototype.hasOwnProperty.call(n,s)&&o.setRequestHeader(s,n[s]);if(i)return o.send(r),$v;var a,c=new Promise(function(u,p){o.addEventListener("load",function(){a||u({status:o.status,header:function(h){return o.getResponseHeader(h)},body:o.responseText})}),o.addEventListener("error",function(){a||p(new Error)}),o.send(r)});return{promise:c,cancel:function(){a=!0,o.abort()}}}function RI(e){var t,n={synchronousFlush:!1};if(window.XMLHttpRequest){var r=e&&e.disableSyncEventPost;n.httpRequest=function(a,c,u,p){var h=n.synchronousFlush&!r;return n.synchronousFlush=!1,xI(a,c,u,p,h)}}n.httpAllowsPost=function(){return t===void 0&&(t=!!window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest),t},n.httpFallbackPing=function(a){new window.Image().src=a};var i,o=e&&e.eventUrlTransformer;n.getCurrentUrl=function(){return o?o(window.location.href):window.location.href},n.isDoNotTrack=function(){var a;return(a=window.navigator&&window.navigator.doNotTrack!==void 0?window.navigator.doNotTrack:window.navigator&&window.navigator.msDoNotTrack!==void 0?window.navigator.msDoNotTrack:window.doNotTrack)===1||a===!0||a==="1"||a==="yes"};try{window.localStorage&&(n.localStorage={get:function(a){return new Promise(function(c){c(window.localStorage.getItem(a))})},set:function(a,c){return new Promise(function(u){window.localStorage.setItem(a,c),u()})},clear:function(a){return new Promise(function(c){window.localStorage.removeItem(a),c()})}})}catch(a){n.localStorage=null}if(e&&e.useReport&&typeof window.EventSourcePolyfill=="function"&&window.EventSourcePolyfill.supportedOptions&&window.EventSourcePolyfill.supportedOptions.method?(n.eventSourceAllowsReport=!0,i=window.EventSourcePolyfill):(n.eventSourceAllowsReport=!1,i=window.EventSource),window.EventSource){var s=3e5;n.eventSourceFactory=function(a,c){var u=Vv(Vv({},{heartbeatTimeout:s,silentTimeout:s,skipDefaultHeaders:!0}),c);return new i(a,u)},n.eventSourceIsActive=function(a){return a.readyState===window.EventSource.OPEN||a.readyState===window.EventSource.CONNECTING}}return n.userAgent="JSClient",n.version="2.22.1",n.diagnosticSdkData={name:"js-client-sdk",version:"2.22.1"},n.diagnosticPlatformData={name:"JS"},n.diagnosticUseCombinedEvent=!0,n}var CI=/[|\\{}()[\]^$+*?.]/g,Cd=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(CI,"\\$&")};function TI(e,t,n,r){var i,o,s=((e.kind==="substring"||e.kind==="regex")&&r.includes("/")?t:t.replace(r,"")).replace(n,"");switch(e.kind){case"exact":o=t,i=new RegExp("^"+Cd(e.url)+"/?$");break;case"canonical":o=s,i=new RegExp("^"+Cd(e.url)+"/?$");break;case"substring":o=s,i=new RegExp(".*"+Cd(e.substring)+".*$");break;case"regex":o=s,i=new RegExp(e.pattern);break;default:return!1}return i.test(o)}function Yv(e,t){for(var n={},r=null,i=[],o=0;o<e.length;o++)for(var s=e[o],a=s.urls||[],c=0;c<a.length;c++)if(TI(a[c],window.location.href,window.location.search,window.location.hash)){s.kind==="pageview"?t("pageview",s):(i.push(s),t("click_pageview",s));break}return i.length>0&&(r=function(u){for(var p=function(y,m){for(var b=[],R=0;R<m.length;R++)for(var D=y.target,E=m[R],I=E.selector,N=document.querySelectorAll(I);D&&N.length>0;){for(var P=0;P<N.length;P++)D===N[P]&&b.push(E);D=D.parentNode}return b}(u,i),h=0;h<p.length;h++)t("click",p[h])},document.addEventListener("click",r)),n.dispose=function(){document.removeEventListener("click",r)},n}function kI(e,t){var n,r;function i(){r&&r.dispose(),n&&n.length&&(r=Yv(n,o))}function o(s,a){var c=e.ident.getUser(),u={kind:s,key:a.key,data:null,url:window.location.href,user:c,creationDate:new Date().getTime()};return c&&c.anonymous&&(u.contextKind="anonymousUser"),s==="click"&&(u.selector=a.selector),e.enqueueEvent(u)}return e.requestor.fetchJSON("/sdk/goals/"+e.getEnvironmentId()).then(function(s){s&&s.length>0&&(r=Yv(n=s,o),function(a,c){var u,p=window.location.href;function h(){(u=window.location.href)!==p&&(p=u,c())}(function y(m,b){m(),setTimeout(function(){y(m,b)},b)})(h,a),window.history&&window.history.pushState?window.addEventListener("popstate",h):window.addEventListener("hashchange",h)}(300,i)),t()}).catch(function(s){e.emitter.maybeReportError(new Nd.LDUnexpectedResponseError((s&&s.message,s.message))),t()}),{}}var AI={fetchGoals:{default:!0},hash:{type:"string"},eventProcessor:{type:"object"},eventUrlTransformer:{type:"function"},disableSyncEventPost:{default:!1}};function Ub(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=RI(n),i=Nb(e,t,n,r,AI),o=i.client,s=i.options,a=i.emitter,c=new Promise(function(p){var h=a.on("goalsReady",function(){a.off("goalsReady",h),p()})});o.waitUntilGoalsReady=function(){return c},s.fetchGoals?kI(i,function(){return a.emit("goalsReady")}):a.emit("goalsReady"),document.readyState!=="complete"?window.addEventListener("load",i.start):i.start();var u=function(){r.synchronousFlush=!0,o.flush().catch(function(){}),r.synchronousFlush=!1};return window.addEventListener("beforeunload",u),window.addEventListener("unload",u),o}w();var bu={UPGRADE_DEFAULT_CYCLE:"yearly",UPGRADE_TRIAL_ALERT_DAYS:7,FEATURE_DIRECTORY_SYNC:!1,FEATURE_INTEGRATIONS_PUBLISH_SCRIPT_INJECT_SCOPE:!1,FEATURE_AI_CONTENT:!0,ORGANIZATION_OPTIONAL_USECASE:!1,LIVE_DIFF:!1,ONBOARDING_FLOW:"control"};w();function jd(e){return{key:e.uid,name:e.displayName,email:e.email}}var qd=Dt("featureflags"),Yo=null;function Gd(e){let t=null;if(Yo){let n=Yo.getUser();e&&(n==null?void 0:n.key)!==e.uid&&(qd.info("identify user",e.uid),t=Yo.identify(jd(e)).then(()=>{}))}else{if(!yn.launchDarkly.clientSideId)return[null,null];qd.info("initialize client with",e==null?void 0:e.uid),Yo=Ub(yn.launchDarkly.clientSideId,e?jd(e):{}),t=Yo.waitForInitialization()}return[Yo,t]}async function OI(e){if(!e)throw new Error("user is required for client-side feature flags.");let[t,n]=Gd(e);if(!t)return{...bu};await n;let r=t.allFlags();return qd.info("get flags",r),{...bu,...r}}function Lb(e){var i;let[t]=Gd(e);if(!t||((i=t==null?void 0:t.getUser())==null?void 0:i.key)!==e.uid)return null;let n=t.allFlags();return{...bu,...n}}function YL(e,t){let[n]=Gd(e);if(!n)return()=>{};let r=!0,i=()=>{OI(e).then(o=>{!r||n.getUser().key!==e.uid||t(o)})};return n.on("change",i),()=>{r=!1,n.off("change",i)}}w();w();(function(){var e=window.analytics=window.analytics||[];if(!e.initialize){if(e.invoked){window.console&&console.error&&console.error("Segment snippet included twice.");return}e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(r){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(r),e.push(i),e}};for(var t=0;t<e.methods.length;t++){var n=e.methods[t];e[n]=e.factory(n)}e.load=function(r,i){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://segment-cdn.gitbook.com/analytics.js/v1/"+r+"/analytics.min.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(o,s),e._loadOptions=i},e._writeKey="EEdcUcWuDMw1N1EEUB4RUYp1OO4aHAMW",e.SNIPPET_VERSION="4.15.3"}})();function Fb(){return window.analytics}function jr(){return Fb()}w();var qb=Wt(bd());w();w();var Kd="__gitbook_login",Mb="__session",Hd="__gitbook_cookie_granted";w();w();w();var zb={organization:"orgId",space:"spaceId",page:"page",changeRequest:"changeRequest"};function Bb(e){let t={},n={};return Object.entries(e).forEach(([r,i])=>{zb[r]?n[zb[r]]=i:t[r]=i}),{properties:t,groups:n}}w();function jb(e,t){let{properties:n,context:r}=Iv(e),{type:i,...o}=n;switch(e.type){case"screen_view":case"page_view":return{type:`${t==="app"?"":`${t}_`}view_${e.screen}`,context:r,properties:{...o,screenSection:e.screen.split("_")[0]}};default:return{type:i,properties:o,context:r}}}var PI=Dt("app:analytics"),xr=null,Gi=null;function xF(){if(typeof window>"u")throw new Error('Hook "useVisitorIdentifier" cannot be called during server rendering');if(Gi)throw Gi;if(typeof xr!="string")throw new Error('Visitor ID is not set. Please call "initializeVisitorID" before calling "useVisitorIdentifier"');return xr}async function Gb(e=!1){return e?(xr=vf(),xr):(Gi=DI().then(t=>(Gi=null,xr=t,xr)),Gi)}function Kb(){if(typeof xr!="string")throw new Error('Visitor ID is not set. Please call "initializeVisitorID" before calling "getVisitorID"');return xr}async function RF(){if(Gi)return Gi;if(typeof xr!="string")throw new Error('Visitor ID is not set. Please call "initializeVisitorID" before calling "getVisitorIDAsync"');return xr}async function DI(){let e=(0,qb.get)(Mb);if(e)return e;{let t=`${vf()}R`,r=`${Gm()}/__session?proposed=${t}`;try{let i=await fetch(r,{method:"GET",credentials:"include",cache:"no-cache",mode:"cors"}),{deviceId:o}=await i.json();return o}catch(i){return PI.critical("failed getting visitor ID",i),t}}}var qr=Dt("app:analytics"),Vb=null,Vd=null,fa=null;Wo.configure({pk:yn.castle.key});NI();async function NI(){let e=MI()==="rejected",t=await Gb(e),{amplitude:n,segment:r}=yn.analytics,i=new URL(window.location.href);$b(i)!=="public_content"&&(r.writeKey?(qr.info(`initialize segment with visitorId "${t}"`),jr().setAnonymousId(t),jr().load(r.writeKey)):qr.warning("tracking on segment is disabled because writeKey is not configured")),n.apiKey?(qr.info(`initialize amplitude with visitorId "${t}"`),fa=Hb.default.getInstance(),fa.init(n.apiKey,void 0,{includeGclid:!0,includeUtm:!0,includeReferrer:!0,saveParamsReferrerOncePerSession:!1,deviceIdFromUrlParam:!0,deviceId:t,disableCookies:e}),fa.setVersionName(Vg),n.endpoint&&(fa.options.apiEndpoint=n.endpoint),Yd(()=>{})):qr.warning("tracking on amplitude is disabled because apiKey is not configured")}var $d=[];function Yd(e){$d.push(e);let t=fa;t&&($d.forEach(n=>{n(t)}),$d=[])}function UI(e){let t=new URL(window.location.href),n=$b(t),r=jb(e,n);if(qr.info(`log event "${r.type}"`,r.context,r.properties),Yd(o=>{let s=Bb(r.context);o.logEventWithGroups(r.type,{...r.properties,...s.properties,screenDomain:t.hostname,screenPath:t.pathname,screenPageTitle:window.document.title,screenSite:n,screenURL:window.location.href},s.groups,(a,c,u)=>{if(a<200||a>=400){let p=new Error(`[${a}] Amplitude error ${r.type}: ${c} (${u==null?void 0:u.reason})`);Cm(p),qr.error(p.message)}})}),n!=="public_content"&&(jr().track(r.type,{...r.properties,...r.context}),r.context.organization&&jr().group(r.context.organization),e.type==="screen_view")){jr().page(e.screen,{},{integrations:{All:!0,Intercom:{hideDefaultLauncher:!0}}});let o=FI();o&&o.track("screen",{...r.properties,...r.context})}let{currentUser:i}=st.auth();i&&!m_.includes(i.uid)&&i.getIdTokenResult().then(o=>{let s=o.claims,a={...s.castleSignature?{userJwt:s.castleSignature}:{user:{id:i.uid,email:i.email||void 0,name:i.displayName||void 0}}};switch(e.type){case"screen_view":case"page_view":Wo.page({url:t.toString(),name:e.screen,...a});break;default:Wo.custom({name:r.type,properties:Object.fromEntries(Object.entries(r.properties).map(([c,u])=>[c,`${u}`])),...a});break}})}function jF(e){qr.debug(`set current screen as "${e}"`),Vb=e,iu(t=>{t.setTag("ui_screen",e)})}function qF(){return Vb}function LI(){let{currentUser:e}=st.auth(),t=e?e.uid:null;if(qr.info(`identify user as "${t}"`),e?(0,Ki.set)(Kd,"ok",{domain:yn.content.trackingCookieDomain}):(0,Ki.remove)(Kd,{domain:yn.content.trackingCookieDomain}),e){let n,r=Lb({uid:e.uid});r&&(n={},Object.entries(r).forEach(([i,o])=>{n&&(n[`featureFlag_${i}`]=r[i])}),qr.info("tracking feature flags",n)),Yd(i=>{i.setUserId(e.uid),n&&i.setUserProperties(n)}),iu(i=>{i.setUser({id:e.uid,email:e.email||void 0,username:e.displayName||void 0})}),e.uid!==Vd&&jr().identify(e.uid,{email:e.email||void 0,...n},{integrations:{All:!0}})}else iu(n=>{n.setUser(null)}),Vd&&(jr().reset(),jr().setAnonymousId(Kb()));Vd=t}function FI(){return typeof window._cio<"u"?window._cio:null}function MI(){let e=(0,Ki.get)(Hd);return e==="yes"?"accepted":e==="no"?"rejected":null}function GF(e){(0,Ki.set)(Hd,e?"yes":"no",{expires:365}),window!=null&&window.gtag&&window.gtag("consent","default",{ad_storage:e?"granted":"denied",analytics_storage:e?"granted":"denied"}),UI({type:"cookies_set_consent",granted:e})}function $b(e){return e.hostname===yn.homepage.domain?"marketing_site":e.host===bf()?"app":"public_content"}w();w();var Ei=Wt(Pi()),B0=Wt(jm());w();w();var Ct=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,Zt=Object.keys,Cn=Array.isArray;typeof Promise<"u"&&!Ct.Promise&&(Ct.Promise=Promise);function On(e,t){return typeof t!="object"||Zt(t).forEach(function(n){e[n]=t[n]}),e}var ya=Object.getPrototypeOf,BI={}.hasOwnProperty;function Wn(e,t){return BI.call(e,t)}function es(e,t){typeof t=="function"&&(t=t(ya(e))),(typeof Reflect>"u"?Zt:Reflect.ownKeys)(t).forEach(n=>{Yr(e,n,t[n])})}var s0=Object.defineProperty;function Yr(e,t,n,r){s0(e,t,On(n&&Wn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ts(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Yr(e.prototype,"constructor",e),{extend:es.bind(null,e.prototype)}}}}var jI=Object.getOwnPropertyDescriptor;function Ap(e,t){let n=jI(e,t),r;return n||(r=ya(e))&&Ap(r,t)}var qI=[].slice;function qu(e,t,n){return qI.call(e,t,n)}function a0(e,t){return t(e)}function da(e){if(!e)throw new Error("Assertion Failed")}function c0(e){Ct.setImmediate?setImmediate(e):setTimeout(e,0)}function u0(e,t){return e.reduce((n,r,i)=>{var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function GI(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function $r(e,t){if(Wn(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=$r(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(s!==-1){var a=e[t.substr(0,s)];return a===void 0?void 0:$r(a,t.substr(s+1))}}function dr(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){da(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)dr(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var s=t.substr(0,o),a=t.substr(o+1);if(a==="")n===void 0?Cn(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var c=e[s];(!c||!Wn(e,s))&&(c=e[s]={}),dr(c,a,n)}}else n===void 0?Cn(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function KI(e,t){typeof t=="string"?dr(e,t,void 0):"length"in t&&[].map.call(t,function(n){dr(e,n,void 0)})}function l0(e){var t={};for(var n in e)Wn(e,n)&&(t[n]=e[n]);return t}var HI=[].concat;function f0(e){return HI.apply([],e)}var d0="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(f0([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Ct[e]),VI=d0.map(e=>Ct[e]);u0(d0,e=>[e,!0]);var _i=null;function xa(e){_i=typeof WeakMap<"u"&&new WeakMap;let t=tp(e);return _i=null,t}function tp(e){if(!e||typeof e!="object")return e;let t=_i&&_i.get(e);if(t)return t;if(Cn(e)){t=[],_i&&_i.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(tp(e[n]))}else if(VI.indexOf(e.constructor)>=0)t=e;else{let o=ya(e);t=o===Object.prototype?{}:Object.create(o),_i&&_i.set(e,t);for(var i in e)Wn(e,i)&&(t[i]=tp(e[i]))}return t}var{toString:$I}={};function np(e){return $I.call(e).slice(8,-1)}var rp=typeof Symbol<"u"?Symbol.iterator:"@@iterator",YI=typeof rp=="symbol"?function(e){var t;return e!=null&&(t=e[rp])&&t.apply(e)}:function(){return null},Xo={};function Hr(e){var t,n,r,i;if(arguments.length===1){if(Cn(e))return e.slice();if(this===Xo&&typeof e=="string")return[e];if(i=YI(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Ip=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1,Tr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function p0(e,t){Tr=e,h0=t}var h0=()=>!0,WI=!new Error("").stack;function Qi(){if(WI)try{throw Qi.arguments,new Error}catch(e){return e}return new Error}function ip(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(h0).map(r=>`
`+r).join("")):""}var JI=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],g0=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Op=JI.concat(g0),QI={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ns(e,t){this._e=Qi(),this.name=e,this.message=t}ts(ns).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ip(this._e,2))}},toString:function(){return this.name+": "+this.message}});function m0(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Pu(e,t,n,r){this._e=Qi(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=m0(e,t)}ts(Pu).from(ns);function ha(e,t){this._e=Qi(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=m0(e,t)}ts(ha).from(ns);var Pp=Op.reduce((e,t)=>(e[t]=t+"Error",e),{}),XI=ns,je=Op.reduce((e,t)=>{var n=t+"Error";function r(i,o){this._e=Qi(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=QI[t]||n,this.inner=null)}return ts(r).from(XI),e[t]=r,e},{});je.Syntax=SyntaxError;je.Type=TypeError;je.Range=RangeError;var Yb=g0.reduce((e,t)=>(e[t+"Error"]=je[t],e),{});function ZI(e,t){if(!e||e instanceof ns||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Yb[e.name])return e;var n=new Yb[e.name](t||e.message,e);return"stack"in e&&Yr(n,"stack",{get:function(){return this.inner.stack}}),n}var Gu=Op.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=je[t]),e),{});Gu.ModifyError=Pu;Gu.DexieError=ns;Gu.BulkError=ha;function St(){}function Ra(e){return e}function eO(e,t){return e==null||e===Ra?t:function(n){return t(e(n))}}function Wi(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function tO(e,t){return e===St?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Wi(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Wi(i,this.onerror):i),o!==void 0?o:n}}function nO(e,t){return e===St?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Wi(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Wi(r,this.onerror):r)}}function rO(e,t){return e===St?t:function(n){var r=e.apply(this,arguments);On(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Wi(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Wi(o,this.onerror):o),r===void 0?s===void 0?void 0:s:On(r,s)}}function iO(e,t){return e===St?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Dp(e,t){return e===St?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var _a={},oO=100,sO=20,y0=100,[op,Du,sp]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,ya(e),e];let t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ya(t),e]})(),_0=Du&&Du.then,Cu=op&&op.constructor,Np=!!sp,ap=!1,aO=sp?()=>{sp.then(wu)}:Ct.setImmediate?setImmediate.bind(null,wu):Ct.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{wu(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(wu,0)},va=function(e,t){pa.push([e,t]),Nu&&(aO(),Nu=!1)},cp=!0,Nu=!0,$i=[],Tu=[],up=null,lp=Ra,Zo={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Qb,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Qb(e[0],e[1])}catch(t){}})}},Me=Zo,pa=[],Yi=0,ku=[];function ke(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=St,this._lib=!1;var t=this._PSD=Me;if(Tr&&(this._stackHolder=Qi(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==_a)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&dp(this,this._value);return}this._state=null,this._value=null,++t.ref,b0(this,e)}var fp={get:function(){var e=Me,t=Uu;function n(r,i){var o=!e.global&&(e!==Me||t!==Uu);let s=o&&!Wr();var a=new ke((c,u)=>{Up(this,new v0(Fu(r,e,o,s),Fu(i,e,o,s),c,u,e))});return Tr&&E0(a,this),a}return n.prototype=_a,n},set:function(e){Yr(this,"then",e&&e.prototype===_a?fp:{get:function(){return e},set:fp.set})}};es(ke.prototype,{then:fp,_then:function(e,t){Up(this,new v0(null,null,e,t,Me))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):Au(r)):this.then(null,r=>r&&r.name===t?n(r):Au(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),Au(t)))},stack:{get:function(){if(this._stack)return this._stack;try{ap=!0;var e=S0(this,[],sO),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{ap=!1}}},timeout:function(e,t){return e<1/0?new ke((n,r)=>{var i=setTimeout(()=>r(new je.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&Yr(ke.prototype,Symbol.toStringTag,"Dexie.Promise");Zo.env=x0();function v0(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}es(ke,{all:function(){var e=Hr.apply(null,arguments).map(Lu);return new ke(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,o)=>ke.resolve(i).then(s=>{e[o]=s,--r||t(e)},n))})},resolve:e=>{if(e instanceof ke)return e;if(e&&typeof e.then=="function")return new ke((n,r)=>{e.then(n,r)});var t=new ke(_a,!0,e);return E0(t,up),t},reject:Au,race:function(){var e=Hr.apply(null,arguments).map(Lu);return new ke((t,n)=>{e.map(r=>ke.resolve(r).then(t,n))})},PSD:{get:()=>Me,set:e=>Me=e},totalEchoes:{get:()=>Uu},newPSD:bi,usePSD:is,scheduler:{get:()=>va,set:e=>{va=e}},rejectionMapper:{get:()=>lp,set:e=>{lp=e}},follow:(e,t)=>new ke((n,r)=>bi((i,o)=>{var s=Me;s.unhandleds=[],s.onunhandled=o,s.finalize=Wi(function(){uO(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),e()},t,n,r))});Cu&&(Cu.allSettled&&Yr(ke,"allSettled",function(){let e=Hr.apply(null,arguments).map(Lu);return new ke(t=>{e.length===0&&t([]);let n=e.length,r=new Array(n);e.forEach((i,o)=>ke.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||t(r)))})}),Cu.any&&typeof AggregateError<"u"&&Yr(ke,"any",function(){let e=Hr.apply(null,arguments).map(Lu);return new ke((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length,i=new Array(r);e.forEach((o,s)=>ke.resolve(o).then(a=>t(a),a=>{i[s]=a,--r||n(new AggregateError(i))}))})}));function b0(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Ca();n&&typeof n.then=="function"?b0(e,(i,o)=>{n instanceof ke?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,w0(e)),r&&Ta()}},dp.bind(null,e))}catch(n){dp(e,n)}}function dp(e,t){if(Tu.push(t),e._state===null){var n=e._lib&&Ca();t=lp(t),e._state=!1,e._value=t,Tr&&t!==null&&typeof t=="object"&&!t._promise&&GI(()=>{var r=Ap(t,"stack");t._promise=e,Yr(t,"stack",{get:()=>ap?r&&(r.get?r.get.apply(t):r.value):e.stack})}),lO(e),w0(e),n&&Ta()}}function w0(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Up(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Yi===0&&(++Yi,va(()=>{--Yi===0&&Lp()},[]))}function Up(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Yi,va(cO,[n,e,t])}function cO(e,t,n){try{up=t;var r,i=t._value;t._state?r=e(i):(Tu.length&&(Tu=[]),r=e(i),Tu.indexOf(i)===-1&&fO(t)),n.resolve(r)}catch(o){n.reject(o)}finally{up=null,--Yi===0&&Lp(),--n.psd.ref||n.psd.finalize()}}function S0(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,s;i!=null?(o=i.name||"Error",s=i.message||i,r=ip(i,0)):(o=i,s=""),t.push(o+(s?": "+s:"")+r)}return Tr&&(r=ip(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&S0(e._prev,t,n)),t}function E0(e,t){var n=t?t._numPrev+1:0;n<oO&&(e._prev=t,e._numPrev=n)}function wu(){Ca()&&Ta()}function Ca(){var e=cp;return cp=!1,Nu=!1,e}function Ta(){var e,t,n;do for(;pa.length>0;)for(e=pa,pa=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(pa.length>0);cp=!0,Nu=!0}function Lp(){var e=$i;$i=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=ku.slice(0),n=t.length;n;)t[--n]()}function uO(e){function t(){e(),ku.splice(ku.indexOf(t),1)}ku.push(t),++Yi,va(()=>{--Yi===0&&Lp()},[])}function lO(e){$i.some(t=>t._value===e._value)||$i.push(e)}function fO(e){for(var t=$i.length;t;)if($i[--t]._value===e._value){$i.splice(t,1);return}}function Au(e){return new ke(_a,!1,e)}function Nt(e,t){var n=Me;return function(){var r=Ca(),i=Me;try{return wi(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{wi(i,!1),r&&Ta()}}}var Rn={awaits:0,echoes:0,id:0},dO=0,Iu=[],Wd=0,Uu=0,pO=0;function bi(e,t,n,r){var i=Me,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++pO;var s=Zo.env;o.env=Np?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject,nthen:Wb(s.nthen,o),gthen:Wb(s.gthen,o)}:{},t&&On(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=is(o,e,n,r);return o.ref===0&&o.finalize(),a}function rs(){return Rn.id||(Rn.id=++dO),++Rn.awaits,Rn.echoes+=y0,Rn.id}function Wr(){return Rn.awaits?(--Rn.awaits===0&&(Rn.id=0),Rn.echoes=Rn.awaits*y0,!0):!1}(""+_0).indexOf("[native code]")===-1&&(rs=Wr=St);function Lu(e){return Rn.echoes&&e&&e.constructor===Cu?(rs(),e.then(t=>(Wr(),t),t=>(Wr(),sn(t)))):e}function hO(e){++Uu,(!Rn.echoes||--Rn.echoes===0)&&(Rn.echoes=Rn.id=0),Iu.push(Me),wi(e,!0)}function gO(){var e=Iu[Iu.length-1];Iu.pop(),wi(e,!1)}function wi(e,t){var n=Me;if((t?Rn.echoes&&(!Wd++||e!==Me):Wd&&(!--Wd||e!==Me))&&R0(t?hO.bind(null,e):gO),e!==Me&&(Me=e,n===Zo&&(Zo.env=x0()),Np)){var r=Zo.env.Promise,i=e.env;Du.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Ct,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function x0(){var e=Ct.Promise;return Np?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Ct,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Du.then,gthen:e.prototype.then}:{}}function is(e,t,n,r,i){var o=Me;try{return wi(e,!0),t(n,r,i)}finally{wi(o,!1)}}function R0(e){_0.call(op,e)}function Fu(e,t,n,r){return typeof e!="function"?e:function(){var i=Me;n&&rs(),wi(t,!0);try{return e.apply(this,arguments)}finally{wi(i,!1),r&&R0(Wr)}}}function Wb(e,t){return function(n,r){return e.call(this,Fu(n,t),Fu(r,t))}}var Jb="unhandledrejection";function Qb(e,t){var n;try{n=t.onuncatched(e)}catch(o){}if(n!==!1)try{var r,i={promise:t,reason:e};if(Ct.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Jb,!0,!0),On(r,i)):Ct.CustomEvent&&(r=new CustomEvent(Jb,{detail:i}),On(r,i)),r&&Ct.dispatchEvent&&(dispatchEvent(r),!Ct.PromiseRejectionEvent&&Ct.onunhandledrejection))try{Ct.onunhandledrejection(r)}catch(o){}Tr&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(o){}}var sn=ke.reject;function pp(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!Me.letThrough&&!e._vip){if(e._state.openComplete)return sn(new je.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return sn(new je.DatabaseClosed);e.open().catch(St)}return e._state.dbReadyPromise.then(()=>pp(e,t,n,r))}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Pp.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>pp(e,t,n,r))):sn(o)}return i._promise(t,(o,s)=>bi(()=>(Me.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}}var Xb="3.2.2",Vi=String.fromCharCode(65535),hp=-1/0,Gr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",C0="String expected.",ga=[],Ku=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),mO=Ku,yO=Ku,T0=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),Hu="__dbnames",Jd="readonly",Qd="readwrite";function Ji(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var k0={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Su(e){return typeof e=="string"&&!/\./.test(e)?t=>(t[e]===void 0&&e in t&&(t=xa(t),delete t[e]),t):t=>t}var gp=class{_trans(t,n,r){let i=this._tx||Me.trans,o=this.name;function s(c,u,p){if(!p.schema[o])throw new je.NotFound("Table "+o+" not part of transaction");return n(p.idbtrans,p)}let a=Ca();try{return i&&i.db===this.db?i===Me.trans?i._promise(t,s,r):bi(()=>i._promise(t,s,r),{trans:i,transless:Me.transless||Me}):pp(this.db,t,[this.name],s)}finally{a&&Ta()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Cn(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);let n=Zt(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);let r=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&n.every(p=>u.keyPath.indexOf(p)>=0)&&u.keyPath.every(p=>n.indexOf(p)>=0))[0];if(r&&this.db._maxKey!==Vi)return this.where(r.name).equals(r.keyPath.map(u=>t[u]));!r&&Tr&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);let{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(u,p){try{return o.cmp(u,p)===0}catch(h){return!1}}let[a,c]=n.reduce(([u,p],h)=>{let y=i[h],m=t[h];return[u||y,u||!y?Ji(p,y&&y.multi?b=>{let R=$r(b,h);return Cn(R)&&R.some(D=>s(m,D))}:b=>s(m,$r(b,h))):p]},[null,null]);return a?this.where(a.name).equals(t[a.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Cn(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;let n=r=>{if(!r)return r;let i=Object.create(t.prototype);for(var o in r)if(Wn(r,o))try{i[o]=r[o]}catch(s){}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){function t(n){On(this,n)}return this.mapToClass(t)}add(t,n){let{auto:r,keyPath:i}=this.schema.primKey,o=t;return i&&r&&(o=Su(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?ke.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{dr(t,i,s)}catch(a){}return s})}update(t,n){if(typeof t=="object"&&!Cn(t)){let r=$r(t,this.schema.primKey.keyPath);if(r===void 0)return sn(new je.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Zt(n).forEach(i=>{dr(t,i,n[i])}):n(t,{value:t,primKey:r})}catch(i){}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)}put(t,n){let{auto:r,keyPath:i}=this.schema.primKey,o=t;return i&&r&&(o=Su(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?ke.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{dr(t,i,s)}catch(a){}return s})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?ke.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:k0})).then(t=>t.numFailures?ke.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let o=r?r.allKeys:void 0;return this._trans("readwrite",s=>{let{auto:a,keyPath:c}=this.schema.primKey;if(c&&i)throw new je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");let u=t.length,p=c&&a?t.map(Su(c)):t;return this.core.mutate({trans:s,type:"add",keys:i,values:p,wantResults:o}).then(({numFailures:h,results:y,lastResult:m,failures:b})=>{let R=o?y:m;if(h===0)return R;throw new ha(`${this.name}.bulkAdd(): ${h} of ${u} operations failed`,b)})})}bulkPut(t,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let o=r?r.allKeys:void 0;return this._trans("readwrite",s=>{let{auto:a,keyPath:c}=this.schema.primKey;if(c&&i)throw new je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");let u=t.length,p=c&&a?t.map(Su(c)):t;return this.core.mutate({trans:s,type:"put",keys:i,values:p,wantResults:o}).then(({numFailures:h,results:y,lastResult:m,failures:b})=>{let R=o?y:m;if(h===0)return R;throw new ha(`${this.name}.bulkPut(): ${h} of ${u} operations failed`,b)})})}bulkDelete(t){let n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new ha(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}};function ka(e){var t={},n=function(a,c){if(c){for(var u=arguments.length,p=new Array(u-1);--u;)p[u-1]=arguments[u];return t[a].subscribe.apply(null,p),e}else if(typeof a=="string")return t[a]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(a,c,u){if(typeof a=="object")return s(a);c||(c=iO),u||(u=St);var p={subscribers:[],fire:u,subscribe:function(h){p.subscribers.indexOf(h)===-1&&(p.subscribers.push(h),p.fire=c(p.fire,h))},unsubscribe:function(h){p.subscribers=p.subscribers.filter(function(y){return y!==h}),p.fire=p.subscribers.reduce(c,u)}};return t[a]=n[a]=p,p}function s(a){Zt(a).forEach(function(c){var u=a[c];if(Cn(u))o(c,a[c][0],a[c][1]);else if(u==="asap")var p=o(c,Ra,function(){for(var y=arguments.length,m=new Array(y);y--;)m[y]=arguments[y];p.subscribers.forEach(function(b){c0(function(){b.apply(null,m)})})});else throw new je.InvalidArgument("Invalid event config")})}}function Aa(e,t){return ts(t).from({prototype:e}),t}function _O(e){return Aa(gp.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:ka(null,{creating:[tO,St],reading:[eO,Ra],updating:[rO,St],deleting:[nO,St]})})}function Jo(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Xd(e,t){e.filter=Ji(e.filter,t)}function Zd(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Ji(r(),t()):t,e.justLimit=n&&!r}function vO(e,t){e.isMatch=Ji(e.isMatch,t)}function Ou(e,t){if(e.isPrimKey)return t.primaryKey;let n=t.getIndexByKeyPath(e.index);if(!n)throw new je.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Zb(e,t,n){let r=Ou(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Eu(e,t,n,r){let i=e.replayFilter?Ji(e.filter,e.replayFilter()):e.filter;if(e.or){let o={},s=(a,c,u)=>{if(!i||i(c,u,y=>c.stop(y),y=>c.fail(y))){var p=c.primaryKey,h=""+p;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(p)),Wn(o,h)||(o[h]=!0,t(a,c,u))}};return Promise.all([e.or._iterate(s,n),e0(Zb(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}else return e0(Zb(e,r,n),Ji(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function e0(e,t,n,r){var i=r?(s,a,c)=>n(r(s),a,c):n,o=Nt(i);return e.then(s=>{if(s)return s.start(()=>{var a=()=>s.continue();(!t||t(s,c=>a=c,c=>{s.stop(c),a=St},c=>{s.fail(c),a=St}))&&o(s.value,s,c=>a=c),a()})})}function In(e,t){try{let n=t0(e),r=t0(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return wO(n0(e),n0(t));case"Array":return bO(e,t)}}catch(n){}return NaN}function bO(e,t){let n=e.length,r=t.length,i=n<r?n:r;for(let o=0;o<i;++o){let s=In(e[o],t[o]);if(s!==0)return s}return n===r?0:n<r?-1:1}function wO(e,t){let n=e.length,r=t.length,i=n<r?n:r;for(let o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function t0(e){let t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";let n=np(e);return n==="ArrayBuffer"?"binary":n}function n0(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var mp=class{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,sn.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,sn.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=Ji(n.algorithm,t)}_iterate(t,n){return Eu(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&On(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>Eu(n,t,r,n.table.core))}count(t){return this._read(n=>{let r=this._ctx,i=r.table.core;if(Jo(r,!0))return i.count({trans:n,query:{index:Ou(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return Eu(r,()=>(++o,!1),n,i).then(()=>o)}).then(t)}sortBy(t,n){let r=t.split(".").reverse(),i=r[0],o=r.length-1;function s(u,p){return p?s(u[r[p]],p-1):u[i]}var a=this._ctx.dir==="next"?1:-1;function c(u,p){var h=s(u,o),y=s(p,o);return h<y?-a:h>y?a:0}return this.toArray(function(u){return u.sort(c)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Jo(r,!0)&&r.limit>0){let{valueMapper:i}=r,o=Ou(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}else{let i=[];return Eu(r,o=>i.push(o),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Jo(n)?Zd(n,()=>{var r=t;return(i,o)=>r===0?!0:r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1)}):Zd(n,()=>{var r=t;return()=>--r<0}),this)}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Zd(this._ctx,()=>{var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(t,n){return Xd(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){return Xd(this._ctx,function(n){return t(n.value)}),vO(this._ctx,t),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&Jo(n,!0)&&n.limit>0)return this._read(i=>{var o=Ou(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Xd(this._ctx,function(i){var o=i.primaryKey.toString(),s=Wn(r,o);return r[o]=!0,!s}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var o=Zt(t),s=o.length;i=function(R){for(var D=!1,E=0;E<s;++E){var I=o[E],N=t[I];$r(R,I)!==N&&(dr(R,I,N),D=!0)}return D}}let a=n.table.core,{outbound:c,extractKey:u}=a.schema.primaryKey,p=this.db._options.modifyChunkSize||200,h=[],y=0,m=[],b=(R,D)=>{let{failures:E,numFailures:I}=D;y+=R-I;for(let N of Zt(E))h.push(E[N])};return this.clone().primaryKeys().then(R=>{let D=E=>{let I=Math.min(p,R.length-E);return a.getMany({trans:r,keys:R.slice(E,E+I),cache:"immutable"}).then(N=>{let P=[],F=[],K=c?[]:null,H=[];for(let C=0;C<I;++C){let fe=N[C],oe={value:xa(fe),primKey:R[E+C]};i.call(oe,oe.value,oe)!==!1&&(oe.value==null?H.push(R[E+C]):!c&&In(u(fe),u(oe.value))!==0?(H.push(R[E+C]),P.push(oe.value)):(F.push(oe.value),c&&K.push(R[E+C])))}let z=Jo(n)&&n.limit===1/0&&(typeof t!="function"||t===ep)&&{index:n.index,range:n.range};return Promise.resolve(P.length>0&&a.mutate({trans:r,type:"add",values:P}).then(C=>{for(let fe in C.failures)H.splice(parseInt(fe),1);b(P.length,C)})).then(()=>(F.length>0||z&&typeof t=="object")&&a.mutate({trans:r,type:"put",keys:K,values:F,criteria:z,changeSpec:typeof t!="function"&&t}).then(C=>b(F.length,C))).then(()=>(H.length>0||z&&t===ep)&&a.mutate({trans:r,type:"delete",keys:H,criteria:z}).then(C=>b(H.length,C))).then(()=>R.length>E+I&&D(E+p))})};return D(0).then(()=>{if(h.length>0)throw new Pu("Error modifying one or more objects",h,y,m);return R.length})})})}delete(){var t=this._ctx,n=t.range;return Jo(t)&&(t.isPrimKey&&!yO||n.type===3)?this._write(r=>{let{primaryKey:i}=t.table.core.schema,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:a,lastResult:c,results:u,numFailures:p})=>{if(p)throw new Pu("Could not delete some values",Object.keys(a).map(h=>a[h]),s-p);return s-p}))}):this.modify(ep)}},ep=(e,t)=>t.value=null;function SO(e){return Aa(mp.prototype,function(n,r){this.db=e;let i=k0,o=null;if(r)try{i=r()}catch(u){o=u}let s=n._ctx,a=s.table,c=a.hook.reading.fire;this._ctx={table:a,index:s.index,isPrimKey:!s.index||a.schema.primKey.keyPath&&s.index===a.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:s.or,valueMapper:c!==Ra?c:null}})}function EO(e,t){return e<t?-1:e===t?0:1}function xO(e,t){return e>t?-1:e===t?0:1}function Yn(e,t,n){var r=e instanceof Mu?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Qo(e){return new e.Collection(e,()=>A0("")).limit(0)}function RO(e){return e==="next"?t=>t.toUpperCase():t=>t.toLowerCase()}function CO(e){return e==="next"?t=>t.toLowerCase():t=>t.toUpperCase()}function TO(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,c=0;c<s;++c){var u=t[c];if(u!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[c],u)<0&&(a=c)}return s<r.length&&o==="next"?e+n.substr(e.length):s<e.length&&o==="prev"?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function xu(e,t,n,r){var i,o,s,a,c,u,p,h=n.length;if(!n.every(R=>typeof R=="string"))return Yn(e,C0);function y(R){i=RO(R),o=CO(R),s=R==="next"?EO:xO;var D=n.map(function(E){return{lower:o(E),upper:i(E)}}).sort(function(E,I){return s(E.lower,I.lower)});a=D.map(function(E){return E.upper}),c=D.map(function(E){return E.lower}),u=R,p=R==="next"?"":r}y("next");var m=new e.Collection(e,()=>yi(a[0],c[h-1]+r));m._ondirectionchange=function(R){y(R)};var b=0;return m._addAlgorithm(function(R,D,E){var I=R.key;if(typeof I!="string")return!1;var N=o(I);if(t(N,c,b))return!0;for(var P=null,F=b;F<h;++F){var K=TO(I,N,a[F],c[F],s,u);K===null&&P===null?b=F+1:(P===null||s(P,K)>0)&&(P=K)}return D(P!==null?function(){R.continue(P+p)}:E),!1}),m}function yi(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function A0(e){return{type:1,lower:e,upper:e}}var Mu=class{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Qo(this):new this.Collection(this,()=>yi(t,n,!r,!i))}catch(o){return Yn(this,Gr)}}equals(t){return t==null?Yn(this,Gr):new this.Collection(this,()=>A0(t))}above(t){return t==null?Yn(this,Gr):new this.Collection(this,()=>yi(t,void 0,!0))}aboveOrEqual(t){return t==null?Yn(this,Gr):new this.Collection(this,()=>yi(t,void 0,!1))}below(t){return t==null?Yn(this,Gr):new this.Collection(this,()=>yi(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Yn(this,Gr):new this.Collection(this,()=>yi(void 0,t))}startsWith(t){return typeof t!="string"?Yn(this,C0):this.between(t,t+Vi,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):xu(this,(n,r)=>n.indexOf(r[0])===0,[t],Vi)}equalsIgnoreCase(t){return xu(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=Hr.apply(Xo,arguments);return t.length===0?Qo(this):xu(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=Hr.apply(Xo,arguments);return t.length===0?Qo(this):xu(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,Vi)}anyOf(){let t=Hr.apply(Xo,arguments),n=this._cmp;try{t.sort(n)}catch(o){return Yn(this,Gr)}if(t.length===0)return Qo(this);let r=new this.Collection(this,()=>yi(t[0],t[t.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((o,s,a)=>{let c=o.key;for(;n(c,t[i])>0;)if(++i,i===t.length)return s(a),!1;return n(c,t[i])===0?!0:(s(()=>{o.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[hp,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){let t=Hr.apply(Xo,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch(r){return Yn(this,Gr)}let n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[hp,i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){let r=this._cmp,i=this._ascending,o=this._descending,s=this._min,a=this._max;if(t.length===0)return Qo(this);if(!t.every(P=>P[0]!==void 0&&P[1]!==void 0&&i(P[0],P[1])<=0))return Yn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",je.InvalidArgument);let c=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;function p(P,F){let K=0,H=P.length;for(;K<H;++K){let z=P[K];if(r(F[0],z[1])<0&&r(F[1],z[0])>0){z[0]=s(z[0],F[0]),z[1]=a(z[1],F[1]);break}}return K===H&&P.push(F),P}let h=i;function y(P,F){return h(P[0],F[0])}let m;try{m=t.reduce(p,[]),m.sort(y)}catch(P){return Yn(this,Gr)}let b=0,R=u?P=>i(P,m[b][1])>0:P=>i(P,m[b][1])>=0,D=c?P=>o(P,m[b][0])>0:P=>o(P,m[b][0])>=0;function E(P){return!R(P)&&!D(P)}let I=R,N=new this.Collection(this,()=>yi(m[0][0],m[m.length-1][1],!c,!u));return N._ondirectionchange=P=>{P==="next"?(I=R,h=i):(I=D,h=o),m.sort(y)},N._addAlgorithm((P,F,K)=>{for(var H=P.key;I(H);)if(++b,b===m.length)return F(K),!1;return E(H)?!0:(this._cmp(H,m[b][1])===0||this._cmp(H,m[b][0])===0||F(()=>{h===i?P.continue(m[b][0]):P.continue(m[b][1])}),!1)}),N}startsWithAnyOf(){let t=Hr.apply(Xo,arguments);return t.every(n=>typeof n=="string")?t.length===0?Qo(this):this.inAnyRange(t.map(n=>[n,n+Vi])):Yn(this,"startsWithAnyOf() only works with strings")}};function kO(e){return Aa(Mu.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};let o=e._deps.indexedDB;if(!o)throw new je.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=(s,a)=>o.cmp(a,s),this._max=(s,a)=>o.cmp(s,a)>0?s:a,this._min=(s,a)=>o.cmp(s,a)<0?s:a,this._IDBKeyRange=e._deps.IDBKeyRange})}function Rr(e){return Nt(function(t){return ba(t),e(t.target.error),!1})}function ba(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var wa="storagemutated",vi="x-storagemutated-1",Si=ka(null,wa),yp=class{_lock(){return da(!Me.global),++this._reculock,this._reculock===1&&!Me.global&&(Me.lockOwnerFor=this),this}_unlock(){if(da(!Me.global),--this._reculock===0)for(Me.global||(Me.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{is(t[1],t[0])}catch(n){}}return this}_locked(){return this._reculock&&Me.lockOwnerFor!==this}create(t){if(!this.mode)return this;let n=this.db.idbdb,r=this.db._state.dbOpenError;if(da(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new je.DatabaseClosed(r);case"MissingAPIError":throw new je.MissingAPI(r.message,r);default:throw new je.OpenFailed(r)}if(!this.active)throw new je.TransactionInactive;return da(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=Nt(i=>{ba(i),this._reject(t.error)}),t.onabort=Nt(i=>{ba(i),this.active&&this._reject(new je.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=Nt(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Si.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return sn(new je.ReadOnly("Transaction is readonly"));if(!this.active)return sn(new je.TransactionInactive);if(this._locked())return new ke((o,s)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(o,s)},Me])});if(r)return bi(()=>{var o=new ke((s,a)=>{this._lock();let c=n(s,a,this);c&&c.then&&c.then(s,a)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new ke((o,s)=>{var a=n(o,s,this);a&&a.then&&a.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();let r=ke.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new ke((s,a)=>{r.then(c=>n._waitingQueue.push(Nt(s.bind(null,c))),c=>n._waitingQueue.push(Nt(a.bind(null,c)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new je.Abort))}table(t){let n=this._memoizedTables||(this._memoizedTables={});if(Wn(n,t))return n[t];let r=this.schema[t];if(!r)throw new je.NotFound("Table "+t+" not part of transaction");let i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}};function AO(e){return Aa(yp.prototype,function(n,r,i,o,s){this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=ka(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke((a,c)=>{this._resolve=a,this._reject=c}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},a=>{var c=this.active;return this.active=!1,this.on.error.fire(a),this.parent?this.parent._reject(a):c&&this.idbtrans&&this.idbtrans.abort(),sn(a)})})}function _p(e,t,n,r,i,o,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+I0(t)}}function I0(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function O0(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:u0(n,r=>[r.name,r])}}function IO(e){return e.length===1?e[0]:e}var Sa=e=>{try{return e.only([[]]),Sa=()=>[[]],[[]]}catch(t){return Sa=()=>Vi,Vi}};function vp(e){return e==null?()=>{}:typeof e=="string"?OO(e):t=>$r(t,e)}function OO(e){return e.split(".").length===1?n=>n[e]:n=>$r(n,e)}function r0(e){return[].slice.call(e)}var PO=0;function ma(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function DO(e,t,n){function r(p,h){let y=r0(p.objectStoreNames);return{schema:{name:p.name,tables:y.map(m=>h.objectStore(m)).map(m=>{let{keyPath:b,autoIncrement:R}=m,D=Cn(b),E=b==null,I={},N={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E,compound:D,keyPath:b,autoIncrement:R,unique:!0,extractKey:vp(b)},indexes:r0(m.indexNames).map(P=>m.index(P)).map(P=>{let{name:F,unique:K,multiEntry:H,keyPath:z}=P,C=Cn(z),fe={name:F,compound:C,keyPath:z,unique:K,multiEntry:H,extractKey:vp(z)};return I[ma(z)]=fe,fe}),getIndexByKeyPath:P=>I[ma(P)]};return I[":id"]=N.primaryKey,b!=null&&(I[ma(b)]=N.primaryKey),N})},hasGetAll:y.length>0&&"getAll"in h.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(p){if(p.type===3)return null;if(p.type===4)throw new Error("Cannot convert never type to IDBKeyRange");let{lower:h,upper:y,lowerOpen:m,upperOpen:b}=p;return h===void 0?y===void 0?null:t.upperBound(y,!!b):y===void 0?t.lowerBound(h,!!m):t.bound(h,y,!!m,!!b)}function o(p){let h=p.name;function y({trans:R,type:D,keys:E,values:I,range:N}){return new Promise((P,F)=>{P=Nt(P);let K=R.objectStore(h),H=K.keyPath==null,z=D==="put"||D==="add";if(!z&&D!=="delete"&&D!=="deleteRange")throw new Error("Invalid operation type: "+D);let{length:C}=E||I||{length:1};if(E&&I&&E.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if(C===0)return P({numFailures:0,failures:{},results:[],lastResult:void 0});let fe,oe=[],Re=[],T=0,pe=Ge=>{++T,ba(Ge)};if(D==="deleteRange"){if(N.type===4)return P({numFailures:T,failures:Re,results:[],lastResult:void 0});N.type===3?oe.push(fe=K.clear()):oe.push(fe=K.delete(i(N)))}else{let[Ge,$e]=z?H?[I,E]:[I,null]:[E,null];if(z)for(let Ue=0;Ue<C;++Ue)oe.push(fe=$e&&$e[Ue]!==void 0?K[D](Ge[Ue],$e[Ue]):K[D](Ge[Ue])),fe.onerror=pe;else for(let Ue=0;Ue<C;++Ue)oe.push(fe=K[D](Ge[Ue])),fe.onerror=pe}let Ce=Ge=>{let $e=Ge.target.result;oe.forEach((Ue,Ut)=>Ue.error!=null&&(Re[Ut]=Ue.error)),P({numFailures:T,failures:Re,results:D==="delete"?E:oe.map(Ue=>Ue.result),lastResult:$e})};fe.onerror=Ge=>{pe(Ge),Ce(Ge)},fe.onsuccess=Ce})}function m({trans:R,values:D,query:E,reverse:I,unique:N}){return new Promise((P,F)=>{P=Nt(P);let{index:K,range:H}=E,z=R.objectStore(h),C=K.isPrimaryKey?z:z.index(K.name),fe=I?N?"prevunique":"prev":N?"nextunique":"next",oe=D||!("openKeyCursor"in C)?C.openCursor(i(H),fe):C.openKeyCursor(i(H),fe);oe.onerror=Rr(F),oe.onsuccess=Nt(Re=>{let T=oe.result;if(!T){P(null);return}T.___id=++PO,T.done=!1;let pe=T.continue.bind(T),Ce=T.continuePrimaryKey;Ce&&(Ce=Ce.bind(T));let Ge=T.advance.bind(T),$e=()=>{throw new Error("Cursor not started")},Ue=()=>{throw new Error("Cursor not stopped")};T.trans=R,T.stop=T.continue=T.continuePrimaryKey=T.advance=$e,T.fail=Nt(F),T.next=function(){let Ut=1;return this.start(()=>Ut--?this.continue():this.stop()).then(()=>this)},T.start=Ut=>{let wn=new Promise((jt,kt)=>{jt=Nt(jt),oe.onerror=Rr(kt),T.fail=kt,T.stop=et=>{T.stop=T.continue=T.continuePrimaryKey=T.advance=Ue,jt(et)}}),Tt=()=>{if(oe.result)try{Ut()}catch(jt){T.fail(jt)}else T.done=!0,T.start=()=>{throw new Error("Cursor behind last entry")},T.stop()};return oe.onsuccess=Nt(jt=>{oe.onsuccess=Tt,Tt()}),T.continue=pe,T.continuePrimaryKey=Ce,T.advance=Ge,Tt(),wn},P(T)},F)})}function b(R){return D=>new Promise((E,I)=>{E=Nt(E);let{trans:N,values:P,limit:F,query:K}=D,H=F===1/0?void 0:F,{index:z,range:C}=K,fe=N.objectStore(h),oe=z.isPrimaryKey?fe:fe.index(z.name),Re=i(C);if(F===0)return E({result:[]});if(R){let T=P?oe.getAll(Re,H):oe.getAllKeys(Re,H);T.onsuccess=pe=>E({result:pe.target.result}),T.onerror=Rr(I)}else{let T=0,pe=P||!("openKeyCursor"in oe)?oe.openCursor(Re):oe.openKeyCursor(Re),Ce=[];pe.onsuccess=Ge=>{let $e=pe.result;if(!$e)return E({result:Ce});if(Ce.push(P?$e.value:$e.primaryKey),++T===F)return E({result:Ce});$e.continue()},pe.onerror=Rr(I)}})}return{name:h,schema:p,mutate:y,getMany({trans:R,keys:D}){return new Promise((E,I)=>{E=Nt(E);let N=R.objectStore(h),P=D.length,F=new Array(P),K=0,H=0,z,C=oe=>{let Re=oe.target;(F[Re._pos]=Re.result)!=null,++H===K&&E(F)},fe=Rr(I);for(let oe=0;oe<P;++oe)D[oe]!=null&&(z=N.get(D[oe]),z._pos=oe,z.onsuccess=C,z.onerror=fe,++K);K===0&&E(F)})},get({trans:R,key:D}){return new Promise((E,I)=>{E=Nt(E);let P=R.objectStore(h).get(D);P.onsuccess=F=>E(F.target.result),P.onerror=Rr(I)})},query:b(a),openCursor:m,count({query:R,trans:D}){let{index:E,range:I}=R;return new Promise((N,P)=>{let F=D.objectStore(h),K=E.isPrimaryKey?F:F.index(E.name),H=i(I),z=H?K.count(H):K.count();z.onsuccess=Nt(C=>N(C.target.result)),z.onerror=Rr(P)})}}}let{schema:s,hasGetAll:a}=r(e,n),c=s.tables.map(p=>o(p)),u={};return c.forEach(p=>u[p.name]=p),{stack:"dbcore",transaction:e.transaction.bind(e),table(p){if(!u[p])throw new Error(`Table '${p}' not found`);return u[p]},MIN_KEY:-1/0,MAX_KEY:Sa(t),schema:s}}function NO(e,t){return t.reduce((n,{create:r})=>({...n,...r(n)}),e)}function UO(e,t,{IDBKeyRange:n,indexedDB:r},i){return{dbcore:NO(DO(t,n,i),e.dbcore)}}function Fp({_novip:e},t){let n=t.db,r=UO(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{let o=i.name;e.core.schema.tables.some(s=>s.name===o)&&(i.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=i.core))})}function zu({_novip:e},t,n,r){n.forEach(i=>{let o=r[i];t.forEach(s=>{let a=Ap(s,i);(!a||"value"in a&&a.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?Yr(s,i,{get(){return this.table(i)},set(c){s0(this,i,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new e.Table(i,o))})})}function bp({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function LO(e,t){return e._cfg.version-t._cfg.version}function FO(e,t,n,r){let i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);let s=o._reject.bind(o),a=Me.transless||Me;bi(()=>{Me.trans=o,Me.transless=a,t===0?(Zt(i).forEach(c=>{Mp(n,c,i[c].primKey,i[c].indexes)}),Fp(e,n),ke.follow(()=>e.on.populate.fire(o)).catch(s)):MO(e,t,o,n).catch(s)})}function MO({_novip:e},t,n,r){let i=[],o=e._versions,s=e._dbSchema=zp(e,e.idbdb,r),a=!1;o.filter(p=>p._cfg.version>=t).forEach(p=>{i.push(()=>{let h=s,y=p._cfg.dbschema;Sp(e,h,r),Sp(e,y,r),s=e._dbSchema=y;let m=P0(h,y);m.add.forEach(R=>{Mp(r,R[0],R[1].primKey,R[1].indexes)}),m.change.forEach(R=>{if(R.recreate)throw new je.Upgrade("Not yet support for changing primary key");{let D=r.objectStore(R.name);R.add.forEach(E=>wp(D,E)),R.change.forEach(E=>{D.deleteIndex(E.name),wp(D,E)}),R.del.forEach(E=>D.deleteIndex(E))}});let b=p._cfg.contentUpgrade;if(b&&p._cfg.version>t){Fp(e,r),n._memoizedTables={},a=!0;let R=l0(y);m.del.forEach(N=>{R[N]=h[N]}),bp(e,[e.Transaction.prototype]),zu(e,[e.Transaction.prototype],Zt(R),R),n.schema=R;let D=Ip(b);D&&rs();let E,I=ke.follow(()=>{if(E=b(n),E&&D){var N=Wr.bind(null,null);E.then(N,N)}});return E&&typeof E.then=="function"?ke.resolve(E):I.then(()=>E)}}),i.push(h=>{if(!a||!mO){let y=p._cfg.dbschema;BO(y,h)}bp(e,[e.Transaction.prototype]),zu(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema})});function u(){return i.length?ke.resolve(i.shift()(n.idbtrans)).then(u):ke.resolve()}return u().then(()=>{zO(s,r)})}function P0(e,t){let n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){let i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{let s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Ku)s.recreate=!0,n.change.push(s);else{let a=i.idxByName,c=o.idxByName,u;for(u in a)c[u]||s.del.push(u);for(u in c){let p=a[u],h=c[u];p?p.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}}return n}function Mp(e,t,n,r){let i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>wp(i,o)),i}function zO(e,t){Zt(e).forEach(n=>{t.db.objectStoreNames.contains(n)||Mp(t,n,e[n].primKey,e[n].indexes)})}function BO(e,t){[].slice.call(t.db.objectStoreNames).forEach(n=>e[n]==null&&t.db.deleteObjectStore(n))}function wp(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function zp(e,t,n){let r={};return qu(t.objectStoreNames,0).forEach(o=>{let s=n.objectStore(o),a=s.keyPath,c=_p(I0(a),a||"",!1,!1,!!s.autoIncrement,a&&typeof a!="string",!0),u=[];for(let h=0;h<s.indexNames.length;++h){let y=s.index(s.indexNames[h]);a=y.keyPath;var p=_p(y.name,a,!!y.unique,!!y.multiEntry,!1,a&&typeof a!="string",!1);u.push(p)}r[o]=O0(o,c,u)}),r}function jO({_novip:e},t,n){e.verno=t.version/10;let r=e._dbSchema=zp(e,t,n);e._storeNames=qu(t.objectStoreNames,0),zu(e,[e._allTables],Zt(r),r)}function qO(e,t){let n=zp(e,e.idbdb,t),r=P0(n,e._dbSchema);return!(r.add.length||r.change.some(i=>i.add.length||i.change.length))}function Sp({_novip:e},t,n){let r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){let o=r[i],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(let a=0;a<s.indexNames.length;++a){let c=s.indexNames[a],u=s.index(c).keyPath,p=typeof u=="string"?u:"["+qu(u).join("+")+"]";if(t[o]){let h=t[o].idxByName[p];h&&(h.name=c,delete t[o].idxByName[p],t[o].idxByName[c]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ct.WorkerGlobalScope&&Ct instanceof Ct.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function GO(e){return e.split(",").map((t,n)=>{t=t.trim();let r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return _p(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),Cn(i),n===0)})}var Ep=class{_parseStoresSpec(t,n){Zt(t).forEach(r=>{if(t[r]!==null){var i=GO(t[r]),o=i.shift();if(o.multi)throw new je.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new je.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new je.Schema("Index must have a name and cannot be an empty string")}),n[r]=O0(r,o,i)}})}stores(t){let n=this.db;this._cfg.storesSource=this._cfg.storesSource?On(this._cfg.storesSource,t):t;let r=n._versions,i={},o={};return r.forEach(s=>{On(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,bp(n,[n._allTables,n,n.Transaction.prototype]),zu(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Zt(o),o),n._storeNames=Zt(o),this}upgrade(t){return this._cfg.contentUpgrade=Dp(this._cfg.contentUpgrade||St,t),this}};function KO(e){return Aa(Ep.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Bp(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Cr(Hu,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function jp(e){return e&&typeof e.databases=="function"}function HO({indexedDB:e,IDBKeyRange:t}){return jp(e)?Promise.resolve(e.databases()).then(n=>n.map(r=>r.name).filter(r=>r!==Hu)):Bp(e,t).toCollection().primaryKeys()}function VO({indexedDB:e,IDBKeyRange:t},n){!jp(e)&&n!==Hu&&Bp(e,t).put({name:n}).catch(St)}function $O({indexedDB:e,IDBKeyRange:t},n){!jp(e)&&n!==Hu&&Bp(e,t).delete(n).catch(St)}function xp(e){return bi(function(){return Me.letThrough=!0,e()})}function YO(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function WO(e){let t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?sn(t.dbOpenError):e);Tr&&(t.openCanceller._stackHolder=Qi()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;let r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new je.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,a=!1;return ke.race([r,(typeof navigator>"u"?ke.resolve():YO()).then(()=>new ke((c,u)=>{if(i(),!n)throw new je.MissingAPI;let p=e.name,h=t.autoSchema?n.open(p):n.open(p,Math.round(e.verno*10));if(!h)throw new je.MissingAPI;h.onerror=Rr(u),h.onblocked=Nt(e._fireOnBlocked),h.onupgradeneeded=Nt(y=>{if(s=h.transaction,t.autoSchema&&!e._options.allowEmptyDB){h.onerror=ba,s.abort(),h.result.close();let b=n.deleteDatabase(p);b.onsuccess=b.onerror=Nt(()=>{u(new je.NoSuchDatabase(`Database ${p} doesnt exist`))})}else{s.onerror=Rr(u);var m=y.oldVersion>Math.pow(2,62)?0:y.oldVersion;a=m<1,e._novip.idbdb=h.result,FO(e,m/10,s,u)}},u),h.onsuccess=Nt(()=>{s=null;let y=e._novip.idbdb=h.result,m=qu(y.objectStoreNames);if(m.length>0)try{let b=y.transaction(IO(m),"readonly");t.autoSchema?jO(e,y,b):(Sp(e,e._dbSchema,b),qO(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Fp(e,b)}catch(b){}ga.push(e),y.onversionchange=Nt(b=>{t.vcFired=!0,e.on("versionchange").fire(b)}),y.onclose=Nt(b=>{e.on("close").fire(b)}),a&&VO(e._deps,p),c()},u)}))]).then(()=>(i(),t.onReadyBeingFired=[],ke.resolve(xp(()=>e.on.ready.fire(e.vip))).then(function c(){if(t.onReadyBeingFired.length>0){let u=t.onReadyBeingFired.reduce(Dp,St);return t.onReadyBeingFired=[],ke.resolve(xp(()=>u(e.vip))).then(c)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(c=>{t.dbOpenError=c;try{s&&s.abort()}catch(u){}return r===t.openCanceller&&e._close(),sn(c)}).finally(()=>{t.openComplete=!0,o()})}function Rp(e){var t=s=>e.next(s),n=s=>e.throw(s),r=o(t),i=o(n);function o(s){return a=>{var c=s(a),u=c.value;return c.done?u:!u||typeof u.then!="function"?Cn(u)?Promise.all(u).then(r,i):r(u):u.then(r,i)}}return o(t)()}function JO(e,t,n){var r=arguments.length;if(r<2)throw new je.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=f0(i);return[e,o,n]}function D0(e,t,n,r,i){return ke.resolve().then(()=>{let o=Me.transless||Me,s=e._createTransaction(t,n,e._dbSchema,r),a={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(h){return h.name===Pp.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>D0(e,t,n,null,i))):sn(h)}let c=Ip(i);c&&rs();let u,p=ke.follow(()=>{if(u=i.call(s,s),u)if(c){var h=Wr.bind(null,null);u.then(h,h)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=Rp(u))},a);return(u&&typeof u.then=="function"?ke.resolve(u).then(h=>s.active?h:sn(new je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):p.then(()=>u)).then(h=>(r&&s._resolve(),s._completion.then(()=>h))).catch(h=>(s._reject(h),sn(h)))})}function Ru(e,t,n){let r=Cn(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}function QO(e){return{...e,table(t){let n=e.table(t),{schema:r}=n,i={},o=[];function s(y,m,b){let R=ma(y),D=i[R]=i[R]||[],E=y==null?0:typeof y=="string"?1:y.length,I=m>0,N={...b,isVirtual:I,keyTail:m,keyLength:E,extractKey:vp(y),unique:!I&&b.unique};if(D.push(N),N.isPrimaryKey||o.push(N),E>1){let P=E===2?y[0]:y.slice(0,E-1);s(P,m+1,b)}return D.sort((P,F)=>P.keyTail-F.keyTail),N}let a=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(let y of r.indexes)s(y.keyPath,0,y);function c(y){let m=i[ma(y)];return m&&m[0]}function u(y,m){return{type:y.type===1?2:y.type,lower:Ru(y.lower,y.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:Ru(y.upper,y.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0}}function p(y){let m=y.query.index;return m.isVirtual?{...y,query:{index:m,range:u(y.query.range,m.keyTail)}}:y}return{...n,schema:{...r,primaryKey:a,indexes:o,getIndexByKeyPath:c},count(y){return n.count(p(y))},query(y){return n.query(p(y))},openCursor(y){let{keyTail:m,isVirtual:b,keyLength:R}=y.query.index;if(!b)return n.openCursor(y);function D(E){function I(P){P!=null?E.continue(Ru(P,y.reverse?e.MAX_KEY:e.MIN_KEY,m)):y.unique?E.continue(E.key.slice(0,R).concat(y.reverse?e.MIN_KEY:e.MAX_KEY,m)):E.continue()}return Object.create(E,{continue:{value:I},continuePrimaryKey:{value(P,F){E.continuePrimaryKey(Ru(P,e.MAX_KEY,m),F)}},primaryKey:{get(){return E.primaryKey}},key:{get(){let P=E.key;return R===1?P[0]:P.slice(0,R)}},value:{get(){return E.value}}})}return n.openCursor(p(y)).then(E=>E&&D(E))}}}}}var XO={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:QO};function qp(e,t,n,r){return n=n||{},r=r||"",Zt(e).forEach(i=>{if(!Wn(t,i))n[r+i]=void 0;else{var o=e[i],s=t[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){let a=np(o),c=np(s);a!==c?n[r+i]=t[i]:a==="Object"?qp(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else o!==s&&(n[r+i]=t[i])}}),Zt(t).forEach(i=>{Wn(e,i)||(n[r+i]=t[i])}),n}function ZO(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var eP={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){let n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(o){let s=Me.trans,{deleting:a,creating:c,updating:u}=s.table(t).hook;switch(o.type){case"add":if(c.fire===St)break;return s._promise("readwrite",()=>p(o),!0);case"put":if(c.fire===St&&u.fire===St)break;return s._promise("readwrite",()=>p(o),!0);case"delete":if(a.fire===St)break;return s._promise("readwrite",()=>p(o),!0);case"deleteRange":if(a.fire===St)break;return s._promise("readwrite",()=>h(o),!0)}return n.mutate(o);function p(m){let b=Me.trans,R=m.keys||ZO(r,m);if(!R)throw new Error("Keys missing");return m=m.type==="add"||m.type==="put"?{...m,keys:R}:{...m},m.type!=="delete"&&(m.values=[...m.values]),m.keys&&(m.keys=[...m.keys]),tP(n,m,R).then(D=>{let E=R.map((I,N)=>{let P=D[N],F={onerror:null,onsuccess:null};if(m.type==="delete")a.fire.call(F,I,P,b);else if(m.type==="add"||P===void 0){let K=c.fire.call(F,I,m.values[N],b);I==null&&K!=null&&(I=K,m.keys[N]=I,r.outbound||dr(m.values[N],r.keyPath,I))}else{let K=qp(P,m.values[N]),H=u.fire.call(F,K,I,P,b);if(H){let z=m.values[N];Object.keys(H).forEach(C=>{Wn(z,C)?z[C]=H[C]:dr(z,C,H[C])})}}return F});return n.mutate(m).then(({failures:I,results:N,numFailures:P,lastResult:F})=>{for(let K=0;K<R.length;++K){let H=N?N[K]:R[K],z=E[K];H==null?z.onerror&&z.onerror(I[K]):z.onsuccess&&z.onsuccess(m.type==="put"&&D[K]?m.values[K]:H)}return{failures:I,results:N,numFailures:P,lastResult:F}}).catch(I=>(E.forEach(N=>N.onerror&&N.onerror(I)),Promise.reject(I)))})}function h(m){return y(m.trans,m.range,1e4)}function y(m,b,R){return n.query({trans:m,values:!1,query:{index:r,range:b},limit:R}).then(({result:D})=>p({type:"delete",keys:D,trans:m}).then(E=>E.numFailures>0?Promise.reject(E.failures[0]):D.length<R?{failures:[],numFailures:0,lastResult:void 0}:y(m,{...b,lower:D[D.length-1],lowerOpen:!0},R)))}}}}})};function tP(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function N0(e,t,n){try{if(!t||t.keys.length<e.length)return null;let r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)In(t.keys[i],e[o])===0&&(r.push(n?xa(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(r){return null}}var nP={stack:"dbcore",level:-1,create:e=>({table:t=>{let n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);let i=N0(r.keys,r.trans._cache,r.cache==="clone");return i?ke.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?xa(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Gp(e){return!("from"in e)}var Kr=function(e,t){if(this)On(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{let n=new Kr;return e&&"d"in e&&On(n,e),n}};es(Kr.prototype,{add(e){return Bu(this,e),this},addKey(e){return Ea(this,e,e),this},addKeys(e){return e.forEach(t=>Ea(this,t,t)),this},[rp](){return Cp(this)}});function Ea(e,t,n){let r=In(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Gp(e))return On(e,{from:t,to:n,d:1});let i=e.l,o=e.r;if(In(n,e.from)<0)return i?Ea(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},i0(e);if(In(t,e.to)>0)return o?Ea(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},i0(e);In(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),In(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);let s=!e.r;i&&!e.l&&Bu(e,i),o&&s&&Bu(e,o)}function Bu(e,t){function n(r,{from:i,to:o,l:s,r:a}){Ea(r,i,o),s&&n(r,s),a&&n(r,a)}Gp(t)||n(e,t)}function rP(e,t){let n=Cp(t),r=n.next();if(r.done)return!1;let i=r.value,o=Cp(e),s=o.next(i.from),a=s.value;for(;!r.done&&!s.done;){if(In(a.from,i.to)<=0&&In(a.to,i.from)>=0)return!0;In(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(s=o.next(i.from)).value}return!1}function Cp(e){let t=Gp(e)?null:{s:0,n:e};return{next(n){let r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&In(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||In(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function i0(e){var t,n;let r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){let o=i==="r"?"l":"r",s={...e},a=e[i];e.from=a.from,e.to=a.to,e[i]=a[i],s[i]=a[o],e[o]=s,s.d=o0(s)}e.d=o0(e)}function o0({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}var iP={stack:"dbcore",level:0,create:e=>{let t=e.schema.name,n=new Kr(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{let i=e.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:a,outbound:c}=s,u={...i,mutate:y=>{let m=y.trans,b=m.mutatedParts||(m.mutatedParts={}),R=K=>{let H=`idb://${t}/${r}/${K}`;return b[H]||(b[H]=new Kr)},D=R(""),E=R(":dels"),{type:I}=y,[N,P]=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[[],y.values]:[],F=y.trans._cache;return i.mutate(y).then(K=>{if(Cn(N)){I!=="delete"&&(N=K.results),D.addKeys(N);let H=N0(N,F);!H&&I!=="add"&&E.addKeys(N),(H||P)&&oP(R,o,H,P)}else if(N){let H={from:N.lower,to:N.upper};E.add(H),D.add(H)}else D.add(n),E.add(n),o.indexes.forEach(H=>R(H.name).add(n));return K})}},p=({query:{index:y,range:m}})=>{var b,R;return[y,new Kr((b=m.lower)!==null&&b!==void 0?b:e.MIN_KEY,(R=m.upper)!==null&&R!==void 0?R:e.MAX_KEY)]},h={get:y=>[s,new Kr(y.key)],getMany:y=>[s,new Kr().addKeys(y.keys)],count:p,query:p,openCursor:p};return Zt(h).forEach(y=>{u[y]=function(m){let{subscr:b}=Me;if(b){let R=P=>{let F=`idb://${t}/${r}/${P}`;return b[F]||(b[F]=new Kr)},D=R(""),E=R(":dels"),[I,N]=h[y](m);if(R(I.name||"").add(N),!I.isPrimaryKey)if(y==="count")E.add(n);else{let P=y==="query"&&c&&m.values&&i.query({...m,values:!1});return i[y].apply(this,arguments).then(F=>{if(y==="query"){if(c&&m.values)return P.then(({result:H})=>(D.addKeys(H),F));let K=m.values?F.result.map(a):F.result;m.values?D.addKeys(K):E.addKeys(K)}else if(y==="openCursor"){let K=F,H=m.values;return K&&Object.create(K,{key:{get(){return E.addKey(K.primaryKey),K.key}},primaryKey:{get(){let z=K.primaryKey;return E.addKey(z),z}},value:{get(){return H&&D.addKey(K.primaryKey),K.value}}})}return F})}}return i[y].apply(this,arguments)}}),u}}}};function oP(e,t,n,r){function i(o){let s=e(o.name||"");function a(u){return u!=null?o.extractKey(u):null}let c=u=>o.multiEntry&&Cn(u)?u.forEach(p=>s.addKey(p)):s.addKey(u);(n||r).forEach((u,p)=>{let h=n&&a(n[p]),y=r&&a(r[p]);In(h,y)!==0&&(h!=null&&c(h),y!=null&&c(y))})}t.indexes.forEach(i)}var Cr=class{constructor(t,n){this._middlewares={},this.verno=0;let r=Cr.dependencies;this._options=n={addons:Cr.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};let{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:St,dbReadyPromise:null,cancelOpen:St,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new ke(s=>{o.dbReadyResolve=s}),o.openCanceller=new ke((s,a)=>{o.cancelOpen=a}),this._state=o,this.name=t,this.on=ka(this,"populate","blocked","versionchange","close",{ready:[Dp,St]}),this.on.ready.subscribe=a0(this.on.ready.subscribe,s=>(a,c)=>{Cr.vip(()=>{let u=this._state;if(u.openComplete)u.dbOpenError||ke.resolve().then(a),c&&s(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),c&&s(a);else{s(a);let p=this;c||s(function h(){p.on.ready.unsubscribe(a),p.on.ready.unsubscribe(h)})}})}),this.Collection=SO(this),this.Table=_O(this),this.Transaction=AO(this),this.Version=KO(this),this.WhereClause=kO(this),this.on("versionchange",s=>{s.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",s=>{!s.newVersion||s.newVersion<s.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${s.oldVersion/10}`)}),this._maxKey=Sa(n.IDBKeyRange),this._createTransaction=(s,a,c,u)=>new this.Transaction(s,a,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=s=>{this.on("blocked").fire(s),ga.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(s))},this.use(XO),this.use(eP),this.use(iP),this.use(nP),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(s=>s(this))}version(t){if(isNaN(t)||t<.1)throw new je.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);let n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(LO),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||Me.letThrough||this._vip)?t():new ke((n,r)=>{if(this._state.openComplete)return r(new je.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){r(new je.DatabaseClosed);return}this.open().catch(St)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});let o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:r==null?10:r,name:i}),o.sort((s,a)=>s.level-a.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:n?i.name!==n:!1)),this}open(){return WO(this)}_close(){let t=this._state,n=ga.indexOf(this);if(n>=0&&ga.splice(n,1),this.idbdb){try{this.idbdb.close()}catch(r){}this._novip.idbdb=null}t.dbReadyPromise=new ke(r=>{t.dbReadyResolve=r}),t.openCanceller=new ke((r,i)=>{t.cancelOpen=i})}close(){this._close();let t=this._state;this._options.autoOpen=!1,t.dbOpenError=new je.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){let t=arguments.length>0,n=this._state;return new ke((r,i)=>{let o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Nt(()=>{$O(this._deps,this.name),r()}),s.onerror=Rr(i),s.onblocked=this._fireOnBlocked};if(t)throw new je.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){let t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Zt(this._allTables).map(t=>this._allTables[t])}transaction(){let t=JO.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=Me.trans;(!i||i.db!==this||t.indexOf("!")!==-1)&&(i=null);let o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");let s,a;try{if(a=n.map(u=>{var p=u instanceof this.Table?u.name:u;if(typeof p!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return p}),t=="r"||t===Jd)s=Jd;else if(t=="rw"||t==Qd)s=Qd;else throw new je.InvalidArgument("Invalid transaction mode: "+t);if(i){if(i.mode===Jd&&s===Qd)if(o)i=null;else throw new je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&a.forEach(u=>{if(i&&i.storeNames.indexOf(u)===-1)if(o)i=null;else throw new je.SubTransaction("Table "+u+" not included in parent transaction.")}),o&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,(p,h)=>{h(u)}):sn(u)}let c=D0.bind(null,this,s,a,i,r);return i?i._promise(s,c,"lock"):Me.trans?is(Me.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!Wn(this._allTables,t))throw new je.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}},sP=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Tp=class{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)}[sP](){return this}};function U0(e,t){return Zt(t).forEach(n=>{let r=e[n]||(e[n]=new Kr);Bu(r,t[n])}),e}function aP(e){return new Tp(t=>{let n=Ip(e);function r(m){n&&rs();let b=()=>bi(e,{subscr:m,trans:null}),R=Me.trans?is(Me.transless,b):b();return n&&R.then(Wr,Wr),R}let i=!1,o={},s={},a={get closed(){return i},unsubscribe:()=>{i=!0,Si.storagemutated.unsubscribe(h)}};t.start&&t.start(a);let c=!1,u=!1;function p(){return Zt(s).some(m=>o[m]&&rP(o[m],s[m]))}let h=m=>{U0(o,m),p()&&y()},y=()=>{if(c||i)return;o={};let m={},b=r(m);u||(Si(wa,h),u=!0),c=!0,Promise.resolve(b).then(R=>{c=!1,!i&&(p()?y():(o={},s=m,t.next&&t.next(R)))},R=>{c=!1,t.error&&t.error(R),a.unsubscribe()})};return y(),a})}var kp;try{kp={indexedDB:Ct.indexedDB||Ct.mozIndexedDB||Ct.webkitIndexedDB||Ct.msIndexedDB,IDBKeyRange:Ct.IDBKeyRange||Ct.webkitIDBKeyRange}}catch(e){kp={indexedDB:null,IDBKeyRange:null}}var Hi=Cr;es(Hi,{...Gu,delete(e){return new Hi(e,{addons:[]}).delete()},exists(e){return new Hi(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1)},getDatabaseNames(e){try{return HO(Hi.dependencies).then(e)}catch(t){return sn(new je.MissingAPI)}},defineClass(){function e(t){On(this,t)}return e},ignoreTransaction(e){return Me.trans?is(Me.transless,e):e()},vip:xp,async:function(e){return function(){try{var t=Rp(e.apply(this,arguments));return!t||typeof t.then!="function"?ke.resolve(t):t}catch(n){return sn(n)}}},spawn:function(e,t,n){try{var r=Rp(e.apply(n,t||[]));return!r||typeof r.then!="function"?ke.resolve(r):r}catch(i){return sn(i)}},currentTransaction:{get:()=>Me.trans||null},waitFor:function(e,t){let n=ke.resolve(typeof e=="function"?Hi.ignoreTransaction(e):e).timeout(t||6e4);return Me.trans?Me.trans.waitFor(n):n},Promise:ke,debug:{get:()=>Tr,set:e=>{p0(e,e==="dexie"?()=>!0:T0)}},derive:ts,extend:On,props:es,override:a0,Events:ka,on:Si,liveQuery:aP,extendObservabilitySet:U0,getByKeyPath:$r,setByKeyPath:dr,delByKeyPath:KI,shallowClone:l0,deepClone:xa,getObjectDiff:qp,cmp:In,asap:c0,minKey:hp,addons:[],connections:ga,errnames:Pp,dependencies:kp,semVer:Xb,version:Xb.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,n*2))});Hi.maxKey=Sa(Hi.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Si(wa,e=>{if(!Vr){let t;Ku?(t=document.createEvent("CustomEvent"),t.initCustomEvent(vi,!0,!0,e)):t=new CustomEvent(vi,{detail:e}),Vr=!0,dispatchEvent(t),Vr=!1}}),addEventListener(vi,({detail:e})=>{Vr||ju(e)}));function ju(e){let t=Vr;try{Vr=!0,Si.storagemutated.fire(e)}finally{Vr=t}}var Vr=!1;if(typeof BroadcastChannel<"u"){let e=new BroadcastChannel(vi);Si(wa,t=>{Vr||e.postMessage(t)}),e.onmessage=t=>{t.data&&ju(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Si(wa,t=>{try{Vr||(typeof localStorage<"u"&&localStorage.setItem(vi,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:vi,changedParts:t})))}catch(n){}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===vi){let n=JSON.parse(t.newValue);n&&ju(n.changedParts)}});let e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",cP)}function cP({data:e}){e&&e.type===vi&&ju(e.changedParts)}ke.rejectionMapper=ZI;p0(Tr,T0);var os=Wt(S1());var uP=1e3;function L0(e){let t=`browsercache:${e}`,n=Dt(t),r=!1,i=new Cr(e);i.version(1).stores({entries:"cacheKey,lastFlushedAt"}),i.open().catch(y=>{n.error("error while opening db",y),r=!0});let o=i.table("entries"),s=new Set,a=!1,c,u;return{effect:y=>{function m(){return new Nr(`${t}.initialize`).wrap(async()=>{if(r){a=!1;return}let E=await o.where("lastFlushedAt").above(Date.now()-7*24*60*60*1e3).limit(200).toArray();n.info(`loading ${E.length} from the browser database`),E.forEach(I=>{y.hasKey(I.cacheKey)||y.setKey(I.cacheKey,{value:I.value,serialized:!0,state:"cached"})}),a=!0}).catch(E=>{a=!1,n.error("error initializing cache",E)})}function b(){return a?(n.info(`flush ${s.size} to the browser database`),new Nr(`${t}.flush`).wrap(async()=>{let E=Date.now(),I=Array.from(s.values());s.clear(),await o.bulkPut(I.map(N=>{let P=y.getKey(N,!0);if(!P)return null;let{state:F,value:K}=P;return F!=="live"||K===void 0?null:{cacheKey:N,value:K,lastFlushedAt:E}}).filter(Boolean))})):void 0}function R(D){s.add(D),c&&clearTimeout(c),u&&(0,os.unstable_cancelCallback)(u),c=setTimeout(()=>{c=null,u=(0,os.unstable_scheduleCallback)(os.unstable_LowPriority,()=>{b(),u=null})},uP)}y.onInitialize(m),y.onSet(D=>{R(D)})},clearCache:async()=>{try{n.info("clear cache"),s.clear(),await o.clear()}catch(y){n.error("error while clearing cache:",y)}}}}w();function F0(e){return e.sort((t,n)=>t.localeCompare(n)).join(",")}w();var Kp=Dt("app:database");function M0(e,t,n){if(!t||!e||!n)return!0;let[r,i]=e.reduce(([s,a],c)=>c.startsWith("!")?[s,[...a,c.slice(1)]]:[[...s,c],a],[[],[]]),o=r.length>0;if(r.length>0&&i.length>0&&Kp.warning("both whitelisted and blacklisted fields are present on your Firestore mask, this is not supported. whitelist: ",r,"blacklist: ",i),o){let s=r.some(a=>t[a]!==n[a]);return s||Kp.debug("no-op firestore update as no whitelisted fields changed",r,t,n),s}else{if(!i.some(c=>t[c]!==n[c]))return!0;let a=lP(t,n).some(c=>!i.includes(c));return a||Kp.debug("no-op firestore update as only blacklisted fields changed",i,t,n),a}}function lP(e,t){let n=Object.keys(e),r=n.filter(o=>!Mo(e[o],t[o])),i=Object.keys(t).filter(o=>!n.includes(o));return r.concat(i)}var Ia=Dt("app:database"),j0=L0("cache-firestore"),yM=j0.clearCache,or=Ao({getValue:e=>{if(!e)return null;let t=Us(e),n=new Nr("firestoreCache.getValue",{sampleRate:.001});n.label("Path",t),n.start(),Ia.debug(`get ${t}`);let r=(i=0)=>e.get({source:"server"}).then(o=>{if(o.metadata.hasPendingWrites){if(i>10)throw new Error("Network error, cannot get value from server without pending writes");return Ia.warning(`${t} has pending writes, we wait 100ms before retrying`),new Promise(s=>{setTimeout(()=>{s(r(i+1))},Math.min(2**(i+1)*10,2e3))})}return o});return r().then(i=>(n.resolve(),i instanceof st.firestore.QuerySnapshot?q0(i):G0(i))).catch(i=>{throw n.reject(i),Ia.error(`error with ${Us(e)}`,i),Im(i,[e])})},getKey:Us,compare:Mo,fromJS:au,toJS:su,effects:[j0.effect]});function _M(e){return or.readMultiple(e)}function vM(e){return or.readMultipleAsync(e)}function bM(e){return or.readMultipleSafe(e)}function z0(e){return e.map(n=>or.readCacheState(n))}function wM(e,t={}){return Vu(e,()=>or.readMultiple(e),t)}function SM(e,t={}){return Vu(e,()=>or.readMultipleSafe(e),{...t,ignoreErrors:!0})}function EM(e,t={}){return Vu(e,()=>e.map(n=>{let r=or.getCacheState(n);return(r==null?void 0:r.result)||null}),t)}function xM(e,t={}){return Vu(e,()=>or.readCacheUpdatesKey(e),t)}function RM(e){let t=K0(e),[,n]=(0,Ei.useState)(0),r=(0,Ei.useRef)();r.current=z0(e),(0,Ei.useEffect)(()=>{let i=()=>{z0(e).find((a,c)=>{var p;let u=(p=r.current)==null?void 0:p[c];return(u==null?void 0:u.state)!==a.state||(u==null?void 0:u.result)!==a.result})&&n(a=>a+1)};return i(),or.subscribeMultiple(e,()=>{i()})},[t])}function q0(e){let t=[];return e.forEach(n=>{t.push(n.data())}),t}function G0(e){return e.data()||null}function K0(e){return e.map(t=>t?Us(t):null).sort((t,n)=>(t||"").localeCompare(n||""))}function Vu(e,t,n={}){let r=K0(e),i=(0,Ei.useMemo)(()=>({getCurrentValue:()=>or.readCacheUpdatesKey(e,n.ignoreStateChanges===!1),subscribe:o=>{let s=e.map((a,c)=>a?(Ia.debug(`listen to ${r[c]}`),a.onSnapshot({includeMetadataChanges:!0},u=>{if(u.metadata.fromCache)return;let p="docs"in u?q0(u):G0(u),h=!n.mask||M0(n.mask,or.readSafe(a).result,p);or.write(a,p),h&&o()},u=>{if(!n.ignoreErrors)throw Ia.critical(`error while listening to ${r[c]}`,u),u})):()=>{});return()=>{s.forEach(a=>{a()})}}}),[r.join("-"),n.mask?F0(n.mask):null,n.ignoreErrors,n.ignoreStateChanges]);return(0,B0.useSubscription)(i),t()}w();var ss=Wt(Pi());var fP=ss.createContext(null);function H0(){return ss.useContext(fP)}function dP(){let e=H0();if(!e)throw new Error("This component requires an authenticated user, and may have been used in the context of public rendering. Use useCurrentUser instead.");return e}w();w();var Jr=Wt(Pi());var{text:pP}=Ls,V0=Jr.createContext(!1),Hp=Jr.forwardRef(function(t,n){let{children:r,as:i,inlineStyle:o,style:s,...a}=t,c=Jr.useContext(V0),p=Jr.createElement(i||(c?"span":"p"),{ref:n,...a,className:Bm({[pP.base]:!c},s),style:o},r);return c?p:Jr.createElement(V0.Provider,{value:!0},p)});Hp.displayName="Text";w();var Oa=Wt(Pi());var Vp="<gb-search-highlight>",$p="</gb-search-highlight>";function LM(e){let{value:t,maxLength:n=1/0}=e,r=hP(t,n);return Oa.createElement(Oa.Fragment,null,r.map((i,o)=>Oa.createElement(Hp,{key:o,style:[i.isHighlighted?[Ls.textColor.primary,Ls.text.weightMedium]:null]},i.value)))}function hP(e,t){let n=e.split(Vp),r=[],i=t,o=(a,c)=>{if(i<=0)return;let u=a.slice(0,i);i-=u.length,r.push({value:u.length<a.length?`${u}\u2026`:u,isHighlighted:c})},s=n.shift();s&&o(s,!1);for(let a of n){let c=a.split($p);if(i<=0)break;o(c[0],!0),c[1]!==""&&o(c[1],!1)}return r}w();var us=Wt(Pi());w();var gh=Wt(sh());w();var SS=Wt(yd()),ES=Wt(w1()),ro=Wt(Pi()),dh=Wt(jm());var fh=Dt("app:api"),f2=`https://${yn.api.domain}`;async function d2(){let{currentUser:e}=st.auth(),t=e?await e.getIdToken():void 0,n=await SS.createRequestToken();return new Nm({authTokenType:"InternalToken",authToken:t,castleToken:n,endpoint:f2})}function xS(e){let{operationId:t,params:n}=e,r=_f[t];return r.route.replace(/{(\w+)}/g,(o,s)=>{if(!n){let c="Input params are missing from input when the URL requires params";throw fh.critical(c),new Error(c)}let a=n[s];if(!a){let c=`URL param "${s}" value missing from input. Operation Endpoint: ${r.route}`;throw fh.critical(c),new Error(c)}return a})}function wS(e){let t=xS(e);if(!(0,ES.default)(e.query)){let n=new URLSearchParams(e.query);t=`${t}?${n.toString()}`}return e.body&&(t+=`#${Mm(e.body)}`),t}var Ri=Ao({getKey:wS,getValue:async e=>{let t=new Nr("apiCacheV2.getValue"),n=await d2();fh.debug(`GET ${wS(e)}`,e);let r=_f[e.operationId];return t.wrap(async()=>{let{data:i}=await n.request({path:xS(e),method:r.method,secure:!0,format:"json",query:e.query,body:e.body,headers:{...e.body?{"Content-Type":"application/json"}:{}}});return{data:i}})}});function l4(e,t){Ri.write(e,t)}function RS(e){return Ri.read(e)}function p2(e){let t=(0,ro.useMemo)(()=>({getCurrentValue:()=>Ri.read(e),subscribe:n=>Ri.subscribe(e,n)}),[Ri.getKey(e)]);return(0,dh.useSubscription)(t)}function f4(e){let t=(0,ro.useMemo)(()=>({getCurrentValue:()=>e?Ri.readCacheState(e):null,subscribe:r=>e?Ri.subscribe(e,r):()=>{}}),[e?Ri.getKey(e):null]),n=(0,dh.useSubscription)(t);return(n==null?void 0:n.state)==="live"?n.result:null}function d4(e){var c;let t=zm(()=>new Map),[n,r]=(0,ro.useState)(null),o=p2({...e,query:{...e.query,...n?{page:n}:{}}}).data,s=(0,ro.useMemo)(()=>{var p;let u=(p=o.next)==null?void 0:p.page;if(u)return t.current.set(u,n),()=>{r(u)}},[n,(c=o.next)==null?void 0:c.page,t]),a=(0,ro.useMemo)(()=>{let u=t.current.get(n);if(u!==void 0)return()=>{r(u)}},[n,t]);return{data:o,previous:a,next:s}}var CS=Dt("search"),ph=null;function C4(e){return CS.debug("initialize algolia client"),ph=(0,gh.default)(yn.algolia.appID,e,{_useCache:!1,_useRequestCache:!1}),hh.clearAll(),()=>{ph=null,hh.clearAll()}}function T4(e){return hh.read(e)}function h2(){let{data:e}=RS({operationId:"getCurrentBackOfficeStaffInfo",params:{},query:{}});return(0,gh.default)(yn.algolia.appID,e.searchKey)}var hh=Ao({ttl:1e4,getValue:async e=>{let{query:t,types:n=xv,hitsPerPage:r=4,filters:i={},analyticsTags:o=[],using:s="user"}=e,a=s==="staff"?h2():ph;if(!a||!t&&e.noEmpty)return[];CS.debug("search",e);let c=n.map(h=>({indexName:h,query:t,params:{hitsPerPage:r,filters:i[h],analyticsTags:Rv(o),highlightPreTag:Vp,highlightPostTag:$p}})),{results:u}=await a.search(c),p=[];return u.forEach(({hits:h,index:y})=>{h.forEach(m=>{p.push({index:y,object:m})})}),p},getKey:e=>{let t=e.filters?Object.entries(e.filters).map(([n,r])=>`${n}:${r}`).join(":"):"";return`${(e.types||[]).join()}:${e.query}:${t}`}});var g2=us.createContext({withPersonalContent:!0,updatedAt:void 0,permissions:{spaces:{},collections:{},organizations:{}},spaces:[],collections:[],softDeletedSpaces:[]});function m2(){return us.useContext(g2)}w();var Va=Wt(Pi());var y2=Va.createContext(Cv);function _2(){return Va.useContext(y2)}export{qm as a,bf as b,Gm as c,Ne as d,Tf as e,kf as f,Hn as g,Fs as h,If as i,Of as j,$m as k,Ym as l,Wm as m,Q1 as n,eR as o,Jm as p,Pf as q,Fn as r,ar as s,tr as t,nr as u,rr as v,cy as w,Df as x,mR as y,yR as z,_R as A,vR as B,uy as C,bR as D,wR as E,Fr as F,jT as G,ek as H,Zs as I,ZN as J,CU as K,ou as L,p_ as M,UU as N,LU as O,FU as P,MU as Q,zU as R,au as S,VU as T,$U as U,nd as V,OU as W,r5 as X,i5 as Y,o5 as Z,s5 as _,ta as $,u5 as aa,l5 as ba,f5 as ca,d5 as da,pk as ea,p5 as fa,h5 as ga,g5 as ha,z3 as ia,B3 as ja,Ev as ka,j3 as la,q3 as ma,G3 as na,Fi as oa,w5 as pa,tv as qa,X5 as ra,Z5 as sa,rv as ta,c6 as ua,u6 as va,l6 as wa,f6 as xa,d6 as ya,p6 as za,x6 as Aa,FA as Ba,R6 as Ca,C6 as Da,T6 as Ea,k6 as Fa,A6 as Ga,dd as Ha,pd as Ia,I6 as Ja,O6 as Ka,MA as La,P6 as Ma,zA as Na,D6 as Oa,N6 as Pa,jA as Qa,md as Ra,dv as Sa,GA as Ta,KA as Ua,HA as Va,V6 as Wa,pv as Xa,$A as Ya,i3 as Za,o3 as _a,yv as $a,s3 as ab,a3 as bb,c3 as cb,u3 as db,_v as eb,h3 as fb,g3 as gb,bv as hb,m3 as ib,y3 as jb,_3 as kb,R3 as lb,wv as mb,C3 as nb,T3 as ob,k3 as pb,A3 as qb,$3 as rb,X3 as sb,cI as tb,bu as ub,OI as vb,YL as wb,oL as xb,RL as yb,CL as zb,Vo as Ab,TL as Bb,Ov as Cb,uI as Db,kL as Eb,AL as Fb,xF as Gb,RF as Hb,UI as Ib,jF as Jb,qF as Kb,LI as Lb,MI as Mb,GF as Nb,Cr as Ob,Hp as Pb,LM as Qb,d2 as Rb,l4 as Sb,p2 as Tb,f4 as Ub,d4 as Vb,yM as Wb,or as Xb,_M as Yb,vM as Zb,bM as _b,z0 as $b,wM as ac,SM as bc,EM as cc,xM as dc,RM as ec,C4 as fc,T4 as gc,hh as hc,m2 as ic,_2 as jc,H0 as kc,dP as lc};
/*! Bundled license information:

amplitude-js/amplitude.umd.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
  (*!
   * UAParser.js v0.7.21
   * Lightweight JavaScript-based User-Agent string parser
   * https://github.com/faisalman/ua-parser-js
   *
   * Copyright  2012-2019 Faisal Salman <f@faisalman.com>
   * Licensed under MIT License
   *)

js-cookie/src/js.cookie.js:
  (*!
   * JavaScript Cookie v2.2.1
   * https://github.com/js-cookie/js-cookie
   *
   * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
   * Released under the MIT license
   *)

es6-promise/dist/es6-promise.js:
  (*!
   * @overview es6-promise - a tiny implementation of Promises/A+.
   * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
   * @license   Licensed under MIT license
   *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
   * @version   v4.2.8+1e68dce6
   *)
*/
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/chunk-E7KOX4IY.min.js.map

import{g as c,i as k,j as S,t as R}from"https://app.gitbook.com/public/app/chunks/chunk-IBKYVWYL.min.js";import{a as w,b}from"https://app.gitbook.com/public/app/chunks/chunk-666XU7Q6.min.js";import{Ia as h,Ka as P,Ma as y,Oa as C,bc as A}from"https://app.gitbook.com/public/app/chunks/chunk-E7KOX4IY.min.js";import{Xa as p,cb as m,eb as d,fb as g}from"https://app.gitbook.com/public/app/chunks/chunk-EFJ6CI7R.min.js";import{c as f}from"https://app.gitbook.com/public/app/chunks/chunk-CIHAFBKJ.min.js";import{p as v}from"https://app.gitbook.com/public/app/chunks/chunk-UVYKISNP.min.js";import{e as O,l as a}from"https://app.gitbook.com/public/app/chunks/chunk-OAKVUAEN.min.js";a();a();a();function V(e){return e.collection("share-links")}function z(e,n){return V(e).doc(n)}a();function j(e){let n=e.parent.id,r=e.id;return p().collection(`visitor-auth-${n}`).doc(r)}async function _(e,n){await m(async r=>{let t=await g(r,e),o=k(t),i=S(e),s=t.path;if(!s)throw new Error("Cannot update path of content if no path");let l=await d(r,c(o,n));if(l&&!l.deprecated&&!R(i,l))throw new f.Conflict("Path is already taken");r.update(c(o,s),{deprecated:!0}),r.set(c(o,n),{path:n,deprecated:!1,...i}),r.update(e,{path:n})})}function te(e,n){let[r,t]=A([typeof n=="number"?b(e,n):null,typeof n=="string"?w(e,n):null]);return t!=null&&t.result?t.result:r!=null&&r.result?r.result[0]:null}a();var u=O(v());function le(e,n){let r=u.default.useRef(null),[t,o]=u.default.useMemo(()=>x(e,n.page,r.current),[e,n]);return o&&(r.current={revision:e,currentPage:o,currentPagePath:n.page}),[t,o]}function x(e,n,r){let t=y(e,n);if(!t){if(!r||r.currentPagePath!==n)return[void 0,null];let i=e.pages[r.currentPage.key]||H(r.revision,e,r.currentPage.key);if(!i||i.kind==="link")return[void 0,null];t=i}if(t.kind==="group"&&(t=T(e,t),!t))return[void 0,null];let o=C(e,t.key);return[o!==n?{page:o}:void 0,t]}function H(e,n,r){let t=n.pages[r];if(t&&t.kind!=="link")return t;let o=h(e,r);if(o)return H(e,n,o.key);let i=n.rootPages.find(s=>n.pages[s].kind==="sheet");return i?n.pages[i]:null}function T(e,n){let r=n.pages.find(o=>{var i;return((i=e.pages[o])==null?void 0:i.kind)==="sheet"});if(r)return e.pages[r];let t=P(e,n.key,{filterPage:o=>o.kind!=="link"});return(t==null?void 0:t.kind)==="sheet"?t:(t==null?void 0:t.kind)==="group"?T(e,t):null}export{V as a,z as b,j as c,_ as d,te as e,le as f};
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/chunk-7NKFAHNE.min.js.map

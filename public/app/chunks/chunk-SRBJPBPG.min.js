import{Xa as R,j as P}from"https://app.gitbook.com/public/app/chunks/chunk-EFJ6CI7R.min.js";import{a as q}from"https://app.gitbook.com/public/app/chunks/chunk-EDXCWIHG.min.js";import{a as I,c as M,e as C,l as x}from"https://app.gitbook.com/public/app/chunks/chunk-OAKVUAEN.min.js";var E=M((D,S)=>{x();(function(a){if(typeof D=="object"&&typeof S<"u")S.exports=a();else if(typeof define=="function"&&define.amd)define([],a);else{var f;typeof window<"u"||typeof window<"u"?f=window:typeof self<"u"?f=self:f=this,f.Fuzzyurl=a()}})(function(){var a,f,d;return function c(u,v,m){function b(s,o){if(!v[s]){if(!u[s]){var h=typeof I=="function"&&I;if(!o&&h)return h(s,!0);if(p)return p(s,!0);var g=new Error("Cannot find module '"+s+"'");throw g.code="MODULE_NOT_FOUND",g}var e=v[s]={exports:{}};u[s][0].call(e.exports,function(t){var r=u[s][1][t];return b(r||t)},e,e.exports,c,u,v,m)}return v[s].exports}for(var p=typeof I=="function"&&I,y=0;y<m.length;y++)b(m[y]);return b}({1:[function(c,u,v){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol?"symbol":typeof t},b=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},p=c("./strings"),y=c("./match"),s=c("./protocols"),o={protocol:null,username:null,password:null,hostname:null,port:null,path:null,query:null,fragment:null},h=Object.keys(o);function g(t){var r=b({},o,t||{});for(var n in r)if(o.hasOwnProperty(n))this[n]=r[n];else throw new Error("Bad Fuzzyurl parameter: "+n)}u.exports=g,g.prototype.equals=function(t){var r=this,n=!0;return h.forEach(function(i){r[i]!=t[i]&&(n=!1)}),n},u.exports.prototype.with=function(t){var r=this,n=t||{},i=new g;return h.forEach(function(l){n.hasOwnProperty(l)?i[l]=n[l]:i[l]=r[l]}),i},u.exports.mask=function(t){var r;if(typeof t=="string")r=g.fromString(t,{default:"*"});else if(!t)r={};else if((typeof t>"u"?"undefined":m(t))=="object")r=t;else throw new Error("params must be string, object, or null");var n=new g(e);return Object.keys(r).forEach(function(i){r[i]&&(n[i]=r[i])}),n};var e={protocol:"*",username:"*",password:"*",hostname:"*",port:"*",path:"*",query:"*",fragment:"*"};u.exports.toString=function(t){return p.toString(t)},u.exports.prototype.toString=function(){return p.toString(this)},u.exports.fromString=function(t){return new g(p.fromString(t))},u.exports.match=function(t,r){var n=typeof t=="string"?p.fromString(t,{default:"*"}):t,i=typeof r=="string"?p.fromString(r):r;return y.match(n,i)},u.exports.matches=function(t,r){var n=typeof t=="string"?p.fromString(t,{default:"*"}):t,i=typeof r=="string"?p.fromString(r):r;return y.matches(n,i)},u.exports.matchScores=function(t,r){var n=typeof t=="string"?p.fromString(t,{default:"*"}):t,i=typeof r=="string"?p.fromString(r):r;return y.matchScores(n,i)},u.exports.fuzzyMatch=function(t,r){return y.fuzzyMatch(t,r)},u.exports.bestMatchIndex=function(t,r){var n=t.map(function(l){return typeof l=="string"?p.fromString(l,{default:"*"}):l}),i=typeof r=="string"?p.fromString(r):r;return y.bestMatchIndex(n,i)},u.exports.bestMatch=function(t,r){var n=g.bestMatchIndex(t,r);return n&&t[n]}},{"./match":2,"./protocols":3,"./strings":4}],2:[function(c,u,v){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol?"symbol":typeof e},b=c("./protocols");function p(e,t){var r=s(e,t),n=Object.keys(r).map(function(i){return r[i]});return n.indexOf(null)>=0?null:n.reduce(function(i,l){return i+l})}function y(e,t){return p(e,t)!==null}function s(e,t){if((typeof e>"u"?"undefined":m(e))!=="object")throw new Error("mask must be a Fuzzyurl object");if((typeof t>"u"?"undefined":m(t))!=="object")throw new Error("url must be a Fuzzyurl object");var r=t.protocol||b.getProtocol(t.port),n=t.port||b.getPort(t.protocol);return{protocol:o(e.protocol,r),username:o(e.username,t.username),password:o(e.password,t.password),hostname:o(e.hostname,t.hostname),port:o(e.port,n),path:o(e.path,t.path),query:o(e.query,t.query),fragment:o(e.fragment,t.fragment)}}function o(e,t){if(e==="*")return 0;if(e==t)return 1;if(!e||!t)return null;if(e.indexOf("**.")==0){var r=e.slice(3);return t.endsWith("."+r)||r===t?0:null}if(e.indexOf("*")==0)return t.endsWith(e.slice(1))?0:null;var n=h(e),i=h(t);if(n.indexOf("**/")==0){var l=n.slice(3);return i.endsWith("/"+l)||i===l?0:null}return n.indexOf("*")==0&&i.endsWith(n.slice(1))?0:null}function h(e){for(var t="",r=e.length-1;r>=0;r--)t+=e[r];return t}function g(e,t){if((typeof t>"u"?"undefined":m(t))!=="object")throw new Error("url must be a Fuzzyurl object");var r=null,n=-1;for(var i in e){var l=e[i];if((typeof l>"u"?"undefined":m(l))!=="object")throw new Error("Got a non-Fuzzyurl mask: "+l);var w=p(l,t);w!==null&&w>n&&(n=w,r=parseInt(i))}return r}u.exports={match:p,matches:y,matchScores:s,fuzzyMatch:o,bestMatchIndex:g}},{"./protocols":3}],3:[function(c,u,v){"use strict";var m={ssh:"22",http:"80",https:"443"},b={22:"ssh",80:"http",443:"https"};function p(s){if(!s)return null;var o=s.split("+").pop();return m[o]}function y(s){return s?b[s.toString()]:null}u.exports={getPort:p,getProtocol:y}},{}],4:[function(c,u,v){"use strict";var m=new RegExp("^(?:(\\*|[a-zA-Z][A-Za-z+.-]+)://)?(?:(\\*|[a-zA-Z0-9%_.!~*'();&=+$,-]+)(?::(\\*|[a-zA-Z0-9%_.!~*'();&=+$,-]*))?@)?([a-zA-Z0-9\\.\\*\\-]+?)?(?::(\\*|\\d+))?(/[^\\?\\#]*)?(?:\\?([^\\#]*))?(?:\\#(.*))?$");function b(y,s){var o=s||{},h=o.default;if(typeof y!="string")return null;var g=m.exec(y,m);return g?{protocol:g[1]||h,username:g[2]||h,password:g[3]||h,hostname:g[4]||h,port:g[5]||h,path:g[6]||h,query:g[7]||h,fragment:g[8]||h}:null}function p(y){var s="",o=y;return o.protocol&&(s+=o.protocol+"://"),o.username&&(s+=o.username),o.password&&(s+=":"+o.password),o.username&&(s+="@"),o.hostname&&(s+=o.hostname),o.port&&(s+=":"+o.port),o.path&&(s+=o.path),o.query&&(s+="?"+o.query),o.fragment&&(s+="#"+o.fragment),s}u.exports={fromString:b,toString:p}},{}]},{},[1])(1)})});x();x();var z=C(E());function N(a,f){let d=j(f);if(!d)return!1;let c=z.default.mask(d.pattern);return z.default.matches(c,a)}function j(a){let f=q(a);if(!f)return null;let d=f.hostname,c=d.split(".");return c.length<2||$(c[c.length-1])||!d?null:{domain:d,pattern:a}}function U(a){let f=a.split("."),d=[];for(let c=0;c<f.length-2;c++)d.push(`*.${f.slice(c+1).join(".")}`);return d.push(a),d}function $(a){return a.includes("*")}function O(){return R().collection("integrations")}function L(){return O().where("visibility","==","public")}function rt(a){return L().where("blockDomains","array-contains-any",U(a).slice(0,10))}function A(a){let f=O();return"organization"in a?f=f.where("organization","==",a.organization):"user"in a&&(f=f.where("user","==",a.user)),f}function et(a){return A(a).where("visibility","==","private")}function nt(a){return O().doc(a)}function ot(a){return`https://${P.integrations.domain}/v1/integrations/${a}`}function it(a){let f={type:"object",properties:{},required:a.required};return Object.entries(a.properties).forEach(([d,c])=>{c.type==="button"?f.properties[d]={}:f.properties[d]=c}),f}export{N as a,L as b,rt as c,et as d,nt as e,ot as f,it as g};
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/chunk-SRBJPBPG.min.js.map

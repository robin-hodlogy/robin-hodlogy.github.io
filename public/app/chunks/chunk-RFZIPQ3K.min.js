import{a as Go}from"https://app.gitbook.com/public/app/chunks/chunk-CMQ45EC7.min.js";import{a as Tn}from"https://app.gitbook.com/public/app/chunks/chunk-EDXCWIHG.min.js";import{a as Jt,b as ra,c as na,d as he,f as oa,g as ia,h as sa,i as ny,j as aa,k as oy}from"https://app.gitbook.com/public/app/chunks/chunk-QDU35MW3.min.js";import{a as Oe}from"https://app.gitbook.com/public/app/chunks/chunk-XQJO7322.min.js";import{b as Ke,c as Rr,e as ca}from"https://app.gitbook.com/public/app/chunks/chunk-YPOOS4GR.min.js";import{c as y,d as ee,e as oe,l}from"https://app.gitbook.com/public/app/chunks/chunk-OAKVUAEN.min.js";var _a=y((d_,Ea)=>{"use strict";l();var fi,di,Sa,Na;fi="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";di="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC";Sa=new RegExp("^[^"+di+"]*["+fi+"]");Na=new RegExp("^[^"+fi+"]*["+di+"]");function By(r){return r=r.toString(),Na.test(r)?"rtl":Sa.test(r)?"ltr":"neutral"}Ea.exports=By});var Fa=y((Kn,zr)=>{l();(function(r){var t=typeof Kn=="object"&&Kn,e=typeof zr=="object"&&zr&&zr.exports==t&&zr,n=typeof window=="object"&&window;(n.global===n||n.window===n)&&(r=n);var o=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,i=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,s=function(u){u=u.replace(o,function(p,h,g){return s(g)+h}).replace(i,"$2$1");for(var f="",d=u.length;d--;)f+=u.charAt(d);return f},a={version:"0.2.0",reverse:s};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd)define(function(){return a});else if(t&&!t.nodeType)if(e)e.exports=a;else for(var c in a)a.hasOwnProperty(c)&&(t[c]=a[c]);else r.esrever=a})(Kn)});var Ga=y((K_,qa)=>{"use strict";l();qa.exports=function(t){return t!=null&&typeof t=="object"&&Array.isArray(t)===!1}});var fr=y((M_,Ua)=>{"use strict";l();var _y=Ga();function Ha(r){return _y(r)===!0&&Object.prototype.toString.call(r)==="[object Object]"}Ua.exports=function(t){var e,n;return!(Ha(t)===!1||(e=t.constructor,typeof e!="function")||(n=e.prototype,Ha(n)===!1)||n.hasOwnProperty("isPrototypeOf")===!1)}});var dt=y((IP,Ya)=>{l();var wy=Array.isArray;Ya.exports=wy});var gi=y((NP,Xa)=>{l();var Ry=typeof window=="object"&&window&&window.Object===Object&&window;Xa.exports=Ry});var rt=y((_P,Qa)=>{l();var Ky=gi(),Ly=typeof self=="object"&&self&&self.Object===Object&&self,My=Ky||Ly||Function("return this")();Qa.exports=My});var dr=y((FP,Za)=>{l();var zy=rt(),Vy=zy.Symbol;Za.exports=Vy});var nc=y((wP,rc)=>{l();var ec=dr(),tc=Object.prototype,jy=tc.hasOwnProperty,qy=tc.toString,jr=ec?ec.toStringTag:void 0;function Gy(r){var t=jy.call(r,jr),e=r[jr];try{r[jr]=void 0;var n=!0}catch(i){}var o=qy.call(r);return n&&(t?r[jr]=e:delete r[jr]),o}rc.exports=Gy});var ic=y((KP,oc)=>{l();var Hy=Object.prototype,Uy=Hy.toString;function $y(r){return Uy.call(r)}oc.exports=$y});var Qt=y((MP,cc)=>{l();var sc=dr(),Jy=nc(),Wy=ic(),Yy="[object Null]",Xy="[object Undefined]",ac=sc?sc.toStringTag:void 0;function Qy(r){return r==null?r===void 0?Xy:Yy:ac&&ac in Object(r)?Jy(r):Wy(r)}cc.exports=Qy});var Ft=y((VP,lc)=>{l();function Zy(r){return r!=null&&typeof r=="object"}lc.exports=Zy});var qn=y((qP,uc)=>{l();var eg=Qt(),tg=Ft(),rg="[object Symbol]";function ng(r){return typeof r=="symbol"||tg(r)&&eg(r)==rg}uc.exports=ng});var dc=y((HP,fc)=>{l();var og=dt(),ig=qn(),sg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ag=/^\w*$/;function cg(r,t){if(og(r))return!1;var e=typeof r;return e=="number"||e=="symbol"||e=="boolean"||r==null||ig(r)?!0:ag.test(r)||!sg.test(r)||t!=null&&r in Object(t)}fc.exports=cg});var bt=y(($P,pc)=>{l();function lg(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}pc.exports=lg});var Gn=y((WP,hc)=>{l();var ug=Qt(),fg=bt(),dg="[object AsyncFunction]",pg="[object Function]",hg="[object GeneratorFunction]",mg="[object Proxy]";function yg(r){if(!fg(r))return!1;var t=ug(r);return t==pg||t==hg||t==dg||t==mg}hc.exports=yg});var yc=y((XP,mc)=>{l();var gg=rt(),kg=gg["__core-js_shared__"];mc.exports=kg});var bc=y((ZP,kc)=>{l();var ki=yc(),gc=function(){var r=/[^.]+$/.exec(ki&&ki.keys&&ki.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function bg(r){return!!gc&&gc in r}kc.exports=bg});var bi=y((tF,xc)=>{l();var xg=Function.prototype,Tg=xg.toString;function Bg(r){if(r!=null){try{return Tg.call(r)}catch(t){}try{return r+""}catch(t){}}return""}xc.exports=Bg});var Bc=y((nF,Tc)=>{l();var Cg=Gn(),Og=bc(),Ag=bt(),vg=bi(),Ig=/[\\^$.*+?()[\]{}|]/g,Sg=/^\[object .+?Constructor\]$/,Ng=Function.prototype,Eg=Object.prototype,_g=Ng.toString,Pg=Eg.hasOwnProperty,Fg=RegExp("^"+_g.call(Pg).replace(Ig,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Dg(r){if(!Ag(r)||Og(r))return!1;var t=Cg(r)?Fg:Sg;return t.test(vg(r))}Tc.exports=Dg});var Oc=y((iF,Cc)=>{l();function wg(r,t){return r==null?void 0:r[t]}Cc.exports=wg});var Dt=y((aF,Ac)=>{l();var Rg=Bc(),Kg=Oc();function Lg(r,t){var e=Kg(r,t);return Rg(e)?e:void 0}Ac.exports=Lg});var qr=y((lF,vc)=>{l();var Mg=Dt(),zg=Mg(Object,"create");vc.exports=zg});var Nc=y((fF,Sc)=>{l();var Ic=qr();function Vg(){this.__data__=Ic?Ic(null):{},this.size=0}Sc.exports=Vg});var _c=y((pF,Ec)=>{l();function jg(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}Ec.exports=jg});var Fc=y((mF,Pc)=>{l();var qg=qr(),Gg="__lodash_hash_undefined__",Hg=Object.prototype,Ug=Hg.hasOwnProperty;function $g(r){var t=this.__data__;if(qg){var e=t[r];return e===Gg?void 0:e}return Ug.call(t,r)?t[r]:void 0}Pc.exports=$g});var wc=y((gF,Dc)=>{l();var Jg=qr(),Wg=Object.prototype,Yg=Wg.hasOwnProperty;function Xg(r){var t=this.__data__;return Jg?t[r]!==void 0:Yg.call(t,r)}Dc.exports=Xg});var Kc=y((bF,Rc)=>{l();var Qg=qr(),Zg="__lodash_hash_undefined__";function ek(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=Qg&&t===void 0?Zg:t,this}Rc.exports=ek});var Mc=y((TF,Lc)=>{l();var tk=Nc(),rk=_c(),nk=Fc(),ok=wc(),ik=Kc();function pr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}pr.prototype.clear=tk;pr.prototype.delete=rk;pr.prototype.get=nk;pr.prototype.has=ok;pr.prototype.set=ik;Lc.exports=pr});var Vc=y((CF,zc)=>{l();function sk(){this.__data__=[],this.size=0}zc.exports=sk});var hr=y((AF,jc)=>{l();function ak(r,t){return r===t||r!==r&&t!==t}jc.exports=ak});var Gr=y((IF,qc)=>{l();var ck=hr();function lk(r,t){for(var e=r.length;e--;)if(ck(r[e][0],t))return e;return-1}qc.exports=lk});var Hc=y((NF,Gc)=>{l();var uk=Gr(),fk=Array.prototype,dk=fk.splice;function pk(r){var t=this.__data__,e=uk(t,r);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():dk.call(t,e,1),--this.size,!0}Gc.exports=pk});var $c=y((_F,Uc)=>{l();var hk=Gr();function mk(r){var t=this.__data__,e=hk(t,r);return e<0?void 0:t[e][1]}Uc.exports=mk});var Wc=y((FF,Jc)=>{l();var yk=Gr();function gk(r){return yk(this.__data__,r)>-1}Jc.exports=gk});var Xc=y((wF,Yc)=>{l();var kk=Gr();function bk(r,t){var e=this.__data__,n=kk(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this}Yc.exports=bk});var Hr=y((KF,Qc)=>{l();var xk=Vc(),Tk=Hc(),Bk=$c(),Ck=Wc(),Ok=Xc();function mr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}mr.prototype.clear=xk;mr.prototype.delete=Tk;mr.prototype.get=Bk;mr.prototype.has=Ck;mr.prototype.set=Ok;Qc.exports=mr});var Hn=y((MF,Zc)=>{l();var Ak=Dt(),vk=rt(),Ik=Ak(vk,"Map");Zc.exports=Ik});var rl=y((VF,tl)=>{l();var el=Mc(),Sk=Hr(),Nk=Hn();function Ek(){this.size=0,this.__data__={hash:new el,map:new(Nk||Sk),string:new el}}tl.exports=Ek});var ol=y((qF,nl)=>{l();function _k(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}nl.exports=_k});var Ur=y((HF,il)=>{l();var Pk=ol();function Fk(r,t){var e=r.__data__;return Pk(t)?e[typeof t=="string"?"string":"hash"]:e.map}il.exports=Fk});var al=y(($F,sl)=>{l();var Dk=Ur();function wk(r){var t=Dk(this,r).delete(r);return this.size-=t?1:0,t}sl.exports=wk});var ll=y((WF,cl)=>{l();var Rk=Ur();function Kk(r){return Rk(this,r).get(r)}cl.exports=Kk});var fl=y((XF,ul)=>{l();var Lk=Ur();function Mk(r){return Lk(this,r).has(r)}ul.exports=Mk});var pl=y((ZF,dl)=>{l();var zk=Ur();function Vk(r,t){var e=zk(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this}dl.exports=Vk});var Un=y((tD,hl)=>{l();var jk=rl(),qk=al(),Gk=ll(),Hk=fl(),Uk=pl();function yr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}yr.prototype.clear=jk;yr.prototype.delete=qk;yr.prototype.get=Gk;yr.prototype.has=Hk;yr.prototype.set=Uk;hl.exports=yr});var gl=y((nD,yl)=>{l();var ml=Un(),$k="Expected a function";function xi(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError($k);var e=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var s=r.apply(this,n);return e.cache=i.set(o,s)||i,s};return e.cache=new(xi.Cache||ml),e}xi.Cache=ml;yl.exports=xi});var bl=y((iD,kl)=>{l();var Jk=gl(),Wk=500;function Yk(r){var t=Jk(r,function(n){return e.size===Wk&&e.clear(),n}),e=t.cache;return t}kl.exports=Yk});var Tl=y((aD,xl)=>{l();var Xk=bl(),Qk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zk=/\\(\\)?/g,eb=Xk(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(Qk,function(e,n,o,i){t.push(o?i.replace(Zk,"$1"):n||e)}),t});xl.exports=eb});var Ti=y((lD,Bl)=>{l();function tb(r,t){for(var e=-1,n=r==null?0:r.length,o=Array(n);++e<n;)o[e]=t(r[e],e,r);return o}Bl.exports=tb});var Sl=y((fD,Il)=>{l();var Cl=dr(),rb=Ti(),nb=dt(),ob=qn(),ib=1/0,Ol=Cl?Cl.prototype:void 0,Al=Ol?Ol.toString:void 0;function vl(r){if(typeof r=="string")return r;if(nb(r))return rb(r,vl)+"";if(ob(r))return Al?Al.call(r):"";var t=r+"";return t=="0"&&1/r==-ib?"-0":t}Il.exports=vl});var El=y((pD,Nl)=>{l();var sb=Sl();function ab(r){return r==null?"":sb(r)}Nl.exports=ab});var $r=y((mD,_l)=>{l();var cb=dt(),lb=dc(),ub=Tl(),fb=El();function db(r,t){return cb(r)?r:lb(r,t)?[r]:ub(fb(r))}_l.exports=db});var $n=y((gD,Pl)=>{l();var pb=qn(),hb=1/0;function mb(r){if(typeof r=="string"||pb(r))return r;var t=r+"";return t=="0"&&1/r==-hb?"-0":t}Pl.exports=mb});var Dl=y((bD,Fl)=>{l();var yb=$r(),gb=$n();function kb(r,t){t=yb(t,r);for(var e=0,n=t.length;r!=null&&e<n;)r=r[gb(t[e++])];return e&&e==n?r:void 0}Fl.exports=kb});var Bi=y((TD,wl)=>{l();var bb=Dt(),xb=function(){try{var r=bb(Object,"defineProperty");return r({},"",{}),r}catch(t){}}();wl.exports=xb});var Jn=y((CD,Kl)=>{l();var Rl=Bi();function Tb(r,t,e){t=="__proto__"&&Rl?Rl(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}Kl.exports=Tb});var Ci=y((AD,Ll)=>{l();var Bb=Jn(),Cb=hr(),Ob=Object.prototype,Ab=Ob.hasOwnProperty;function vb(r,t,e){var n=r[t];(!(Ab.call(r,t)&&Cb(n,e))||e===void 0&&!(t in r))&&Bb(r,t,e)}Ll.exports=vb});var Jr=y((ID,Ml)=>{l();var Ib=9007199254740991,Sb=/^(?:0|[1-9]\d*)$/;function Nb(r,t){var e=typeof r;return t=t==null?Ib:t,!!t&&(e=="number"||e!="symbol"&&Sb.test(r))&&r>-1&&r%1==0&&r<t}Ml.exports=Nb});var jl=y((ND,Vl)=>{l();var Eb=Ci(),_b=$r(),Pb=Jr(),zl=bt(),Fb=$n();function Db(r,t,e,n){if(!zl(r))return r;t=_b(t,r);for(var o=-1,i=t.length,s=i-1,a=r;a!=null&&++o<i;){var c=Fb(t[o]),u=e;if(c==="__proto__"||c==="constructor"||c==="prototype")return r;if(o!=s){var f=a[c];u=n?n(f,c,a):void 0,u===void 0&&(u=zl(f)?f:Pb(t[o+1])?[]:{})}Eb(a,c,u),a=a[c]}return r}Vl.exports=Db});var Gl=y((_D,ql)=>{l();var wb=Dl(),Rb=jl(),Kb=$r();function Lb(r,t,e){for(var n=-1,o=t.length,i={};++n<o;){var s=t[n],a=wb(r,s);e(a,s)&&Rb(i,Kb(s,r),a)}return i}ql.exports=Lb});var Ul=y((FD,Hl)=>{l();function Mb(r,t){return r!=null&&t in Object(r)}Hl.exports=Mb});var Jl=y((wD,$l)=>{l();var zb=Qt(),Vb=Ft(),jb="[object Arguments]";function qb(r){return Vb(r)&&zb(r)==jb}$l.exports=qb});var Wr=y((KD,Xl)=>{l();var Wl=Jl(),Gb=Ft(),Yl=Object.prototype,Hb=Yl.hasOwnProperty,Ub=Yl.propertyIsEnumerable,$b=Wl(function(){return arguments}())?Wl:function(r){return Gb(r)&&Hb.call(r,"callee")&&!Ub.call(r,"callee")};Xl.exports=$b});var Wn=y((MD,Ql)=>{l();var Jb=9007199254740991;function Wb(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Jb}Ql.exports=Wb});var eu=y((VD,Zl)=>{l();var Yb=$r(),Xb=Wr(),Qb=dt(),Zb=Jr(),ex=Wn(),tx=$n();function rx(r,t,e){t=Yb(t,r);for(var n=-1,o=t.length,i=!1;++n<o;){var s=tx(t[n]);if(!(i=r!=null&&e(r,s)))break;r=r[s]}return i||++n!=o?i:(o=r==null?0:r.length,!!o&&ex(o)&&Zb(s,o)&&(Qb(r)||Xb(r)))}Zl.exports=rx});var ru=y((qD,tu)=>{l();var nx=Ul(),ox=eu();function ix(r,t){return r!=null&&ox(r,t,nx)}tu.exports=ix});var ou=y((HD,nu)=>{l();var sx=Gl(),ax=ru();function cx(r,t){return sx(r,t,function(e,n){return ax(r,n)})}nu.exports=cx});var Oi=y(($D,iu)=>{l();function lx(r,t){for(var e=-1,n=t.length,o=r.length;++e<n;)r[o+e]=t[e];return r}iu.exports=lx});var lu=y((WD,cu)=>{l();var su=dr(),ux=Wr(),fx=dt(),au=su?su.isConcatSpreadable:void 0;function dx(r){return fx(r)||ux(r)||!!(au&&r&&r[au])}cu.exports=dx});var Ai=y((XD,fu)=>{l();var px=Oi(),hx=lu();function uu(r,t,e,n,o){var i=-1,s=r.length;for(e||(e=hx),o||(o=[]);++i<s;){var a=r[i];t>0&&e(a)?t>1?uu(a,t-1,e,n,o):px(o,a):n||(o[o.length]=a)}return o}fu.exports=uu});var pu=y((ZD,du)=>{l();var mx=Ai();function yx(r){var t=r==null?0:r.length;return t?mx(r,1):[]}du.exports=yx});var mu=y((tw,hu)=>{l();function gx(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}hu.exports=gx});var vi=y((nw,gu)=>{l();var kx=mu(),yu=Math.max;function bx(r,t,e){return t=yu(t===void 0?r.length-1:t,0),function(){for(var n=arguments,o=-1,i=yu(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=e(s),kx(r,this,a)}}gu.exports=bx});var bu=y((iw,ku)=>{l();function xx(r){return function(){return r}}ku.exports=xx});var Ii=y((aw,xu)=>{l();function Tx(r){return r}xu.exports=Tx});var Cu=y((lw,Bu)=>{l();var Bx=bu(),Tu=Bi(),Cx=Ii(),Ox=Tu?function(r,t){return Tu(r,"toString",{configurable:!0,enumerable:!1,value:Bx(t),writable:!0})}:Cx;Bu.exports=Ox});var Au=y((fw,Ou)=>{l();var Ax=800,vx=16,Ix=Date.now;function Sx(r){var t=0,e=0;return function(){var n=Ix(),o=vx-(n-e);if(e=n,o>0){if(++t>=Ax)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}Ou.exports=Sx});var Si=y((pw,vu)=>{l();var Nx=Cu(),Ex=Au(),_x=Ex(Nx);vu.exports=_x});var Su=y((mw,Iu)=>{l();var Px=pu(),Fx=vi(),Dx=Si();function wx(r){return Dx(Fx(r,void 0,Px),r+"")}Iu.exports=wx});var Ni=y((gw,Nu)=>{l();var Rx=ou(),Kx=Su(),Lx=Kx(function(r,t){return r==null?{}:Rx(r,t)});Nu.exports=Lx});var Mu=y((wR,Lu)=>{l();var jx=Hr();function qx(){this.__data__=new jx,this.size=0}Lu.exports=qx});var Vu=y((KR,zu)=>{l();function Gx(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}zu.exports=Gx});var qu=y((MR,ju)=>{l();function Hx(r){return this.__data__.get(r)}ju.exports=Hx});var Hu=y((VR,Gu)=>{l();function Ux(r){return this.__data__.has(r)}Gu.exports=Ux});var $u=y((qR,Uu)=>{l();var $x=Hr(),Jx=Hn(),Wx=Un(),Yx=200;function Xx(r,t){var e=this.__data__;if(e instanceof $x){var n=e.__data__;if(!Jx||n.length<Yx-1)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new Wx(n)}return e.set(r,t),this.size=e.size,this}Uu.exports=Xx});var Pi=y((HR,Ju)=>{l();var Qx=Hr(),Zx=Mu(),eT=Vu(),tT=qu(),rT=Hu(),nT=$u();function gr(r){var t=this.__data__=new Qx(r);this.size=t.size}gr.prototype.clear=Zx;gr.prototype.delete=eT;gr.prototype.get=tT;gr.prototype.has=rT;gr.prototype.set=nT;Ju.exports=gr});var Yu=y(($R,Wu)=>{l();var oT="__lodash_hash_undefined__";function iT(r){return this.__data__.set(r,oT),this}Wu.exports=iT});var Qu=y((WR,Xu)=>{l();function sT(r){return this.__data__.has(r)}Xu.exports=sT});var Fi=y((XR,Zu)=>{l();var aT=Un(),cT=Yu(),lT=Qu();function Qn(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new aT;++t<e;)this.add(r[t])}Qn.prototype.add=Qn.prototype.push=cT;Qn.prototype.has=lT;Zu.exports=Qn});var tf=y((ZR,ef)=>{l();function uT(r,t){for(var e=-1,n=r==null?0:r.length;++e<n;)if(t(r[e],e,r))return!0;return!1}ef.exports=uT});var Di=y((tK,rf)=>{l();function fT(r,t){return r.has(t)}rf.exports=fT});var wi=y((nK,nf)=>{l();var dT=Fi(),pT=tf(),hT=Di(),mT=1,yT=2;function gT(r,t,e,n,o,i){var s=e&mT,a=r.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var u=i.get(r),f=i.get(t);if(u&&f)return u==t&&f==r;var d=-1,p=!0,h=e&yT?new dT:void 0;for(i.set(r,t),i.set(t,r);++d<a;){var g=r[d],m=t[d];if(n)var k=s?n(m,g,d,t,r,i):n(g,m,d,r,t,i);if(k!==void 0){if(k)continue;p=!1;break}if(h){if(!pT(t,function(b,C){if(!hT(h,C)&&(g===b||o(g,b,e,n,i)))return h.push(C)})){p=!1;break}}else if(!(g===m||o(g,m,e,n,i))){p=!1;break}}return i.delete(r),i.delete(t),p}nf.exports=gT});var Ri=y((iK,of)=>{l();var kT=rt(),bT=kT.Uint8Array;of.exports=bT});var af=y((aK,sf)=>{l();function xT(r){var t=-1,e=Array(r.size);return r.forEach(function(n,o){e[++t]=[o,n]}),e}sf.exports=xT});var lf=y((lK,cf)=>{l();function TT(r){var t=-1,e=Array(r.size);return r.forEach(function(n){e[++t]=n}),e}cf.exports=TT});var hf=y((fK,pf)=>{l();var uf=dr(),ff=Ri(),BT=hr(),CT=wi(),OT=af(),AT=lf(),vT=1,IT=2,ST="[object Boolean]",NT="[object Date]",ET="[object Error]",_T="[object Map]",PT="[object Number]",FT="[object RegExp]",DT="[object Set]",wT="[object String]",RT="[object Symbol]",KT="[object ArrayBuffer]",LT="[object DataView]",df=uf?uf.prototype:void 0,Ki=df?df.valueOf:void 0;function MT(r,t,e,n,o,i,s){switch(e){case LT:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case KT:return!(r.byteLength!=t.byteLength||!i(new ff(r),new ff(t)));case ST:case NT:case PT:return BT(+r,+t);case ET:return r.name==t.name&&r.message==t.message;case FT:case wT:return r==t+"";case _T:var a=OT;case DT:var c=n&vT;if(a||(a=AT),r.size!=t.size&&!c)return!1;var u=s.get(r);if(u)return u==t;n|=IT,s.set(r,t);var f=CT(a(r),a(t),n,o,i,s);return s.delete(r),f;case RT:if(Ki)return Ki.call(r)==Ki.call(t)}return!1}pf.exports=MT});var yf=y((pK,mf)=>{l();var zT=Oi(),VT=dt();function jT(r,t,e){var n=t(r);return VT(r)?n:zT(n,e(r))}mf.exports=jT});var kf=y((mK,gf)=>{l();function qT(r,t){for(var e=-1,n=r==null?0:r.length,o=0,i=[];++e<n;){var s=r[e];t(s,e,r)&&(i[o++]=s)}return i}gf.exports=qT});var xf=y((gK,bf)=>{l();function GT(){return[]}bf.exports=GT});var Cf=y((bK,Bf)=>{l();var HT=kf(),UT=xf(),$T=Object.prototype,JT=$T.propertyIsEnumerable,Tf=Object.getOwnPropertySymbols,WT=Tf?function(r){return r==null?[]:(r=Object(r),HT(Tf(r),function(t){return JT.call(r,t)}))}:UT;Bf.exports=WT});var Af=y((TK,Of)=>{l();function YT(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}Of.exports=YT});var If=y((CK,vf)=>{l();function XT(){return!1}vf.exports=XT});var Zn=y((Yr,kr)=>{l();var QT=rt(),ZT=If(),Ef=typeof Yr=="object"&&Yr&&!Yr.nodeType&&Yr,Sf=Ef&&typeof kr=="object"&&kr&&!kr.nodeType&&kr,eB=Sf&&Sf.exports===Ef,Nf=eB?QT.Buffer:void 0,tB=Nf?Nf.isBuffer:void 0,rB=tB||ZT;kr.exports=rB});var Pf=y((vK,_f)=>{l();var nB=Qt(),oB=Wn(),iB=Ft(),sB="[object Arguments]",aB="[object Array]",cB="[object Boolean]",lB="[object Date]",uB="[object Error]",fB="[object Function]",dB="[object Map]",pB="[object Number]",hB="[object Object]",mB="[object RegExp]",yB="[object Set]",gB="[object String]",kB="[object WeakMap]",bB="[object ArrayBuffer]",xB="[object DataView]",TB="[object Float32Array]",BB="[object Float64Array]",CB="[object Int8Array]",OB="[object Int16Array]",AB="[object Int32Array]",vB="[object Uint8Array]",IB="[object Uint8ClampedArray]",SB="[object Uint16Array]",NB="[object Uint32Array]",Q={};Q[TB]=Q[BB]=Q[CB]=Q[OB]=Q[AB]=Q[vB]=Q[IB]=Q[SB]=Q[NB]=!0;Q[sB]=Q[aB]=Q[bB]=Q[cB]=Q[xB]=Q[lB]=Q[uB]=Q[fB]=Q[dB]=Q[pB]=Q[hB]=Q[mB]=Q[yB]=Q[gB]=Q[kB]=!1;function EB(r){return iB(r)&&oB(r.length)&&!!Q[nB(r)]}_f.exports=EB});var Li=y((SK,Ff)=>{l();function _B(r){return function(t){return r(t)}}Ff.exports=_B});var wf=y((Xr,br)=>{l();var PB=gi(),Df=typeof Xr=="object"&&Xr&&!Xr.nodeType&&Xr,Qr=Df&&typeof br=="object"&&br&&!br.nodeType&&br,FB=Qr&&Qr.exports===Df,Mi=FB&&PB.process,DB=function(){try{var r=Qr&&Qr.require&&Qr.require("util").types;return r||Mi&&Mi.binding&&Mi.binding("util")}catch(t){}}();br.exports=DB});var eo=y((_K,Lf)=>{l();var wB=Pf(),RB=Li(),Rf=wf(),Kf=Rf&&Rf.isTypedArray,KB=Kf?RB(Kf):wB;Lf.exports=KB});var zi=y((FK,Mf)=>{l();var LB=Af(),MB=Wr(),zB=dt(),VB=Zn(),jB=Jr(),qB=eo(),GB=Object.prototype,HB=GB.hasOwnProperty;function UB(r,t){var e=zB(r),n=!e&&MB(r),o=!e&&!n&&VB(r),i=!e&&!n&&!o&&qB(r),s=e||n||o||i,a=s?LB(r.length,String):[],c=a.length;for(var u in r)(t||HB.call(r,u))&&!(s&&(u=="length"||o&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||jB(u,c)))&&a.push(u);return a}Mf.exports=UB});var to=y((wK,zf)=>{l();var $B=Object.prototype;function JB(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||$B;return r===e}zf.exports=JB});var Vi=y((KK,Vf)=>{l();function WB(r,t){return function(e){return r(t(e))}}Vf.exports=WB});var qf=y((MK,jf)=>{l();var YB=Vi(),XB=YB(Object.keys,Object);jf.exports=XB});var Hf=y((VK,Gf)=>{l();var QB=to(),ZB=qf(),eC=Object.prototype,tC=eC.hasOwnProperty;function rC(r){if(!QB(r))return ZB(r);var t=[];for(var e in Object(r))tC.call(r,e)&&e!="constructor"&&t.push(e);return t}Gf.exports=rC});var Zr=y((qK,Uf)=>{l();var nC=Gn(),oC=Wn();function iC(r){return r!=null&&oC(r.length)&&!nC(r)}Uf.exports=iC});var Jf=y((HK,$f)=>{l();var sC=zi(),aC=Hf(),cC=Zr();function lC(r){return cC(r)?sC(r):aC(r)}$f.exports=lC});var Yf=y(($K,Wf)=>{l();var uC=yf(),fC=Cf(),dC=Jf();function pC(r){return uC(r,dC,fC)}Wf.exports=pC});var Zf=y((WK,Qf)=>{l();var Xf=Yf(),hC=1,mC=Object.prototype,yC=mC.hasOwnProperty;function gC(r,t,e,n,o,i){var s=e&hC,a=Xf(r),c=a.length,u=Xf(t),f=u.length;if(c!=f&&!s)return!1;for(var d=c;d--;){var p=a[d];if(!(s?p in t:yC.call(t,p)))return!1}var h=i.get(r),g=i.get(t);if(h&&g)return h==t&&g==r;var m=!0;i.set(r,t),i.set(t,r);for(var k=s;++d<c;){p=a[d];var b=r[p],C=t[p];if(n)var v=s?n(C,b,p,t,r,i):n(b,C,p,r,t,i);if(!(v===void 0?b===C||o(b,C,e,n,i):v)){m=!1;break}k||(k=p=="constructor")}if(m&&!k){var w=r.constructor,$=t.constructor;w!=$&&"constructor"in r&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof $=="function"&&$ instanceof $)&&(m=!1)}return i.delete(r),i.delete(t),m}Qf.exports=gC});var td=y((XK,ed)=>{l();var kC=Dt(),bC=rt(),xC=kC(bC,"DataView");ed.exports=xC});var nd=y((ZK,rd)=>{l();var TC=Dt(),BC=rt(),CC=TC(BC,"Promise");rd.exports=CC});var id=y((t0,od)=>{l();var OC=Dt(),AC=rt(),vC=OC(AC,"Set");od.exports=vC});var ad=y((n0,sd)=>{l();var IC=Dt(),SC=rt(),NC=IC(SC,"WeakMap");sd.exports=NC});var md=y((i0,hd)=>{l();var ji=td(),qi=Hn(),Gi=nd(),Hi=id(),Ui=ad(),pd=Qt(),xr=bi(),cd="[object Map]",EC="[object Object]",ld="[object Promise]",ud="[object Set]",fd="[object WeakMap]",dd="[object DataView]",_C=xr(ji),PC=xr(qi),FC=xr(Gi),DC=xr(Hi),wC=xr(Ui),er=pd;(ji&&er(new ji(new ArrayBuffer(1)))!=dd||qi&&er(new qi)!=cd||Gi&&er(Gi.resolve())!=ld||Hi&&er(new Hi)!=ud||Ui&&er(new Ui)!=fd)&&(er=function(r){var t=pd(r),e=t==EC?r.constructor:void 0,n=e?xr(e):"";if(n)switch(n){case _C:return dd;case PC:return cd;case FC:return ld;case DC:return ud;case wC:return fd}return t});hd.exports=er});var Cd=y((a0,Bd)=>{l();var $i=Pi(),RC=wi(),KC=hf(),LC=Zf(),yd=md(),gd=dt(),kd=Zn(),MC=eo(),zC=1,bd="[object Arguments]",xd="[object Array]",ro="[object Object]",VC=Object.prototype,Td=VC.hasOwnProperty;function jC(r,t,e,n,o,i){var s=gd(r),a=gd(t),c=s?xd:yd(r),u=a?xd:yd(t);c=c==bd?ro:c,u=u==bd?ro:u;var f=c==ro,d=u==ro,p=c==u;if(p&&kd(r)){if(!kd(t))return!1;s=!0,f=!1}if(p&&!f)return i||(i=new $i),s||MC(r)?RC(r,t,e,n,o,i):KC(r,t,c,e,n,o,i);if(!(e&zC)){var h=f&&Td.call(r,"__wrapped__"),g=d&&Td.call(t,"__wrapped__");if(h||g){var m=h?r.value():r,k=g?t.value():t;return i||(i=new $i),o(m,k,e,n,i)}}return p?(i||(i=new $i),LC(r,t,e,n,o,i)):!1}Bd.exports=jC});var Id=y((l0,vd)=>{l();var qC=Cd(),Od=Ft();function Ad(r,t,e,n,o){return r===t?!0:r==null||t==null||!Od(r)&&!Od(t)?r!==r&&t!==t:qC(r,t,e,n,Ad,o)}vd.exports=Ad});var Nd=y((f0,Sd)=>{l();var GC=Id();function HC(r,t){return GC(r,t)}Sd.exports=HC});var _d=y((k0,Ed)=>{l();function $C(r,t,e,n){for(var o=r.length,i=e+(n?1:-1);n?i--:++i<o;)if(t(r[i],i,r))return i;return-1}Ed.exports=$C});var Fd=y((x0,Pd)=>{l();function JC(r){return r!==r}Pd.exports=JC});var wd=y((B0,Dd)=>{l();function WC(r,t,e){for(var n=e-1,o=r.length;++n<o;)if(r[n]===t)return n;return-1}Dd.exports=WC});var Kd=y((O0,Rd)=>{l();var YC=_d(),XC=Fd(),QC=wd();function ZC(r,t,e){return t===t?QC(r,t,e):YC(r,XC,e)}Rd.exports=ZC});var Md=y((v0,Ld)=>{l();var eO=Kd();function tO(r,t){var e=r==null?0:r.length;return!!e&&eO(r,t,0)>-1}Ld.exports=tO});var Vd=y((S0,zd)=>{l();function rO(r,t,e){for(var n=-1,o=r==null?0:r.length;++n<o;)if(e(t,r[n]))return!0;return!1}zd.exports=rO});var qd=y((E0,jd)=>{l();var nO=Fi(),oO=Md(),iO=Vd(),sO=Ti(),aO=Li(),cO=Di(),lO=200;function uO(r,t,e,n){var o=-1,i=oO,s=!0,a=r.length,c=[],u=t.length;if(!a)return c;e&&(t=sO(t,aO(e))),n?(i=iO,s=!1):t.length>=lO&&(i=cO,s=!1,t=new nO(t));e:for(;++o<a;){var f=r[o],d=e==null?f:e(f);if(f=n||f!==0?f:0,s&&d===d){for(var p=u;p--;)if(t[p]===d)continue e;c.push(f)}else i(t,d,n)||c.push(f)}return c}jd.exports=uO});var Yi=y((P0,Gd)=>{l();var fO=Ii(),dO=vi(),pO=Si();function hO(r,t){return pO(dO(r,t,fO),r+"")}Gd.exports=hO});var Xi=y((D0,Hd)=>{l();var mO=Zr(),yO=Ft();function gO(r){return yO(r)&&mO(r)}Hd.exports=gO});var Jd=y((R0,$d)=>{l();var kO=qd(),bO=Ai(),xO=Yi(),Ud=Xi(),TO=xO(function(r,t){return Ud(r)?kO(r,bO(t,1,Ud,!0)):[]});$d.exports=TO});var Qi=y((L0,Wd)=>{l();var BO=Jn(),CO=hr();function OO(r,t,e){(e!==void 0&&!CO(r[t],e)||e===void 0&&!(t in r))&&BO(r,t,e)}Wd.exports=OO});var Xd=y((z0,Yd)=>{l();function AO(r){return function(t,e,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var c=s[r?a:++o];if(e(i[c],c,i)===!1)break}return t}}Yd.exports=AO});var Zd=y((j0,Qd)=>{l();var vO=Xd(),IO=vO();Qd.exports=IO});var op=y((en,Tr)=>{l();var SO=rt(),np=typeof en=="object"&&en&&!en.nodeType&&en,ep=np&&typeof Tr=="object"&&Tr&&!Tr.nodeType&&Tr,NO=ep&&ep.exports===np,tp=NO?SO.Buffer:void 0,rp=tp?tp.allocUnsafe:void 0;function EO(r,t){if(t)return r.slice();var e=r.length,n=rp?rp(e):new r.constructor(e);return r.copy(n),n}Tr.exports=EO});var ap=y((H0,sp)=>{l();var ip=Ri();function _O(r){var t=new r.constructor(r.byteLength);return new ip(t).set(new ip(r)),t}sp.exports=_O});var lp=y(($0,cp)=>{l();var PO=ap();function FO(r,t){var e=t?PO(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}cp.exports=FO});var fp=y((W0,up)=>{l();function DO(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t}up.exports=DO});var hp=y((X0,pp)=>{l();var wO=bt(),dp=Object.create,RO=function(){function r(){}return function(t){if(!wO(t))return{};if(dp)return dp(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}();pp.exports=RO});var Zi=y((Z0,mp)=>{l();var KO=Vi(),LO=KO(Object.getPrototypeOf,Object);mp.exports=LO});var gp=y((tL,yp)=>{l();var MO=hp(),zO=Zi(),VO=to();function jO(r){return typeof r.constructor=="function"&&!VO(r)?MO(zO(r)):{}}yp.exports=jO});var xp=y((nL,bp)=>{l();var qO=Qt(),GO=Zi(),HO=Ft(),UO="[object Object]",$O=Function.prototype,JO=Object.prototype,kp=$O.toString,WO=JO.hasOwnProperty,YO=kp.call(Object);function XO(r){if(!HO(r)||qO(r)!=UO)return!1;var t=GO(r);if(t===null)return!0;var e=WO.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&kp.call(e)==YO}bp.exports=XO});var es=y((iL,Tp)=>{l();function QO(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}Tp.exports=QO});var Cp=y((aL,Bp)=>{l();var ZO=Ci(),eA=Jn();function tA(r,t,e,n){var o=!e;e||(e={});for(var i=-1,s=t.length;++i<s;){var a=t[i],c=n?n(e[a],r[a],a,e,r):void 0;c===void 0&&(c=r[a]),o?eA(e,a,c):ZO(e,a,c)}return e}Bp.exports=tA});var Ap=y((lL,Op)=>{l();function rA(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}Op.exports=rA});var Ip=y((fL,vp)=>{l();var nA=bt(),oA=to(),iA=Ap(),sA=Object.prototype,aA=sA.hasOwnProperty;function cA(r){if(!nA(r))return iA(r);var t=oA(r),e=[];for(var n in r)n=="constructor"&&(t||!aA.call(r,n))||e.push(n);return e}vp.exports=cA});var ts=y((pL,Sp)=>{l();var lA=zi(),uA=Ip(),fA=Zr();function dA(r){return fA(r)?lA(r,!0):uA(r)}Sp.exports=dA});var Ep=y((mL,Np)=>{l();var pA=Cp(),hA=ts();function mA(r){return pA(r,hA(r))}Np.exports=mA});var Rp=y((gL,wp)=>{l();var _p=Qi(),yA=op(),gA=lp(),kA=fp(),bA=gp(),Pp=Wr(),Fp=dt(),xA=Xi(),TA=Zn(),BA=Gn(),CA=bt(),OA=xp(),AA=eo(),Dp=es(),vA=Ep();function IA(r,t,e,n,o,i,s){var a=Dp(r,e),c=Dp(t,e),u=s.get(c);if(u){_p(r,e,u);return}var f=i?i(a,c,e+"",r,t,s):void 0,d=f===void 0;if(d){var p=Fp(c),h=!p&&TA(c),g=!p&&!h&&AA(c);f=c,p||h||g?Fp(a)?f=a:xA(a)?f=kA(a):h?(d=!1,f=yA(c,!0)):g?(d=!1,f=gA(c,!0)):f=[]:OA(c)||Pp(c)?(f=a,Pp(a)?f=vA(a):(!CA(a)||BA(a))&&(f=bA(c))):d=!1}d&&(s.set(c,f),o(f,c,n,i,s),s.delete(c)),_p(r,e,f)}wp.exports=IA});var Mp=y((bL,Lp)=>{l();var SA=Pi(),NA=Qi(),EA=Zd(),_A=Rp(),PA=bt(),FA=ts(),DA=es();function Kp(r,t,e,n,o){r!==t&&EA(t,function(i,s){if(o||(o=new SA),PA(i))_A(r,t,s,e,Kp,n,o);else{var a=n?n(DA(r,s),i,s+"",r,t,o):void 0;a===void 0&&(a=i),NA(r,s,a)}},FA)}Lp.exports=Kp});var Vp=y((TL,zp)=>{l();var wA=hr(),RA=Zr(),KA=Jr(),LA=bt();function MA(r,t,e){if(!LA(e))return!1;var n=typeof t;return(n=="number"?RA(e)&&KA(t,e.length):n=="string"&&t in e)?wA(e[t],r):!1}zp.exports=MA});var qp=y((CL,jp)=>{l();var zA=Yi(),VA=Vp();function jA(r){return zA(function(t,e){var n=-1,o=e.length,i=o>1?e[o-1]:void 0,s=o>2?e[2]:void 0;for(i=r.length>3&&typeof i=="function"?(o--,i):void 0,s&&VA(e[0],e[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=e[n];a&&r(t,a,n,i)}return t})}jp.exports=jA});var Hp=y((AL,Gp)=>{l();var qA=Mp(),GA=qp(),HA=GA(function(r,t,e,n){qA(r,t,e,n)});Gp.exports=HA});var Xp=y((yM,Yp)=>{"use strict";l();Yp.exports=QA;function QA(r,t){for(var e=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)e[n++]=arguments[o++];return new Promise(function(a,c){e[n]=function(f){if(i)if(i=!1,f)c(f);else{for(var d=new Array(arguments.length-1),p=0;p<d.length;)d[p++]=arguments[p];a.apply(null,d)}};try{r.apply(t||null,e)}catch(u){i&&(i=!1,c(u))}})}});var th=y(eh=>{"use strict";l();var oo=eh;oo.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&t.charAt(e)==="=";)++n;return Math.ceil(t.length*3)/4-n};var Br=new Array(64),Zp=new Array(123);for(ot=0;ot<64;)Zp[Br[ot]=ot<26?ot+65:ot<52?ot+71:ot<62?ot-4:ot-59|43]=ot++;var ot;oo.encode=function(t,e,n){for(var o=null,i=[],s=0,a=0,c;e<n;){var u=t[e++];switch(a){case 0:i[s++]=Br[u>>2],c=(u&3)<<4,a=1;break;case 1:i[s++]=Br[c|u>>4],c=(u&15)<<2,a=2;break;case 2:i[s++]=Br[c|u>>6],i[s++]=Br[u&63],a=0;break}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0)}return a&&(i[s++]=Br[c],i[s++]=61,a===1&&(i[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))};var Qp="invalid encoding";oo.decode=function(t,e,n){for(var o=n,i=0,s,a=0;a<t.length;){var c=t.charCodeAt(a++);if(c===61&&i>1)break;if((c=Zp[c])===void 0)throw Error(Qp);switch(i){case 0:s=c,i=1;break;case 1:e[n++]=s<<2|(c&48)>>4,s=c,i=2;break;case 2:e[n++]=(s&15)<<4|(c&60)>>2,s=c,i=3;break;case 3:e[n++]=(s&3)<<6|c,i=0;break}}if(i===1)throw Error(Qp);return n-o};oo.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var nh=y((xM,rh)=>{"use strict";l();rh.exports=io;function io(){this._listeners={}}io.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this};io.prototype.off=function(t,e){if(t===void 0)this._listeners={};else if(e===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],o=0;o<n.length;)n[o].fn===e?n.splice(o,1):++o;return this};io.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<e.length;)e[o].fn.apply(e[o++].ctx,n)}return this}});var uh=y((BM,lh)=>{"use strict";l();lh.exports=oh(oh);function oh(r){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),e=new Uint8Array(t.buffer),n=e[3]===128;function o(c,u,f){t[0]=c,u[f]=e[0],u[f+1]=e[1],u[f+2]=e[2],u[f+3]=e[3]}function i(c,u,f){t[0]=c,u[f]=e[3],u[f+1]=e[2],u[f+2]=e[1],u[f+3]=e[0]}r.writeFloatLE=n?o:i,r.writeFloatBE=n?i:o;function s(c,u){return e[0]=c[u],e[1]=c[u+1],e[2]=c[u+2],e[3]=c[u+3],t[0]}function a(c,u){return e[3]=c[u],e[2]=c[u+1],e[1]=c[u+2],e[0]=c[u+3],t[0]}r.readFloatLE=n?s:a,r.readFloatBE=n?a:s}():function(){function t(n,o,i,s){var a=o<0?1:0;if(a&&(o=-o),o===0)n(1/o>0?0:2147483648,i,s);else if(isNaN(o))n(2143289344,i,s);else if(o>34028234663852886e22)n((a<<31|2139095040)>>>0,i,s);else if(o<11754943508222875e-54)n((a<<31|Math.round(o/1401298464324817e-60))>>>0,i,s);else{var c=Math.floor(Math.log(o)/Math.LN2),u=Math.round(o*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|u)>>>0,i,s)}}r.writeFloatLE=t.bind(null,ih),r.writeFloatBE=t.bind(null,sh);function e(n,o,i){var s=n(o,i),a=(s>>31)*2+1,c=s>>>23&255,u=s&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}r.readFloatLE=e.bind(null,ah),r.readFloatBE=e.bind(null,ch)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),e=new Uint8Array(t.buffer),n=e[7]===128;function o(c,u,f){t[0]=c,u[f]=e[0],u[f+1]=e[1],u[f+2]=e[2],u[f+3]=e[3],u[f+4]=e[4],u[f+5]=e[5],u[f+6]=e[6],u[f+7]=e[7]}function i(c,u,f){t[0]=c,u[f]=e[7],u[f+1]=e[6],u[f+2]=e[5],u[f+3]=e[4],u[f+4]=e[3],u[f+5]=e[2],u[f+6]=e[1],u[f+7]=e[0]}r.writeDoubleLE=n?o:i,r.writeDoubleBE=n?i:o;function s(c,u){return e[0]=c[u],e[1]=c[u+1],e[2]=c[u+2],e[3]=c[u+3],e[4]=c[u+4],e[5]=c[u+5],e[6]=c[u+6],e[7]=c[u+7],t[0]}function a(c,u){return e[7]=c[u],e[6]=c[u+1],e[5]=c[u+2],e[4]=c[u+3],e[3]=c[u+4],e[2]=c[u+5],e[1]=c[u+6],e[0]=c[u+7],t[0]}r.readDoubleLE=n?s:a,r.readDoubleBE=n?a:s}():function(){function t(n,o,i,s,a,c){var u=s<0?1:0;if(u&&(s=-s),s===0)n(0,a,c+o),n(1/s>0?0:2147483648,a,c+i);else if(isNaN(s))n(0,a,c+o),n(2146959360,a,c+i);else if(s>17976931348623157e292)n(0,a,c+o),n((u<<31|2146435072)>>>0,a,c+i);else{var f;if(s<22250738585072014e-324)f=s/5e-324,n(f>>>0,a,c+o),n((u<<31|f/4294967296)>>>0,a,c+i);else{var d=Math.floor(Math.log(s)/Math.LN2);d===1024&&(d=1023),f=s*Math.pow(2,-d),n(f*4503599627370496>>>0,a,c+o),n((u<<31|d+1023<<20|f*1048576&1048575)>>>0,a,c+i)}}}r.writeDoubleLE=t.bind(null,ih,0,4),r.writeDoubleBE=t.bind(null,sh,4,0);function e(n,o,i,s,a){var c=n(s,a+o),u=n(s,a+i),f=(u>>31)*2+1,d=u>>>20&2047,p=4294967296*(u&1048575)+c;return d===2047?p?NaN:f*(1/0):d===0?f*5e-324*p:f*Math.pow(2,d-1075)*(p+4503599627370496)}r.readDoubleLE=e.bind(null,ah,0,4),r.readDoubleBE=e.bind(null,ch,4,0)}(),r}function ih(r,t,e){t[e]=r&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24}function sh(r,t,e){t[e]=r>>>24,t[e+1]=r>>>16&255,t[e+2]=r>>>8&255,t[e+3]=r&255}function ah(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16|r[t+3]<<24)>>>0}function ch(r,t){return(r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3])>>>0}});var fh=y((exports,module)=>{"use strict";l();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var ph=y(dh=>{"use strict";l();var ps=dh;ps.length=function(t){for(var e=0,n=0,o=0;o<t.length;++o)n=t.charCodeAt(o),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(o+1)&64512)===56320?(++o,e+=4):e+=3;return e};ps.read=function(t,e,n){var o=n-e;if(o<1)return"";for(var i=null,s=[],a=0,c;e<n;)c=t[e++],c<128?s[a++]=c:c>191&&c<224?s[a++]=(c&31)<<6|t[e++]&63:c>239&&c<365?(c=((c&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,s[a++]=55296+(c>>10),s[a++]=56320+(c&1023)):s[a++]=(c&15)<<12|(t[e++]&63)<<6|t[e++]&63,a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};ps.write=function(t,e,n){for(var o=n,i,s,a=0;a<t.length;++a)i=t.charCodeAt(a),i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&((s=t.charCodeAt(a+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++a,e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128);return n-o}});var mh=y((IM,hh)=>{"use strict";l();hh.exports=ZA;function ZA(r,t,e){var n=e||8192,o=n>>>1,i=null,s=n;return function(c){if(c<1||c>o)return r(c);s+c>n&&(i=r(n),s=0);var u=t.call(i,s,s+=c);return s&7&&(s=(s|7)+1),u}}});var gh=y((NM,yh)=>{"use strict";l();yh.exports=ke;var on=Kt();function ke(r,t){this.lo=r>>>0,this.hi=t>>>0}var rr=ke.zero=new ke(0,0);rr.toNumber=function(){return 0};rr.zzEncode=rr.zzDecode=function(){return this};rr.length=function(){return 1};var ev=ke.zeroHash="\0\0\0\0\0\0\0\0";ke.fromNumber=function(t){if(t===0)return rr;var e=t<0;e&&(t=-t);var n=t>>>0,o=(t-n)/4294967296>>>0;return e&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new ke(n,o)};ke.from=function(t){if(typeof t=="number")return ke.fromNumber(t);if(on.isString(t))if(on.Long)t=on.Long.fromString(t);else return ke.fromNumber(parseInt(t,10));return t.low||t.high?new ke(t.low>>>0,t.high>>>0):rr};ke.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=~this.lo+1>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+n*4294967296)}return this.lo+this.hi*4294967296};ke.prototype.toLong=function(t){return on.Long?new on.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var Rt=String.prototype.charCodeAt;ke.fromHash=function(t){return t===ev?rr:new ke((Rt.call(t,0)|Rt.call(t,1)<<8|Rt.call(t,2)<<16|Rt.call(t,3)<<24)>>>0,(Rt.call(t,4)|Rt.call(t,5)<<8|Rt.call(t,6)<<16|Rt.call(t,7)<<24)>>>0)};ke.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};ke.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};ke.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};ke.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?e===0?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}});var Kt=y(hs=>{"use strict";l();var A=hs;A.asPromise=Xp();A.base64=th();A.EventEmitter=nh();A.float=uh();A.inquire=fh();A.utf8=ph();A.pool=mh();A.LongBits=gh();A.isNode=Boolean(typeof window<"u"&&window&&window.process&&window.process.versions&&window.process.versions.node);A.global=A.isNode&&window||typeof window<"u"&&window||typeof self<"u"&&self||hs;A.emptyArray=Object.freeze?Object.freeze([]):[];A.emptyObject=Object.freeze?Object.freeze({}):{};A.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};A.isString=function(t){return typeof t=="string"||t instanceof String};A.isObject=function(t){return t&&typeof t=="object"};A.isset=A.isSet=function(t,e){var n=t[e];return n!=null&&t.hasOwnProperty(e)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};A.Buffer=function(){try{var r=A.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch(t){return null}}();A._Buffer_from=null;A._Buffer_allocUnsafe=null;A.newBuffer=function(t){return typeof t=="number"?A.Buffer?A._Buffer_allocUnsafe(t):new A.Array(t):A.Buffer?A._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};A.Array=typeof Uint8Array<"u"?Uint8Array:Array;A.Long=A.global.dcodeIO&&A.global.dcodeIO.Long||A.global.Long||A.inquire("long");A.key2Re=/^true|false|0|1$/;A.key32Re=/^-?(?:0|[1-9][0-9]*)$/;A.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;A.longToHash=function(t){return t?A.LongBits.from(t).toHash():A.LongBits.zeroHash};A.longFromHash=function(t,e){var n=A.LongBits.fromHash(t);return A.Long?A.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))};function kh(r,t,e){for(var n=Object.keys(t),o=0;o<n.length;++o)(r[n[o]]===void 0||!e)&&(r[n[o]]=t[n[o]]);return r}A.merge=kh;A.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function bh(r){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&kh(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}A.newError=bh;A.ProtocolError=bh("ProtocolError");A.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var o=Object.keys(this),i=o.length-1;i>-1;--i)if(e[o[i]]===1&&this[o[i]]!==void 0&&this[o[i]]!==null)return o[i]}};A.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}};A.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};A._configure=function(){var r=A.Buffer;if(!r){A._Buffer_from=A._Buffer_allocUnsafe=null;return}A._Buffer_from=r.from!==Uint8Array.from&&r.from||function(e,n){return new r(e,n)},A._Buffer_allocUnsafe=r.allocUnsafe||function(e){return new r(e)}}});var Ts=y((FM,Ch)=>{"use strict";l();Ch.exports=G;var Ze=Kt(),ms,so=Ze.LongBits,xh=Ze.base64,Th=Ze.utf8;function sn(r,t,e){this.fn=r,this.len=t,this.next=void 0,this.val=e}function gs(){}function tv(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function G(){this.len=0,this.head=new sn(gs,0,0),this.tail=this.head,this.states=null}var Bh=function(){return Ze.Buffer?function(){return(G.create=function(){return new ms})()}:function(){return new G}};G.create=Bh();G.alloc=function(t){return new Ze.Array(t)};Ze.Array!==Array&&(G.alloc=Ze.pool(G.alloc,Ze.Array.prototype.subarray));G.prototype._push=function(t,e,n){return this.tail=this.tail.next=new sn(t,e,n),this.len+=e,this};function ks(r,t,e){t[e]=r&255}function rv(r,t,e){for(;r>127;)t[e++]=r&127|128,r>>>=7;t[e]=r}function bs(r,t){this.len=r,this.next=void 0,this.val=t}bs.prototype=Object.create(sn.prototype);bs.prototype.fn=rv;G.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new bs((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};G.prototype.int32=function(t){return t<0?this._push(xs,10,so.fromNumber(t)):this.uint32(t)};G.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function xs(r,t,e){for(;r.hi;)t[e++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)t[e++]=r.lo&127|128,r.lo=r.lo>>>7;t[e++]=r.lo}G.prototype.uint64=function(t){var e=so.from(t);return this._push(xs,e.length(),e)};G.prototype.int64=G.prototype.uint64;G.prototype.sint64=function(t){var e=so.from(t).zzEncode();return this._push(xs,e.length(),e)};G.prototype.bool=function(t){return this._push(ks,1,t?1:0)};function ys(r,t,e){t[e]=r&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24}G.prototype.fixed32=function(t){return this._push(ys,4,t>>>0)};G.prototype.sfixed32=G.prototype.fixed32;G.prototype.fixed64=function(t){var e=so.from(t);return this._push(ys,4,e.lo)._push(ys,4,e.hi)};G.prototype.sfixed64=G.prototype.fixed64;G.prototype.float=function(t){return this._push(Ze.float.writeFloatLE,4,t)};G.prototype.double=function(t){return this._push(Ze.float.writeDoubleLE,8,t)};var nv=Ze.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var o=0;o<t.length;++o)e[n+o]=t[o]};G.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(ks,1,0);if(Ze.isString(t)){var n=G.alloc(e=xh.length(t));xh.decode(t,n,0),t=n}return this.uint32(e)._push(nv,e,t)};G.prototype.string=function(t){var e=Th.length(t);return e?this.uint32(e)._push(Th.write,e,t):this._push(ks,1,0)};G.prototype.fork=function(){return this.states=new tv(this),this.head=this.tail=new sn(gs,0,0),this.len=0,this};G.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new sn(gs,0,0),this.len=0),this};G.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this};G.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e};G._configure=function(r){ms=r,G.create=Bh(),ms._configure()}});var vh=y((wM,Ah)=>{"use strict";l();Ah.exports=pt;var Oh=Ts();(pt.prototype=Object.create(Oh.prototype)).constructor=pt;var Lt=Kt();function pt(){Oh.call(this)}pt._configure=function(){pt.alloc=Lt._Buffer_allocUnsafe,pt.writeBytesBuffer=Lt.Buffer&&Lt.Buffer.prototype instanceof Uint8Array&&Lt.Buffer.prototype.set.name==="set"?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var o=0;o<t.length;)e[n++]=t[o++]}};pt.prototype.bytes=function(t){Lt.isString(t)&&(t=Lt._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(pt.writeBytesBuffer,e,t),this};function ov(r,t,e){r.length<40?Lt.utf8.write(r,t,e):t.utf8Write?t.utf8Write(r,e):t.write(r,e)}pt.prototype.string=function(t){var e=Lt.Buffer.byteLength(t);return this.uint32(e),e&&this._push(ov,e,t),this};pt._configure()});var Os=y((KM,_h)=>{"use strict";l();_h.exports=ce;var ht=Kt(),Cs,Nh=ht.LongBits,iv=ht.utf8;function it(r,t){return RangeError("index out of range: "+r.pos+" + "+(t||1)+" > "+r.len)}function ce(r){this.buf=r,this.pos=0,this.len=r.length}var Ih=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new ce(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new ce(t);throw Error("illegal buffer")},Eh=function(){return ht.Buffer?function(e){return(ce.create=function(o){return ht.Buffer.isBuffer(o)?new Cs(o):Ih(o)})(e)}:Ih};ce.create=Eh();ce.prototype._slice=ht.Array.prototype.subarray||ht.Array.prototype.slice;ce.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,it(this,10);return t}}();ce.prototype.int32=function(){return this.uint32()|0};ce.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Bs(){var r=new Nh(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw it(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw it(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}ce.prototype.bool=function(){return this.uint32()!==0};function ao(r,t){return(r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0}ce.prototype.fixed32=function(){if(this.pos+4>this.len)throw it(this,4);return ao(this.buf,this.pos+=4)};ce.prototype.sfixed32=function(){if(this.pos+4>this.len)throw it(this,4);return ao(this.buf,this.pos+=4)|0};function Sh(){if(this.pos+8>this.len)throw it(this,8);return new Nh(ao(this.buf,this.pos+=4),ao(this.buf,this.pos+=4))}ce.prototype.float=function(){if(this.pos+4>this.len)throw it(this,4);var t=ht.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};ce.prototype.double=function(){if(this.pos+8>this.len)throw it(this,4);var t=ht.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};ce.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw it(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)};ce.prototype.string=function(){var t=this.bytes();return iv.read(t,0,t.length)};ce.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw it(this,t);this.pos+=t}else do if(this.pos>=this.len)throw it(this);while(this.buf[this.pos++]&128);return this};ce.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};ce._configure=function(r){Cs=r,ce.create=Eh(),Cs._configure();var t=ht.Long?"toLong":"toNumber";ht.merge(ce.prototype,{int64:function(){return Bs.call(this)[t](!1)},uint64:function(){return Bs.call(this)[t](!0)},sint64:function(){return Bs.call(this).zzDecode()[t](!1)},fixed64:function(){return Sh.call(this)[t](!0)},sfixed64:function(){return Sh.call(this)[t](!1)}})}});var wh=y((MM,Dh)=>{"use strict";l();Dh.exports=nr;var Fh=Os();(nr.prototype=Object.create(Fh.prototype)).constructor=nr;var Ph=Kt();function nr(r){Fh.call(this,r)}nr._configure=function(){Ph.Buffer&&(nr.prototype._slice=Ph.Buffer.prototype.slice)};nr.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};nr._configure()});var Kh=y((VM,Rh)=>{"use strict";l();Rh.exports=an;var As=Kt();(an.prototype=Object.create(As.EventEmitter.prototype)).constructor=an;function an(r,t,e){if(typeof r!="function")throw TypeError("rpcImpl must be a function");As.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(e)}an.prototype.rpcCall=function r(t,e,n,o,i){if(!o)throw TypeError("request must be specified");var s=this;if(!i)return As.asPromise(r,s,t,e,n,o);if(!s.rpcImpl){setTimeout(function(){i(Error("already ended"))},0);return}try{return s.rpcImpl(t,e[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(c,u){if(c)return s.emit("error",c,t),i(c);if(u===null){s.end(!0);return}if(!(u instanceof n))try{u=n[s.responseDelimited?"decodeDelimited":"decode"](u)}catch(f){return s.emit("error",f,t),i(f)}return s.emit("data",u,t),i(null,u)})}catch(a){s.emit("error",a,t),setTimeout(function(){i(a)},0);return}};an.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Mh=y(Lh=>{"use strict";l();var sv=Lh;sv.Service=Kh()});var Vh=y((HM,zh)=>{"use strict";l();zh.exports={}});var Gh=y(qh=>{"use strict";l();var De=qh;De.build="minimal";De.Writer=Ts();De.BufferWriter=vh();De.Reader=Os();De.BufferReader=wh();De.util=Kt();De.rpc=Mh();De.roots=Vh();De.configure=jh;function jh(){De.util._configure(),De.Writer._configure(De.BufferWriter),De.Reader._configure(De.BufferReader)}jh()});var Uh=y((WM,Hh)=>{"use strict";l();Hh.exports=Gh()});var mm=y((dV,hm)=>{"use strict";l();var _v=/^(?:( )+|\t+)/;function Pv(r){let t=0,e=0,n=0;for(let[o,[i,s]]of r)(i>e||i===e&&s>n)&&(e=i,n=s,t=o);return t}hm.exports=r=>{if(typeof r!="string")throw new TypeError("Expected a string");let t=0,e,n,o=new Map;for(let u of r.split(/\n/g)){if(!u)continue;let f,d,p,h,g=u.match(_v);if(g===null)t=0,e="";else{f=g[0].length,g[1]?d="s":d="t",d!==e&&(t=0),e=d,p=0;let m=f-t;t=f,m===0?p++:n=d+String(m>0?m:-m),h=o.get(n),h===void 0?h=[1,0]:h=[++h[0],h[1]+p],o.set(n,h)}}let i=Pv(o),s=0,a,c="";return i!==0&&(s=Number(i.slice(1)),i[0]==="s"?(a="space",c=" ".repeat(s)):(a="tab",c="	".repeat(s))),{amount:s,type:a,indent:c}}});var zm=y((DH,Mm)=>{"use strict";l();var SS=(r,...t)=>{let e=new Set([].concat(...t));return r.filter(n=>!e.has(n))};Mm.exports=SS});l();var la;fa();function K(){return la()}function ua(r){la=r}function fa(){let r=/-/g,t="";ua(()=>aa().replace(r,t))}l();l();l();l();l();function de(r,t){return r&&(t?r[Le]===t:!!r[Le])}function da(r,t){return!de(r)||!de(t)?!1:r[Le]===t[Le]}var Le=Symbol("@@__IMMUTABLE_COLLECTION__@@");l();function Me(r,t){if(r===t||r!==r&&t!==t)return!0;if(!r||!t)return!1;if(typeof r.valueOf=="function"&&typeof t.valueOf=="function"){if(r=r.valueOf(),t=t.valueOf(),r===t||r!==r&&t!==t)return!0;if(!r||!t)return!1}return typeof r.equals=="function"?r.equals(t):!1}function cr(r,t){if(Me(r,t))return!0;if(!r||!t)return!1;if(de(r)){if(!da(r,t)||r.size!==t.size)return!1;if(r.constructor.isOrdered)return sy(r,t);if(r.constructor.isKeyed)return iy(r,t);throw new Error("Unknown collection type")}if(Array.isArray(r)||Array.isArray(t)){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(!cr(r[e],t[e]))return!1;return!0}if(typeof r=="object"||typeof t=="object"){if(typeof r!="object"||typeof t!="object")return!1;let e=Object.keys(r),n=Object.keys(t);if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(!cr(r[e[o]],t[e[o]]))return!1;return!0}return!1}function iy(r,t){let e=r.toKeysArray();for(let n=0;n<e.length;n++){let o=e[n],i=r.getByKey(o),s=t.getByKey(o);if(!i||!s||!cr(i[1],s[1]))return!1}return!0}function sy(r,t){for(let e=0;e<r.size;e++){let n=r.getByIndex(e),o=t.getByIndex(e);if(!n||!o||n[0]!==o[0]||!cr(n[1],o[1]))return!1}return!0}l();l();function Bn(r){if(typeof FinalizationRegistry=="function")return new FinalizationRegistry(r)}l();l();l();function pa(r,t){return t=Math.imul(t,3432918353),t=Math.imul(t<<15|t>>>-15,461845907),t=Math.imul(t<<13|t>>>-13,5),t=(t+3864292196|0)^r,t=Math.imul(t^t>>>16,2246822507),t=Math.imul(t^t>>>13,3266489909),t=Cn(t^t>>>16),t}function Ho(r,t){return r^t+2654435769+(r<<6)+(r>>2)|0}function Cn(r){return r>>>1&1073741824|r&3221225471}l();var On=typeof WeakRef<"u"&&typeof FinalizationRegistry<"u";l();l();var j={hashCollectionsCount:0,hashCollectionsCachedCount:0,freezeCollectionsCount:0,freezeCollectionsCachedCount:0,hashCollisionsCount:0,hashTime:0,hashValuesTotalCount:0,hashValuesCount:0,memoizeCount:0,memoizeCachedCount:0,memoizeFunctions:{}};function ay(){console.table([["# of collections hashed",j.hashCollectionsCount],["# of collections hashed cached",j.hashCollectionsCachedCount],["# of collections frozen",j.freezeCollectionsCount],["# of collections frozen cached",j.freezeCollectionsCachedCount],["# of collisions with collections",j.hashCollisionsCount],["Total time spent hashing",j.hashTime],["Average time spent hashing (ms)",j.hashTime/j.hashCollectionsCount],["# of JS values hashed",j.hashValuesTotalCount],["# of JS values hashed still allocated",j.hashValuesCount],["# of memoized calls",j.memoizeCount],["# of memoized calls that are memoized",j.memoizeCachedCount]]),console.table([["% ratio of hash caching",`${(j.hashCollectionsCachedCount*100/j.hashCollectionsCount).toFixed(2)}%`],["% ratio of memoization",`${(j.memoizeCachedCount*100/j.memoizeCount).toFixed(2)}%`]]),console.table(Object.entries(j.memoizeFunctions).filter(([,r])=>r.count>0).sort(([,r],[,t])=>t.count-r.count).map(([r,t])=>{let e=t.totalTime/t.count,n=t.totalCachedTime/t.cachedCount;return{function:r,"# of calls":t.count,"# of calls that are memoized":t.cachedCount,"Total time spent (ms)":t.totalTime,"Average time spent (ms)":e,"Worth it?":`${e>n?"\u{1F44C}":"\u274C"} ${(100*(e-n)/e).toFixed(2)}%`}}))}typeof window<"u"&&(window.logImmutableDebugPerformance=ay);l();function ha(r){return r===null?"null":r===void 0?"undefined":typeof r=="boolean"||typeof r=="number"||typeof r=="string"?typeof r:r.constructor?r.constructor.name:"unknown"}function St(r){return r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"}function ma(r){return r==null?!1:typeof r[Symbol.iterator]=="function"}var cy=Object.prototype.valueOf;function ya(r){return r.valueOf!==cy&&typeof r.valueOf=="function"?r.valueOf(r):r}function Nt(r,t){t.forEach(e=>{Array.isArray(e)?ga(r,e[0],e[1]):ga(r,e)})}function ga(r,t,e=[]){r.prototype[t]=Uo(r.prototype[t],e,`${r.name}.${t}`)}function Uo(r,t=[],e=r.name){let n=new Map,o={count:0,cachedCount:0,totalTime:0,totalCachedTime:0};return j.memoizeFunctions[e]=o,function(...i){let s=[...t.length?t.map(p=>this[p]):[this],...i];j.memoizeCount++,o.count++;let a=typeof performance>"u"?0:performance.now(),c=ly(n,s);if(c!==An){j.memoizeCachedCount++,o.cachedCount++;let p=typeof performance>"u"?0:performance.now();return o.totalCachedTime+=p-a,c}let u=typeof performance>"u"?0:performance.now(),f=r.apply(this,i),d=typeof performance>"u"?0:performance.now();return o.totalTime+=d-u,uy(n,s,f),f}}var vn=Symbol("undefined"),ka=Symbol("null"),Kr=Symbol("WEAP_STORE_KEY"),ba=Symbol("VALUE_KEY"),An=Symbol("NOSET");function ly(r,t){let e=r;for(let o of t){if(o===void 0?o=vn:o===null&&(o=ka),St(o))e=e.get(o);else{if(!e.has(Kr))return An;e=e.get(Kr).get(o)}if(!e)return An}let n=e.get(ba);return n===void 0?An:n===vn?void 0:n}function uy(r,t,e){let n=e===void 0?vn:e,o=r;for(let i of t)if(i===void 0?i=vn:i===null&&(i=ka),St(i))o.has(i)||o.set(i,new Map),o=o.get(i);else{o.has(Kr)||o.set(Kr,new WeakMap);let s=o.get(Kr);s.has(i)||s.set(i,new Map),o=s.get(i)}o.set(ba,n)}l();function $o(r){if(r===void 0)return;let t=Object.freeze(r);return Object.getOwnPropertyNames(t).forEach(e=>{t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&$o(t[e])}),t}var Jo=0,Wo=new WeakMap,Yo=new Map,yt=new Map,Lr=new Map,fy=16,xa=255;function Ba(r,t){if(St(t))return Ta(r,t);let e=ya(t);return St(e)?Ta(r,e):my(e)}var Xo=Bn(r=>{yy(r)});function Ta(r,t){if(t==null)return hy(t);if(typeof t=="boolean")return t?1108378657:1108378656;if(typeof t=="number")return py(t);if(typeof t=="symbol")return dy(t);if(t.length<fy)return Qo(t);if(!On||typeof window>"u"){if(Lr.has(t))return Lr.get(t);let n=Qo(t);return Lr.size>xa&&Lr.clear(),Lr.set(t,n),n}if(Xo==null||Xo.register(r,t),yt.has(t)){let[n,o]=yt.get(t);return o.push(new WeakRef(r)),n}let e=Qo(t);return yt.size>xa&&yt.clear(),yt.set(t,[e,[new WeakRef([r])]]),j.hashValuesTotalCount++,j.hashValuesCount=yt.size,e}function dy(r){if(Yo.has(r))return Yo.get(r);let t=Ca();return Yo.set(r,t),t}function Qo(r){let t=0;for(let e=0;e<r.length;e++)t=31*t+r.charCodeAt(e)|0;return Cn(t)}function py(r){if(r!==r||r===1/0)return 0;let t=r|0;for(t!==r&&(t^=r*4294967295);r>4294967295;)r/=4294967295,t^=r;return Cn(t)}function hy(r){return r===null?1108378658:1108378659}function my(r){if(Wo.has(r))return Wo.get(r);let t=Ca();return Wo.set(r,t),t}function Ca(){let r=++Jo;return Jo&1073741824&&(Jo=0),r}function yy(r){let t=yt.get(r);if(!t)return;let[,e]=t;for(;e.length;){if(e[0].deref())return;e.shift()}yt.delete(r),j.hashValuesCount=yt.size}var Zo=new WeakMap;function W(r){if(j.hashCollectionsCount++,Zo.has(r))return j.hashCollectionsCachedCount++,Zo.get(r);let t=typeof performance>"u"?0:performance.now(),e=gy(r);Zo.set(r,e);let n=typeof performance>"u"?0:performance.now();return j.hashTime+=n-t,e}function gy(r,t=!1){if(r.size===1/0)return 0;let e=r.constructor,n=e.isOrdered,o=e.isKeyed,i=r.size,s=n?1:0;return r.iterate((a,c)=>o?n?s=31*s+Ho(lr(r,a),lr(r,c))|0:s=s+Ho(lr(r,a),lr(r,c))|0:n?s=31*s+lr(r,a)|0:s=s+lr(r,a)|0),pa(i,s)}function lr(r,t){return de(t)?W(t):Ba(r,t)}var In=new WeakMap;function te(r,t=!1){if(!t||!On)return r;j.freezeCollectionsCount++;let e=W(r),n=ky(r,e);return n?(j.freezeCollectionsCachedCount++,n):by(e,r)}function ky(r,t){let e=In.get(r.constructor);if(!e)return;let n=e.get(t);if(n)for(let o of n){let i=o.deref();if(i){if(i.equals(r))return i;j.hashCollisionsCount++}else n.splice(n.indexOf(o),1)}}var ei=Bn(({constructor:r,hashCode:t})=>{var e;(e=In.get(r))==null||e.delete(t)});function by(r,t){let e=In.get(t.constructor);e||(e=new Map,In.set(t.constructor,e));let n=new WeakRef(t),o=e.get(r);return o||(o=[],e.set(r,o)),o.push(n),ei==null||ei.register(t,{constructor:t.constructor,hashCode:r}),t}var Mr=Symbol("list"),ti,Nn=class{constructor(t,e){if(e!==Mr)throw new Error("ImmutableList constructor is private, use ImmutableList.create() instead");this._values=t,this.size=t.length}static create(t=[]){return Nn.isList(t)?t:(de(t)&&(t=t.toValuesArray()),t.length===0?(ti=ti||te(new this([],Mr)),ti):te(new this(t,Mr)))}static isList(t){return de(t,Mr)}get(t,e=void 0){return e!==void 0&&t>=this._values.length?e:this._values[t]}getByIndex(t){if(!(t<0||t>=this._values.length))return[t,this._values[t]]}getByKey(t){return this.getByIndex(t)}update(t){return te(Sn(this,t))}set(t,e){let n=this._values.slice();return n[t]=e,this.update(n)}insert(t,e){return this.splice(t,0,e)}delete(t){return this.splice(t,1)}isEmpty(){return this._values.length===0}clear(){return this.constructor.create()}first(t=void 0){return this._values[0]||t}last(t=void 0){return this._values[this._values.length-1]||t}push(t){return Sn(this,this._values.concat([t]))}rest(){return this.slice(1)}pop(){return Sn(this,this._values.slice(0,-1))}unshift(...t){return this.withMutations(e=>{e.unshift(...t)})}shift(){return this.withMutations(t=>{t.shift()})}slice(t,e){return t===0&&e&&e>=this.size?this:this.update(this._values.slice(t,e))}take(t){return this.slice(0,Math.max(0,t))}takeLast(t){return this.slice(-Math.max(0,t))}skip(t){return t===0?this:this.slice(Math.max(0,t))}splice(t,e,...n){return this.withMutations(o=>{o.splice(t,e||0,...n)})}concat(...t){return this.update(this._values.concat(...t.map(e=>Nn.isList(e)?e._values:ma(e)?Array.from(e):e)))}join(t=","){return this._values.join(t)}reverse(){return this.withMutations(t=>{t.reverse()})}flat(t=1/0){let e=this.toArray(),n=ri(e,t);return this.update(n)}map(t){return this.constructor.create(this._values.map((e,n)=>t(e,n,this)))}flatMap(t){return this.map(t).flat()}find(t){return this._values.find((e,n)=>t(e,n,this))}findIndex(t){return this._values.findIndex((e,n)=>t(e,n,this))}filter(t){return this.update(this._values.filter((e,n)=>t(e,n,this)))}reduce(t,e){return this._values.reduce((n,o,i)=>t(n,o,i,this),e)}reduceRight(t,e){return this._values.reduceRight((n,o,i)=>t(n,o,i,this),e)}every(t){return this._values.every((e,n)=>t(e,n,this))}some(t){return this._values.some((e,n)=>t(e,n,this))}skipUntil(t){let e=this.findIndex(t);return e===-1?this.clear():this.skip(e)}skipWhile(t){let e=this.findIndex((n,o,i)=>!t(n,o,i));return e===-1?this.clear():this.skip(e)}takeWhile(t){let e=this.findIndex((n,o,i)=>!t(n,o,i));return e===-1?this:this.take(e)}takeUntil(t){return this.takeWhile((e,n,o)=>!t(e,n,o))}forEach(t){let e=0;return this._values.some((n,o)=>(e++,t(n,o,this)===!1)),e}sortBy(t){return this.update(this._values.slice().sort((e,n)=>{let o=t(e),i=t(n);return o<i?-1:o>i?1:0}))}indexOf(t,e){return this._values.indexOf(t,e)}lastIndexOf(t,e){return this._values.lastIndexOf(t,e)}includes(t,e){return this._values.includes(t,e)}findLast(t){for(let e=this._values.length-1;e>=0;e--)if(t(this._values[e],e,this))return this._values[e]}findLastEntry(t){for(let e=this._values.length-1;e>=0;e--)if(t(this._values[e],e,this))return[e,this._values[e]]}unique(){return this.update(this._values.filter((t,e,n)=>n.indexOf(t)===e))}toString(){return`List<${ha(this.first())}>{${this.size}}`}withMutations(t){let e=this.toArray();return t(e),Sn(this,e)}toArray(){return this._values.slice()}toKeysArray(){return[...this._values.keys()]}toValuesArray(){return this.toArray()}toEntriesArray(){return this.toArray().map((t,e)=>[e,t])}iterate(t){this._values.forEach(t)}equals(t){return this===t?!0:this.constructor!==t.constructor||this.size!==t.size||W(this)!==W(t)?!1:this.every((e,n)=>Me(e,t.get(n)))}hashCode(){return W(this)}*[Symbol.iterator](){yield*this._values}},x=Nn;x.isKeyed=!1,x.isOrdered=!0;x.prototype[Le]=Mr;function ri(r,t=1/0){let e=[];return r.forEach(n=>{n instanceof x?e.push(...ri(n.toArray(),t-1)):Array.isArray(n)?e.push(...ri(n,t-1)):e.push(n)}),e}function Sn(r,t){let e=Object.create(Object.getPrototypeOf(r));return e._values=t,e.size=t.length,e}l();var ni=new WeakMap,oi,Et=Symbol("map"),Wt=class{constructor(t,e){if(e!==Et)throw new Error("ImmutableMap constructor is private, use ImmutableMap.create() instead");this._map=t,this.size=this._map.size}static create(t){if(Wt.isMap(t))return t;let e=si(t);return e.size===0?(oi=oi||te(new Wt(e,Et)),oi):te(new this(e,Et))}static isMap(t){return de(t,Et)}isEmpty(){return this._map.size===0}has(t){return this._map.has(t)}get(t,e){return e!==void 0&&!this.has(t)?e:this._map.get(t)}getByIndex(t){throw new Error("Maps do not support getByIndex")}getByKey(t){if(this.has(t))return[t,this._map.get(t)]}equals(t){return this===t?!0:this.constructor!==t.constructor||this.size!==t.size||W(this)!==W(t)?!1:this.every((e,n)=>Me(e,t.get(n)))}getIn(t){if(t.length===0)throw new Error("getIn expect a path with at least one entry");let e=this;for(let n of t){if(St(e))return;e instanceof Wt||e instanceof Map?e=e.get(n):e=e[n]}return e}setIn(t,e){return this.update(ii(this._map,t,()=>e))}deleteIn(t){let e=t[t.length-1],n=t.slice(0,-1);return n.length===0?this.delete(e):this.update(ii(this._map,n,o=>{if(Wt.isMap(o))return o.delete(e);if(o instanceof Map){let i=new Map(o);return i.delete(e),i}else{let{[e]:i,...s}=o;return s}}))}set(t,e){return this.withMutations(n=>{if(n.has(t)&&Me(n.get(t),e))return!1;n.set(t,e)})}merge(t){return this.withMutations(e=>{let n=de(t)?t.toEntriesArray():Object.entries(t);for(let[o,i]of n)e.set(o,i)})}delete(t){return this.withMutations(e=>e.delete(t))}forEach(t){let e=0;for(let[n,o]of this._map){if(t(o,n,this)===!1)break;e++}return e}map(t){return this.withMutations(e=>{for(let[n,o]of e)e.set(n,t(o,n,this))})}filter(t){return this.withMutations(e=>{for(let[n,o]of e)t(o,n,this)||e.delete(n)})}some(t){for(let[e,n]of this._map)if(t(n,e,this))return!0;return!1}reduce(t,e){return this.toArray().reduce((n,[o,i])=>t(n,i,o,this),e)}every(t){for(let[e,n]of this._map)if(!t(n,e,this))return!1;return!0}concat(...t){return te(Oa(this,new Map(this.toArray().concat(...t.map(e=>e.toArray())))))}update(t){return te(Oa(this,t))}toMap(){return new Map(this._map)}toArray(){return this.toEntriesArray()}toKeysArray(){return Array.from(this._map.keys())}toValuesArray(){return Array.from(this._map.values())}toEntriesArray(){return Array.from(this._map)}toObject(){let t={};return this.forEach((e,n)=>{t[n]=e}),t}toFrozenObject(){if(ni.has(this))return ni.get(this);let t=this.toObject(),e=$o(t);return ni.set(this,e),e}isSuperset(t){return Wt.create(t).every((n,o)=>n===this.get(o))}withMutations(t){let e=this.toMap();return t(e)===!1?this:this.update(e)}iterate(t){return this._map.forEach((e,n)=>t(e,n))}hashCode(){return W(this)}},ze=Wt;ze.isKeyed=!0,ze.isOrdered=!1;ze.prototype[Le]=Et;function si(r){return r?r instanceof Map?r:de(r)?new Map(r.toEntriesArray()):Array.isArray(r)?new Map(r):r?new Map(Object.entries(r)):new Map:new Map}function ii(r,t,e){let[n,...o]=t,i=(ze.isMap(r)||r instanceof Map?r.get(n):r[n])||{},s;if(o.length===0?s=e(i):s=ii(i,o,e),ze.isMap(r))return r.set(n,s);if(r instanceof Map){let a=new Map(r);return a.set(n,s),a}else return{...r,[n]:s}}function Oa(r,t){let e=Object.create(Object.getPrototypeOf(r));return e._map=t,e.size=t.size,e}l();var ai,En=class extends ze{static isOrderedMap(t){return ze.isMap(t)&&!!t.constructor.isOrdered}static create(t=[]){let e=si(t);return e.size===0?(ai=ai||new En(e,Et),ai):te(new En(e,Et))}getByIndex(t){let e=this.toKeysArray()[t];if(e!==void 0&&this._map.has(e))return[e,this._map.get(e)]}at(t){let e=0;for(let n of this._map.values()){if(e===t)return n;e++}}slice(t,e){return this.update(new Map(this.toArray().slice(t,e)))}join(t=","){return this.toValuesArray().join(t)}iterate(t){return this._map.forEach((e,n)=>t(e,n))}equals(t){if(this===t)return!0;if(this.constructor!==t.constructor||this.size!==t.size||W(this)!==W(t))return!1;let e=this.toEntriesArray(),n=t.toEntriesArray();return e.every(([o,i],s)=>{let a=n[s][1];return i===a||Me(i,a)})}},Ae=En;Ae.isKeyed=!0,Ae.isOrdered=!0;l();var gt=Symbol("set"),Yt=Symbol("no set"),ci,Ty,Dn=class{constructor(t,e,n){this[Ty]=gt;if(n!==gt)throw new Error("ImmutableSet constructor is private, use ImmutableSet.create() instead");this._hashMap=e,this._values=t,this.size=t.size}static create(t){if(Dn.isSet(t))return t;let[e,n]=Fn(t);return e.size===0?(ci=ci||te(new Dn(e,n,gt)),ci):te(new this(e,n,gt))}static isSet(t){return de(t,gt)}getByIndex(t){if(!(t<0||t>=this._values.size))return[t,this._values[t]]}getByKey(t){return this.getByIndex(t)}isEmpty(){return this._values.size===0}update(t){let[e,n]=Fn(t);return te(_n(this,e,n))}get(t){return this._values[t]}has(t){return Pn(this._values,this._hashMap,t)!==Yt}deref(t){let e=Pn(this._values,this._hashMap,t);return e===Yt?void 0:e}equals(t){return this===t?!0:this.constructor!==t.constructor||this.size!==t.size||W(this)!==W(t)?!1:this.every(e=>t.has(e))}find(t){let e=0;for(let n of this._values){if(t(n,e,this))return n;e++}}add(t){return this.has(t)?this:this.withHashedMutations((e,n)=>{e.add(t),ur(n,t)})}delete(t){let e=Pn(this._values,this._hashMap,t);return e===Yt?this:this.withHashedMutations((n,o)=>{n.delete(e),Aa(o,e)})}clear(){return this.update([])}union(t){return this.withHashedMutations((e,n)=>{let o=!1;return t._values.forEach(i=>{this.has(i)||(o=!0,e.add(i),ur(n,i))}),o})}intersect(t){return this.withHashedMutations((e,n)=>{let o=!1;return e.forEach(i=>{t.has(i)||(o=!0,e.delete(i),Aa(n,i))}),o})}filter(t){let e=new Set,n=new Map;return this.forEach((o,i)=>{t(o,i,this)&&(e.add(o),ur(n,o))}),te(_n(this,e,n))}toSet(){return new Set(this._values)}toArray(){return[...this._values]}forEach(t){let e=0;for(let n of this._values){if(t(n,e,this)===!1)break;e++}return e}every(t){let e=0;for(let n of this._values){if(!t(n,e,this))return!1;e++}return!0}some(t){return this.toArray().some((e,n)=>t(e,n,this))}reduce(t,e){return this.toArray().reduce((n,o,i)=>t(n,o,i,this),e)}map(t){let e=new Set,n=new Map;return this.forEach((o,i)=>{let s=t(o,i,this);e.add(s),ur(n,s)}),te(_n(this,e,n))}withMutations(t){let e=this.toSet();return t(e)===!1?this:this.update(e)}withHashedMutations(t){let e=this.toSet(),n=xy(this._hashMap);return t(e,n)===!1?this:_n(this,e,n)}iterate(t){this.forEach((e,n)=>t(e,n))}toKeysArray(){return[...this.toArray().keys()]}toValuesArray(){return this.toArray()}toEntriesArray(){return this.toArray().map((t,e)=>[e,t])}hashCode(){return W(this)}},I=Dn;Ty=Le,I.isKeyed=!1,I.isOrdered=!1;I.prototype[Le]=gt;function Fn(r){if(!r)return[new Set,new Map];if(r instanceof Set)return[r,va([...r])];de(r)&&(r=r.toValuesArray());let t=new Set,e=new Map;for(let n of r)t.size>0&&Pn(t,e,n)!==Yt||(t.add(n),ur(e,n));return[t,e]}function _n(r,t,e=va([...t.values()])){let n=Object.create(Object.getPrototypeOf(r));return n._values=t,n._hashMap=e,n.size=t.size,n}function va(r){let t=new Map;return r.forEach(e=>{ur(t,e)}),t}function ur(r,t){if(de(t)){let e=W(t),n=r.get(e);n||(n=new Set,r.set(e,n)),n.add(t)}}function Aa(r,t){if(de(t)){let e=W(t),n=r.get(e);n&&(n.delete(t),n.size===0&&r.delete(e))}}function xy(r){let t=new Map;return r.forEach((e,n)=>{t.set(n,new Set(e))}),t}function Pn(r,t,e){if(r.has(e))return e;if(!de(e))return Yt;let o=W(e),i=t.get(o);if(!i)return Yt;for(let s of i)if(s.equals(e))return s;return Yt}l();var li,wn=class extends I{static create(t=[]){let[e,n]=Fn(t);return e.size===0?(li=li||new wn(e,n,gt),li):te(new wn(e,n,gt))}static isOrderedSet(t){return I.isSet(t)&&!!t.constructor.isOrdered}slice(t,e){return t===0&&e>=this.size?this:this.update(this.toArray().slice(t,e))}equals(t){if(this===t)return!0;if(this.constructor!==t.constructor||this.size!==t.size||W(this)!==W(t))return!1;let e=this.toValuesArray(),n=t.toValuesArray();return e.every((o,i)=>{let s=n[i];return o===s||Me(o,s)})}},Ve=wn;Ve.isKeyed=!1,Ve.isOrdered=!0;l();var ui=Symbol("map");function ie(r){let t=Object.keys(r);class e{constructor(o,i){if(i!==ui)throw new Error(`${this.constructor.name} constructor is private, use ${this.constructor.name}.create() instead`);this._values=o}static createRecord(o={}){let i=new this(o,ui);return te(i)}getByIndex(o){if(!(o<0||o>=t.length))return this.getByKey(t[o])}getByKey(o){if(t.includes(o))return[o,this.get(o)]}get size(){return t.length}get(o){return o in this._values?this._values[o]:r[o]}set(o,i){return Me(this.get(o),i)?this:this.merge({[o]:i})}delete(o){let{[o]:i,...s}=this._values;return te(Ia(this,s))}merge(o){return te(Ia(this,{...this._values,...o}))}toObject(){let o={};return t.forEach(i=>{o[i]=this.get(i)}),o}iterate(o){t.forEach(i=>o(this.get(i),i))}equals(o){if(this===o)return!0;if(this.constructor!==o.constructor||this.size!==o.size||W(this)!==W(o))return!1;for(let i of t)if(!Me(this.get(i),o.get(i)))return!1;return!0}toKeysArray(){return[...t]}toValuesArray(){return t.map(o=>this.get(o))}toEntriesArray(){return t.map(o=>[o,this.get(o)])}hashCode(){return W(this)}}for(let n of t)Object.defineProperty(e.prototype,n,{enumerable:!0,get(){return this.get(n)},set(){throw new Error("Cannot set a property on a Record")}});return e.prototype[Le]=ui,e}function Ia(r,t){let e=Object.create(Object.getPrototypeOf(r));return e._values=t,e}l();var q=class extends ze{};l();var ja=oe(_a());l();var Rn=class{constructor(t,e){this.ownerKey=t,this.m=new Map;for(let n of e)for(let o of n){if(this.m.get(o[0]))throw new Error(`Key "${o[0]}" is already indexed in the LookupIndex, it may indicate a duplicated key in the nodes`);this.m.set(o[0],o[1])}}get(t){let e=[],n=t;for(;n!==this.ownerKey;){let o=this.m.get(n);if(!o)return;n=o.parentKey,e.unshift(o.index)}return Object.freeze(e)}keys(){return this.m.keys()}};function Cy(r,t){let e=Math.min(r.length,t.length);for(let n=0;n<e;n++){if(r[n]>t[n])return 1;if(r[n]<t[n])return-1}return r.length===t.length?0:r.length>t.length?1:-1}function Pa(r,t){return Cy(r,t)===-1}l();var pi=oe(Fa()),Oy=55296,Ay=57343,vy=/\s/,Iy=/['\u2018\u2019]/,Sy=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function Ny(r){return Oy<=r&&r<=Ay}function Da(r,t){if(vy.test(r))return!1;if(Iy.test(r)){let e=t.charAt(0),n=hi(e);e=t.slice(0,n);let o=t.slice(n);if(Da(e,o))return!0}return!Sy.test(r)}function hi(r){return Ny(r.charCodeAt(0))?2:1}function wa(r){let t=r.charAt(0);return hi(t)}function Ra(r,t){return r=r.slice(0,t),r=pi.default.reverse(r),wa(r)}function Ka(r,t){return r=r.slice(t),wa(r)}function La(r){let t=0,e=0,n=!1;for(;;){let o=r.charAt(e);if(!o)break;let i=hi(o);o=r.slice(e,e+i);let s=r.slice(e+i);if(Da(o,s))n=!0,t+=i;else if(!n)t+=i;else break;e+=i}return t}function Ma(r,t){return r=r.slice(0,t),r=pi.default.reverse(r),La(r)}function za(r,t){return r=r.slice(t),La(r)}l();l();var L={BLOCK:"@@__SLATE_BLOCK__@@",CHANGE:"@@__SLATE_CHANGE__@@",CHARACTER:"@@__SLATE_CHARACTER__@@",DOCUMENT:"@@__SLATE_DOCUMENT__@@",FRAGMENT:"@@__SLATE_DOCUMENT__@@",HISTORY:"@@__SLATE_HISTORY__@@",INLINE:"@@__SLATE_INLINE__@@",LEAF:"@@__SLATE_LEAF__@@",MARK:"@@__SLATE_MARK__@@",SELECTION:"@@__SLATE_SELECTION__@@",OPERATION:"@@__SLATE_OPERATION__@@",TEXT_RANGE:"@@__SLATE_TEXT_RANGE__@@",BLOCK_RANGE:"@@__SLATE_BLOCK_RANGE__@@",SCHEMA:"@@__SLATE_SCHEMA__@@",TEXT:"@@__SLATE_TEXT__@@",VALUE:"@@__SLATE_VALUE__@@"};function me(r,t){return!!(t&&t[L[r]])}l();function ve(r){return me("BLOCK",r)}function Ln(r){return me("INLINE",r)}function Mn(r){return!!(r&&r[L.TEXT_RANGE])}function Vr(r){return me("BLOCK_RANGE",r)}function _t(r){return Mn(r)}function _(r){return Vr(r)}function mi(r){return"anchorBlock"in r||"focusBlock"in r}function Va(r,t){return Vr(r)!==mi(t)}var Ey=Oe("slate:node");function kt(r,t){return r.push(...t),r}var ft=class extends ie({key:"",isVoid:!1,type:void 0,data:q.create(),fragment:void 0,fragments:Ae.create(),nodes:x.create()}){isText(){return!1}isBlock(){return this.object==="block"}isInline(){return this.object==="inline"}isDocument(){return this.object==="document"}isFragment(){return this.object==="fragment"}getLookupIndex(){return new Rn(this.key,this.getIndexPairs())}getIndexPairs(){if(!this.nodes&&!this.fragments)return[];let t=[];t.length=this.nodes.size+(this.isBlock()?this.fragments.size:0);let e=[t];return this.nodes.forEach((n,o)=>{if(t[o]=[n.key,{index:o,parentKey:this.key}],n.isText())return;let i=n.getIndexPairs();kt(e,i)}),this.fragments&&this.fragments.size>0&&this.fragments.toValuesArray().forEach((n,o)=>{let i=this.nodes.size+o;t[i]=[n.key,{index:i,parentKey:this.key}];let s=n.getIndexPairs();kt(e,s)}),e}getByPath(t){return t.reduce((e,n)=>{if(!e||!e.nodes&&!e.fragments)return null;if(n<e.nodes.size)return e.nodes.get(n);{let o=e.fragments.toArray(),i=n-e.nodes.size;return o[i]?o[i][1]:null}},this)}getPath(t){return t===this.key?[]:this.getLookupIndex().get(t)||null}getByKey(t){let e=this.getPath(t);return e?this.getByPath(e):null}areDescendantsSorted(t,e){let n=this.getPath(t),o=this.getPath(e);return!n||!o?null:Pa(n,o)}assertChild(t){let e=this.getChild(t);if(!e)throw new Error(`Could not find a child node with key "${t}".`);return e}assertDescendant(t){let e=this.getDescendant(t);if(!e)throw new Error(`Could not find a descendant node with key "${t}".`);return e}assertNode(t){let e=this.getNode(t);if(!e)throw new Error(`Could not find a node with key "${t}".`);return e}assertBlock(t){let e=this.assertNode(t);if(e.object!=="block")throw new Error(`Node "${t}" is not a block.`);return e}assertPath(t){let e=this.getByPath(t);if(!e)throw new Error(`Could not find a descendant at path "${t}".`);return e}filterDescendants(t,e){let n=[];return this.forEachDescendant(o=>{t(o)&&n.push(o)},e),x.create(n)}findDescendant(t){let e=null;return this.forEachDescendant(n=>{if(t(n))return e=n,!1}),e}forEachDescendant(t,e){let n;return this.nodes.forEach(o=>{if(t(o)===!1)return n=!1,!1;if(o.object!=="text")return n=o.forEachDescendant(t,e),n}),e!=null&&e.withFragments&&(this.isBlock()||this.isInline())&&this.fragments.toValuesArray().forEach(o=>t(o)===!1?(n=!1,!1):o.forEachDescendant(t,e)),n}getAncestors(t){if(t===this.key)return x.create();let e=this.getPath(t);if(!e)return null;let o=e.map((i,s)=>e.slice(0,s)).map(i=>this.getByPath(i));return x.create(o)}getFragmentAncestors(t){if(t===this.key)return x.create();let e=this.getPath(t);if(!e)return null;let n=e.map((s,a)=>e.slice(0,a)),o=x.create(),i=null;for(let s=n.length-1;s>=0;s--){let a=this.getByPath(n[s]);if(a&&(a.isBlock()||a.isInline())&&i!==null&&a.fragments.some(u=>u.key===i))break;i=a.key,o=o.unshift(a)}return o}getBlocks(){let t=this.getBlocksAsArray();return x.create(t)}getBlocksAsArray(){return this.nodes.reduce((t,e)=>(e.object!=="block"||(e.isLeafBlock()||kt(t,e.getBlocksAsArray()),t.push(e)),t),[])}getLeafBlocks(){let t=this.getLeafBlocksAsArray();return x.create(t)}getLeafBlocksAsArray(){return this.nodes.reduce((t,e)=>e.object!=="block"?t:e.isLeafBlock()?(t.push(e),t):kt(t,e.getLeafBlocksAsArray()),[])}getBlocksAtRange(t){let e=this.getBlocksAtRangeAsArray(t);return x.create(e).unique()}getBlocksAtRangeAsArray(t){if(t=t.normalize(this),t.isUnset)return[];let{startKey:e,endKey:n}=t,o=this.getClosestBlock(e);if(e===n)return[o];let i=this.getClosestBlock(n),s=this.getBlocksAsArray(),a=s.indexOf(o),c=s.indexOf(i);return s.slice(a,c+1)}getBlocksByType(t,e=!1){let n=this.getBlocksByTypeAsArray(t,e);return x.create(n)}getBlocksByTypeAsArray(t,e=!1){let n=this.nodes.reduce((o,i)=>i.object!=="block"||(i.type===t&&o.push(i),i.isLeafBlock()&&!e)?o:kt(o,i.getBlocksByTypeAsArray(t,e)),[]);return e&&this.fragments&&n.push(...this.fragments.reduce((o,i)=>o.concat(i.nodes.reduce((s,a)=>(a.object!=="block"||(a.type===t&&s.push(a),a.isLeafBlock()&&!e)||s.push(...a.getBlocksByTypeAsArray(t,e)),s),[])),[])),n}getChild(t){let e=this.getChildIndex(t);return e>=0?this.nodes.get(e):null}getChildIndex(t){let e=this.getPath(t);return!e||e.length!==1?-1:e[0]}getClosest(t,e){let n=this.getAncestors(t);if(!n)throw new Error(`Could not find a descendant node with key "${t}".`);return n.rest().findLast(e)}getClosestInFragment(t,e){let n=this.getFragmentAncestors(t);if(!n)throw new Error(`Could not find a descendant node with key "${t}".`);return n.rest().findLast(e)}getClosestBlock(t){return this.getClosest(t,e=>e.object==="block")}getClosestInline(t){return this.getClosest(t,e=>e.object==="inline")}getClosestVoid(t){return this.getClosestInFragment(t,e=>e.isVoid)}getClosestFragment(t){return this.getClosest(t,e=>e.object==="fragment")}getClosestNonFragment(t){let e=this.getAncestors(t);return e&&e.takeUntil(o=>o.object==="fragment").last()||null}getFragmentParent(t){let e=this.getFragmentAncestors(t);return!e||e.isEmpty()?null:e.first()}getCommonAncestor(t,e){if(t===this.key)return this;if(e===this.key)return this;this.assertDescendant(t),this.assertDescendant(e);let n=x.create(),o=this.getParent(t),i=this.getParent(e);for(;o;)n=n.push(o),o=this.getParent(o.key);for(;i;){if(n.includes(i))return i;i=this.getParent(i.key)}return null}getDepth(t,e=1){return this.assertDescendant(t),this.hasChild(t)?e:this.getFurthestAncestor(t).getDepth(t,e+1)}getDescendant(t){let e=this.getPath(t);return e?this.getDescendantAtPath(e):null}getDescendantAtPath(t){return t.length<1?null:this.getByPath(t)}getFirstText(){let t=null,e=this.nodes.find(n=>n.object==="text"?!0:(t=n.getFirstText(),t));return t||e}getFurthest(t,e){let n=this.getAncestors(t);if(!n)throw new Error(`Could not find a descendant node with key "${t}".`);return n.rest().find(e)}getFurthestBlock(t){return this.getFurthest(t,e=>e.object==="block")}getFurthestInline(t){return this.getFurthest(t,e=>e.object==="inline")}getFurthestAncestor(t){let e=this.getPath(t);return e?this.getByPath(e.slice(0,1)):null}getFurthestOnlyChildAncestor(t){let e=this.getAncestors(t);if(!e)throw new Error(`Could not find a descendant node with key "${t}".`);let n=e.shift().reverse().takeUntil(o=>o.nodes.size>1).last();return n||null}getInlinesAtRange(t){let e=this.getInlinesAtRangeAsArray(t);return x.create(e).unique()}getInlinesAtRangeAsArray(t){return t=t.normalize(this),t.isUnset?[]:this.getTextsAtRangeAsArray(t).map(e=>this.getClosestInline(e.key)).filter(e=>e)}getKeysAsArray(){return[...this.getLookupIndex().keys()]}getKeys(){let t=this.getKeysAsArray();return I.create(t)}getLastText(){let t=null,e=this.nodes.findLast(n=>n.object==="text"?!0:(t=n.getLastText(),t));return t||e}getMarks(){let t=this.getMarksAsArray();return I.create(t)}getOrderedMarks(){let t=this.getMarksAsArray();return Ve.create(t)}getMarksAsArray(){let t=[];return this.nodes.forEach(e=>{kt(t,e.getMarksAsArray())}),t}getMarksAtRange(t){return I.create(this.getOrderedMarksAtRange(t))}getInsertMarksAtRange(t){if(t=t.normalize(this),t.isUnset)return I.create();if(t.isCollapsed)return this.getMarksAtPosition(t.startKey,t.startOffset);let{startKey:e,startOffset:n}=t,o=this.getDescendant(e);return!o||o.object!=="text"?I.create():o.getMarksAtIndex(n+1)}getOrderedMarksAtRange(t){if(t=t.normalize(this),t.isUnset)return Ve.create();if(t.isCollapsed)return Ve.create(this.getMarksAtPosition(t.startKey,t.startOffset));let{startKey:e,startOffset:n,endKey:o,endOffset:i}=t;return this.getOrderedMarksBetweenPositions(e,n,o,i)}getOrderedMarksBetweenPositions(t,e,n,o){if(t===n)return this.getDescendant(t).getMarksBetweenOffsets(e,o);let i=this.getTextsBetweenPositionsAsArray(t,n);return Ve.create().withMutations(s=>{i.forEach(a=>{let c;a.key===t?c=a.getMarksBetweenOffsets(e,a.text.length):a.key===n?c=a.getMarksBetweenOffsets(0,o):c=a.getMarks(),c.forEach(u=>{s.add(u)})})})}getActiveMarksAtRange(t){if(t=t.normalize(this),t.isUnset)return I.create();if(t.isCollapsed)return this.getMarksAtPosition(t.startKey,t.startOffset);let{startKey:e,endKey:n,startOffset:o,endOffset:i}=t,s=this.getDescendant(e);if(e!==n){for(;e!==n&&i===0;){let p=this.getPreviousText(n);n=p.key,i=p.text.length}for(;e!==n&&o===s.text.length;)s=this.getNextText(e),e=s.key,o=0}if(e===n)return s.getActiveMarksBetweenOffsets(o,i);let a=s.getActiveMarksBetweenOffsets(o,s.text.length);if(a.size===0)return I.create();let u=this.getDescendant(n).getActiveMarksBetweenOffsets(0,i),f=a.intersect(u);if(f.size===0)return f;let d=this.getNextText(e);for(;d.key!==n;){if(d.text.length!==0&&(f=f.intersect(d.getActiveMarks()),f.size===0))return I.create();d=this.getNextText(d.key)}return f}getMarksAtPosition(t,e){let o=this.getDescendant(t).getMarksAtIndex(e);if(e!==0)return o;let i=this.getClosestBlock(t);if(i.text==="")return o;let s=this.getPreviousText(t);return s?i.hasDescendant(s.key)?s.getMarksAtIndex(s.text.length):o:I.create()}getMarksByType(t){let e=this.getMarksByTypeAsArray(t);return I.create(e)}getOrderedMarksByType(t){let e=this.getMarksByTypeAsArray(t);return Ve.create(e)}getMarksByTypeAsArray(t){return this.nodes.reduce((e,n)=>n.object==="text"?kt(e,n.getMarksAsArray().filter(o=>o.type===t)):kt(e,n.getMarksByTypeAsArray(t)),[])}getNextBlock(t){let e=this.assertDescendant(t),n;e.object==="block"?n=e.getLastText():n=this.getClosestBlock(t).getLastText();let o=this.getNextText(n.key);return o?this.getClosestBlock(o.key):null}getNextSibling(t){let e=this.getParent(t);if(!e)throw new Error(`Could not find a parent node for key "${t}".`);let n=e.nodes.skipUntil(o=>o.key===t);if(n.size===0)throw new Error(`Could not find a child node with key "${t}".`);return n.get(1)||null}getNextText(t,e=!1){let n=e?this:this.getFragmentParent(t);return n&&n.getTexts(e).skipUntil(o=>o.key===t).get(1)||null}getNextTextAfterNode(t,e=!1){let n=this.assertNode(t);if(n.object==="text")return this.getNextText(n.key,e);let o=e?this:this.getFragmentParent(t);return o&&o.getTexts(e).skipUntil(i=>n.hasDescendant(i.key)).skipUntil(i=>!n.hasDescendant(i.key)).get(0)||null}getNode(t){return this.key===t?this:this.getDescendant(t)}getNodeAtPath(t){return t.length>0?this.getDescendantAtPath(t):this}getOffset(t){this.assertDescendant(t);let e=this.getFurthestAncestor(t),n=this.nodes.takeUntil(o=>o===e).reduce((o,i)=>o+i.text.length,0);return this.hasChild(t)?n:n+e.getOffset(t)}getOffsetAtRange(t){if(t=t.normalize(this),t.isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(t.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");let{startKey:e,startOffset:n}=t;return this.getOffset(e)+n}getParent(t){if(this.key===t)return null;let e=this.getPath(t);return e?this.getByPath(e.slice(0,-1)):null}refindPath(t,e){let n=this.getByPath(t);return n&&n.key===e?t:this.getPath(e)}refindNode(t,e){let n=this.getByPath(t);return n&&n.key===e?n:this.getByKey(e)}getPreviousBlock(t){let e=this.assertDescendant(t),n;e.object==="block"?n=e.getFirstText():n=this.getClosestBlock(t).getFirstText();let o=this.getPreviousText(n.key);return o?this.getClosestBlock(o.key):null}getPreviousSibling(t){let e=this.getParent(t),n=e.nodes.takeUntil(o=>o.key===t);if(n.size===e.nodes.size)throw new Error(`Could not find a child node with key "${t}".`);return n.last()}getPreviousText(t,e=!1){let n=e?this:this.getFragmentParent(t);return n&&n.getTexts(e).takeUntil(o=>o.key===t).last()||null}getPreviousTextBeforeNode(t,e=!1){let n=this.assertNode(t);if(n.object==="text")return this.getPreviousText(n.key,e);let o=e?this:this.getFragmentParent(t);return o&&o.getTexts(e).takeUntil(i=>n.hasDescendant(i.key)).last()||null}getSelectionIndexes(t,e=!0){if(!e||_(t)||t.isUnset)return null;let{startKey:n,endKey:o}=t;if(n===o){let a=this.getFurthestAncestor(n),c=a?this.getChildIndex(a.key):null;return{start:c,end:c+1}}let i=null,s=null;return this.nodes.forEach((a,c)=>(a.object==="text"?(i==null&&a.key===n&&(i=c),s==null&&a.key===o&&(s=c+1)):(i==null&&a.hasDescendant(n)&&(i=c),s==null&&a.hasDescendant(o)&&(s=c+1)),i==null||s==null)),e&&i==null&&(i=0),e&&s==null&&(s=this.nodes.size),i==null?null:{start:i,end:s}}getText(t="",e=""){let n=t!==e&&!this.isInline()&&!this.isText()&&this.nodes.some(o=>o.object==="block")?t:e;return this.nodes.toArray().map(o=>o.getText(t,e)).join(n)}getTextAtOffset(t){if(t===0)return this.getFirstText();if(t===this.text.length)return this.getLastText();if(t<0||t>this.text.length)return null;let e=0;return this.getTexts().find((n,o,i)=>(e+=n.text.length,e>t))}getTextDirection(){let t=(0,ja.default)(this.text);return t==="neutral"?void 0:t}getTexts(t=!0){let e=this.getTextsAsArray(t);return x.create(e)}getTextsAsArray(t){let e=[];return this.nodes.toArray().concat(t&&(this.isBlock()||this.isInline())?this.fragments.toValuesArray():[]).forEach(n=>{n.object==="text"?e.push(n):kt(e,n.getTextsAsArray(t))}),e}getTextsAtRange(t){if(t=t.normalize(this),_(t)){let{anchorBlock:o,focusBlock:i}=t;return x.create(this.getTextsBetweenPositionsAsArray(o,i))}if(t.isUnset)return x.create();let{startKey:e,endKey:n}=t;return x.create(this.getTextsBetweenPositionsAsArray(e,n))}getTextsBetweenPositionsAsArray(t,e){let n=this.getDescendant(t);if(!n.isText())throw new Error(`Expected "${t}" to be a text`);if(t===e)return[n];let o=this.getDescendant(e);if(!o.isText())throw new Error(`Expected "${e}" to be a text`);let i=this.getTextsAsArray(),s=i.indexOf(n),a=i.indexOf(o,s);return i.slice(s,a+1)}getTextsAtRangeAsArray(t){if(t=t.normalize(this),t.isUnset)return[];let{startKey:e,endKey:n}=t;return this.getTextsBetweenPositionsAsArray(e,n)}hasChild(t){return!!this.getChild(t)}hasBlocks(t){let e=this.assertNode(t);return!!(e.nodes&&e.nodes.find(n=>n.object==="block"))}hasInlines(t){let e=this.assertNode(t);return!!(e.nodes&&e.nodes.find(n=>n.isInline||n.isText))}hasDescendant(t){let e=this.getPath(t);return e?e.length>0:!1}hasNode(t){return!!this.getNode(t)}hasNodeKeyConflict(t){if(this.key===t.key||this.hasNode(t.key))return!0;if(t.object==="text")return!1;let e=t.getKeysAsArray(),n=this.getKeysAsArray();return e.some(o=>n.includes(o))}hasVoidParent(t){return!!this.getClosestVoid(t)}isInFragment(t){var e;return((e=this.getFragmentParent(t))==null?void 0:e.object)==="fragment"}setData(t,e){return this.merge({data:this.data.setIn(t,e)})}insertArrayData(t,e,n){let o=this.data.getIn(t);if(!Array.isArray(o))return this;let i=n>=-1?n:n+1,s=n===-1?o.concat(e):[...o.slice(0,i),e,...o.slice(i)];return this.merge({data:this.data.setIn(t,s)})}removeArrayData(t,e){let n=this.data.getIn(t);if(!Array.isArray(n))return this;let o=n.filter(i=>i!==e);return this.merge({data:this.data.setIn(t,o)})}removeData(t){return this.merge({data:this.data.deleteIn(t)})}insertNode(t,e){e.object!=="text"&&(e=e.mapDescendants(o=>this.hasNode(o.key)?o.regenerateKey():o));let n=this.nodes.insert(t,e);return this.set("nodes",n)}isInRange(t){t=t.normalize(this);let e=this,{startKey:n,endKey:o,isCollapsed:i}=t;if(e.key===n||e.key===o||e.hasDescendant(n)||e.hasDescendant(o))return!0;if(i)return!1;let s=e.getTextsAtRange(t),a=!1;return s.forEach(c=>(e.hasDescendant(c.key)&&(a=!0),a)),a}isLeafBlock(){return this.object==="block"&&this.nodes.every(t=>t.object!=="block")}isLeafInline(){return this.object==="inline"&&this.nodes.every(t=>t.object!=="inline")}mergeNode(t,e){let n=this,o=n.nodes.get(t),i=n.nodes.get(e);if(o.object!==i.object)throw new Error(`Tried to merge two nodes of different objects: "${o.object}" and "${i.object}".`);if(o.object==="text")o=o.mergeText(i);else{let s=o.nodes.concat(i.nodes);o=o.set("nodes",s)}return n.removeNode(e).removeNode(t).insertNode(t,o)}mapChildren(t){let{nodes:e}=this;return e.forEach((n,o)=>{let i=t(n,o,this.nodes);i!==n&&(e=e.set(i.key,i))}),this.merge({nodes:e})}mapDescendants(t){let e=[],n,o=!1;return this.nodes&&this.nodes.forEach((i,s)=>{let a=i;a.object!=="text"&&(a=a.mapDescendants(t)),a=t(a,s,this.nodes),a&&e.push(a),a!==i&&(o=!0)}),(this.isBlock()||this.isInline())&&(n=[],this.fragments.toValuesArray().forEach((i,s)=>{let a=i;a=a.mapDescendants(t),a=t(a,s,this.fragments),a&&n.push(a),a!==i&&(o=!0)})),o?this.merge({nodes:x.create(e),...n?{fragments:Ae.create(n.map(i=>[i.fragmentKey,i]))}:{}}):this}regenerateKey(){let t=K();return this.merge({key:t})}regenerateTextKeys(){return this.mapDescendants(t=>t.object==="text"?t.regenerateKey():t)}regenerateAllKeys(){return this.regenerateKey().mapDescendants(e=>e.regenerateKey())}removeDescendant(t){let e=this,n=e.getParent(t);if(!n)throw new Error(`Could not find a descendant node with key "${t}".`);let o=n.getChildIndex(t),i=n.nodes.delete(o);return n=n.merge({nodes:i}),e=e.updateNode(n),e}removeNode(t){let e=this.nodes.delete(t);return this.merge({nodes:e})}splitNode(t,e,n=K()){let o=this,i=o.nodes.get(t),s,a;if(i.object==="text")[s,a]=i.splitText(e);else{let u=i.nodes.take(e),f=i.nodes.skip(e);s=i.merge({nodes:u}),a=i.merge({nodes:f})}if(s.get("key")===n){let u=K();Ey.warning(`Passed key "${n}" is identical to the source node one. Generated a new one "${u}"."`),a=a.set("key",u)}else a=a.set("key",n);return o.removeNode(t).insertNode(t,a).insertNode(t,s)}updateNode(t){if(t.key===this.key)return t;let e=this.assertDescendant(t.key);return this.getAncestors(t.key).reverse().forEach(o=>{let{nodes:i,fragments:s}=o,a=o.getChildIndex(e.key);e=o,t.object==="fragment"&&o.fragments.has(t.fragmentKey)?(s=s.set(t.fragmentKey,t),o=o.set("fragments",s)):(i=i.set(a,t),o=o.set("nodes",i)),t=o}),t}setFragment(t){let e=this.fragments.set(t.fragmentKey,t);return this.merge({fragments:e})}insertFragment(t,e){if(this.hasFragment(t.fragmentKey)){if(t.fragment)throw new Error("Named fragment already exist");t=t.regenerateKey()}if(e>this.fragments.size)throw new Error(`The provided index (${e}) cannot be greater than the size of the map (${this.fragments.size})`);if(e===this.fragments.size)return this.setFragment(t);let n=this.fragments.slice(0,e),o=this.fragments.slice(e),i=n.set(t.fragmentKey,t).concat(o);return this.merge({fragments:i})}hasFragment(t){return this.fragments.has(t)}getFragmentByKey(t){return this.fragments.get(t)}removeFragmentByKey(t){let e=this.fragments.delete(t);return this.merge({fragments:e})}removeFragment(t){return this.removeFragmentByKey(t.fragmentKey)}};function Xt(r){if(r.object!=="text")throw new Error(`Expected node "${r.key}" to be a text`);return r}function Pt(r,t=[]){Nt(r,["areDescendantsSorted","getAncestors","getBlocksAsArray","getBlocksAtRangeAsArray","getBlocksByTypeAsArray","getLeafBlocksAsArray","getChild","getClosestBlock","getClosestInline","getClosestFragment","getClosestVoid","getCommonAncestor","getDepth","getDescendant","getDescendantAtPath","getFirstText","getFurthestBlock","getFurthestInline","getFurthestAncestor","getFurthestOnlyChildAncestor","getInlinesAtRangeAsArray","getMarksAsArray","getMarksAtPosition","getOrderedMarksBetweenPositions","getInsertMarksAtRange","getKeysAsArray","getLastText","getMarksByTypeAsArray","getNextBlock","getNextSibling","getNextText","getNode","getNodeAtPath","getOffset","getOffsetAtRange","getParent","getPath","getPreviousBlock","getPreviousSibling","getPreviousText","getText","getTextAtOffset","getTextDirection","getTextsAsArray","getTextsBetweenPositionsAsArray","isLeafBlock","isLeafInline","getLookupIndex","getIndexPairs",...t])}l();l();l();var $a=oe(fr());var M=class extends ie({data:q.create(),type:""}){get object(){return"mark"}static isMark(e){return me("MARK",e)}static create(e={}){return M.isMark(e)?e:(typeof e=="string"&&(e={type:e}),this.createRecord({...e,data:q.create(e.data||{})}))}static createSet(e){if(!e)return I.create();if(I.isSet(e))return e;if(Array.isArray(e))return I.create(e.map(n=>M.create(n)));throw new Error(`\`Mark.createSet\` only accepts sets, arrays or null, but you passed it: ${e}`)}static createProperties(e={}){if(M.isMark(e))return{data:e.data,type:e.type};if(typeof e=="string")return{type:e};if((0,$a.default)(e)){let n={};return"type"in e&&(n.type=e.type),"data"in e&&(n.data=q.create(e.data)),n}throw new Error(`\`Mark.createProperties\` only accepts objects, strings or marks, but you passed it: ${e}`)}static isMarkSet(e){return I.isSet(e)&&e.every(n=>M.isMark(n))}getComponent(e){return e.__getComponent(this)}};M.prototype[L.MARK]=!0;Nt(M,["getComponent"]);l();var yi=oe(ca()),Ja=oe(fr());var zn=Oe("slate:text-range"),z=class extends ie({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:null,isFocused:!1,marks:null,isAtomic:!1,data:q.create()}){get object(){return"range"}get isBlurred(){return!this.isFocused}get isCollapsed(){return this.anchorKey===this.focusKey&&this.anchorOffset===this.focusOffset}get isExpanded(){return!this.isCollapsed}get isForward(){return this.isBackward==null?null:!this.isBackward}get isSet(){return this.anchorKey!=null&&this.focusKey!=null}get isUnset(){return!this.isSet}get startKey(){return this.isBackward?this.focusKey:this.anchorKey}get startOffset(){return this.isBackward?this.focusOffset:this.anchorOffset}get endKey(){return this.isBackward?this.anchorKey:this.focusKey}get endOffset(){return this.isBackward?this.anchorOffset:this.focusOffset}static create(e={}){return z.isTextRange(e)?e:this.createRecord({...e,data:q.create(e.data||{}),marks:e.marks?M.createSet(e.marks):null})}static createSet(e){if(!e)return I.create();if(I.isSet(e))return e;if(Array.isArray(e))return I.create(e.map(n=>z.create(n)));throw new Error(`\`TextRange.createSet\` only accepts sets, arrays or null, but you passed it: ${e}`)}static createProperties(e={}){if(z.isTextRange(e))return{anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:e.isBackward,isFocused:e.isFocused,marks:e.marks,isAtomic:e.isAtomic,data:e.data};if((0,Ja.default)(e)){let n={};return"anchorKey"in e&&(n.anchorKey=e.anchorKey),"anchorOffset"in e&&(n.anchorOffset=e.anchorOffset),"focusKey"in e&&(n.focusKey=e.focusKey),"focusOffset"in e&&(n.focusOffset=e.focusOffset),"isBackward"in e&&(n.isBackward=e.isBackward),"isFocused"in e&&(n.isFocused=e.isFocused),"marks"in e&&(n.marks=e.marks?M.createSet(e.marks):null),"isAtomic"in e&&(n.isAtomic=e.isAtomic),"data"in e&&(n.data=q.create(e.data)),n}throw new Error(`\`TextRange.createProperties\` only accepts objects or ranges, but you passed it: ${e}`)}static isTextRange(e){return Mn(e)}static fromBlockRange(e,n){var u,f;let o=e.anchorBlock?n.getNode(e.anchorBlock):null,i=e.focusBlock?n.getNode(e.focusBlock):null,s;o&&ve(o)&&(s=(u=o.getFirstText())==null?void 0:u.key);let a;i&&ve(i)&&(a=(f=i.getFirstText())==null?void 0:f.key);let c=e.isFocused;return z.create({anchorKey:s,anchorOffset:0,focusKey:a,focusOffset:0,isFocused:c})}hasAnchorAtStartOf(e){if(this.anchorOffset!==0)return!1;let n=Vn(e);return this.anchorKey===n.key}hasAnchorAtEndOf(e){let n=jn(e);return this.anchorKey===n.key&&this.anchorOffset===n.text.length}hasAnchorBetween(e,n,o){return this.anchorOffset<=o&&n<=this.anchorOffset&&this.hasAnchorIn(e)}hasAnchorIn(e){return e.object==="text"?e.key===this.anchorKey:this.anchorKey!=null&&e.hasDescendant(this.anchorKey)}hasFocusAtEndOf(e){let n=jn(e);return this.focusKey===n.key&&this.focusOffset===n.text.length}hasFocusAtStartOf(e){if(this.focusOffset!==0)return!1;let n=Vn(e);return this.focusKey===n.key}hasFocusBetween(e,n,o){return n<=this.focusOffset&&this.focusOffset<=o&&this.hasFocusIn(e)}hasFocusIn(e){return e.object==="text"?e.key===this.focusKey:this.focusKey!=null&&e.hasDescendant(this.focusKey)}isOnlyVoidNodeSelected(e,n){let o=Ln(e)||ve(e);if(!ve(n)||!o||!e.isVoid)return!1;let i=n.getPreviousSibling(e.key),s=n.getNextSibling(e.key),a={previous:{isStart:this.startKey===(i==null?void 0:i.key),isEdge:Boolean(i&&this.hasStartAtEndOf(i))},next:{isEnd:this.endKey===(s==null?void 0:s.key),isEdge:Boolean(s&&this.hasEndAtStartOf(s))}};return a.previous.isStart&&a.previous.isEdge&&a.next.isEnd&&a.next.isEdge}hasOnlyNodeSelected(e){return this.isCollapsed&&this.hasFocusIn(e)}hasOnlyNodeSelectedExpanded(e){return this.isCollapsed||!this.focusKey||!this.anchorKey?!1:this.hasFocusIn(e)&&this.hasAnchorIn(e)}hasOnlyNodeFocused(e){return!!this.isFocused&&this.hasOnlyNodeSelected(e)}hasFocusInFragmentOf(e){if(!this.hasFocusIn(e))return null;let n=e.getAncestors(this.startKey);return n&&n.find(i=>i.object==="fragment")||null}isAtStartOf(e){return this.isCollapsed&&this.hasAnchorAtStartOf(e)}isAtEndOf(e){return this.isCollapsed&&this.hasAnchorAtEndOf(e)}focus(){return this.merge({isFocused:!0})}blur(){return this.merge({isFocused:!1})}deselect(){return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1,data:q.create()})}flip(){return this.merge({anchorKey:this.focusKey,anchorOffset:this.focusOffset,focusKey:this.anchorKey,focusOffset:this.anchorOffset,isBackward:this.isBackward==null?null:!this.isBackward})}moveAnchor(e=1){let{anchorKey:n,focusKey:o,focusOffset:i,isBackward:s}=this,a=this.anchorOffset+e;return this.merge({anchorOffset:a,isBackward:n===o?a>i:s})}moveFocus(e=1){let{anchorKey:n,anchorOffset:o,focusKey:i,isBackward:s}=this,a=this.focusOffset+e;return this.merge({focusOffset:a,isBackward:i===n?o>a:s})}moveAnchorTo(e,n){let{anchorKey:o,focusKey:i,focusOffset:s,isBackward:a}=this;return this.merge({anchorKey:e,anchorOffset:n,isBackward:e===i?n>s:e===o?a:null})}moveFocusTo(e,n){let{focusKey:o,anchorKey:i,anchorOffset:s,isBackward:a}=this;return this.merge({focusKey:e,focusOffset:n,isBackward:e===i?s>n:e===o?a:null})}moveAnchorOffsetTo(e){return this.merge({anchorOffset:e,isBackward:this.anchorKey===this.focusKey?e>this.focusOffset:this.isBackward})}moveFocusOffsetTo(e){return this.merge({focusOffset:e,isBackward:this.anchorKey===this.focusKey?this.anchorOffset>e:this.isBackward})}moveOffsetsTo(e,n=e){return this.moveAnchorOffsetTo(e).moveFocusOffsetTo(n)}moveToAnchor(){return this.moveFocusTo(this.anchorKey,this.anchorOffset)}moveToFocus(){return this.moveAnchorTo(this.focusKey,this.focusOffset)}moveAnchorToStartOf(e){return e=Vn(e),this.moveAnchorTo(e.key,0)}moveAnchorToEndOf(e){return e=jn(e),this.moveAnchorTo(e.key,e.text.length)}moveFocusToStartOf(e){return e=Vn(e),this.moveFocusTo(e.key,0)}moveFocusToEndOf(e){return e=jn(e),this.moveFocusTo(e.key,e.text.length)}moveToRangeOf(e,n=e){return(this.isBackward?this.flip():this).moveAnchorToStartOf(e).moveFocusToEndOf(n)}normalize(e){let n=this,{anchorOffset:o,focusOffset:i,isBackward:s}=n,{anchorKey:a,focusKey:c}=n,u=typeof o,f=typeof i;if((u!=="number"||f!=="number")&&zn.warning(`The range offsets should be numbers, but they were of type "${u}" and "${f}".`),a==null||c==null)return n.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:!1});if(a!==c){let m=e.getClosestFragment(a),k=e.getClosestFragment(c);if(m&&!k){let b=e.getClosestNonFragment(a);if(b)return n.isBackward?n.moveAnchorToStartOf(b):n.moveAnchorToEndOf(b)}if(!m&&k){let b=e.getClosestNonFragment(c);if(b)return n.isBackward?n.moveFocusToStartOf(b):n.moveFocusToEndOf(b)}if(m!==k){let b=e.getClosestNonFragment(a),C=e.getClosestNonFragment(c);return b&&C?n.isBackward?n.moveAnchorToStartOf(b).moveFocusToStartOf(C):n.moveAnchorToEndOf(b).moveFocusToEndOf(C):n.deselect()}}let d=e.getDescendant(a),p=e.getDescendant(c);if(!d||!p){zn.warning("The range was invalid and was reset. The range in question was:",n);let m=e.getFirstText();return n.merge({anchorKey:m?m.key:null,anchorOffset:0,focusKey:m?m.key:null,focusOffset:0,isBackward:!1})}if(d.object!=="text"){zn.warning("The range anchor was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",d);let m=d.getTextAtOffset(o),k=d.getOffset(m.key);o-=k,d=m}if(p.object!=="text"){zn.warning("The range focus was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",p);let m=p.getTextAtOffset(i),k=p.getOffset(m.key);i-=k,p=m}s==null&&(d.key===p.key?s=o>i:s=!e.areDescendantsSorted(d.key,p.key));let h=e.getDescendant(a),g=e.getDescendant(c);if(o=(0,yi.default)(o,0,h.text.length),i=(0,yi.default)(i,0,g.text.length),n.isExpanded){let m=d?e.getParent(d.key):null,k=p?e.getParent(p.key):null,b=m&&m.isInline()&&m.isVoid,C=k&&k.isInline()&&k.isVoid;if(b){if(p&&p.isText()&&p.isEmpty)return n.merge({anchorKey:d==null?void 0:d.key,anchorOffset:0,focusKey:d==null?void 0:d.key,focusOffset:0,isBackward:s});let v=s?e.getNextTextAfterNode(m.key):e.getPreviousTextBeforeNode(m.key);if(v)return n.merge({anchorKey:v.key,anchorOffset:s?0:v.text.length,focusKey:p==null?void 0:p.key,focusOffset:i,isBackward:s})}if(C){if(d&&d.isText()&&d.isEmpty)return n.merge({anchorKey:p==null?void 0:p.key,anchorOffset:0,focusKey:p==null?void 0:p.key,focusOffset:0,isBackward:s});let v=s?e.getPreviousTextBeforeNode(k.key):e.getNextTextAfterNode(k.key);if(v)return n.merge({anchorKey:d==null?void 0:d.key,anchorOffset:o,focusKey:v.key,focusOffset:s?v.text.length:0,isBackward:s})}}return n.merge({anchorKey:d.key,anchorOffset:o,focusKey:p.key,focusOffset:i,isBackward:s})}normalizeSelection(e){let{anchorKey:n,focusKey:o,anchorOffset:i,focusOffset:s}=this;if(!n||!o)return this;let a=e.getClosestInline(n),c=e.getClosestInline(o),u=e.getClosestBlock(o),f=e.getClosestBlock(n),d=this;if(f&&!f.isVoid&&i===0&&u&&u.isVoid&&s!==0&&(d=d.set("focusOffset",0)),a&&!a.isVoid&&d.hasAnchorAtStartOf(a)){let p=e.getPreviousTextBeforeNode(n,!1);p&&(d=d.merge({anchorKey:p.key,anchorOffset:p.text.length}))}if(c&&!c.isVoid&&d.hasFocusAtStartOf(c)){let p=e.getPreviousTextBeforeNode(n,!1);p&&(d=d.merge({focusKey:p.key,focusOffset:p.text.length}))}if(a&&!a.isVoid&&d.hasAnchorAtEndOf(a)){let p=e.getNextTextAfterNode(n);p&&(d=d.merge({anchorKey:p.key,anchorOffset:0}))}if(c&&!c.isVoid&&d.hasFocusAtEndOf(c)){let p=e.getNextTextAfterNode(o);p&&(d=d.merge({focusKey:p.key,focusOffset:0}))}return d}hasMoved(e){return!this.merge({isFocused:!1,isBackward:!1,marks:null}).equals(e.merge({isFocused:!1,isBackward:!1,marks:null}))}};z.prototype[L.TEXT_RANGE]=!0;var Py=[["move",""],["move","To"],["move","ToStartOf"],["move","ToEndOf"]];Py.forEach(([r,t])=>{z.prototype[`${r}${t}`]=function(...e){return this[`${r}Anchor${t}`](...e)[`${r}Focus${t}`](...e)}});var Fy=[["has","AtStartOf",!0],["has","AtEndOf",!0],["has","Between",!0],["has","In",!0],["collapseTo",""],["move",""],["moveTo",""],["move","To"],["move","OffsetTo"]];Fy.forEach(([r,t,e])=>{let n=`${r}Anchor${t}`,o=`${r}Focus${t}`;z.prototype[`${r}Start${t}`]=function(...i){return this.isBackward?this[o](...i):this[n](...i)},z.prototype[`${r}End${t}`]=function(...i){return this.isBackward?this[n](...i):this[o](...i)},e&&(z.prototype[`${r}Edge${t}`]=function(...i){return this[n](...i)||this[o](...i)})});var Dy=[["collapseTo","moveTo"],["collapseToAnchor","moveToAnchor"],["collapseToFocus","moveToFocus"],["collapseToStart","moveToStart"],["collapseToEnd","moveToEnd"],["collapseToStartOf","moveToStartOf"],["collapseToEndOf","moveToEndOf"],["extend","moveFocus"],["extendTo","moveFocusTo"],["extendToStartOf","moveFocusToStartOf"],["extendToEndOf","moveFocusToEndOf"]];Dy.forEach(([r,t])=>{z.prototype[r]=function(...e){return this[t](...e)}});function Vn(r){return r.object==="text"?r:"getFirstText"in r?r.getFirstText():null}function jn(r){return r.object==="text"?r:"getLastText"in r?r.getLastText():null}var H=class extends ie({marks:I.create(),selections:I.create(),text:""}){get object(){return"leaf"}static isLeaf(e){return me("LEAF",e)}static create(e={}){return typeof e=="string"?this.createRecord({text:e}):this.createRecord({text:e.text||"",marks:M.createSet(e.marks||[]),selections:z.createSet(e.selections||[])})}static createLeaves(e){if(e.size<=1)return e;let n=!1,o=[];e.findLast((s,a)=>{let c=o[0];if(c){if(c.marks.equals(s.marks)&&c.selections.equals(s.selections))return n=!0,o[0]=c.set("text",`${s.text}${c.text}`),!1;if(c.text==="")return n=!0,o[0]=s,!1;if(s.text==="")return n=!0,!1}return o.unshift(s),!1});let i=x.create(o);return n?i:e}static splitLeaves(e,n){if(n<0)return[x.create(),e];if(e.size===0)return[x.create(),x.create()];let o=0,i=-1,s,a;return e.find(c=>{i++;let u=o,{text:f}=c;if(o+=f?f.length:0,o<n||u>n)return!1;let d=n-u;return s=c.set("text",f.slice(0,d)),a=c.set("text",f.slice(d)),!0}),s?s.text===""?i===0?[x.create([s]),e]:[e.take(i),e.skip(i)]:a.text===""?i===e.size-1?[e,x.create([a])]:[e.take(i+1),e.skip(i+1)]:[e.take(i).push(s),e.skip(i+1).unshift(a)]:[e,x.create()]}static isLeafList(e){return x.isList(e)&&e.every(n=>H.isLeaf(n))}updateMark(e,n){let{marks:o}=this;if(n.equals(e))return this;let i=o.deref(e);if(!i)return this;let s=o.withMutations(a=>{a.delete(i),a.add(n)});return this.set("marks",s)}addMarks(e){let{marks:n}=this;return this.set("marks",n.union(e))}removeMark(e){let{marks:n}=this;return this.set("marks",n.delete(e))}addSelection(e){let{selections:n}=this;return this.set("selections",n.add(e))}};H.prototype[L.LEAF]=!0;var S=class extends ie({leaves:x.create(),key:""}){constructor(){super(...arguments);this.type="text"}get object(){return"text"}get isEmpty(){return this.text===""}get text(){return this.getString()}static isText(e){return me("TEXT",e)}static isTextList(e){return x.isList(e)&&e.every(n=>S.isText(n))}static create(e=""){return S.isText(e)?e:typeof e=="string"?this.createRecord({key:K(),leaves:x.create([H.create(e)])}):"leaves"in e?this.createRecord({key:e.key||K(),leaves:x.create(e.leaves||[])}):this.createRecord({key:e.key||K(),leaves:x.create([H.create(e)])})}isText(){return!0}isBlock(){return!1}isInline(){return!1}getString(){return this.leaves.reduce((e,n)=>e+n.text,"")}getText(e="",n=""){return this.getString()}searchLeafAtOffset(e){let n=0,o=0,i=-1;return{leaf:this.leaves.find(a=>(i++,o=n,n=o+a.text.length,n>=e)),endOffset:n,index:i,startOffset:o}}addMark(e,n,o){let i=I.create([o]);return this.addMarks(e,n,i)}addMarks(e,n,o){if(this.text===""&&n===0&&e===0){let{leaves:u}=this,f=u.first(null);if(!f)return this.set("leaves",x.create([H.create({text:"",marks:o})]));let d=f.addMarks(o);return d===f?this:this.set("leaves",x.create([d]))}if(this.text==="")return this;if(n===0)return this;if(e>=this.text.length)return this;let[i,s]=H.splitLeaves(this.leaves,e),[a,c]=H.splitLeaves(s,n);return this.setLeaves(i.concat(a.map(u=>u.addMarks(o)),c))}getLeaves(e=[],n=!1){let{leaves:o}=this;if(o.size===0)return x.create([H.create({})]);if(!e||e.length===0||this.text.length===0)return o;let{key:i}=this;return e.forEach(s=>{let{startKey:a,endKey:c,startOffset:u,endOffset:f,marks:d}=s,p=a===i,h=c===i;if(p||h){let g=p?u:0,m=h?f-g:this.text.length-g;if(m<1||g>=this.text.length)return;if(g!==0||m<this.text.length){let[k,b]=H.splitLeaves(o,g),[C,v]=H.splitLeaves(b,m);o=k.concat(C.map(w=>(d&&d.size>0&&(w=w.addMarks(d)),n&&(w=w.addSelection(s)),w)),v);return}}o=o.map(g=>(d&&d.size>0&&(g=g.addMarks(d)),n&&(g=g.addSelection(s)),g))}),o===this.leaves?o:H.createLeaves(o)}getLeavesAndSelections(e,n){let o=this.getLeaves(e.toArray(),!1);if(n.size===0)return o;let i=this.getLeaves(n.toArray(),!0),{key:s}=this;return n.forEach(a=>{let{focusKey:c,focusOffset:u}=a;if(c===s)if(u!==0){let[d,p]=H.splitLeaves(i,u);i=d.push(a).concat(p)}else i=i.insert(0,a)}),i}getActiveMarksBetweenOffsets(e,n){if(e<=0&&n>=this.text.length)return this.getActiveMarks();if(e>=n)return I.create();if(this.text==="")return this.getActiveMarks();let o=null,i=0;return this.leaves.forEach(s=>{let a=i;if(i=a+s.text.length,!(i<=e)){if(a>=n)return!1;if(!o){o=s.marks;return}return o=o.intersect(s.marks),o&&o.size===0,!1}}),o||I.create()}getActiveMarks(){if(this.leaves.size===0)return I.create();let e=this.leaves.first().marks;return e.size===0?e:e.withMutations(n=>{this.leaves.forEach(o=>{if(n.forEach(i=>{if(!o.marks.has(i)){let s=e.deref(i);s&&n.delete(s)}}),n.size===0)return!1})})}getMarksBetweenOffsets(e,n){if(e<=0&&n>=this.text.length)return this.getMarks();if(e>=n)return I.create();if(this.text==="")return this.getActiveMarks();let o=null,i=0;return this.leaves.forEach(s=>{let a=i;if(i=a+s.text.length,!(i<=e)){if(a>=n)return!1;if(!o){o=s.marks;return}o=o.union(s.marks)}}),o||I.create()}getMarks(){let e=this.getMarksAsArray();return Ve.create(e)}getMarksAsArray(){if(this.leaves.size===0)return[];let e=this.leaves.first().marks;if(this.leaves.size===1)return e.toArray();let n=[];return this.leaves.forEach(o=>{n.push(...o.marks.toArray())}),n}getMarksAtIndex(e){let{leaf:n}=this.searchLeafAtOffset(e);return n?n.marks:I.create()}isLeafBoundary(e){let{leaf:n,startOffset:o,endOffset:i}=this.searchLeafAtOffset(e);return n?i===e||o===e:!1}getNode(e){return this.key===e?this:null}hasNode(e){return!!this.getNode(e)}insertText(e,n,o=I.create()){if(this.text==="")return this.set("leaves",x.create([H.create({text:n,marks:o})]));if(n.length===0)return this;let{startOffset:i,leaf:s,index:a}=this.searchLeafAtOffset(e),c=e-i,u=s.text.slice(0,c),f=s.text.slice(c),{leaves:d}=this;if(s.marks.equals(o))return this.merge({leaves:d.set(a,s.set("text",u+n+f))});let p=d.splice(a,1,s.set("text",u),H.create({text:n,marks:o}),s.set("text",f));return this.setLeaves(p)}appendText(e,n=I.create()){return e.length===0?this:this.insertText(this.text.length,e,n)}regenerateKey(){let e=K();return this.merge({key:e})}removeMark(e,n,o){if(this.text===""&&e===0&&n===0){let f=this.leaves.first(null);if(!f)return this;let d=f.removeMark(o);return d===f?this:this.set("leaves",x.create([d]))}if(n<=0)return this;if(e>=this.text.length)return this;let[i,s]=H.splitLeaves(this.leaves,e),[a,c]=H.splitLeaves(s,n),u=i.concat(a.map(f=>f.removeMark(o)),c);return this.setLeaves(u)}removeText(e,n){if(n<=0)return this;if(e>=this.text.length)return this;if(n===1){let{leaf:c,index:u,startOffset:f}=this.searchLeafAtOffset(e+1),d=e-f;if(c){if(c.text.length===1)return this.setLeaves(this.leaves.delete(u));let p=c.text.slice(0,d),h=c.text.slice(d+n),g=p+h;if(g.length>0)return this.set("leaves",this.leaves.set(u,c.set("text",g)))}}let[o,i]=H.splitLeaves(this.leaves,e),s=H.splitLeaves(i,n)[1],a=H.createLeaves(o.concat(s));if(a.size===1){let c=a.first(null);if(c.text==="")return this.set("leaves",x.create([c.set("marks",this.getActiveMarks())]))}return this.merge({leaves:a})}updateMark(e,n,o,i){let s=o.merge(i);if(this.text===""&&n===0&&e===0){let p=this.leaves.first(null);if(!p)return this;let h=p.updateMark(o,s);return h===p?this:this.set("leaves",x.create([h]))}if(n<=0)return this;if(e>=this.text.length)return this;let[a,c]=H.splitLeaves(this.leaves,e),[u,f]=H.splitLeaves(c,n),d=a.concat(u.map(p=>p.updateMark(o,s)),f);return this.setLeaves(d)}mapMark(e){return this.setLeaves(this.leaves.map(n=>n.merge({marks:n.marks.map(o=>e(o)).filter(Boolean)})))}splitText(e){let n=H.splitLeaves(this.leaves,e),o=this.set("leaves",n[0]),i=this.set("leaves",n[1]).regenerateKey();return[o,i]}splitBy(e){let o=this.getString().indexOf(e);if(o===-1)return[this];let[i,s]=this.splitText(o);return[i,...s.sliceText(e.length).splitBy(e)]}sliceText(e){let n=e,o=this.leaves.map(i=>{if(n<=0)return i;let s=Math.min(n,i.text.length);return n-=s,i.merge({text:i.text.slice(s)})});return this.merge({leaves:o})}mergeText(e){let n=this.leaves.concat(e.leaves);return this.setLeaves(n)}setLeaves(e){let n=H.createLeaves(e);if(n.size===1){let o=n.first(null);if((!o.marks||o.marks.size===0)&&o.text==="")return this.set("leaves",x.create())}return this.set("leaves",n)}};S.prototype[L.TEXT]=!0;Nt(S,["getActiveMarks","getMarks","getMarksAsArray","getString"]);var T=class extends ft{get object(){return"block"}get isEmpty(){return!this.isVoid&&!this.nodes.some(e=>!e.isEmpty)}get text(){return this.getText()}get blockNodes(){return this.nodes.size===0||!T.isBlock(this.nodes.get(0))?x.create():this.nodes}static create(e={}){return T.isBlock(e)?e:typeof e=="string"?this.createRecord({key:K(),type:e}):this.createRecord({type:e.type||"",key:e.key||K(),data:q.create(e.data||{}),isVoid:e.isVoid||!1,fragments:Ae.isOrderedMap(e.fragments)?e.fragments:Ae.create((e.fragments||[]).map(n=>[n.fragmentKey,n])),nodes:x.create(e.nodes)})}static createVoid(e={}){return T.isBlock(e)?e.merge({isVoid:!0,nodes:x.create([S.create()])}):typeof e=="string"?this.createRecord({key:K(),type:e,isVoid:!0,nodes:x.create([S.create()])}):T.create({isVoid:!0,nodes:x.create([S.create()]),...e})}static isBlock(e){return ve(e)}static isBlockList(e){return x.isList(e)&&e.every(n=>T.isBlock(n))}};T.prototype[L.BLOCK]=!0;Pt(T);l();var Wa=oe(fr());var be=Oe("slate:block-range"),xe=class extends ie({anchorBlock:null,focusBlock:null,isFocused:!1,data:q.create()}){get object(){return"block-range"}get isBlurred(){return!this.isFocused}get isCollapsed(){return this.anchorBlock===this.focusBlock}get isExpanded(){return!this.isCollapsed}static create(e={}){return xe.isBlockRange(e)?e:this.createRecord({...e,data:q.create(e.data||{})})}static createProperties(e={}){if(xe.isBlockRange(e))return{anchorBlock:e.anchorBlock,focusBlock:e.focusBlock,isFocused:e.isFocused,data:e.data};if((0,Wa.default)(e)){let n={};return"anchorBlock"in e&&(n.anchorBlock=e.anchorBlock),"focusBlock"in e&&(n.focusBlock=e.focusBlock),"isFocused"in e&&(n.isFocused=e.isFocused),"data"in e&&(n.data=q.create(e.data)),n}throw new Error(`\`BlockRange.createProperties\` only accepts objects or ranges, but you passed it: ${e}`)}static isBlockRange(e){return Vr(e)}static fromTextRange(e,n){var a,c,u,f,d,p;let o=e.anchorKey?(a=n.getAncestors(e.anchorKey))==null?void 0:a.findLast(h=>h.isBlock()):null,i=e.focusKey?(c=n.getAncestors(e.focusKey))==null?void 0:c.findLast(h=>h.isBlock()):null,s=e.isFocused;if(!o||!i){let h=o!=null?o:i;return xe.create({anchorBlock:(u=h==null?void 0:h.key)!=null?u:null,focusBlock:(f=h==null?void 0:h.key)!=null?f:null,isFocused:s})}return xe.create({anchorBlock:(d=o==null?void 0:o.key)!=null?d:null,focusBlock:(p=i==null?void 0:i.key)!=null?p:null,isFocused:s})}findPaths(e,n,o){let i=e.getPath(n),s=e.getPath(o);if(!i&&!s)return[];if(!i||!s){let a=i!=null?i:s;return a?[a,a]:[]}try{let a=e.getCommonAncestor(n,o);if(!a)return[];let c=e.getPath(a.key);return c?[[...c,i[c.length]],[...c,s[c.length]]]:[]}catch(a){return be.error(a),[]}}normalize(e){var g,m;let n=this,{anchorBlock:o,focusBlock:i}=n;if(!o&&!i)return this.deselect();o!=null||(o=i),i!=null||(i=o);let[s,a]=this.findPaths(e,o,i);if(!s&&!a)return be.warning("BlockRange is unset because neither anchor or focus paths can be found"),this.deselect();let c=s?e.getByPath(s):null,u=a?e.getByPath(a):null;if(!c&&!u)return be.warning("BlockRange is unset because neither anchor or focus nodes can be found"),this.deselect();(!c||!u)&&(c!=null||(c=u),u!=null||(u=c));let f=null;ve(c)?(c.isLeafBlock()&&(f=e.getClosestBlock(c.key)),f!=null||(f=c)):c&&(f=e.getClosestBlock(c.key));let d=null;ve(u)?(u.isLeafBlock()&&(d=e.getClosestBlock(u.key)),d!=null||(d=u)):u&&(d=e.getClosestBlock(u.key));let p=(g=f==null?void 0:f.key)!=null?g:null,h=(m=d==null?void 0:d.key)!=null?m:null;return!p&&!h?(be.warning("BlockRange is unset because neither anchor or focus blocks can be found"),this.deselect()):this.merge({anchorBlock:p!=null?p:h,focusBlock:h!=null?h:p})}normalizeSelection(e){var C,v;let{anchorBlock:n,focusBlock:o}=this;if(!n&&!o)return be.warning("BlockRange is unset because neither anchorBlock or focusBlock is valid"),this.deselect();(!n||!o)&&(n!=null||(n=o),o!=null||(o=n));let i=e.getNode(n),s=e.getNode(o);if(!i&&!s)return be.warning("BlockRange is unset because neither anchor or focus nodes can be found"),this.deselect();(!i||!s)&&(i!=null||(i=s),s!=null||(s=i));let a=this,c=ve(i)?i:e.getClosestBlock(i.key);c&&c.isLeafBlock()&&(c=(C=e.getClosestBlock(c.key))!=null?C:c),c&&c.key!==(i==null?void 0:i.key)&&(a=a.merge({anchorBlock:c.key}));let u=ve(s)?s:e.getClosestBlock(s.key);if(u&&u.isLeafBlock()&&(u=(v=e.getClosestBlock(u.key))!=null?v:u),u&&u.key!==(s==null?void 0:s.key)&&(a=a.merge({focusBlock:u.key})),!c&&!u)return be.warning("BlockRange is unset because neither anchor or focus blocks can be found"),this.deselect();let f=c?e.getParent(c.key):null,d=u?e.getParent(u.key):null;if(c&&u&&c.key===u.key||f&&d&&f.key===d.key)return a;let[g,m]=this.findPaths(e,c.key,u.key),k=e.getByPath(g);k&&ve(k)&&(k=k.isLeafBlock()?e.getClosestBlock(k.key):k,k&&k.key!==(c==null?void 0:c.key)&&(a=a.merge({anchorBlock:k.key})));let b=e.getByPath(m);return b&&ve(b)&&(b=b.isLeafBlock()?e.getClosestBlock(b.key):b,b&&b.key!==(u==null?void 0:u.key)&&(a=a.merge({focusBlock:b.key}))),a}getBlocks(e){var d,p;if(!e)return x.create();if(!this.anchorBlock&&!this.focusBlock)return x.create();let n;if((!this.focusBlock||this.focusBlock===this.anchorBlock)&&(n=this.anchorBlock),this.anchorBlock||(n=this.focusBlock),n){let h=e.getNode(n);if(h&&h.isBlock()){let g=e.getParent(h.key),m=h;for(;g&&(g&&g.isBlock()&&g.blockNodes.size===1);)m=g,g=e.getParent(g.key);return m&&m.isBlock()?x.create([m]):x.create()}}let o=e.areDescendantsSorted(this.anchorBlock,this.focusBlock),i=o?this.anchorBlock:this.focusBlock,s=o?this.focusBlock:this.anchorBlock,a=i?e.getNode(i):null;if(!a)return x.create();let c=i&&s?e.getCommonAncestor(i,s):null;if(c&&c.isBlock()){let h=c.blockNodes;if(((d=h.last())==null?void 0:d.key)===s&&((p=h.first())==null?void 0:p.key)===i)return x.create([c])}let u=[];u.push(a);let f=i?e.getNextSibling(i):null;for(;f;)if(f.isBlock()){if(u.push(f),f.key===s)break;f=e.getNextSibling(f.key)}return x.create(u)}getIfBlock(e){if(e){if(ve(e))return e;{let n=e.getClosestBlock(e.key);if(n)return n}}return null}moveSelectionForward(e){if(!this.anchorBlock||!this.focusBlock)return be.warning("Need to normalize the block range before moving selection forward"),this;let o=this.anchorBlock===this.focusBlock||e.areDescendantsSorted(this.anchorBlock,this.focusBlock)?this.focusBlock:this.anchorBlock,i=this.findBlockToMoveSelectionTo(o,e,s=>e.getNextSibling(s));return i?this.merge({anchorBlock:i.key,focusBlock:i.key}):this.merge({anchorBlock:o,focusBlock:o})}moveSelectionBackward(e){if(!this.anchorBlock||!this.focusBlock)return be.warning("Need to normalize the block range before moving selection backward"),this;let o=this.anchorBlock===this.focusBlock||e.areDescendantsSorted(this.anchorBlock,this.focusBlock)?this.anchorBlock:this.focusBlock,i=this.findBlockToMoveSelectionTo(o,e,s=>e.getPreviousSibling(s));return i?this.merge({anchorBlock:i.key,focusBlock:i.key}):this.merge({anchorBlock:o,focusBlock:o})}findBlockToMoveSelectionTo(e,n,o){let i=this.getIfBlock(o(e));if(i)return i;let s=this.getIfBlock(n.getParent(e));for(;s;){let a=this.getIfBlock(o(s.key));if(a)return a;s=this.getIfBlock(n.getParent(s.key))}}moveSelectionToDescendant(e){if(!this.anchorBlock||!this.focusBlock)return be.warning("Need to normalize the block range before moving selection"),this;let n=e.getNode(this.focusBlock);if(n){let o=n.findDescendant(i=>ve(i)&&!i.isLeafBlock());if(o)return this.merge({anchorBlock:o.key,focusBlock:o.key})}return this.collapseToFocus()}moveSelectionToAncestor(e){if(!this.anchorBlock||!this.focusBlock)return be.warning("Need to normalize the block range before moving selection"),this;let n=e.getNode(this.focusBlock);if(n){let o=e.getClosestBlock(n.key);if(o)return this.merge({anchorBlock:o.key,focusBlock:o.key})}return this.collapseToFocus()}moveFocusBackward(e){if(!this.anchorBlock||!this.focusBlock)return be.warning("Need to normalize the block range before moving selection"),this;let n=this.findBlockToMoveSelectionTo(this.focusBlock,e,o=>e.getPreviousSibling(o));return n?this.merge({focusBlock:n.key}):this}moveFocusForward(e){if(!this.anchorBlock||!this.focusBlock)return be.warning("Need to normalize the block range before moving selection"),this;let n=this.findBlockToMoveSelectionTo(this.focusBlock,e,o=>e.getNextSibling(o));return n?this.merge({focusBlock:n.key}):this}moveFocusTo(e){return this.merge({focusBlock:e})}growSelection(e){if(!this.anchorBlock||!this.focusBlock)return be.warning("Need to normalize the block range before moving selection"),this;let o=this.anchorBlock===this.focusBlock||e.areDescendantsSorted(this.anchorBlock,this.focusBlock)?e.getNextSibling(this.focusBlock):e.getPreviousSibling(this.focusBlock),i=this.getIfBlock(o);return i?this.merge({focusBlock:i.key}):this}shrinkSelection(e){if(!this.anchorBlock||!this.focusBlock)return be.warning("Need to normalize the block range before shrinking selection"),this;if(this.isCollapsed)return this;let o=this.anchorBlock===this.focusBlock||e.areDescendantsSorted(this.anchorBlock,this.focusBlock)?e.getPreviousSibling(this.focusBlock):e.getNextSibling(this.focusBlock),i=this.getIfBlock(o);return i?this.merge({focusBlock:i.key}):this}collapseToAnchor(){return!this.anchorBlock||!this.focusBlock?(be.warning("Need to normalize the block range before collapsing"),this):this.merge({anchorBlock:this.anchorBlock,focusBlock:this.anchorBlock})}collapseToFocus(){return!this.anchorBlock||!this.focusBlock?(be.warning("Need to normalize the block range before collapsing"),this):this.merge({anchorBlock:this.focusBlock,focusBlock:this.focusBlock})}collapseTo(e){return this.merge({anchorBlock:e,focusBlock:e})}collapseToStart(){return this.collapseToAnchor()}collapseToEnd(){return this.collapseToFocus()}moveAnchorToStartOf(e){var o,i;let n=(i=(o=e.getBlocks().first())==null?void 0:o.key)!=null?i:null;return this.merge({anchorBlock:n})}moveAnchorToEndOf(e){var o,i;let n=(i=(o=e.getBlocks().last())==null?void 0:o.key)!=null?i:null;return this.merge({anchorBlock:n})}moveFocusToStartOf(e){var o,i;let n=(i=(o=e.getBlocks().first())==null?void 0:o.key)!=null?i:null;return this.merge({focusBlock:n})}moveFocusToEndOf(e){var o,i;let n=(i=(o=e.getBlocks().last())==null?void 0:o.key)!=null?i:null;return this.merge({focusBlock:n})}hasBlock(e,n){return e.object==="text"?!1:e.object==="block"?!!this.getBlocks(n).find(o=>o.key===e.key):!1}hasAnchorIn(e){return e.object==="text"?!1:e.object==="block"?e.key===this.anchorBlock:this.anchorBlock!=null&&e.hasDescendant(this.anchorBlock)}hasAnchorAtStartOf(e){if(e.object==="text")return!1;let n=e.nodes.first();return n?n.key===this.anchorBlock:!1}hasAnchorAtEndOf(e){if(e.object==="text")return!1;let n=e.nodes.last();return n?n.key===this.anchorBlock:!1}isAnchor(e){return this.anchorBlock===e.key}hasFocusIn(e){return e.object==="text"?!1:e.object==="block"?e.key===this.focusBlock:this.focusBlock!=null&&e.hasDescendant(this.focusBlock)}hasFocusAtStartOf(e){if(e.object==="text")return!1;let n=e.nodes.first();return n?n.key===this.focusBlock:!1}hasFocusAtEndOf(e){if(e.object==="text")return!1;let n=e.nodes.last();return n?n.key===this.focusBlock:!1}isFocus(e){return this.focusBlock===e.key}hasOnlyNodeSelected(e){return this.isCollapsed&&this.isAnchor(e)}hasOnlyNodeFocused(e){return!!this.isFocused&&this.hasOnlyNodeSelected(e)}focus(){return this.merge({isFocused:!0})}blur(){return this.merge({isFocused:!1})}deselect(){return this.merge({anchorBlock:null,focusBlock:null,isFocused:!1,data:q.create()})}};xe.prototype[L.BLOCK_RANGE]=!0;l();var Ru=oe(oy()),_i=oe(Ni());l();var N=class extends ft{get object(){return"fragment"}get fragmentKey(){return this.fragment||this.key}get isEmpty(){return!this.nodes.some(e=>!e.isEmpty)}get text(){return this.getText()}static isFragment(e){return me("FRAGMENT",e)}static create(e={}){let n=e.key||K();return this.createRecord({key:n,fragment:n,...e,nodes:x.isList(e.nodes)?e.nodes:x.create(e.nodes||[])})}};N.prototype[L.FRAGMENT]=!0;Pt(N);l();var V=class extends ft{get object(){return"inline"}get isEmpty(){return!this.isVoid&&!this.nodes.some(e=>!e.isEmpty)}get text(){return this.getText()}static isInline(e){return Ln(e)}static isInlineList(e){return x.isList(e)&&e.every(n=>V.isInline(n))}static create(e={}){return V.isInline(e)?e:typeof e=="string"?this.createRecord({key:K(),type:e}):this.createRecord({...e,key:e.key||K(),data:q.create(e.data||{}),nodes:x.create(e.nodes||[]),fragments:Ae.isOrderedMap(e.fragments)?e.fragments:Ae.create((e.fragments||[]).map(n=>[n.fragmentKey,n]))})}static createVoid(e={}){return V.isInline(e)?e.merge({isVoid:!0,nodes:x.create([S.create()])}):typeof e=="string"?this.createRecord({key:K(),type:e,isVoid:!0,nodes:x.create([S.create()])}):V.create({isVoid:!0,nodes:x.create([S.create()]),...e,fragments:Ae.isOrderedMap(e.fragments)?e.fragments:Ae.create((e.fragments||[]).map(n=>[n.fragmentKey,n]))})}};V.prototype[L.INLINE]=!0;Pt(V);l();var Eu=oe(fr());function Zt(r={}){if(T.isBlock(r)||V.isInline(r))return{key:r.key,data:r.data,fragments:r.fragments,isVoid:r.isVoid,type:r.type};if(typeof r=="string")return{type:r};if((0,Eu.default)(r)){let t={};return"key"in r&&(t.key=r.key),"type"in r&&(t.type=r.type),"data"in r&&(t.data=q.create(r.data)),"isVoid"in r&&(t.isVoid=r.isVoid),"fragments"in r&&(t.fragments=r.fragments),t}throw new Error(`\`Node.createProperties\` only accepts objects, strings, blocks or inlines, but you passed it: ${r}`)}l();var Mx={length:void 0,mark:void 0,marks:void 0,newPath:void 0,node:void 0,offset:void 0,path:void 0,fragmentPath:void 0,position:void 0,properties:void 0,selection:void 0,target:void 0,text:void 0,type:void 0,data:void 0,dataPath:void 0,dataIndex:void 0,previousData:void 0},F=class extends ie(Mx){static create(e){switch(e.type){case"merge_node":case"split_node":return this.createRecord({...e,properties:Zt(e.properties)});case"set_node":return this.createRecord({...e,properties:Zt(e.properties)});default:return this.createRecord(e)}}static isOperation(e){return!!(e&&e[L.OPERATION])}get object(){return"operation"}};F.prototype[L.OPERATION]=!0;l();var Fu=Oe("slate:operation:apply");function wt(r,t,e){return r.selection&&t(r.selection)&&(r=r.set("selection",e(r.selection))),r}function _u(r,t){return wt(r,({startKey:e,endKey:n})=>t.hasNode(e)||t.hasNode(n),e=>{let{startKey:n,endKey:o}=e,i=r.document.getPreviousTextBeforeNode(t.key),s=r.document.getNextTextAfterNode(t.key);return t.hasNode(n)&&(e=i?e.moveStartTo(i.key,i.text.length):s?e.moveStartTo(s.key,0):e.deselect()),t.hasNode(o)&&(e=i?e.moveEndTo(i.key,i.text.length):s?e.moveEndTo(s.key,0):e.deselect()),e.isSet?e.normalize(r.document):e})}function Pu(r,t,e,n=null){return wt(r,o=>{if(!o.isAtomic)return!1;let{startKey:i,startOffset:s,endKey:a,endOffset:c}=o;return i===t&&s<e&&(a!==t||c>e)||n&&i===t&&s<n&&(a!==t||c>n)},o=>o.deselect())}var zx={insert_node(r,t){let{path:e,node:n}=t,o=e[e.length-1],i=e.slice(0,-1),{document:s}=r;if(s.hasNodeKeyConflict(n))return Fu.error(`skip insert_node, node "${n.key}" is conflicting with existing keys`),r;let a=s.assertPath(i);return a=a.insertNode(o,n),s=s.updateNode(a),r=r.set("document",s),r},remove_node(r,t){let{path:e}=t,{document:n}=r,{selection:o}=r,i=n.assertPath(e);o.isSet&&(r=_u(r,i));let s=n.getParent(i.key),a=s.getChildIndex(i.key);return s=s.removeNode(a),n=n.updateNode(s),r=r.set("document",n),r},move_node(r,t){let{path:e,newPath:n}=t,o=n[n.length-1],i=n.slice(0,-1),s=e.slice(0,-1),a=e[e.length-1],{document:c}=r,u=c.assertPath(e),f=c.getParent(u.key);f=f.removeNode(a),c=c.updateNode(f);let d;return s.every((p,h)=>p===i[h])&&s.length===i.length?d=f:(s.every((p,h)=>p===i[h])&&a<i[s.length]&&i[s.length]--,d=c.assertPath(i)),d=d.insertNode(o,u),c=c.updateNode(d),r=r.set("document",c),r},merge_node(r,t){let{path:e}=t,n=e.slice(0,e.length-1).concat([e[e.length-1]-1]),{document:o}=r,i=o.assertPath(n),s=o.assertPath(e),a=o.getParent(i.key),c=a.getChildIndex(i.key),u=a.getChildIndex(s.key);return a=a.mergeNode(c,u),o=o.updateNode(a),r=r.set("document",o),i.object==="text"&&(r=wt(r,({anchorKey:f,focusKey:d})=>f===s.key||d===s.key,f=>(f.anchorKey===s.key&&(f=f.moveAnchorTo(i.key,i.text.length+f.anchorOffset)),f.focusKey===s.key&&(f=f.moveFocusTo(i.key,i.text.length+f.focusOffset)),f.normalize(o)))),r},split_node(r,t){let{path:e,position:n,properties:{key:o,...i}}=t,{document:s}=r,a=s.assertPath(e),c=s.getParent(a.key),u=c.getChildIndex(a.key);if(c=c.splitNode(u,n,o),i){let d=c.nodes.get(u+1);d.object!=="text"&&(c=c.updateNode(d.merge(i)))}s=s.updateNode(c);let f=s.getNextText(a.key);return r=wt(r,({startKey:d,startOffset:p,endKey:h,endOffset:g})=>a.key===d&&n<=p||a.key===h&&n<=g,d=>{let{startKey:p,startOffset:h,endKey:g,endOffset:m}=d,k=!1;return a.key===p&&n<=h&&(d=d.moveStartTo(f.key,h-n),k=!0),a.key===g&&n<=m&&(d=d.moveEndTo(f.key,m-n),k=!0),k?d.normalize(s):d}),r=r.set("document",s),r},set_node(r,t){let{path:e,properties:n}=t,{document:o}=r,i=o.assertPath(e);return i=i.merge(n),o=o.updateNode(i),r=r.set("document",o),r},set_fragment(r,t){let{node:e,path:n}=t,{document:o}=r,i=o.assertPath(n);return i=i.setFragment(e),o=o.updateNode(i),r=r.set("document",o),r},insert_fragment(r,t){let{node:e,path:n,fragmentPath:o}=t,{document:i}=r,s=o[o.length-1]-1,a=i.assertPath(n);return a=a.insertFragment(e,s),i=i.updateNode(a),r=r.set("document",i),r},remove_fragment(r,t){let{node:e,path:n}=t,{document:o,selection:i}=r,s=o.assertPath(n),a=s.getFragmentByKey(e.fragmentKey);return i.isSet&&(r=_u(r,a)),s=s.removeFragmentByKey(e.fragmentKey),o=o.updateNode(s),r=r.set("document",o),r},insert_text(r,t){let{path:e,offset:n,text:o,marks:i}=t,{document:s}=r,a=s.assertPath(e);return a=a.insertText(n,o,i),s=s.updateNode(a),r=r.set("document",s),r=Pu(r,a.key,n),r=wt(r,({anchorKey:c,anchorOffset:u,isBackward:f,isAtomic:d})=>c===a.key&&(u>n||u===n&&(!d||!f)),c=>c.moveAnchor(o.length)),r=wt(r,({focusKey:c,focusOffset:u,isBackward:f,isAtomic:d})=>c===a.key&&(u>n||u===n&&(!d||f)),c=>c.moveFocus(o.length)),r},remove_text(r,t){let{path:e,offset:n,text:o}=t,{length:i}=o,s=n+i,{document:a}=r,c=a.assertPath(e);return r=Pu(r,c.key,n,n+i),r=wt(r,({anchorKey:u})=>u===c.key,u=>u.anchorOffset>=s?u.moveAnchor(-i):u.anchorOffset>n?u.moveAnchorTo(u.anchorKey,n):u),r=wt(r,({focusKey:u})=>u===c.key,u=>u.focusOffset>=s?u.moveFocus(-i):u.focusOffset>n?u.moveFocusTo(u.focusKey,n):u),c=c.removeText(n,i),a=a.updateNode(c),r=r.set("document",a),r},add_mark(r,t){let{path:e,offset:n,length:o,mark:i}=t,{document:s}=r,a=s.assertPath(e);return a=a.addMark(n,o,i),s=s.updateNode(a),r=r.set("document",s),r},remove_mark(r,t){let{path:e,offset:n,length:o,mark:i}=t,{document:s}=r,a=s.assertPath(e);return a=a.removeMark(n,o,i),s=s.updateNode(a),r=r.set("document",s),r},set_selection(r,t){var p,h;let{properties:e}=t,{anchorPath:n,focusPath:o,anchorBlock:i,focusBlock:s,...a}=e,{selection:c}=r,{document:u}=r,f=i||s;return n||o||a.anchorKey||a.focusKey||a.anchorOffset||a.focusOffset?(n!==void 0&&(a.anchorKey=n==null?null:u.assertPath(n).key),o!==void 0&&(a.focusKey=o==null?null:u.assertPath(o).key),(p=a.isFocused)!=null||(a.isFocused=c.isFocused),c=z.isTextRange(c)?c.merge(a):z.create(a)):f?(i!==void 0&&(a.anchorBlock=i==null?null:i),s!==void 0&&(a.focusBlock=s==null?null:s),(h=a.isFocused)!=null||(a.isFocused=c.isFocused),c=xe.isBlockRange(c)?c.merge(a):xe.create(a)):c=c.merge(a),c=c.normalize(u),r=r.set("selection",c),r},set_value(r,t){let{properties:e}=t;return r=r.merge(e),r},set_data(r,t){let{path:e,data:n,dataPath:o}=t,{document:i}=r,s=i.assertPath(e);return s=s.setData(o,n),i=i.updateNode(s),r=r.set("document",i),r},insert_array_data(r,t){let{data:e,dataPath:n,path:o,dataIndex:i}=t,{document:s}=r,a=s.assertPath(o);return a=a.insertArrayData(n,e,i),s=s.updateNode(a),r=r.set("document",s),r},remove_array_data(r,t){let{data:e,dataPath:n,path:o}=t,{document:i}=r,s=i.assertPath(o);return s=s.removeArrayData(n,e),i=i.updateNode(s),r=r.set("document",i),r},remove_data(r,t){let{path:e,data:n,dataPath:o}=t,{document:i}=r,s=i.assertPath(e);return s=s.removeData(o,n),i=i.updateNode(s),r=r.set("document",i),r},set_document(r,t){let{data:e}=t;return r=r.set("document",e).set("selection",r.selection.deselect()),r}};function Du(r,t){let{type:e}=t,n=zx[e];if(!n)throw new Error(`Unknown operation type: "${e}".`);return Fu.debug(e,t),r=n(r,t),r}l();var Ei=oe(Ni());var wu=Oe("slate:operation:invert");function Yn(r){let{type:t}=r;if(wu.debug(t,r),t==="insert_node")return r.set("type","remove_node");if(t==="set_fragment"||t==="insert_fragment")return r.set("type","remove_fragment").set("fragment",r.get("node").key);if(t==="remove_node")return r.set("type","insert_node");if(t==="remove_fragment")return r.set("type","insert_fragment").delete("fragment");if(t==="move_node"){let{newPath:e,path:n}=r,o=e,i=n,s=n.length-1,a=e.length-1;return n.length<o.length&&n.slice(0,s).every((c,u)=>c===o[u])&&n[s]<o[s]&&(o=o.slice(0,s).concat([o[s]-1]).concat(o.slice(s+1,o.length))),e.length<i.length&&e.slice(0,a).every((c,u)=>c===i[u])&&e[a]<=i[a]&&(i=i.slice(0,a).concat([i[a]+1]).concat(i.slice(a+1,i.length))),r.set("path",o).set("newPath",i)}if(t==="merge_node"){let{path:e}=r,{length:n}=e,o=n-1,i=e.slice(0,o).concat([e[o]-1]);return r.set("type","split_node").set("path",i)}if(t==="split_node"){let{path:e}=r,{length:n}=e,o=n-1,i=e.slice(0,o).concat([e[o]+1]);return r.set("type","merge_node").set("path",i)}if(t==="set_node"){let{properties:e,node:n}=r,o=n.merge(e),i=(0,Ei.default)(n,Object.keys(e));return r.set("node",o).set("properties",i)}if(t==="insert_text")return r.set("type","remove_text");if(t==="remove_text")return r.set("type","insert_text");if(t==="set_data")return r.get("previousData")===void 0?r.merge({type:"remove_data"}):r.merge({type:"set_data",data:r.get("previousData"),previousData:r.get("data")});if(t==="remove_data")return r.set("type","set_data");if(t==="insert_array_data")return r.set("type","remove_array_data").delete("dataIndex");if(t==="remove_array_data")return r.set("type","insert_array_data");if(t==="add_mark")return r.set("type","remove_mark");if(t==="remove_mark")return r.set("type","add_mark");if(t==="set_selection"){let{properties:e,selection:n}=r,o=n.merge(e),i=(0,Ei.default)(n,Object.keys(e));return r.set("selection",o).set("properties",i)}if(t==="set_document")return wu.error("Trying to invert a `set_document` operation which is forbidden."),r;Ke(t)}var Xn=Oe("slate:change"),ye=class{constructor(t){this.finalized=!1;let{value:e}=t;this.initialValue=e,this.value=e,this.operations=x.create(),this.savedOperations=[],this.flags={normalize:!0,...(0,_i.default)(t,["merge","save","normalize"])}}get object(){return"change"}get isDirty(){return this.operations.size>0}applyOperation(t,e={}){if(this.finalized)throw new Error("Change has already been finalized.");let{operations:n,flags:o}=this,{value:i}=this,s=i;e={...o,...e};let{save:a=!0}=e;return Xn.debug("apply",{operation:t,save:a}),i=Du(i,t),a&&t.type!=="set_selection"&&this.savedOperations.unshift(t),this.operations=n.push([t,i,s]),this.value=i,this}applyOperations(t,e){return t.forEach(n=>this.applyOperation(n,e)),this}finalize(){let t=this.value.selection.normalizeSelection(this.value.document);return t!==this.value.selection&&this.select(t),this.saveHistory(),this.finalized=!0,this}saveHistory(t={merge:!0}){if(this.savedOperations.length===0)return this;let e=this.savedOperations.map(Yn);return this.value=this.value.merge({history:this.value.history.save({operations:e,selectionBefore:this.initialValue.selection,merge:t.merge})}),this.savedOperations=[],this}call(t,...e){return t(this,...e),this}withoutNormalization(t){let e=this.flags.normalize;this.setOperationFlag("normalize",!1);try{t(this)}finally{this.setOperationFlag("normalize",e)}return this}setOperationFlag(t,e){return this.flags[t]=e,this}getFlag(t,e={}){return e[t]!==void 0?e[t]:this.flags[t]}unsetOperationFlag(t){return delete this.flags[t],this}setValueDecoration(t){return this.value=this.value.merge({decorations:this.value.decorations.add(t)}),this}removeValueDecoration(t){return this.value=this.value.merge({decorations:this.value.decorations.delete(t)}),this}undo(){let t=this.value.history.undo();return t?(t.operations.forEach(e=>{this.applyOperation(e,{save:!1})}),this.value=this.value.set("history",t.history),t.selection&&this.select(t.selection.merge({isFocused:this.value.isFocused})),this):this}redo(){let t=this.value.history.redo();return t?(t.selection&&this.select(t.selection.merge({isFocused:this.value.isFocused})),t.operations.forEach(e=>{this.applyOperation(e,{save:!1})}),this.value=this.value.set("history",t.history),this):this}selectBlock(t,e={}){let{snapshot:n=!1}=e,o=xe.createProperties(t);return this.applyOperation(F.create({type:"set_selection",properties:o,selection:t}),n?{skip:!1,merge:!1}:{}),this}selectText(t,e={}){let{snapshot:n=!1}=e,o=z.createProperties(t);return this.applyOperation(F.create({type:"set_selection",properties:o,selection:t}),n?{skip:!1,merge:!1}:{}),this}switchSelection(){let{value:t}=this,{document:e,selection:n}=t;return _t(n)?this.selectBlock(xe.fromTextRange(n,e)):this.selectText(z.fromBlockRange(n,e).collapseToStart())}select(t,e={}){let{snapshot:n=!1}=e,{value:o}=this,{document:i,selection:s}=o,a=mi(t),c=a?xe.createProperties(t):z.createProperties(t);if(Va(s,c))return a?this.selectBlock(xe.create(c)):this.selectText(z.create(c).collapseToStart());let u={},f=s.merge(c).normalize(i),d=s.toObject();c=(0,_i.default)(f,Object.keys(c));for(let h in c)n===!1&&c[h]===d[h]||(u[h]=c[h]);let p=["anchorKey","anchorOffset","focusKey","focusOffset"].some(h=>u.hasOwnProperty(h));return d.marks&&c.marks===d.marks&&p&&(u.marks=null),!n&&s.equals(f)?(Xn.warning("Skipping change.select because it's called with the same selection. It may indicate an issue with event handlers."),this):(0,Ru.default)(u)?this:(this.applyOperation(F.create({type:"set_selection",properties:u,selection:f}),n?{skip:!1,merge:!1}:{}),this)}selectAll(){let{value:t}=this,{document:e,selection:n}=t,o=e.getFragmentParent(n.anchorKey);if(!o)return this;let i=n.moveToRangeOf(o);return this.select(i),this}selectAllBlockRange(){let{value:t}=this,{document:e,selection:n}=t;if(!_(n))return this;let o=n.moveAnchorToStartOf(e).moveFocusToEndOf(e);return this.select(o),this}snapshotSelection(){let{value:t}=this,{selection:e}=t;return this.select(e,{snapshot:!0}),this}resizeBlockRangeBackward(){let{document:t,selection:e}=this.value;return _(e)?this.select(e.moveFocusBackward(t)):this}resizeBlockRangeForward(){let{document:t,selection:e}=this.value;return _(e)?this.select(e.moveFocusForward(t)):this}moveBlockRangeToDescendant(){let{document:t,selection:e}=this.value;return _(e)?this.select(e.moveSelectionToDescendant(t)):this}moveBlockRangeToAncestor(){let{document:t,selection:e}=this.value;return _(e)?this.select(e.moveSelectionToAncestor(t)):this}moveBlockRangeBackward(){let{value:t}=this,{document:e,selection:n}=t;if(!_(n))return this;let o=n.moveSelectionBackward(e);return this.select(o)}moveBlockRangeForward(){let{value:t}=this,{document:e,selection:n}=t;if(!_(n))return this;let o=n.moveSelectionForward(e);return this.select(o)}moveAnchorCharBackward(){let{value:t}=this,{document:e,selection:n,anchorText:o,anchorBlock:i}=t,{anchorOffset:s}=n,a=e.getPreviousText(o.key),c=e.hasVoidParent(o.key),u=a&&e.hasVoidParent(a.key);return!c&&s>0?(this.moveAnchor(-1),this):a?(this.moveAnchorToEndOf(a),!c&&!u&&i.hasNode(a.key)&&this.moveAnchor(-1),this):this}moveAnchorCharForward(){let{value:t}=this,{document:e,selection:n,anchorText:o,anchorBlock:i}=t,{anchorOffset:s}=n,a=e.getNextText(o.key),c=e.hasVoidParent(o.key),u=a&&e.hasVoidParent(a.key);return!c&&s<o.text.length?(this.moveAnchor(1),this):a?(this.moveAnchorToStartOf(a),!c&&!u&&i.hasNode(a.key)&&this.moveAnchor(1),this):this}moveFocusCharBackward(){let{value:t}=this,{document:e,selection:n,focusText:o,focusBlock:i}=t,{focusOffset:s}=n,a=e.getPreviousText(o.key),c=e.hasVoidParent(o.key),u=a&&e.hasVoidParent(a.key);return!c&&s>0?(this.moveFocus(-1),this):a?(this.moveFocusToEndOf(a),!c&&!u&&i.hasNode(a.key)&&this.moveFocus(-1),this):this}moveFocusCharForward(){let{value:t}=this,{document:e,selection:n,focusText:o,focusBlock:i}=t,{focusOffset:s}=n,a=e.getNextText(o.key),c=e.hasVoidParent(o.key),u=a&&e.hasVoidParent(a.key);return!c&&s<o.text.length?(this.moveFocus(1),this):a?(this.moveFocusToStartOf(a),!c&&!u&&i.hasNode(a.key)&&this.moveFocus(1),this):this}addMarkByKey(t,e,n,o,i={}){o=M.create(o);let s=this.getFlag("normalize",i),{value:a}=this,{document:c}=a,u=c.getPath(t),d=c.getNode(t).getLeaves(),p=[],h=e,g=e+n,m=0;if(d.forEach(k=>{let b=m,C=b+k.text.length;if(m+=k.text.length,C<h||g<b||k.marks.has(o))return;let v=Math.max(b,h),w=Math.min(C,g);p.push(F.create({type:"add_mark",path:u,offset:v,length:w-v,mark:o}))}),this.applyOperations(p),s){let k=c.getParent(t);this.normalizeNodeByKey(k.key)}return this}insertDocumentByKey(t,e,n,o={}){let i=this.getFlag("normalize",o);return n.nodes.forEach((s,a)=>{this.insertNodeByKey(t,e+a,s)}),i&&this.normalizeNodeByKey(t),this}setFragmentByKey(t,e,n={}){if(!N.isFragment(e))return this;let{value:o}=this,{document:i}=o,s=i.getNode(t);if(!s||!s.isBlock()&&!s.isInline())return this;let a=i.getPath(t),c=i.getPath(e.fragmentKey);return a?c?(this.applyOperation(F.create({type:"set_fragment",path:a,fragmentPath:c,node:e}),n),this.getFlag("normalize",n)&&this.normalizeNodeByKey(t),this):this.insertFragmentByKey(t,e,void 0,n):this}insertFragmentByKey(t,e,n=void 0,o={}){if(!N.isFragment(e))return this;let{value:i}=this,{document:s}=i,a=s.getNode(t);if(!a||!a.isBlock()&&!a.isInline())return this;let c=s.getPath(t);if(!c)return this;let u=[...c,a.nodes.size+(n===void 0?a.fragments.size:n)];return this.applyOperation(F.create({type:"insert_fragment",path:c,fragmentPath:u,node:e}),o),this.getFlag("normalize",o)&&this.normalizeNodeByKey(t),this}insertNodeByKey(t,e,n,o={}){if(N.isFragment(n))return this;let i=this.getFlag("normalize",o),{value:s}=this,{document:a}=s;if(a.hasNodeKeyConflict(n))return Xn.error(`skip insertNodeByKey, node "${n.key}" is conflicting with existing keys`),this;let c=a.getPath(t);return c?(this.applyOperation(F.create({type:"insert_node",path:[...c,e],node:n})),i&&this.normalizeNodeByKey(t),this):this}insertNodeAfterByKey(t,e,n={}){let{value:o}=this,{document:i}=o,s=i.getParent(t);if(!s)return this;let a=s.getChildIndex(t);return this.insertNodeByKey(s.key,a+1,e,n)}insertNodeBeforeByKey(t,e,n={}){let{value:o}=this,{document:i}=o,s=i.getParent(t);if(!s)return this;let a=s.getChildIndex(t);return this.insertNodeByKey(s.key,a,e,n)}insertTextByKey(t,e,n,o,i={}){let s=this.getFlag("normalize",i),{value:a}=this,{document:c}=a,u=c.getPath(t),f=c.getNode(t),d=o?M.createSet(o):f.getMarksAtIndex(e);if(this.applyOperation(F.create({type:"insert_text",path:u,offset:e,text:n,marks:d})),s){let p=c.getParent(t);this.normalizeNodeByKey(p.key)}return this}appendNodeByKey(t,e,n={}){let{value:o}=this,{document:i}=o,s=i.assertNode(t).nodes.size;return this.insertNodeByKey(t,s,e,n),this}insertDataByKey(t,e,n,o={}){let i=this.getFlag("normalize",o),{value:s}=this,{document:a}=s,c=a.getPath(t),u=a.assertNode(t);return this.applyOperation(F.create({type:"set_data",path:c,dataPath:e,data:n,previousData:u.data.getIn(e)}),o),i&&this.normalizeNodeByKey(t),this}setDataByKey(t,e,n,o={}){return this.insertDataByKey(t,e,n,o)}insertArrayDataByKey(t,e,n,o,i={}){let s=this.getFlag("normalize",i),{value:a}=this,{document:c}=a,u=c.getPath(t);return this.applyOperation(F.create({type:"insert_array_data",path:u,dataPath:e,data:n,dataIndex:o}),i),s&&this.normalizeNodeByKey(t),this}removeArrayDataByKey(t,e,n,o={}){let i=this.getFlag("normalize",o),{value:s}=this,{document:a}=s,c=a.getPath(t),f=a.assertNode(t).data.getIn(e);if(!Array.isArray(f))return this;let d=f.indexOf(n);return d<0?this:(this.applyOperation(F.create({type:"remove_array_data",path:c,dataPath:e,data:n,dataIndex:d}),o),i&&this.normalizeNodeByKey(t),this)}removeDataPathByKey(t,e,n={}){let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,a=s.getPath(t),c=s.assertNode(t);return this.applyOperation(F.create({type:"remove_data",path:a,dataPath:e,data:c.data.getIn(e)})),o&&this.normalizeNodeByKey(t),this}mergeNodeByKey(t,e={}){let n=this.getFlag("normalize",e),{value:o}=this,{document:i}=o,s=i.getPath(t),a=i.getDescendant(t),c=i.getPreviousSibling(t);if(!c)throw new Error(`Unable to merge node with key "${t}", no previous key.`);let u=c.object==="text"?c.text.length:c.nodes.size;if(this.applyOperation(F.create({type:"merge_node",path:s,position:u,properties:{key:a.key,type:a.type,data:a.data},target:null})),n){let f=i.getParent(t);this.normalizeNodeByKey(f.key)}return this}moveNodeByKey(t,e,n,o={}){let i=this.getFlag("normalize",o),{value:s}=this,{document:a}=s,c=a.getPath(t),u=a.getPath(e);if(this.applyOperation(F.create({type:"move_node",path:c,newPath:[...u,n]})),i){let f=a.getCommonAncestor(t,e);this.normalizeNodeByKey(f.key)}return this}moveAfterOrBefore(t,e,n,o={}){let{value:i}=this,{document:s}=i,a=s.getParent(e);if(!a)return this;let c=a.getChildIndex(e)+n,u=a.getChildIndex(t);return c===u?this:(u>=0&&(c=u<=c?c-1:c),this.moveNodeByKey(t,a.key,c,o))}moveAfterNodeByKey(t,e,n={}){return this.moveAfterOrBefore(t,e,1,n)}moveBeforeNodeByKey(t,e,n={}){return this.moveAfterOrBefore(t,e,0,n)}removeMarkByKey(t,e,n,o,i={}){o=M.create(o);let s=this.getFlag("normalize",i),{value:a}=this,{document:c}=a,u=c.getPath(t),d=c.getNode(t).getLeaves(),p=[],h=e,g=e+n,m=0;if(d.forEach(k=>{let b=m,C=b+k.text.length;if(m+=k.text.length,C<h||g<b||!k.marks.has(o))return;let v=Math.max(b,h),w=Math.min(C,g);p.push(F.create({type:"remove_mark",path:u,offset:v,length:w-v,mark:o}))}),this.applyOperations(p),s){let k=c.getParent(t);this.normalizeNodeByKey(k.key)}return this}removeInvalidMarksByKey(t,e,n={}){let{value:o}=this,{document:i}=o,s=i.getNode(t),a=s.getLeaves();if(!a.size)return this;let c=s.getMarksAsArray().filter(f=>!e.includes(f.type));if(!c||!c.length)return this;let u=0;return a.forEach(f=>{f.marks.forEach(d=>{e.includes(d.type)||this.removeMarkByKey(s.key,u,f.text.length,d,n)}),u+=f.text.length}),this}removeAllMarksByKey(t,e={}){let{value:n}=this,{document:o}=n,i=o.getNode(t);return(i.object==="text"?[i]:i.getTextsAsArray()).forEach(a=>{a.getMarksAsArray().forEach(c=>{this.removeMarkByKey(a.key,0,a.text.length,c,e)})}),this}removeDataByKey(t,e,n={}){let o=this.getFlag("normalize",n);return e.forEach(i=>{this.removeDataPathByKey(t,[i],{normalize:!1})}),o&&this.normalizeNodeByKey(t),this}removeNodeByKey(t,e={}){let n=this.getFlag("normalize",e),{value:o}=this,{document:i}=o,s=i.getPath(t),a=i.getNode(t);if(a&&a.object==="fragment"){let c=i.getParent(t);return c?this.removeFragmentInParentByKey(c.key,a.fragmentKey,e):this}if(this.applyOperation(F.create({type:"remove_node",path:s,node:a})),n){let c=i.getParent(t);this.normalizeNodeByKey(c.key),this.value.selection.isUnset&&this.normalizeSelection()}return this}removeFragmentByKey(t,e={}){let{value:n}=this,{document:o}=n,i=o.getNode(t);if(!i||i.object!=="fragment")return this;let s=o.getParent(t);if(!s)throw new Error("Parent not found for fragment");return this.removeFragmentInParentByKey(s.key,i.fragmentKey,e)}removeFragmentInParentByKey(t,e,n={}){let{value:o}=this,{document:i,selection:s}=o,a=i.getNode(t);if(!a||a.object!=="block"&&a.object!=="inline")return this;let c=a.getFragmentByKey(e);if(!c||c.object!=="fragment")return this;let u=i.getPath(a.key),f=i.getPath(c.key);return this.applyOperation(F.create({type:"remove_fragment",path:u,fragmentPath:f,node:c})),this.getFlag("normalize",n)&&(this.normalizeNodeByKey(a.key),s.isSet&&this.value.selection.isUnset&&this.normalizeSelection()),this}setTextByKey(t,e,n,o={}){let i=this.value.document.getDescendant(t);return this.replaceTextByKey(t,0,i.text.length,e,n,o),this}replaceTextByKey(t,e,n,o,i,s={}){let{document:a}=this.value,c=a.getDescendant(t);n+e>c.text.length&&(n=c.text.length-e);let u=z.create({anchorKey:t,focusKey:t,anchorOffset:e,focusOffset:e+n}),f=a.getActiveMarksAtRange(u);this.removeTextByKey(t,e,n,{normalize:!1});let d=i?M.createSet(i):f;return f&&(f=f.filter(p=>!d.find(h=>p.type===h.type)),d=f.union(d)),this.insertTextByKey(t,e,o,d,s),this}removeTextByKey(t,e,n,o={}){let i=this.getFlag("normalize",o),{value:s}=this,{document:a}=s,c=a.getPath(t),u=a.getNode(t),f=u.getLeaves(),{text:d}=u,p=[],h=e,g=e+n,m=0;if(f.forEach(k=>{let b=m,C=b+k.text.length;if(m+=k.text.length,C<h||g<b)return;let v=Math.max(b,h),w=Math.min(C,g),$=d.slice(v,w);p.push(F.create({type:"remove_text",path:c,offset:v,text:$,marks:k.marks}))}),this.applyOperations(p.reverse()),i){let k=a.getClosestBlock(t);this.normalizeNodeByKey(k.key)}return this}replaceNodeByKey(t,e,n={}){let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,a=s.assertNode(t),c=s.getParent(t);if(!c)throw new Error(`Parent not found for node "${t}"`);if(a.object==="fragment"){if(e.object!=="fragment")throw new Error("Replacing a fragment with a non-fragment is not allowed");this.removeFragmentByKey(t,{normalize:!1}),this.insertFragmentByKey(c.key,e,void 0,{normalize:!1})}else{let u=c.getChildIndex(a.key);this.removeNodeByKey(t,{normalize:!1}),this.insertNodeByKey(c.key,u,e,{normalize:!1})}return o&&this.normalizeNodeByKey(c.key),this}replaceWithDocumentByKey(t,e,n={}){let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,a=s.getNode(t),c=s.getParent(t),u=c.getChildIndex(a.key);return this.removeNodeByKey(t,{normalize:!1}),this.insertDocumentByKey(c.key,u,e,{normalize:!1}),o&&this.normalizeNodeByKey(c.key),this}setNodeByKey(t,e={},n={}){e=Zt(e);let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,a=s.getPath(t),c=s.getNode(t);return this.applyOperation(F.create({type:"set_node",path:a,node:c,properties:e})),o&&this.normalizeNodeByKey(c.key),this}splitNodeByKey(t,e,n={}){let{normalize:o=!0,target:i=null}=n,{value:s}=this,{document:a}=s,c=a.getPath(t),u=a.getDescendantAtPath(c),f=K();if(this.applyOperation(F.create({type:"split_node",path:c,position:e,properties:{key:f,type:u.type,data:u.data},target:i})),o){let d=a.getParent(t);this.normalizeNodeByKey(d.key)}return this}splitDescendantsByKey(t,e,n,o={}){if(t===e)return this.splitNodeByKey(e,n,o),this;let i=this.getFlag("normalize",o),{value:s}=this,{document:a}=s,c=a.getNode(e),f=a.getAncestors(e).skipUntil(h=>h.key===t).reverse().unshift(c),d,p;if(f.forEach(h=>{let g=p==null?null:p;p=d?h.getChildIndex(d.key)+1:n,d=h,this.splitNodeByKey(h.key,p,{normalize:!1,target:g})}),i){let h=a.getParent(t);this.normalizeNodeByKey(h.key)}return this}unwrapInlineByKey(t,e={}){let{value:n}=this,{document:o,selection:i}=n,s=o.assertDescendant(t),a=s.getFirstText(),c=s.getLastText(),u=i.moveToRangeOf(a,c);return this.unwrapInlineAtRange(u,s,e),this}unwrapBlockByKey(t,e={},n={}){let{value:o}=this,{document:i,selection:s}=o,a=i.assertDescendant(t),c=a.getFirstText(),u=a.getLastText(),f=s.moveToRangeOf(c,u);return this.unwrapBlockAtRange(f,e,n),this}unwrapNodeByKey(t,e={}){let n=this.getFlag("normalize",e),{value:o}=this,{document:i}=o,s=i.getParent(t);if(!s||N.isFragment(s)||s.isBlock()&&s.hasFragment(t))return this;let a=s.getChild(t),c=s.getChildIndex(a.key),u=c===0,f=c===s.nodes.size-1,d=i.getParent(s.key),p=d.getChildIndex(s.key);return s.nodes.size===1?(this.moveNodeByKey(t,d.key,p,{normalize:!1}),this.removeNodeByKey(s.key,e)):u?this.moveNodeByKey(t,d.key,p,e):f?this.moveNodeByKey(t,d.key,p+1,e):(this.splitNodeByKey(s.key,c,{normalize:!1}),this.moveNodeByKey(t,d.key,p+1,{normalize:!1}),n&&this.normalizeNodeByKey(d.key)),this}wrapBlockByKey(t,e,n={}){let o=T.create(e);o=o.set("nodes",o.nodes.clear());let{document:i}=this.value,s=i.assertDescendant(t);if(s.object==="fragment")return this;let a=i.getParent(s.key),c=a.getChildIndex(s.key);return this.insertNodeByKey(a.key,c,o,{normalize:!1}),this.moveNodeByKey(s.key,o.key,0,n),this}wrapInlineByKey(t,e,n={}){let o=V.create(e);o=o.set("nodes",o.nodes.clear());let{document:i}=this.value,s=i.assertDescendant(t),a=i.getParent(s.key),c=a.getChildIndex(s.key);return this.insertNodeByKey(a.key,c,o,{normalize:!1}),this.moveNodeByKey(s.key,o.key,0,n),this}addMarkAtRange(t,e,n={}){if(t.isCollapsed)return this;let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,{startKey:a,startOffset:c,endKey:u,endOffset:f}=t;return s.getTextsAtRange(t).forEach(p=>{let{key:h}=p,g=0,{length:m}=p.text;h===a&&(g=c),h===u&&(m=f),h===a&&h===u&&(m=f-c),this.addMarkByKey(h,g,m,e,{normalize:o})}),this}addMarksAtRange(t,e,n={}){return e.forEach(o=>this.addMarkAtRange(t,o,n)),this}deleteAtRange(t,e={}){let n=this.getFlag("normalize",e),{value:o}=this,{document:i}=o;if(_(t)){let m=o.blocks.size;if(o.blocks.forEach(k=>{this.removeNodeByKey(k.key,{normalize:!1})}),n){if(m===1){let C=i.getParent(o.blocks.get(0).key);if(C)return this.normalizeNodeByKey(C.key)}let{anchorBlock:k,focusBlock:b}=t;if(k&&b){let C=i.getCommonAncestor(k,b);return C?this.normalizeNodeByKey(C.key):this}}return this}if(t.isCollapsed)return this;this.snapshotSelection();let{startKey:s,startOffset:a,endKey:c,endOffset:u}=t,f=s?i.hasVoidParent(s):null,d=c?i.hasVoidParent(c):null,p=s?i.getClosestBlock(s):null,h=c?i.getClosestBlock(c):null,g=a===0&&u===0&&f===!1&&s===p.getFirstText().key&&c===h.getFirstText().key;for(;f;){let m=i.getClosestVoid(s),k=i.getNextSibling(m.key);if(this.removeNodeByKey(m.key,{normalize:!1}),s===c)return this;if(!k)return this;let b=k.isText()?k:k.getFirstText();if(!b)return this;i=this.value.document,s=b.key,a=0,f=i.hasVoidParent(s)}for(;d;){let m=i.getClosestVoid(c),k=i.getPreviousText(c);this.removeNodeByKey(m.key,{normalize:!1}),i=this.value.document,c=k.key,u=k.text.length,d=i.hasVoidParent(c)}if(s===c&&g)this.removeNodeByKey(p.key,{normalize:n});else if(s===c){let m=a,k=u-a;this.removeTextByKey(s,m,k,{normalize:n})}else{p=i.getClosestBlock(s),h=i.getClosestBlock(c);let m=i.getNode(s),k=i.getNode(c),b=m.text.length-a,C=u,v=i.getCommonAncestor(s,c),w=v.getFurthestAncestor(s),$=v.getFurthestAncestor(c),ne=i.getParent(p.key),R=ne.getChildIndex(p.key),fe=ne.getChildIndex(h.key),J;for(J=m;J.key!==w.key;){let Ye=i.getParent(J.key),jo=Ye.getChildIndex(J.key);Ye.nodes.slice(jo+1).reverse().forEach(qo=>{this.removeNodeByKey(qo.key,{normalize:!1})}),J=Ye}let Se=v.getChildIndex(w.key),ut=v.getChildIndex($.key);for(v.nodes.slice(Se+1,ut).reverse().forEach(Ye=>{this.removeNodeByKey(Ye.key,{normalize:!1})}),J=k;J.key!==$.key;){let Ye=i.getParent(J.key),jo=Ye.getChildIndex(J.key);Ye.nodes.slice(0,jo).reverse().forEach(qo=>{this.removeNodeByKey(qo.key,{normalize:!1})}),J=Ye}if(b!==0&&this.removeTextByKey(s,a,b,{normalize:!1}),C!==0&&this.removeTextByKey(c,0,u,{normalize:!1}),p.key!==h.key){i=this.value.document;let Ye=i.getFurthestOnlyChildAncestor(h.key);fe!==R+1&&this.moveNodeByKey(h.key,ne.key,R+1,{normalize:!1}),g?this.removeNodeByKey(p.key,{normalize:!1}):this.mergeNodeByKey(h.key,{normalize:!1}),Ye&&this.removeNodeByKey(Ye.key,{normalize:!1})}n&&this.normalizeNodeByKey(v.key)}return this}deleteBlockRangeForward(t={}){let{document:e,selection:n}=this.value;if(!_(n))return this;let o=n.moveSelectionForward(e);if(o.anchorBlock!==n.anchorBlock||o.focusBlock!==n.focusBlock)return this.deleteBlockRange(o,t).collapseToStartOfText();let c=this.deleteBlockRange(o,t).value.document.getLastText();return c&&this.selectText(z.create({anchorKey:c.key,anchorOffset:0,focusKey:c.key,focusOffset:0,isFocused:!0})),this.collapseToEndOfText()}deleteBlockRangeBackward(t={}){let{document:e,selection:n}=this.value;if(!_(n))return this;let o=n.moveSelectionBackward(e);if(o.anchorBlock!==n.anchorBlock||o.focusBlock!==n.focusBlock)return this.deleteBlockRange(o,t).collapseToEndOfText();let c=this.deleteBlockRange(o,t).value.document.getFirstText();return c&&this.selectText(z.create({anchorKey:c==null?void 0:c.key,anchorOffset:0,focusKey:c==null?void 0:c.key,focusOffset:0,isFocused:!0})),this.collapseToStartOfText()}deleteBlockRange(t,e={}){let{document:n}=this.value;this.deleteAtRange(t,e);let o=z.fromBlockRange(t,n);return this.selectText(o)}deleteCharBackwardAtRange(t,e={}){let{value:n}=this,{document:o}=n,{startKey:i,startOffset:s}=t;if(!i)return this;let a=o.getClosestBlock(i);if(!a)return this;let u=a.getOffset(i)+s,{text:f}=a,d=Ra(f,u);return this.deleteBackwardAtRange(t,d,e),this}deleteLineBackwardAtRange(t,e={}){let{value:n}=this,{document:o}=n,{startKey:i,startOffset:s}=t,u=o.getClosestBlock(i).getOffset(i)+s;return this.deleteBackwardAtRange(t,u,e),this}deleteWordBackwardAtRange(t,e={}){let{value:n}=this,{document:o}=n,{startKey:i,startOffset:s}=t,a=o.getClosestBlock(i),u=a.getOffset(i)+s,{text:f}=a,d=Ma(f,u);return this.deleteBackwardAtRange(t,d,e),this}deleteBackwardAtRange(t,e=1,n={}){if(e===0)return this;let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,{startKey:a,focusOffset:c}=t;if(t.isExpanded)return this.deleteAtRange(t,{normalize:o}),this;let u=s.getClosestVoid(a);if(u)return this.removeNodeByKey(u.key,{normalize:o}),this;let f=s.getClosestBlock(a);if(f&&f.isEmpty&&s.nodes.size!==1)return this.removeNodeByKey(f.key,{normalize:o}),this;if(t.isAtStartOf(s))return this;let d=s.getDescendant(a);if(t.isAtStartOf(d)){let m=s.getPreviousText(d.key),k=s.getClosestBlock(m.key),b=s.getClosestVoid(m.key);if(b)return this.removeNodeByKey(b.key,{normalize:o}),this;if(e===1&&k!==f)return t=t.merge({anchorKey:m.key,anchorOffset:m.text.length}),this.deleteAtRange(t,{normalize:o}),this}if(e<c)return t=t.merge({focusOffset:c-e,isBackward:!0}),this.deleteAtRange(t,{normalize:o}),this;let p=d,h=0,g=c;for(;e>g;){p=s.getPreviousText(p.key);let m=g+p.text.length;if(e<=m){h=m-e;break}else g=m}return t=t.merge({focusKey:p.key,focusOffset:h,isBackward:!0}),this.deleteAtRange(t,{normalize:o}),this}deleteCharForwardAtRange(t,e={}){let{value:n}=this,{document:o}=n,{startKey:i,startOffset:s}=t,a=o.getClosestBlock(i),u=a.getOffset(i)+s,{text:f}=a,d=Ka(f,u);return this.deleteForwardAtRange(t,d,e),this}deleteLineForwardAtRange(t,e={}){let{value:n}=this,{document:o}=n,{startKey:i,startOffset:s}=t,a=o.getClosestBlock(i),u=a.getOffset(i)+s;return this.deleteForwardAtRange(t,a.text.length-u,e),this}deleteWordForwardAtRange(t,e={}){let{value:n}=this,{document:o}=n,{startKey:i,startOffset:s}=t,a=o.getClosestBlock(i),u=a.getOffset(i)+s,{text:f}=a,d=za(f,u);return this.deleteForwardAtRange(t,d,e),this}deleteForwardAtRange(t,e=1,n={}){if(e===0)return this;let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,{startKey:a,focusOffset:c}=t;if(t.isExpanded)return this.deleteAtRange(t,{normalize:o}),this;let u=s.getClosestVoid(a);if(u)return this.removeNodeByKey(u.key,{normalize:o}),this;let f=s.getClosestBlock(a);if(f&&f.isEmpty&&s.nodes.size!==1){let m=s.getNextBlock(f.key);return this.removeNodeByKey(f.key,{normalize:o}),m&&m.key&&this.moveToStartOf(m),this}if(t.isAtEndOf(s))return this;let d=s.getDescendant(a);if(t.isAtEndOf(d)){let m=s.getNextText(d.key),k=s.getClosestBlock(m.key),b=s.getClosestVoid(m.key);if(b)return this.removeNodeByKey(b.key,{normalize:o}),this;if(e===1&&k!==f)return t=t.merge({focusKey:m.key,focusOffset:0}),this.deleteAtRange(t,{normalize:o}),this}if(e<=d.text.length-c)return t=t.merge({focusOffset:c+e}),this.deleteAtRange(t,{normalize:o}),this;let p=d,h=c,g=d.text.length-c;for(;e>g;){p=s.getNextText(p.key);let m=g+p.text.length;if(e<=m){h=e-g;break}else g=m}if(s.hasVoidParent(p.key)){let m=s.getClosestVoid(p.key);p=s.getPreviousText(m.key),h=p.text.length}return t=t.merge({focusKey:p.key,focusOffset:h}),this.deleteAtRange(t,{normalize:o}),this}insertBlockAtRange(t,e,n={}){let o=T.create(e),i=this.getFlag("normalize",n);t.isExpanded&&(this.deleteAtRange(t),t=t.collapseToStart());let{value:s}=this,{document:a}=s,{startKey:c,startOffset:u}=t,f=a.getClosestBlock(c),d=a.getClosestInline(c),p=a.getParent(f.key),h=p.getChildIndex(f.key);if(f.isVoid){let g=t.isAtEndOf(f)?1:0;this.insertNodeByKey(p.key,h+g,o,{normalize:i})}else if(f.isEmpty)this.insertNodeByKey(p.key,h+1,o,{normalize:i});else if(t.isAtStartOf(f))this.insertNodeByKey(p.key,h,o,{normalize:i});else if(t.isAtEndOf(f))this.insertNodeByKey(p.key,h+1,o,{normalize:i});else{if(d&&d.isVoid){let g=t.isAtEndOf(d),m=g?a.getNextText(c):a.getPreviousText(c),k=g?t.moveToStartOf(m):t.moveToEndOf(m);c=k.startKey,u=k.startOffset}this.splitDescendantsByKey(f.key,c,u,{normalize:!1}),this.insertNodeByKey(p.key,h+1,o,{normalize:i})}return i&&this.normalizeNodeByKey(p.key),this}insertDocumentAtBlockRange(t,e={}){let n=this.getFlag("normalize",e),{value:o}=this,{selection:i,document:s}=o;if(!_(i))return this;if(this.selectText(z.fromBlockRange(i.moveSelectionForward(s),s).collapseToStart()),o.blocks.forEach(d=>{this.removeNodeByKey(d.key,{normalize:!1})}),!t.nodes.size)return this;t=t.regenerateAllKeys();let c=i.getBlocks(s).first();if(!c)return this;let u=s.getParent(c.key);if(!u)return this;let f=u.getChildIndex(c.key);return t.nodes.reverse().forEach(d=>{this.insertNodeByKey(u.key,f,d,{normalize:!1})}),n&&this.normalizeNodeByKey(u.key),this}insertDocumentAtRange(t,e,n={}){let o=this.getFlag("normalize",n);if(t.isExpanded&&(this.deleteAtRange(t,{normalize:!1}),this.value.document.getDescendant(t.startKey)?t=t.collapseToStart():t=t.collapseTo(t.endKey,0)),!e.nodes.size)return this;e=e.regenerateAllKeys();let{startKey:i,startOffset:s}=t,{value:a}=this,{document:c}=a,u=c.getDescendant(i),f=c.getClosestBlock(u.key),d=f.getFurthestAncestor(u.key),p=t.isAtStartOf(f),h=c.getParent(f.key),g=h.getChildIndex(f.key),m=e.getLeafBlocks(),k=e.nodes.first(),b=e.nodes.last(),C=m.first(),v=m.last();if(h!=null&&h.isDocument()&&(f!=null&&f.isEmpty)&&t.isAtStartOf(f))return this.replaceWithDocumentByKey(f.key,e,n),this;if(C===v&&C.isVoid)return this.insertBlockAtRange(t,C,n),this;if(e.hasBlocks(k.key)||e.hasBlocks(b.key))return e.nodes.reverse().forEach(w=>{this.insertBlockAtRange(t,w,n)}),this;if(C!==v){let $=e.getFurthest(C.key,R=>R.nodes.size===1)||C,ne=h.getChildIndex(f.key);e=e.removeDescendant($.key),e.nodes.forEach((R,fe)=>{let J=ne+fe+1;this.insertNodeByKey(h.key,J,R,{normalize:!1})})}if(s!==0&&this.splitDescendantsByKey(d.key,i,s,{normalize:!1}),c=this.value.document,u=c.getDescendant(i),f=c.getClosestBlock(i),d=f.getFurthestAncestor(u.key),C!==v){let w=p?d:f.getNextSibling(d.key),$=w?f.nodes.skipUntil(R=>R.key===w.key):x.create(),ne=v.nodes.size;$.forEach((R,fe)=>{let J=ne+fe;this.moveNodeByKey(R.key,v.key,J,{normalize:!1})})}if(f.isEmpty)this.removeNodeByKey(f.key,{normalize:!1}),this.insertNodeByKey(h.key,g,C,{normalize:!1}),this.insertNodeByKey(C.key,0,S.create(""),{normalize:!1});else{let w=f.getFurthestAncestor(u.key),$=f.getChildIndex(w.key);C.nodes.forEach((ne,R)=>{let fe=s===0?0:1,J=$+R+fe;this.insertNodeByKey(f.key,J,ne,{normalize:!1})})}return o&&this.normalizeNodeByKey(h.key),this}insertInlineAtRange(t,e,n={}){let o=this.getFlag("normalize",n),i=V.create(e);t.isExpanded&&(this.deleteAtRange(t,{normalize:!1}),t=t.collapseToStart());let{value:s}=this,{document:a}=s,{startKey:c,startOffset:u}=t,f=a.getParent(c),d=a.assertDescendant(c),p=f.getChildIndex(d.key);return f.isVoid?this:(this.splitNodeByKey(c,u,{normalize:!1}),this.insertNodeByKey(f.key,p+1,i,{normalize:!1}),o&&this.normalizeNodeByKey(f.key),this)}insertTextAtRange(t,e,n,o={}){let i=this.getFlag("normalize",o),{value:s}=this,{document:a}=s,{startKey:c,startOffset:u}=t,f=c,d=u;if(a.getParent(c).isVoid)return this;if(t.isExpanded&&(this.deleteAtRange(t,{normalize:!1}),this.value.startKey!==f&&(f=this.value.startKey,d=this.value.startOffset)),i===void 0&&(i=t.isExpanded&&n&&n.size!==0),this.insertTextByKey(f,d,e,n,{normalize:!1}),i){let h=a.getCommonAncestor(c,t.endKey),m=a.getAncestors(h.key).push(h).findLast(b=>this.value.document.getDescendant(b.key)),k=m?m.key:f;this.normalizeNodeByKey(k)}return this}removeMarkAtRange(t,e,n={}){if(t.isCollapsed)return this;let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,a=s.getTextsAtRange(t),{startKey:c,startOffset:u,endKey:f,endOffset:d}=t;return a.forEach(p=>{let{key:h}=p,g=0,{length:m}=p.text;h===c&&(g=u),h===f&&(m=d),h===c&&h===f&&(m=d-u),this.removeMarkByKey(h,g,m,e,{normalize:o})}),this}setBlocksAtRange(t,e={},n={}){let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,a=s.getBlocksAtRange(t),{startKey:c,startOffset:u,endKey:f,endOffset:d,isCollapsed:p}=t,h=s.hasVoidParent(c),g=s.getClosestBlock(c),m=s.getClosestBlock(f);return(p===!1&&u===0&&d===0&&h===!1&&c===g.getFirstText().key&&f===m.getFirstText().key?a.slice(0,-1):a).forEach(C=>{this.setNodeByKey(C.key,e,{normalize:o})}),this}setInlinesAtRange(t,e={},n={}){let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i;return s.getInlinesAtRange(t).forEach(c=>{this.setNodeByKey(c.key,e,{normalize:o})}),this}splitBlockAtRange(t,e=1,n={}){let o=this.getFlag("normalize",n),{startKey:i,startOffset:s,endOffset:a,endKey:c}=t,{value:u}=this,{document:f}=u,d=f.assertDescendant(i),p=f.getClosestBlock(d.key),h=0;for(;p&&p.object==="block"&&h<e;)d=p,p=f.getClosestBlock(p.key),h++;if(this.splitDescendantsByKey(d.key,i,s,{normalize:o&&t.isCollapsed}),t.isExpanded){t.isBackward&&(t=t.flip());let g=this.value.document.getNextBlock(d.key);t=t.moveAnchorToStartOf(g),i===c&&(t=t.moveFocusTo(t.anchorKey,a-s)),this.deleteAtRange(t,{normalize:o})}return this}splitInlineAtRange(t,e=1/0,n={}){let o=this.getFlag("normalize",n);t.isExpanded&&(this.deleteAtRange(t,{normalize:o}),t=t.collapseToStart());let{startKey:i,startOffset:s}=t,{value:a}=this,{document:c}=a,u=c.assertDescendant(i),f=c.getClosestInline(u.key),d=0;for(;f&&f.object==="inline"&&d<e;)u=f,f=c.getClosestInline(f.key),d++;return this.splitDescendantsByKey(u.key,i,s,{normalize:o}),this}toggleMarkAtRange(t,e,n={}){if(t.isCollapsed)return this;e=M.create(e);let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i;return s.getActiveMarksAtRange(t).some(u=>u.equals(e))?this.removeMarkAtRange(t,e,{normalize:o}):this.addMarkAtRange(t,e,{normalize:o}),this}unwrapBlockAtRange(t,e={},n={}){e=Zt(e);let o=this.getFlag("normalize",n),i=this.value.document.getBlocksAtRange(t);return i.map(a=>this.value.document.getClosest(a.key,c=>!(c.object!=="block"||e.type!=null&&c.type!==e.type||e.isVoid!=null&&c.isVoid!==e.isVoid||e.data!=null&&!c.data.isSuperset(e.data)))).filter(a=>a).unique().forEach(a=>{let c=a.nodes.first(),u=a.nodes.last(),f=this.value.document.getParent(a.key),d=f.getChildIndex(a.key),p=a.nodes.filter(m=>i.some(k=>m===k||m.hasDescendant(k.key))),h=p.first(),g=p.last();if(c===h&&u===g)a.nodes.forEach((m,k)=>{this.moveNodeByKey(m.key,f.key,d+k,{normalize:!1})}),this.removeNodeByKey(a.key,{normalize:!1});else if(u===g)a.nodes.skipUntil(m=>m===h).forEach((m,k)=>{this.moveNodeByKey(m.key,f.key,d+1+k,{normalize:!1})});else if(c===h)a.nodes.takeUntil(m=>m===g).push(g).forEach((m,k)=>{this.moveNodeByKey(m.key,f.key,d+k,{normalize:!1})});else{let m=h.getFirstText();this.splitDescendantsByKey(a.key,m.key,0,{normalize:!1}),p.forEach((k,b)=>{if(b===0){let C=k;k=this.value.document.getNextBlock(k.key),this.removeNodeByKey(C.key,{normalize:!1})}this.moveNodeByKey(k.key,f.key,d+1+b,{normalize:!1})})}}),o&&this.normalizeDocument(),this}unwrapInlineAtRange(t,e={},n={}){e=Zt(e);let o=this.getFlag("normalize",n),{value:i}=this,{document:s}=i;return s.getTextsAtRange(t).map(u=>s.getClosest(u.key,f=>!(f.object!=="inline"||e.type!=null&&f.type!==e.type||e.isVoid!=null&&f.isVoid!==e.isVoid||e.data!=null&&!f.data.isSuperset(e.data)))).filter(u=>u).unique().forEach(u=>{let f=this.value.document.getParent(u.key),d=f.getChildIndex(u.key);u.nodes.forEach((p,h)=>{this.moveNodeByKey(p.key,f.key,d+h,{normalize:!1})}),this.removeNodeByKey(u.key,{normalize:!1})}),o&&this.normalizeDocument(),this}wrapBlockAtRange(t,e,n={}){let o=T.create(e);o=o.set("nodes",o.nodes.clear());let i=this.getFlag("normalize",n),{value:s}=this,{document:a}=s,c=a.getBlocksAtRange(t),u=c.first(),f=c.last(),d,p,h;if(c.length===1?(d=a.getParent(u.key),p=c):d=a.getClosest(u.key,g=>!!a.getClosest(f.key,m=>g===m)),d==null&&(d=a),p==null){let g=d.nodes.reduce((m,k,b)=>((k===u||k.hasDescendant(u.key))&&(m[0]=b),(k===f||k.hasDescendant(f.key))&&(m[1]=b),m),[]);h=g[0],p=d.nodes.slice(g[0],g[1]+1)}return h==null&&(h=d.nodes.indexOf(p.first())),this.insertNodeByKey(d.key,h,o,{normalize:!1}),p.forEach((g,m)=>{this.moveNodeByKey(g.key,o.key,m,{normalize:!1})}),i&&this.normalizeNodeByKey(d.key),this}wrapInlineAtRange(t,e,n={}){let{value:o}=this,{document:i}=o,s=this.getFlag("normalize",n),{startKey:a,startOffset:c,endKey:u,endOffset:f}=t;if(t.isCollapsed){let $=i.getClosestInline(a);return $.isVoid?this.wrapInlineByKey($.key,e,n):void 0}let d=V.create(e);d=d.set("nodes",d.nodes.clear());let p=i.getBlocksAtRange(t),h=i.getClosestBlock(a),g=i.getClosestBlock(u),m=i.getClosestInline(a),k=i.getClosestInline(u),b=h.getFurthestAncestor(a),C=g.getFurthestAncestor(u);(!m||m!==k)&&(this.splitDescendantsByKey(C.key,u,f,{normalize:!1}),this.splitDescendantsByKey(b.key,a,c,{normalize:!1})),i=this.value.document,h=i.getDescendant(h.key),g=i.getDescendant(g.key),b=h.getFurthestAncestor(a),C=g.getFurthestAncestor(u);let v=h.getChildIndex(b.key),w=g.getChildIndex(C.key);if(m&&m===k){let $=h.getTextsAtRange(t).get(0).splitText(c)[1].splitText(f-c)[0];d=d.set("nodes",x.create([$])),this.insertInlineAtRange(t,d,{normalize:!1});let ne=d.getFirstText().key,R={anchorKey:ne,focusKey:ne,anchorOffset:0,focusOffset:f-c,isFocused:!0};this.select(R)}else if(h===g){i=this.value.document,h=i.getClosestBlock(a),b=h.getFurthestAncestor(a);let $=i.getNextSibling(b.key),ne=h.getChildIndex($.key),R=a===u?$:h.getFurthestAncestor(u),fe=h.nodes.skipUntil(Se=>Se===$).takeUntil(Se=>Se===R).push(R),J=d.regenerateKey();this.insertNodeByKey(h.key,ne,J,{normalize:!1}),fe.forEach((Se,ut)=>{this.moveNodeByKey(Se.key,J.key,ut,{normalize:!1})}),s&&this.normalizeNodeByKey(h.key)}else{let $=h.nodes.slice(v+1),ne=g.nodes.slice(0,w+1),R=d.regenerateKey(),fe=d.regenerateKey();this.insertNodeByKey(h.key,v+1,R,{normalize:!1}),this.insertNodeByKey(g.key,w,fe,{normalize:!1}),$.forEach((J,Se)=>{this.moveNodeByKey(J.key,R.key,Se,{normalize:!1})}),ne.forEach((J,Se)=>{this.moveNodeByKey(J.key,fe.key,Se,{normalize:!1})}),s&&this.normalizeNodeByKey(h.key).normalizeNodeByKey(g.key),p.slice(1,-1).forEach(J=>{let Se=d.regenerateKey();this.insertNodeByKey(J.key,0,Se,{normalize:!1}),J.nodes.forEach((ut,xn)=>{this.moveNodeByKey(ut.key,Se.key,xn,{normalize:!1})}),s&&this.normalizeNodeByKey(J.key)})}return this}wrapTextAtRange(t,e,n=e,o={}){let i=this.getFlag("normalize",o),{startKey:s,endKey:a}=t,c=t.collapseToStart(),u=t.collapseToEnd();return s===a&&(u=u.move(e.length)),this.insertTextAtRange(c,e,[],{normalize:i}),this.insertTextAtRange(u,n,[],{normalize:i}),this}addMark(t,e={}){let n=M.create(t),{value:o}=this,{document:i,selection:s}=o;if(s.isExpanded)this.addMarkAtRange(s,n,e);else if(s.marks){let a=s.marks.add(n),c=s.set("marks",a);this.select(c)}else{let a=i.getActiveMarksAtRange(s).add(n),c=s.set("marks",a);this.select(c)}return this}addMarks(t,e={}){return t.forEach(n=>this.addMark(n)),this}delete(t={}){let{value:e}=this,{selection:n}=e;return this.deleteAtRange(n,t),this.collapseToStart(),this}insertBlock(t,e={}){t=T.create(t);let{value:n}=this,{selection:o}=n;this.insertBlockAtRange(o,t,e);let i=this.value.document.getNode(t.key);return i&&this.collapseToEndOf(i),this}insertDocument(t,e={}){var C;if(!t.nodes.size)return this;let{value:n}=this,{document:o,selection:i}=n;if(_(i)){let v=o.getBlocks().map(ne=>ne.key);this.insertDocumentAtBlockRange(t,e),n=this.value,o=n.document,i=n.selection;let $=(C=o.getBlocks().filter(ne=>!v.includes(ne.key)).first())==null?void 0:C.getFirstText();return $&&this.select(i.collapseTo($.key)),this}let{startText:s,endText:a,startInline:c}=n,u=t.getLastText(),f=t.getClosestInline(u.key),d=t.nodes.first(),p=t.nodes.last(),h=o.getTexts().map(v=>v.key),g=!c||i.hasEdgeAtStartOf(s)||i.hasEdgeAtEndOf(a),m=t.hasBlocks(d.key)||t.hasBlocks(p.key);this.insertDocumentAtRange(i,t,e),n=this.value,o=n.document;let k=o.getTexts().filter(v=>!h.includes(v.key)),b=g?k.last():k.takeLast(2).first();return b&&(f||m)?this.select(i.collapseToEndOf(b)):b?this.select(i.collapseToStartOf(b).move(u.text.length)):this.select(i.collapseToStart().move(u.text.length)),this}insertInline(t,e={}){t=V.create(t);let{value:n}=this,{selection:o}=n;this.insertInlineAtRange(o,t,e);let i=this.value.document.getNode(t.key);return i&&this.collapseToEndOf(i),this}insertText(t,e,n={}){let{value:o}=this,{document:i,selection:s}=o;return e=e||s.marks||i.getInsertMarksAtRange(s),this.insertTextAtRange(s,t,e,n),s.marks&&i!==this.value.document&&this.select({marks:null}),this}splitBlock(t=1,e={}){let{value:n}=this,{selection:o,document:i}=n,s=o.marks||i.getInsertMarksAtRange(o);return this.splitBlockAtRange(o,t,e).collapseToEnd(),s&&s.size!==0&&this.select({marks:s}),this}removeAllMarks(){let{value:t}=this;return t.activeMarks.forEach(e=>{this.removeMark(e)}),this}removeMark(t,e={}){let n=M.create(t),{value:o}=this,{document:i,selection:s}=o;if(s.isExpanded)this.removeMarkAtRange(s,n,e);else if(s.marks){let a=s.marks.delete(n),c=s.set("marks",a);this.select(c)}else{let a=i.getActiveMarksAtRange(s).delete(n),c=s.set("marks",a);this.select(c)}return this}replaceMark(t,e,n={}){return this.removeMark(t,n),this.addMark(e,n),this}toggleMark(t,e={}){let n=M.create(t),{value:o}=this;return o.activeMarks.has(n)?this.removeMark(n,e):this.addMark(n,e),this}wrapText(t,e=t,n={}){let{value:o}=this,{selection:i}=o;return this.wrapTextAtRange(i,t,e,n),i.isCollapsed&&this.moveStart(0-t.length),this.moveEnd(0-e.length),i.isForward!==this.value.selection.isForward&&this.flip(),this}normalize(){return this.normalizeDocument(),this}normalizeDocument(){let{value:t}=this,{document:e}=t;return this.normalizeNodeByKey(e.key),this}normalizeSelection(){let{value:t}=this,{selection:e,document:n}=t;return e.isSet?this.select(e.normalize(n)):n.nodes.size>0&&(this.collapseToStartOf(n),e.isFocused&&this.value.selection.isSet&&this.focus()),this}normalizeNodeByKey(t){let{value:e}=this,{schema:n}=e,{document:o}=e,i=o.assertNode(t);this.normalizeNodeAndChildren(i,n),o=this.value.document;let s=o.getAncestors(t);return s?(s.forEach(a=>{let c=this.value.document.getDescendant(a.key);c&&this.normalizeNode(c,n)}),this):this}normalizeNodeAndChildren(t,e){if(t.object==="text"){this.normalizeNode(t,e);return}let n=e.getFirstInvalidNode(t),o=this.value.document.getPath(t.key);for(;t&&n;)this.normalizeNodeAndChildren(n,e),t=this.value.document.refindNode(o,t.key),t?(o=this.value.document.refindPath(o,t.key),n=e.getFirstInvalidNode(t)):(o=[],n=null);t&&this.normalizeNode(t,e)}normalizeNode(t,e){let n=Math.max(t.object==="text"?1:t.nodes.size,1)*(e.validations.length+1),o=0,i=s=>{let a=e.validateNode(s);if(!a)return;let c=this.value.document.getPath(s.key);if(c&&(a(this),s=this.value.document.refindNode(c,s.key),!!s)){if(c=this.value.document.refindPath(c,s.key),o+=1,o>n)throw new Error(`A schema rule could not be validated after sufficient iterations for ${t.object}#${t.type||""}. This is usually due to a 'rule.validate' or 'rule.normalize' function of a schema being incorrectly written, causing an infinite loop.`);i(s)}};i(t)}};ye.logger=Xn,ye.isChange=me.bind(null,"CHANGE");["deleteBackward","deleteCharBackward","deleteLineBackward","deleteWordBackward","deleteForward","deleteCharForward","deleteWordForward","deleteLineForward","setBlocks","setInlines","splitInline","unwrapBlock","unwrapInline","wrapBlock","wrapInline"].forEach(r=>{ye.prototype[r]=function(...t){let{value:e}=this,{selection:n}=e,o=`${r}AtRange`;return this[o](n,...t),r.match(/Backward$/)?this.collapseToStart():r.match(/Forward$/)&&this.collapseToEnd(),this}});["Forward","Backward"].forEach(r=>{let t=`moveAnchorChar${r}`,e=`moveFocusChar${r}`;ye.prototype[`moveChar${r}`]=function(){return this[t](),this[e](),this},ye.prototype[`moveStartChar${r}`]=function(){return this.value.isBackward?this[e]():this[t](),this},ye.prototype[`moveEndChar${r}`]=function(){return this.value.isBackward?this[t]():this[e](),this},ye.prototype[`extendChar${r}`]=function(){return this[`moveFocusChar${r}`](),this},ye.prototype[`collapseChar${r}`]=function(){return this[r==="Forward"?"collapseToEnd":"collapseToStart"](),this[`moveChar${r}`](),this}});[["collapseLineBackward","collapseToStartOfBlock"],["collapseLineForward","collapseToEndOfBlock"],["extendLineBackward","extendToStartOfBlock"],["extendLineForward","extendToEndOfBlock"]].forEach(([r,t])=>{ye.prototype[r]=function(...e){return this[t](...e),this}});["blur","collapseTo","collapseToAnchor","collapseToEnd","collapseToEndOf","collapseToFocus","collapseToStart","collapseToStartOf","extend","extendTo","extendToEndOf","extendToStartOf","flip","focus","move","moveAnchor","moveAnchorOffsetTo","moveAnchorTo","moveAnchorToEndOf","moveAnchorToStartOf","moveEnd","moveEndOffsetTo","moveEndTo","moveFocus","moveFocusOffsetTo","moveFocusTo","moveFocusToEndOf","moveFocusToStartOf","moveOffsetsTo","moveStart","moveStartOffsetTo","moveStartTo","moveTo","moveToEnd","moveToEndOf","moveToRangeOf","moveToStart","moveToStartOf","deselect"].forEach(r=>{ye.prototype[r]=function(...t){let e=r!=="deselect",{value:n}=this,{document:o,selection:i}=n,s=i[r](...t);return e&&(s=s.normalize(o)),this.select(s),this}});["moveTo","moveAnchorTo","moveFocusTo","moveStartTo","moveEndTo","collapseTo","extendTo"].forEach(r=>{let t=["Start","End"],e=["Next","Previous"],n=["Block","Inline","Text"];r==="moveTo"&&t.push("TextRange"),t.forEach(o=>{let i=`${r}${o}Of`;n.forEach(s=>{let a=s==="Text"?"getNode":`getClosest${s}`;ye.prototype[`${i}${s}`]=function(){let{value:c}=this,{document:u,selection:f}=c,d=u[a](f.startKey);return d?(this[i](d),this):this},e.forEach(c=>{let u=`get${c}${s}`,f=c==="Next"?"startKey":"endKey";ye.prototype[`${i}${c}${s}`]=function(){let{value:d}=this,{document:p,selection:h}=d,g=p[a](h[f]);if(!g)return this;let m=p[u](g.key);return m?(this[i](m),this):this}})})})});ye.prototype[L.CHANGE]=!0;l();var Vx=Oe("slate:document"),re=class extends ft{get object(){return"document"}get isEmpty(){return!this.nodes.some(e=>!e.isEmpty)}get text(){return this.getText()}static isDocument(e){return me("DOCUMENT",e)}static create(e={}){return this.createRecord({key:e.key||K(),data:q.create(e.data),nodes:x.isList(e.nodes)?e.nodes:x.create(e.nodes)})}getFragmentAtRange(e,n=!0){if(e=e.normalize(this),e.isUnset)return re.create();let o=this,{startKey:i,startOffset:s,endKey:a,endOffset:c}=e,u=o.assertDescendant(i),f=o.assertDescendant(a);if(e.isCollapsed&&S.isText(u)&&u.isEmpty){let R=o.getParent(u.key);if(T.isBlock(R)&&R.isVoid)return re.create({nodes:[R]})}let d=o.getFragmentParent(i),p=o.getFragmentParent(a);if((d==null?void 0:d.object)==="fragment"&&(p==null?void 0:p.object)==="fragment")if(d.key===p.key)o=d;else throw new Error("Cannot create a fragment from a range spanning multiple fragments.");let h=u,g,m,k=[];for(;m=o.getParent(h.key),!!m;){let R=m.getChildIndex(h.key),fe=h.object==="text"?s:h.getChildIndex(g.key);m=m.splitNode(R,fe),o=o.updateNode(m),g=m.nodes.get(R+1),k.unshift(g.key),h=m}h=i===a?o.getNextText(i):f;let b=[];for(;m=o.getParent(h.key),!!m;){let R=m.getChildIndex(h.key),fe=h.object==="text"?i===a?c-s:c:h.getChildIndex(g.key);m=m.splitNode(R,fe),o=o.updateNode(m),g=m.nodes.get(R+1),b.unshift(m.nodes.get(R).key),h=m}if(n){let R;if(k.forEach((fe,J)=>{if(b[J]===fe){let ut=o.getByKey(fe);ut&&ut.object!=="text"&&ut.nodes.every(xn=>T.isBlock(xn))&&(R=ut)}}),R)return re.create({nodes:R.nodes})}let C=o.getNextSibling(o.getFurthestAncestor(i).key),v=i===a?o.getNextSibling(C.key):o.getNextSibling(o.getFurthestAncestor(a).key),w=o.getChildIndex(C.key),$=o.getChildIndex(v.key),ne=o.nodes.slice(w,$);return re.create({nodes:ne})}fixDuplicatedKeys(){let e=new Set;return this.mapDescendants(n=>(e.has(n.key)&&(Vx.warning(`duplicated key "${n.key}" (object "${n.object}" and type "${n.type}")`),n=n.set("key",Ku(e,n.key))),e.add(n.key),n))}};function Ku(r,t,e=1){let n=t.match(/^(\S+)-(\d+)$/),o=`${t}-${e}`;return n&&(o=`${n[1]}-${e}`),r.has(o)?Ku(r,t,e+1):o}re.prototype[L.DOCUMENT]=!0;Pt(re);l();var Ji=oe(Nd());var UC=1e3,Wi=class extends ie({operations:x.create(),timestamp:0,selectionBefore:null}){static create(t){return this.createRecord({selectionBefore:t.selectionBefore,operations:x.create(t.operations),timestamp:Date.now()})}push(t){return this.merge({operations:this.operations.unshift(...t),timestamp:Date.now()})}shouldMerge(t){let e=this.operations.first();return e?t.type==="set_selection"&&e.type==="set_selection"?!0:Date.now()-this.timestamp>UC?!1:!!(t.type==="insert_text"&&e.type==="insert_text"&&e.offset===t.offset+t.text.length&&(0,Ji.default)(t.path,e.path)||t.type==="remove_text"&&e.type==="remove_text"&&e.offset+e.text.length===t.offset&&(0,Ji.default)(t.path,e.path)):!1}},tr=class extends ie({undos:x.create(),redos:x.create()}){get object(){return"history"}static isHistory(e){return me("HISTORY",e)}static create(e){return this.createRecord(e)}save(e){let{selectionBefore:n,operations:o,merge:i=!0}=e,{undos:s,redos:a}=this,c=o[o.length-1],u=s.first();if(i&&u&&u.shouldMerge(c)){let f=u.push(o);s=s.shift(),s=s.unshift(f)}else{let f=Wi.create({operations:o,selectionBefore:n});s=s.unshift(f)}return s.size>100&&(s=s.take(100)),a=a.clear(),this.merge({undos:s,redos:a})}undo(){let{undos:e,redos:n}=this,o=e.first();if(o)return e=e.shift(),n=n.unshift(o),{history:this.merge({undos:e,redos:n}),operations:o.operations,selection:o.selectionBefore}}redo(){let{undos:e,redos:n}=this,o=n.first();if(!o)return;n=n.shift(),e=e.unshift(o);let i=o.operations.slice().reverse().map(Yn);return{history:this.merge({undos:e,redos:n}),operations:i,selection:o.selectionBefore}}};tr.prototype[L.HISTORY]=!0;l();l();l();l();var fs=oe(Jd()),$p=oe(Hp());l();var Ne="child_object_invalid",tn="child_required",Xe="child_type_invalid",rs="child_unknown",ns="first_child_object_invalid",rn="first_child_type_invalid",os="last_child_object_invalid",is="last_child_type_invalid",nt="node_data_invalid",ss="node_is_void_invalid",as="node_mark_invalid",Te="node_missing_fragment",cs="node_text_invalid",ls="node_fragment_type_invalid",no="node_unwanted_fragment",Fe="parent_object_invalid",ae="parent_type_invalid",us="fragment_type_invalid",nn="fragment_type_missing";var UA=Oe("slate:schema"),O=class extends ie({validations:[],document:{},blocks:{},inlines:{}}){get object(){return"schema"}static create(e={}){return O.isSchema(e)?e:this.createRecord(e)}static isSchema(e){return!!(e&&e[L.SCHEMA])}static createNormalize(e){return(o,i,s)=>e[i]?e[i](o,s):void 0}combineWith(e){return Array.isArray(e)?e.reduce((n,o)=>n.combineWith(o),this):O.create({validations:[...this.validations||[],...e.validations||[]],document:Jp(this.document,e.document),blocks:Up(this.blocks,e.blocks),inlines:Up(this.inlines,e.inlines)})}getFirstInvalidNode(e){if(S.isText(e))return this.validateNode(e)?e:null;let n=null;return e.nodes.toArray().concat(T.isBlock(e)?e.fragments.toValuesArray():[]).find(o=>(n=this.validateNode(o)?o:this.getFirstInvalidNode(o),n)),n}getRule(e){switch(e.object){case"document":return this.document;case"block":return this.blocks[e.type];case"inline":return this.inlines[e.type]}}getParentRules(){let{blocks:e,inlines:n}=this,o={};for(let i of Object.keys(e)){let s=e[i];s.parent!=null&&(o[i]=s)}for(let i of Object.keys(n)){let s=n[i];s.parent!=null&&(o[i]=s)}return Object.keys(o).length===0?null:o}fail(e,n){return o=>{UA.debug("normalizing",{violation:e,context:n});let{rule:i}=n,{size:s}=o.operations;i.normalize&&i.normalize(o,e,n),!(o.operations.size>s)&&this.normalize(o,e,n)}}normalize(e,n,o){switch(n){case Ne:case Xe:case rs:case ns:case rn:case os:case is:{let{child:i,node:s}=o;i.object==="text"&&s.object==="block"&&s.nodes.size===1?e.removeNodeByKey(s.key):e.removeNodeByKey(i.key);return}case tn:case cs:case Fe:case ae:{let{node:i,fragmentParent:s}=o;if(i.object==="document"){i.nodes.forEach(a=>e.removeNodeByKey(a.key));return}else if(i.object==="fragment"){e.removeFragmentInParentByKey(s.key,i.fragmentKey);return}else{e.removeNodeByKey(i.key);return}}case nt:{let{node:i,key:s}=o;i.data.get(s)===void 0&&i.object!=="document"?e.removeNodeByKey(i.key):e.removeDataPathByKey(i.key,[s]);return}case ss:{let{node:i}=o;e.setNodeByKey(i.key,{isVoid:!i.isVoid});return}case as:{let{node:i,mark:s}=o;i.getTexts().forEach(a=>e.removeMarkByKey(a.key,0,a.text.length,s));return}case no:{let{node:i,key:s}=o;e.removeFragmentInParentByKey(i.key,s);return}case ls:{let{node:i,child:s}=o;e.removeFragmentInParentByKey(i.key,s.fragmentKey);return}case Te:{let{node:i}=o;e.removeNodeByKey(i.key);return}case us:{let{node:i,child:s}=o;e.removeFragmentInParentByKey(i.key,s.fragmentKey);return}case nn:{let{node:i}=o;e.removeNodeByKey(i.key);return}default:throw new Error(`Unhandled violation "${n}"`)}}validateNode(e){for(let s of this.validations){let a=s(e);if(a!=null)return a}if(e.object==="text")return;let n=this.getRule(e)||{},o=this.getParentRules(),i={node:e,rule:n};if(typeof n.isVoid<"u"&&e.isVoid!==n.isVoid)return this.fail(ss,i);if(typeof n.data<"u")for(let s of Object.keys(n.data)){let a=n.data[s],c=e.data.get(s);if(!a(c))return this.fail(nt,{...i,key:s,value:c})}if(typeof n.marks<"u"){let s=e.getMarks().toArray();for(let a of s)if(!n.marks.some(c=>c.type===a.type))return this.fail(as,{...i,mark:a})}if(typeof n.text<"u"){let{text:s}=e;if(!n.text.test(s))return this.fail(cs,{...i,text:s})}if(typeof n.nodes<"u"||o!=null){let s=this.validateNodes(e,o,n.nodes,i);if(s)return s}if(typeof n.first<"u"){let{objects:s,types:a}=n.first,c=e.nodes.first();if(c&&s&&!s.includes(c.object))return this.fail(ns,{...i,child:c});if(c&&a&&!a.includes(c.type))return this.fail(rn,{...i,child:c})}if(typeof n.last<"u"){let{objects:s,types:a}=n.last,c=e.nodes.last();if(c&&s&&!s.includes(c.object))return this.fail(os,{...i,child:c});if(c&&a&&!a.includes(c.type))return this.fail(is,{...i,child:c})}if(typeof n.fragments<"u"){if(!T.isBlock(e)&&!V.isInline(e))throw new Error(`Cannot validate fragments on non-block/inline ("${e.object}")`);if(typeof n.fragments.keys<"u"){let s=$A(n.fragments.keys,e);if(s){let a=e.fragments.toKeysArray(),c=(0,fs.default)(a,Object.keys(s));if(c.length)return this.fail(no,{...i,key:c[0]});for(let[u,f]of Object.entries(s)){let d=e.getFragmentByKey(u);if(!d)return this.fail(Te,{...i,key:u});if(f&&d.type!==f)return this.fail(ls,{...i,key:u,child:d})}}}if(typeof n.fragments.types<"u"){let s=Object.keys(n.fragments.types),a=e.fragments.toValuesArray(),c=a.map(({type:f})=>f).reduce((f,d)=>(f[`${d}`]=(f[`${d}`]||0)+1,f),{}),u=(0,fs.default)(Object.keys(c),s);if(u.length)return this.fail(us,{...i,child:a.find(({type:f})=>`${f}`===u[0])});for(let[f,d]of Object.entries(n.fragments.types)){if(typeof d.min<"u"&&(c[f]||0)<d.min)return this.fail(nn,{...i,type:f});if(typeof d.max<"u"&&(c[f]||0)>d.max){let h=a.reverse().find(({type:g})=>`${g}`===f);return this.fail(no,{...i,key:h.fragmentKey})}}for(let f of e.fragments.toValuesArray()){let d=n.fragments.types[f.type],p=typeof d.nodes<"u"?d.nodes:n.fragments.nodes,h=this.validateNodes(f,o,p,{rule:n,node:f,fragmentParent:e});if(h)return h}}if(typeof n.fragments.nodes<"u"&&typeof n.fragments.types>"u")for(let s of e.fragments.toValuesArray()){let a=this.validateNodes(s,o,n.fragments.nodes,{rule:n,node:s,fragmentParent:e});if(a)return a}}}validateNodes(e,n,o,i){let s=e.nodes.toArray(),a=o!==void 0?o.slice():[],c,u,f,d,p,h;function g(){return c=c==null?null:0,d=a.shift(),u=d&&(!("min"in d)||d.min==null?0:d.min),p=d&&(!("max"in d)||d.max==null?1/0:d.max),!!d}function m(){return f=f==null?0:f+1,c=c==null?0:c+1,h=s[f],p!=null&&c===p&&g(),!!h}function k(){c-=1,f-=1}for(o!==void 0&&g();m();){if(n!=null&&h.object!=="text"&&h.type in n){let b=n[h.type];if(b.parent.objects!=null&&!b.parent.objects.includes(e.object))return this.fail(Fe,{node:h,parent:e,rule:b});if(b.parent.types!=null&&!b.parent.types.includes(e.type))return this.fail(ae,{node:h,parent:e,rule:b})}if(o!==void 0){if(!d)return this.fail(rs,{...i,child:h,index:f});if("objects"in d&&d.objects!=null&&!d.objects.includes(h.object)){if(c>=u&&g()){k();continue}return this.fail(Ne,{...i,child:h,index:f})}if("types"in d&&d.types!=null&&!d.types.includes(h.type)){if(c>=u&&g()){k();continue}return this.fail(Xe,{...i,child:h,index:f})}}}if(o!==void 0)for(;u!=null;){if(c<u)return this.fail(tn,{...i,index:f});g()}}};function $A(r,t){let e=typeof r=="function"?r(t):r;return Array.isArray(e)?e.reduce((n,o)=>(n[o]=void 0,n),{}):e}function Jp(r,t){let e={...r};return(0,$p.default)(e,t,JA),e}function Up(r,t){let e={...r};for(let n in t)t.hasOwnProperty(n)&&(e[n]=e[n]?Jp(e[n],t[n]):t[n]);return e}function JA(r,t,e){return e==="normalize"&&t&&r?(n,o,i)=>{let s=n.operations.size;r(n,o,i),!(n.operations.size>s)&&t(n,o,i)}:e==="objects"||e==="types"||e==="marks"?r==null?t:r.concat(t):t==null?r:t}O.prototype[L.SCHEMA]=!0;Nt(O,["getParentRules","getFirstInvalidNode","validateNode"]);function Wp(r,t){let e=r.nodes.filter(t);if(e.size)return n=>{e.forEach(o=>{n.removeNodeByKey(o.key,{normalize:!1})})}}var ds=O.create({validations:[r=>{if(r.object==="document")return Wp(r,t=>t.object!=="block")},r=>{if(r.object!=="block")return;let t=r.nodes.first();if(!t)return;let e=t.object==="block"?["block"]:["inline","text"],n=r.nodes.filter(o=>!e.includes(o.object));if(n.size)return o=>{n.forEach(i=>{o.removeNodeByKey(i.key,{normalize:!1})})}},r=>{if(r.object!=="inline")return;let t=r.nodes.filter(e=>e.object!=="inline"&&e.object!=="text");if(t.size)return e=>{t.forEach(n=>{e.removeNodeByKey(n.key,{normalize:!1})})}},r=>{if(!(r.object!=="block"&&r.object!=="inline")&&!(r.nodes.size>0))return t=>{let e=S.create();t.insertNodeByKey(r.key,0,e,{normalize:!1})}},r=>{if(r.object!=="inline"&&r.object!=="block")return;let t=r.nodes.filter(e=>e.object==="inline"&&e.isEmpty);if(t.size)return e=>{if(r.nodes.size===t.size){let n=S.create();e.insertNodeByKey(r.key,1,n,{normalize:!1})}t.forEach(n=>{e.removeNodeByKey(n.key,{normalize:!1})})}},r=>{if(r.object!=="block"&&r.object!=="inline")return;let t=r.nodes.reduce((e,n,o)=>{if(n.object!=="inline")return e;let i=o>0?r.nodes.get(o-1):null,s=r.nodes.get(o+1),a=!i,c=!s||s.object==="inline";return(c||a)&&e.push({insertAfter:c,insertBefore:a,index:o}),e},[]);if(t.length)return e=>{let n=0;t.forEach(({index:o,insertAfter:i,insertBefore:s})=>{s&&(e.insertNodeByKey(r.key,n+o,S.create(),{normalize:!1}),n++),i&&(e.insertNodeByKey(r.key,n+o+1,S.create(),{normalize:!1}),n++)})}},r=>{if(r.object!=="block"&&r.object!=="inline")return;let t=r.nodes.map((e,n)=>{if(e.object!=="text")return;let o=r.nodes.get(n+1);if(!(!o||o.object!=="text"))return o}).filter(Boolean);if(t.size)return e=>{t.reverse().forEach(n=>{e.mergeNodeByKey(n.key,{normalize:!1})})}},r=>{if(r.object!=="block"&&r.object!=="inline")return;let{nodes:t}=r;if(t.size<=1)return;let e=t.filter((n,o)=>{if(n.object!=="text"||n.text.length>0)return;let i=o>0?t.get(o-1):null,s=t.get(o+1);if(!(!i&&(s==null?void 0:s.object)==="inline")&&!(!s&&(i==null?void 0:i.object)==="inline")&&!(s&&i&&s.object==="inline"&&i.object==="inline"))return!0});if(e.size)return n=>{e.forEach(o=>{n.removeNodeByKey(o.key,{normalize:!1})})}},r=>{if(r.object==="fragment")return Wp(r,t=>t.object!=="block")},r=>{if(r.object==="fragment"&&!(r.nodes.size>0))return t=>{t.removeNodeByKey(r.key)}}]});var Qe=class extends ie({document:re.create({key:"document_key"}),history:tr.create(),schema:O.create(),selection:z.create(),decorations:I.create()}){get object(){return"value"}get hasUndos(){return this.history.undos.size>0}get hasRedos(){return this.history.redos.size>0}get isBlurred(){return this.selection.isBlurred}get isFocused(){return!!this.selection.isFocused}get isCollapsed(){return this.selection.isCollapsed}get isExpanded(){return this.selection.isExpanded}get isBackward(){return _(this.selection)?!1:!!this.selection.isBackward}get isForward(){return _(this.selection)?!1:this.selection.isForward}get startKey(){return _(this.selection)?null:this.selection.startKey}get endKey(){return _(this.selection)?null:this.selection.endKey}get startOffset(){return _(this.selection)?NaN:this.selection.startOffset}get endOffset(){return _(this.selection)?NaN:this.selection.endOffset}get anchorKey(){return _(this.selection)?null:this.selection.anchorKey}get focusKey(){return _(this.selection)?null:this.selection.focusKey}get anchorOffset(){return _(this.selection)?NaN:this.selection.anchorOffset}get focusOffset(){return _(this.selection)?NaN:this.selection.focusOffset}get isSelectionUnset(){return _t(this.selection)&&this.selection.isUnset}get startBlock(){return this.startKey?this.document.getClosestBlock(this.startKey):null}get endBlock(){return this.endKey?this.document.getClosestBlock(this.endKey):null}get anchorBlock(){var e;if(_(this.selection)){let{anchorBlock:n}=this.selection;return n&&(e=this.document.getBlocks().find(o=>o.key===n))!=null?e:null}return this.anchorKey?this.document.getClosestBlock(this.anchorKey):null}get focusBlock(){var e;if(_(this.selection)){let{focusBlock:n}=this.selection;return n&&(e=this.document.getBlocks().find(o=>o.key===n))!=null?e:null}return this.focusKey?this.document.getClosestBlock(this.focusKey):null}get startInline(){return this.startKey?this.document.getClosestInline(this.startKey):null}get endInline(){return this.endKey?this.document.getClosestInline(this.endKey):null}get anchorInline(){return this.anchorKey?this.document.getClosestInline(this.anchorKey):null}get focusInline(){return this.focusKey?this.document.getClosestInline(this.focusKey):null}get startText(){let e=this.startKey&&this.document.getDescendant(this.startKey);return e?Xt(e):null}get endText(){let e=this.endKey&&this.document.getDescendant(this.endKey);return e?Xt(e):null}get anchorText(){let e=this.anchorKey&&this.document.getDescendant(this.anchorKey);return e?Xt(e):null}get focusText(){let e=this.focusKey&&this.document.getDescendant(this.focusKey);return e?Xt(e):null}get nextBlock(){let e=this.endKey&&this.document.getNextBlock(this.endKey);return e?Xt(e):null}get previousBlock(){let e=this.startKey&&this.document.getPreviousBlock(this.startKey);return e?Xt(e):null}get nextText(){return this.endKey?this.document.getNextText(this.endKey):null}get previousText(){return this.startKey?this.document.getPreviousText(this.startKey):null}get marks(){return _(this.selection)?I.create():this.isSelectionUnset?I.create():this.selection.marks||this.document.getMarksAtRange(this.selection)}get activeMarks(){return _(this.selection)?I.create():this.isSelectionUnset?I.create():this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}get blockSelection(){if(_(this.selection))return this.selection;throw new Error("The selection is not a BlockRange so we can't get a blockSelection")}get blocks(){return _(this.selection)?this.selection.getBlocks(this.document):this.isSelectionUnset?x.create():this.document.getBlocksAtRange(this.selection)}get fragment(){return _(this.selection)?re.create({nodes:this.selection.getBlocks(this.document)}):this.isSelectionUnset?re.create():this.document.getFragmentAtRange(this.selection)}get inlines(){return _(this.selection)?x.create():this.isSelectionUnset?x.create():this.document.getInlinesAtRange(this.selection)}get texts(){return this.isSelectionUnset?x.create():this.document.getTextsAtRange(this.selection)}get isEmpty(){return this.isCollapsed?!0:this.endOffset!==0&&this.startOffset!==0?!1:this.fragment?this.fragment.isEmpty:!0}get isInVoid(){return _(this.selection)||this.isSelectionUnset||this.isExpanded?!1:this.startKey?this.document.hasVoidParent(this.startKey):!1}static create(e={},n={}){if(Qe.isValue(e))return e;let{document:o=re.create(),selection:i=z.create(),schema:s=O.create(),history:a=tr.create()}=e;if(_t(i)&&i.isUnset){let u=o.getFirstText();u&&(i=i.collapseToStartOf(u))}let c=this.createRecord({document:o,selection:i,schema:ds.combineWith(s),history:a});return n.normalize!==!1&&(c=c.change({save:!1}).normalize().value),c}static isValue(e){return!!(e&&e[L.VALUE])}change(e={}){return new ye({...e,value:this})}setSchema(e){return this.merge({schema:ds.combineWith(e)})}hasInline(e){return this.inlines.some(n=>n.type===e)}hasBlock(e){return this.blocks.some(n=>n.type===e)}};Qe.prototype[L.VALUE]=!0;function ge(r){switch(r.object||r.kind){case"mark":return M.create({type:r.type,data:r.data});case"leaf":return H.create({text:r.text,marks:r.marks.map(t=>ge(t))});case"text":return S.create({...r,leaves:r.leaves?r.leaves.map(t=>ge(t)):r.ranges.map(t=>ge({...t,kind:"leaf"}))});case"inline":return V.create({...r,fragments:r.fragments?r.fragments.map(t=>ge(t)):[],nodes:r.nodes.map(t=>ge(t))});case"fragment":return N.create({...r,nodes:r.nodes.map(t=>ge(t))});case"block":return T.create({...r,fragments:r.fragments?r.fragments.map(t=>ge(t)):[],nodes:r.nodes.map(t=>ge(t))});case"document":return re.create({...r,nodes:r.nodes.map(t=>ge(t))});case"range":return z.create(r);case"value":return Qe.create({document:ge(r.document),data:q.create(r.data||{}),selection:r.selection?ge(r.selection):void 0});case"operation":return XA(r);default:Ke(r)}}function ue(r,t){if(x.isList(r)||I.isSet(r))return r.toArray().map(e=>ue(e,t));switch(r.object){case"mark":return{object:r.object,type:r.type,data:r.data.toObject()};case"leaf":return{object:r.object,text:r.text,marks:r.marks.toArray().map(e=>ue(e)),selections:r.selections.toArray().map(e=>ue(e))};case"text":return{object:r.object,leaves:r.getLeaves().toArray().map(e=>ue(e)),...(t==null?void 0:t.preserveKeys)&&{key:r.key}};case"inline":return{object:r.object,type:r.type,isVoid:r.isVoid,data:r.data.toObject(),nodes:r.nodes.toArray().map(e=>ue(e,t)),...(t==null?void 0:t.preserveKeys)&&{key:r.key},...r.fragments.size?{fragments:r.fragments.toArray().map(([e,n])=>ue(n,t))}:{}};case"fragment":return{object:r.object,nodes:r.nodes.toArray().map(e=>ue(e,t)),...(t==null?void 0:t.preserveKeys)&&{key:r.key},...r.fragment&&{fragment:r.fragment},...r.type&&{type:r.type}};case"block":return{object:r.object,type:r.type,isVoid:r.isVoid,data:r.data.toObject(),nodes:r.nodes.toArray().map(e=>ue(e,t)),...(t==null?void 0:t.preserveKeys)&&{key:r.key},...r.fragments.size?{fragments:r.fragments.toArray().map(([e,n])=>ue(n,t))}:{}};case"document":return{object:r.object,data:r.data.toObject(),nodes:r.nodes.toArray().map(e=>ue(e,t)),...(t==null?void 0:t.preserveKeys)&&{key:r.key}};case"range":return{object:r.object,anchorKey:r.anchorKey,anchorOffset:r.anchorOffset,focusKey:r.focusKey,focusOffset:r.focusOffset,isBackward:r.isBackward,isFocused:r.isFocused,isAtomic:r.isAtomic,marks:r.marks==null?null:r.marks.toArray().map(e=>ue(e)),data:r.data.toObject()};case"value":return WA(r,t);case"operation":return YA(r,t);default:Ke(r)}}function WA(r,t){let e={object:r.object,document:ue(r.document,t),...(t==null?void 0:t.preserveDataValue)&&{data:r.data.toObject()}};if(t!=null&&t.preserveSelection&&!(t!=null&&t.preserveKeys)){let{document:n,selection:o}=r;e.selection=ue(r.selection),e.selection.anchorPath=o.isSet?n.getPath(o.anchorKey):null,e.selection.focusPath=o.isSet?n.getPath(o.focusKey):null,delete e.selection.anchorKey,delete e.selection.focusKey}return e}function YA(r,t){switch(r.type){case"insert_text":case"remove_text":return{object:"operation",type:r.type,path:r.path,offset:r.offset,text:r.text,marks:r.marks.toArray().map(e=>ue(e,t))};case"add_mark":case"remove_mark":return{object:"operation",type:r.type,path:r.path,offset:r.offset,length:r.length,mark:ue(r.mark,t)};case"insert_node":case"remove_node":return{object:"operation",type:r.type,path:r.path,node:ue(r.node,t)};case"move_node":return{object:"operation",type:r.type,path:r.path,newPath:r.newPath};case"merge_node":case"split_node":return{object:"operation",type:r.type,path:r.path,position:r.position,properties:r.properties,target:r.target};case"set_node":return{object:"operation",type:r.type,path:r.path,node:ue(r.node,t),properties:r.properties};case"insert_fragment":case"set_fragment":case"remove_fragment":return{object:"operation",type:r.type,path:r.path,...r.fragmentPath?{fragmentPath:r.fragmentPath}:{},node:ue(r.node,t)};case"set_data":case"remove_data":return{object:"operation",type:r.type,path:r.path,dataPath:r.dataPath,data:r.data};case"insert_array_data":case"remove_array_data":return{object:"operation",type:r.type,path:r.path,dataPath:r.dataPath,data:r.data,dataIndex:r.dataIndex};case"set_selection":return{object:"operation",type:r.type,selection:ue(r.selection),properties:r.properties};case"set_document":return{object:"operation",type:r.type,data:ue(r.data)};default:Ke(r)}}function XA(r){switch(r.type){case"insert_text":case"remove_text":return F.create({type:r.type,path:r.path,offset:r.offset,text:r.text,marks:M.createSet(r.marks.map(t=>ge(t)))});case"add_mark":case"remove_mark":return F.create({type:r.type,path:r.path,offset:r.offset,length:r.length,mark:ge(r.mark)});case"insert_node":case"remove_node":return F.create({type:r.type,path:r.path,node:ge(r.node)});case"move_node":return F.create({type:r.type,path:r.path,newPath:r.newPath});case"merge_node":case"split_node":return F.create({type:r.type,path:r.path,position:r.position,properties:r.properties,target:r.target});case"set_node":return F.create({type:r.type,path:r.path,node:ge(r.node),properties:r.properties});case"insert_fragment":case"set_fragment":case"remove_fragment":return F.create({type:r.type,path:r.path,...r.fragmentPath?{fragmentPath:r.fragmentPath}:{},node:ge(r.node)});case"set_data":case"remove_data":return F.create({type:r.type,path:r.path,dataPath:r.dataPath,data:r.data});case"insert_array_data":case"remove_array_data":return F.create({type:r.type,path:r.path,dataPath:r.dataPath,data:r.data,dataIndex:r.dataIndex});case"set_selection":return F.create({type:r.type,selection:ge(r.selection),properties:r.properties});case"set_document":return F.create({type:r.type,data:ge(r.data)});default:Ke(r)}}l();l();var Be=oe(Uh()),U=Be.Reader,Mt=Be.Writer,D=Be.util,B=Be.roots.default||(Be.roots.default={}),cn=B.Document=(()=>{function r(t){if(this.nodes=[],this.data={},t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return r.prototype.key="",r.prototype.nodes=D.emptyArray,r.prototype.data=D.emptyObject,r.create=function(e){return new r(e)},r.encode=function(e,n){if(n||(n=Mt.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&n.uint32(10).string(e.key),e.nodes!=null&&e.nodes.length)for(let o=0;o<e.nodes.length;++o)B.Block.encode(e.nodes[o],n.uint32(18).fork()).ldelim();if(e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let o=Object.keys(e.data),i=0;i<o.length;++i)n.uint32(26).fork().uint32(10).string(o[i]).uint32(18).string(e.data[o[i]]).ldelim();return n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof U||(e=U.create(e));let o=n===void 0?e.len:e.pos+n,i=new B.Document,s,a;for(;e.pos<o;){let c=e.uint32();switch(c>>>3){case 1:{i.key=e.string();break}case 2:{i.nodes&&i.nodes.length||(i.nodes=[]),i.nodes.push(B.Block.decode(e,e.uint32()));break}case 3:{i.data===D.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(s="",a="";e.pos<u;){let f=e.uint32();switch(f>>>3){case 1:s=e.string();break;case 2:a=e.string();break;default:e.skipType(f&7);break}}i.data[s]=a;break}default:e.skipType(c&7);break}}return i},r.decodeDelimited=function(e){return e instanceof U||(e=new U(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.key!=null&&e.hasOwnProperty("key")&&!D.isString(e.key))return"key: string expected";if(e.nodes!=null&&e.hasOwnProperty("nodes")){if(!Array.isArray(e.nodes))return"nodes: array expected";for(let n=0;n<e.nodes.length;++n){let o=B.Block.verify(e.nodes[n]);if(o)return"nodes."+o}}if(e.data!=null&&e.hasOwnProperty("data")){if(!D.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let o=0;o<n.length;++o)if(!D.isString(e.data[n[o]]))return"data: string{k:string} expected"}return null},r.fromObject=function(e){if(e instanceof B.Document)return e;let n=new B.Document;if(e.key!=null&&(n.key=String(e.key)),e.nodes){if(!Array.isArray(e.nodes))throw TypeError(".Document.nodes: array expected");n.nodes=[];for(let o=0;o<e.nodes.length;++o){if(typeof e.nodes[o]!="object")throw TypeError(".Document.nodes: object expected");n.nodes[o]=B.Block.fromObject(e.nodes[o])}}if(e.data){if(typeof e.data!="object")throw TypeError(".Document.data: object expected");n.data={};for(let o=Object.keys(e.data),i=0;i<o.length;++i)n.data[o[i]]=String(e.data[o[i]])}return n},r.toObject=function(e,n){n||(n={});let o={};if((n.arrays||n.defaults)&&(o.nodes=[]),(n.objects||n.defaults)&&(o.data={}),n.defaults&&(o.key=""),e.key!=null&&e.hasOwnProperty("key")&&(o.key=e.key),e.nodes&&e.nodes.length){o.nodes=[];for(let s=0;s<e.nodes.length;++s)o.nodes[s]=B.Block.toObject(e.nodes[s],n)}let i;if(e.data&&(i=Object.keys(e.data)).length){o.data={};for(let s=0;s<i.length;++s)o.data[i[s]]=e.data[i[s]]}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Be.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Document"},r})(),XM=B.Block=(()=>{function r(t){if(this.nodes=[],this.fragments=[],this.data={},t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return r.prototype.key="",r.prototype.type="",r.prototype.nodes=D.emptyArray,r.prototype.fragments=D.emptyArray,r.prototype.data=D.emptyObject,r.prototype.isVoid=!1,r.create=function(e){return new r(e)},r.encode=function(e,n){if(n||(n=Mt.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&n.uint32(10).string(e.key),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&n.uint32(18).string(e.type),e.nodes!=null&&e.nodes.length)for(let o=0;o<e.nodes.length;++o)B.Node.encode(e.nodes[o],n.uint32(26).fork()).ldelim();if(e.fragments!=null&&e.fragments.length)for(let o=0;o<e.fragments.length;++o)B.Fragment.encode(e.fragments[o],n.uint32(34).fork()).ldelim();if(e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let o=Object.keys(e.data),i=0;i<o.length;++i)n.uint32(42).fork().uint32(10).string(o[i]).uint32(18).string(e.data[o[i]]).ldelim();return e.isVoid!=null&&Object.hasOwnProperty.call(e,"isVoid")&&n.uint32(48).bool(e.isVoid),n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof U||(e=U.create(e));let o=n===void 0?e.len:e.pos+n,i=new B.Block,s,a;for(;e.pos<o;){let c=e.uint32();switch(c>>>3){case 1:{i.key=e.string();break}case 2:{i.type=e.string();break}case 3:{i.nodes&&i.nodes.length||(i.nodes=[]),i.nodes.push(B.Node.decode(e,e.uint32()));break}case 4:{i.fragments&&i.fragments.length||(i.fragments=[]),i.fragments.push(B.Fragment.decode(e,e.uint32()));break}case 5:{i.data===D.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(s="",a="";e.pos<u;){let f=e.uint32();switch(f>>>3){case 1:s=e.string();break;case 2:a=e.string();break;default:e.skipType(f&7);break}}i.data[s]=a;break}case 6:{i.isVoid=e.bool();break}default:e.skipType(c&7);break}}return i},r.decodeDelimited=function(e){return e instanceof U||(e=new U(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.key!=null&&e.hasOwnProperty("key")&&!D.isString(e.key))return"key: string expected";if(e.type!=null&&e.hasOwnProperty("type")&&!D.isString(e.type))return"type: string expected";if(e.nodes!=null&&e.hasOwnProperty("nodes")){if(!Array.isArray(e.nodes))return"nodes: array expected";for(let n=0;n<e.nodes.length;++n){let o=B.Node.verify(e.nodes[n]);if(o)return"nodes."+o}}if(e.fragments!=null&&e.hasOwnProperty("fragments")){if(!Array.isArray(e.fragments))return"fragments: array expected";for(let n=0;n<e.fragments.length;++n){let o=B.Fragment.verify(e.fragments[n]);if(o)return"fragments."+o}}if(e.data!=null&&e.hasOwnProperty("data")){if(!D.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let o=0;o<n.length;++o)if(!D.isString(e.data[n[o]]))return"data: string{k:string} expected"}return e.isVoid!=null&&e.hasOwnProperty("isVoid")&&typeof e.isVoid!="boolean"?"isVoid: boolean expected":null},r.fromObject=function(e){if(e instanceof B.Block)return e;let n=new B.Block;if(e.key!=null&&(n.key=String(e.key)),e.type!=null&&(n.type=String(e.type)),e.nodes){if(!Array.isArray(e.nodes))throw TypeError(".Block.nodes: array expected");n.nodes=[];for(let o=0;o<e.nodes.length;++o){if(typeof e.nodes[o]!="object")throw TypeError(".Block.nodes: object expected");n.nodes[o]=B.Node.fromObject(e.nodes[o])}}if(e.fragments){if(!Array.isArray(e.fragments))throw TypeError(".Block.fragments: array expected");n.fragments=[];for(let o=0;o<e.fragments.length;++o){if(typeof e.fragments[o]!="object")throw TypeError(".Block.fragments: object expected");n.fragments[o]=B.Fragment.fromObject(e.fragments[o])}}if(e.data){if(typeof e.data!="object")throw TypeError(".Block.data: object expected");n.data={};for(let o=Object.keys(e.data),i=0;i<o.length;++i)n.data[o[i]]=String(e.data[o[i]])}return e.isVoid!=null&&(n.isVoid=Boolean(e.isVoid)),n},r.toObject=function(e,n){n||(n={});let o={};if((n.arrays||n.defaults)&&(o.nodes=[],o.fragments=[]),(n.objects||n.defaults)&&(o.data={}),n.defaults&&(o.key="",o.type="",o.isVoid=!1),e.key!=null&&e.hasOwnProperty("key")&&(o.key=e.key),e.type!=null&&e.hasOwnProperty("type")&&(o.type=e.type),e.nodes&&e.nodes.length){o.nodes=[];for(let s=0;s<e.nodes.length;++s)o.nodes[s]=B.Node.toObject(e.nodes[s],n)}if(e.fragments&&e.fragments.length){o.fragments=[];for(let s=0;s<e.fragments.length;++s)o.fragments[s]=B.Fragment.toObject(e.fragments[s],n)}let i;if(e.data&&(i=Object.keys(e.data)).length){o.data={};for(let s=0;s<i.length;++s)o.data[i[s]]=e.data[i[s]]}return e.isVoid!=null&&e.hasOwnProperty("isVoid")&&(o.isVoid=e.isVoid),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Be.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Block"},r})(),QM=B.Node=(()=>{function r(e){if(e)for(let n=Object.keys(e),o=0;o<n.length;++o)e[n[o]]!=null&&(this[n[o]]=e[n[o]])}r.prototype.inline=null,r.prototype.text=null,r.prototype.block=null;let t;return Object.defineProperty(r.prototype,"node",{get:D.oneOfGetter(t=["inline","text","block"]),set:D.oneOfSetter(t)}),r.create=function(n){return new r(n)},r.encode=function(n,o){return o||(o=Mt.create()),n.inline!=null&&Object.hasOwnProperty.call(n,"inline")&&B.Inline.encode(n.inline,o.uint32(10).fork()).ldelim(),n.text!=null&&Object.hasOwnProperty.call(n,"text")&&B.Text.encode(n.text,o.uint32(18).fork()).ldelim(),n.block!=null&&Object.hasOwnProperty.call(n,"block")&&B.Block.encode(n.block,o.uint32(26).fork()).ldelim(),o},r.encodeDelimited=function(n,o){return this.encode(n,o).ldelim()},r.decode=function(n,o){n instanceof U||(n=U.create(n));let i=o===void 0?n.len:n.pos+o,s=new B.Node;for(;n.pos<i;){let a=n.uint32();switch(a>>>3){case 1:{s.inline=B.Inline.decode(n,n.uint32());break}case 2:{s.text=B.Text.decode(n,n.uint32());break}case 3:{s.block=B.Block.decode(n,n.uint32());break}default:n.skipType(a&7);break}}return s},r.decodeDelimited=function(n){return n instanceof U||(n=new U(n)),this.decode(n,n.uint32())},r.verify=function(n){if(typeof n!="object"||n===null)return"object expected";let o={};if(n.inline!=null&&n.hasOwnProperty("inline")){o.node=1;{let i=B.Inline.verify(n.inline);if(i)return"inline."+i}}if(n.text!=null&&n.hasOwnProperty("text")){if(o.node===1)return"node: multiple values";o.node=1;{let i=B.Text.verify(n.text);if(i)return"text."+i}}if(n.block!=null&&n.hasOwnProperty("block")){if(o.node===1)return"node: multiple values";o.node=1;{let i=B.Block.verify(n.block);if(i)return"block."+i}}return null},r.fromObject=function(n){if(n instanceof B.Node)return n;let o=new B.Node;if(n.inline!=null){if(typeof n.inline!="object")throw TypeError(".Node.inline: object expected");o.inline=B.Inline.fromObject(n.inline)}if(n.text!=null){if(typeof n.text!="object")throw TypeError(".Node.text: object expected");o.text=B.Text.fromObject(n.text)}if(n.block!=null){if(typeof n.block!="object")throw TypeError(".Node.block: object expected");o.block=B.Block.fromObject(n.block)}return o},r.toObject=function(n,o){o||(o={});let i={};return n.inline!=null&&n.hasOwnProperty("inline")&&(i.inline=B.Inline.toObject(n.inline,o),o.oneofs&&(i.node="inline")),n.text!=null&&n.hasOwnProperty("text")&&(i.text=B.Text.toObject(n.text,o),o.oneofs&&(i.node="text")),n.block!=null&&n.hasOwnProperty("block")&&(i.block=B.Block.toObject(n.block,o),o.oneofs&&(i.node="block")),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Be.util.toJSONOptions)},r.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/Node"},r})(),ZM=B.Fragment=(()=>{function r(t){if(this.nodes=[],t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return r.prototype.key="",r.prototype.fragment="",r.prototype.type="",r.prototype.nodes=D.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,n){if(n||(n=Mt.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&n.uint32(10).string(e.key),e.fragment!=null&&Object.hasOwnProperty.call(e,"fragment")&&n.uint32(18).string(e.fragment),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&n.uint32(26).string(e.type),e.nodes!=null&&e.nodes.length)for(let o=0;o<e.nodes.length;++o)B.Block.encode(e.nodes[o],n.uint32(34).fork()).ldelim();return n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof U||(e=U.create(e));let o=n===void 0?e.len:e.pos+n,i=new B.Fragment;for(;e.pos<o;){let s=e.uint32();switch(s>>>3){case 1:{i.key=e.string();break}case 2:{i.fragment=e.string();break}case 3:{i.type=e.string();break}case 4:{i.nodes&&i.nodes.length||(i.nodes=[]),i.nodes.push(B.Block.decode(e,e.uint32()));break}default:e.skipType(s&7);break}}return i},r.decodeDelimited=function(e){return e instanceof U||(e=new U(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.key!=null&&e.hasOwnProperty("key")&&!D.isString(e.key))return"key: string expected";if(e.fragment!=null&&e.hasOwnProperty("fragment")&&!D.isString(e.fragment))return"fragment: string expected";if(e.type!=null&&e.hasOwnProperty("type")&&!D.isString(e.type))return"type: string expected";if(e.nodes!=null&&e.hasOwnProperty("nodes")){if(!Array.isArray(e.nodes))return"nodes: array expected";for(let n=0;n<e.nodes.length;++n){let o=B.Block.verify(e.nodes[n]);if(o)return"nodes."+o}}return null},r.fromObject=function(e){if(e instanceof B.Fragment)return e;let n=new B.Fragment;if(e.key!=null&&(n.key=String(e.key)),e.fragment!=null&&(n.fragment=String(e.fragment)),e.type!=null&&(n.type=String(e.type)),e.nodes){if(!Array.isArray(e.nodes))throw TypeError(".Fragment.nodes: array expected");n.nodes=[];for(let o=0;o<e.nodes.length;++o){if(typeof e.nodes[o]!="object")throw TypeError(".Fragment.nodes: object expected");n.nodes[o]=B.Block.fromObject(e.nodes[o])}}return n},r.toObject=function(e,n){n||(n={});let o={};if((n.arrays||n.defaults)&&(o.nodes=[]),n.defaults&&(o.key="",o.fragment="",o.type=""),e.key!=null&&e.hasOwnProperty("key")&&(o.key=e.key),e.fragment!=null&&e.hasOwnProperty("fragment")&&(o.fragment=e.fragment),e.type!=null&&e.hasOwnProperty("type")&&(o.type=e.type),e.nodes&&e.nodes.length){o.nodes=[];for(let i=0;i<e.nodes.length;++i)o.nodes[i]=B.Block.toObject(e.nodes[i],n)}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Be.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Fragment"},r})(),ez=B.Inline=(()=>{function r(t){if(this.nodes=[],this.data={},this.fragments=[],t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return r.prototype.key="",r.prototype.type="",r.prototype.nodes=D.emptyArray,r.prototype.data=D.emptyObject,r.prototype.isVoid=!1,r.prototype.fragments=D.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,n){if(n||(n=Mt.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&n.uint32(10).string(e.key),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&n.uint32(18).string(e.type),e.nodes!=null&&e.nodes.length)for(let o=0;o<e.nodes.length;++o)B.Node.encode(e.nodes[o],n.uint32(26).fork()).ldelim();if(e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let o=Object.keys(e.data),i=0;i<o.length;++i)n.uint32(34).fork().uint32(10).string(o[i]).uint32(18).string(e.data[o[i]]).ldelim();if(e.isVoid!=null&&Object.hasOwnProperty.call(e,"isVoid")&&n.uint32(48).bool(e.isVoid),e.fragments!=null&&e.fragments.length)for(let o=0;o<e.fragments.length;++o)B.Fragment.encode(e.fragments[o],n.uint32(58).fork()).ldelim();return n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof U||(e=U.create(e));let o=n===void 0?e.len:e.pos+n,i=new B.Inline,s,a;for(;e.pos<o;){let c=e.uint32();switch(c>>>3){case 1:{i.key=e.string();break}case 2:{i.type=e.string();break}case 3:{i.nodes&&i.nodes.length||(i.nodes=[]),i.nodes.push(B.Node.decode(e,e.uint32()));break}case 4:{i.data===D.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(s="",a="";e.pos<u;){let f=e.uint32();switch(f>>>3){case 1:s=e.string();break;case 2:a=e.string();break;default:e.skipType(f&7);break}}i.data[s]=a;break}case 6:{i.isVoid=e.bool();break}case 7:{i.fragments&&i.fragments.length||(i.fragments=[]),i.fragments.push(B.Fragment.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return i},r.decodeDelimited=function(e){return e instanceof U||(e=new U(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.key!=null&&e.hasOwnProperty("key")&&!D.isString(e.key))return"key: string expected";if(e.type!=null&&e.hasOwnProperty("type")&&!D.isString(e.type))return"type: string expected";if(e.nodes!=null&&e.hasOwnProperty("nodes")){if(!Array.isArray(e.nodes))return"nodes: array expected";for(let n=0;n<e.nodes.length;++n){let o=B.Node.verify(e.nodes[n]);if(o)return"nodes."+o}}if(e.data!=null&&e.hasOwnProperty("data")){if(!D.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let o=0;o<n.length;++o)if(!D.isString(e.data[n[o]]))return"data: string{k:string} expected"}if(e.isVoid!=null&&e.hasOwnProperty("isVoid")&&typeof e.isVoid!="boolean")return"isVoid: boolean expected";if(e.fragments!=null&&e.hasOwnProperty("fragments")){if(!Array.isArray(e.fragments))return"fragments: array expected";for(let n=0;n<e.fragments.length;++n){let o=B.Fragment.verify(e.fragments[n]);if(o)return"fragments."+o}}return null},r.fromObject=function(e){if(e instanceof B.Inline)return e;let n=new B.Inline;if(e.key!=null&&(n.key=String(e.key)),e.type!=null&&(n.type=String(e.type)),e.nodes){if(!Array.isArray(e.nodes))throw TypeError(".Inline.nodes: array expected");n.nodes=[];for(let o=0;o<e.nodes.length;++o){if(typeof e.nodes[o]!="object")throw TypeError(".Inline.nodes: object expected");n.nodes[o]=B.Node.fromObject(e.nodes[o])}}if(e.data){if(typeof e.data!="object")throw TypeError(".Inline.data: object expected");n.data={};for(let o=Object.keys(e.data),i=0;i<o.length;++i)n.data[o[i]]=String(e.data[o[i]])}if(e.isVoid!=null&&(n.isVoid=Boolean(e.isVoid)),e.fragments){if(!Array.isArray(e.fragments))throw TypeError(".Inline.fragments: array expected");n.fragments=[];for(let o=0;o<e.fragments.length;++o){if(typeof e.fragments[o]!="object")throw TypeError(".Inline.fragments: object expected");n.fragments[o]=B.Fragment.fromObject(e.fragments[o])}}return n},r.toObject=function(e,n){n||(n={});let o={};if((n.arrays||n.defaults)&&(o.nodes=[],o.fragments=[]),(n.objects||n.defaults)&&(o.data={}),n.defaults&&(o.key="",o.type="",o.isVoid=!1),e.key!=null&&e.hasOwnProperty("key")&&(o.key=e.key),e.type!=null&&e.hasOwnProperty("type")&&(o.type=e.type),e.nodes&&e.nodes.length){o.nodes=[];for(let s=0;s<e.nodes.length;++s)o.nodes[s]=B.Node.toObject(e.nodes[s],n)}let i;if(e.data&&(i=Object.keys(e.data)).length){o.data={};for(let s=0;s<i.length;++s)o.data[i[s]]=e.data[i[s]]}if(e.isVoid!=null&&e.hasOwnProperty("isVoid")&&(o.isVoid=e.isVoid),e.fragments&&e.fragments.length){o.fragments=[];for(let s=0;s<e.fragments.length;++s)o.fragments[s]=B.Fragment.toObject(e.fragments[s],n)}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Be.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Inline"},r})(),tz=B.Text=(()=>{function r(t){if(this.leaves=[],t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return r.prototype.key="",r.prototype.leaves=D.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,n){if(n||(n=Mt.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&n.uint32(10).string(e.key),e.leaves!=null&&e.leaves.length)for(let o=0;o<e.leaves.length;++o)B.TextLeaf.encode(e.leaves[o],n.uint32(18).fork()).ldelim();return n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof U||(e=U.create(e));let o=n===void 0?e.len:e.pos+n,i=new B.Text;for(;e.pos<o;){let s=e.uint32();switch(s>>>3){case 1:{i.key=e.string();break}case 2:{i.leaves&&i.leaves.length||(i.leaves=[]),i.leaves.push(B.TextLeaf.decode(e,e.uint32()));break}default:e.skipType(s&7);break}}return i},r.decodeDelimited=function(e){return e instanceof U||(e=new U(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.key!=null&&e.hasOwnProperty("key")&&!D.isString(e.key))return"key: string expected";if(e.leaves!=null&&e.hasOwnProperty("leaves")){if(!Array.isArray(e.leaves))return"leaves: array expected";for(let n=0;n<e.leaves.length;++n){let o=B.TextLeaf.verify(e.leaves[n]);if(o)return"leaves."+o}}return null},r.fromObject=function(e){if(e instanceof B.Text)return e;let n=new B.Text;if(e.key!=null&&(n.key=String(e.key)),e.leaves){if(!Array.isArray(e.leaves))throw TypeError(".Text.leaves: array expected");n.leaves=[];for(let o=0;o<e.leaves.length;++o){if(typeof e.leaves[o]!="object")throw TypeError(".Text.leaves: object expected");n.leaves[o]=B.TextLeaf.fromObject(e.leaves[o])}}return n},r.toObject=function(e,n){n||(n={});let o={};if((n.arrays||n.defaults)&&(o.leaves=[]),n.defaults&&(o.key=""),e.key!=null&&e.hasOwnProperty("key")&&(o.key=e.key),e.leaves&&e.leaves.length){o.leaves=[];for(let i=0;i<e.leaves.length;++i)o.leaves[i]=B.TextLeaf.toObject(e.leaves[i],n)}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Be.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Text"},r})(),rz=B.TextLeaf=(()=>{function r(t){if(this.marks=[],t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return r.prototype.text="",r.prototype.marks=D.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,n){if(n||(n=Mt.create()),e.text!=null&&Object.hasOwnProperty.call(e,"text")&&n.uint32(10).string(e.text),e.marks!=null&&e.marks.length)for(let o=0;o<e.marks.length;++o)B.Mark.encode(e.marks[o],n.uint32(18).fork()).ldelim();return n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof U||(e=U.create(e));let o=n===void 0?e.len:e.pos+n,i=new B.TextLeaf;for(;e.pos<o;){let s=e.uint32();switch(s>>>3){case 1:{i.text=e.string();break}case 2:{i.marks&&i.marks.length||(i.marks=[]),i.marks.push(B.Mark.decode(e,e.uint32()));break}default:e.skipType(s&7);break}}return i},r.decodeDelimited=function(e){return e instanceof U||(e=new U(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.text!=null&&e.hasOwnProperty("text")&&!D.isString(e.text))return"text: string expected";if(e.marks!=null&&e.hasOwnProperty("marks")){if(!Array.isArray(e.marks))return"marks: array expected";for(let n=0;n<e.marks.length;++n){let o=B.Mark.verify(e.marks[n]);if(o)return"marks."+o}}return null},r.fromObject=function(e){if(e instanceof B.TextLeaf)return e;let n=new B.TextLeaf;if(e.text!=null&&(n.text=String(e.text)),e.marks){if(!Array.isArray(e.marks))throw TypeError(".TextLeaf.marks: array expected");n.marks=[];for(let o=0;o<e.marks.length;++o){if(typeof e.marks[o]!="object")throw TypeError(".TextLeaf.marks: object expected");n.marks[o]=B.Mark.fromObject(e.marks[o])}}return n},r.toObject=function(e,n){n||(n={});let o={};if((n.arrays||n.defaults)&&(o.marks=[]),n.defaults&&(o.text=""),e.text!=null&&e.hasOwnProperty("text")&&(o.text=e.text),e.marks&&e.marks.length){o.marks=[];for(let i=0;i<e.marks.length;++i)o.marks[i]=B.Mark.toObject(e.marks[i],n)}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Be.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/TextLeaf"},r})(),nz=B.Mark=(()=>{function r(t){if(this.data={},t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return r.prototype.type="",r.prototype.data=D.emptyObject,r.create=function(e){return new r(e)},r.encode=function(e,n){if(n||(n=Mt.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&n.uint32(10).string(e.type),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let o=Object.keys(e.data),i=0;i<o.length;++i)n.uint32(18).fork().uint32(10).string(o[i]).uint32(18).string(e.data[o[i]]).ldelim();return n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof U||(e=U.create(e));let o=n===void 0?e.len:e.pos+n,i=new B.Mark,s,a;for(;e.pos<o;){let c=e.uint32();switch(c>>>3){case 1:{i.type=e.string();break}case 2:{i.data===D.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(s="",a="";e.pos<u;){let f=e.uint32();switch(f>>>3){case 1:s=e.string();break;case 2:a=e.string();break;default:e.skipType(f&7);break}}i.data[s]=a;break}default:e.skipType(c&7);break}}return i},r.decodeDelimited=function(e){return e instanceof U||(e=new U(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type")&&!D.isString(e.type))return"type: string expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!D.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let o=0;o<n.length;++o)if(!D.isString(e.data[n[o]]))return"data: string{k:string} expected"}return null},r.fromObject=function(e){if(e instanceof B.Mark)return e;let n=new B.Mark;if(e.type!=null&&(n.type=String(e.type)),e.data){if(typeof e.data!="object")throw TypeError(".Mark.data: object expected");n.data={};for(let o=Object.keys(e.data),i=0;i<o.length;++i)n.data[o[i]]=String(e.data[o[i]])}return n},r.toObject=function(e,n){n||(n={});let o={};(n.objects||n.defaults)&&(o.data={}),n.defaults&&(o.type=""),e.type!=null&&e.hasOwnProperty("type")&&(o.type=e.type);let i;if(e.data&&(i=Object.keys(e.data)).length){o.data={};for(let s=0;s<i.length;++s)o.data[i[s]]=e.data[i[s]]}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Be.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Mark"},r})();function az(r,t={}){let e=cv(r,t),n=cn.verify(e);if(n)throw new Error(`ProtoBufObject document is not valid: ${n}`);let o=cn.create(e);return cn.encode(o).finish()}function cz(r){let e=cn.decode(r).toJSON();return dv(e)}function cv(r,t){return{...t.preserveKeys?{key:r.key}:{},nodes:r.nodes.map(e=>vs(e,t)).toArray(),data:co(r.data)}}function $h(r,t){return{nodes:r.nodes.toArray().map(e=>vs(e,t)),...(t==null?void 0:t.preserveKeys)&&{key:r.key},...r.fragment&&{fragment:r.fragment},...r.type&&{type:r.type}}}function vs(r,t){return{...t.preserveKeys?{key:r.key}:{},type:r.type,isVoid:r.isVoid,nodes:r.nodes.map(e=>Jh(e,t)).toArray(),fragments:r.fragments.toValuesArray().map(e=>$h(e,t)),data:co(r.data)}}function lv(r,t){return{...t.preserveKeys?{key:r.key}:{},type:r.type,isVoid:r.isVoid,nodes:r.nodes.map(e=>Jh(e,t)).toArray(),data:co(r.data),fragments:r.fragments.toValuesArray().map(e=>$h(e,t))}}function uv(r,t){return{...t.preserveKeys?{key:r.key}:{},leaves:r.leaves.map(e=>fv(e)).toArray()}}function fv(r){return{text:r.text,marks:r.marks.map(t=>({type:t.type,data:co(t.data)})).toArray()}}function Jh(r,t){switch(r.object){case"block":return{block:vs(r,t)};case"text":return{text:uv(r,t)};case"inline":return{inline:lv(r,t)};default:Ke(r)}}function co(r){return r.filter(t=>t!==void 0).map((t,e)=>JSON.stringify(t)).toObject()}function dv(r){return re.create({key:r.key,nodes:(r.nodes||[]).map(t=>Is(t)),data:lo(r.data||{})})}function Is(r){return T.create({key:r.key,type:r.type,isVoid:r.isVoid,nodes:(r.nodes||[]).map(t=>Wh(t)),fragments:(r.fragments||[]).map(t=>Yh(t)),data:lo(r.data||{})})}function pv(r){return V.create({key:r.key,type:r.type,isVoid:r.isVoid,nodes:(r.nodes||[]).map(t=>Wh(t)),fragments:(r.fragments||[]).map(t=>Yh(t)),data:lo(r.data||{})})}function hv(r){return S.create({key:r.key,leaves:(r.leaves||[]).map(t=>mv(t))})}function Wh(r){if(r.block)return Is(r.block);if(r.inline)return pv(r.inline);if(r.text)return hv(r.text);throw new Error("Unrecognized node type")}function mv(r){return H.create({text:r.text,marks:(r.marks||[]).map(t=>M.create({type:t.type,data:lo(t.data||{})}))})}function Yh(r){return N.create({key:r.key,fragment:r.fragment,nodes:(r.nodes||[]).map(t=>Is(t)),type:r.type})}function lo(r){return q.create(Object.keys(r).map(e=>{let n=r[e],o=JSON.parse(n);return[e,o]}))}l();var se="code",le="code-line",kz="scroll",xt="embed",Tt="drawing",Bt="file",we="images",zt="image",Z="caption";var je="heading-1",qe="heading-2",Ge="heading-3",st="hint",Ee="list-unordered",He="list-ordered",et="list-tasks",X="list-item",P="paragraph",Ue="blockquote",pe="swagger",tt="swagger-operation-description",Ct="swagger-parameter-description",Ot="swagger-response-description",Xh=new Set([tt,Ct,Ot]),mt="math",ln="inline-math",_e="tabs",Y="tabs-item",Pe="expandable",at="expandable-title",Re="expandable-body",$e="table",or="content-ref",Vt="integration",yv="bold",gv="italic",kv="strikethrough",bv="code",xv="color",bz=["default","green","blue","red","orange","yellow","purple"],ir="link",Cr="emoji",Or="mention",sr="inline-image",ct="annotation",Ie="annotation-body",Qh="diff-block",uo="diff-added",fo="diff-deleted",Zh="diff-modified";var Je=[P,je,qe,Ge],un=[...Je,le],Ss=[Bt,xt,Tt],em=[...un,...Ss],Ar=[Ee,He,et],tm=new Set([P,je,qe,Ge,Bt,xt,Tt,se,le,Ee,He,et,X,$e,we,zt,mt,_e,Y,st,Ue,or,pe,Pe,Vt]),rm=new Set([ir,sr,ln,Cr,Or,ct]),nm=new Set([yv,gv,kv,bv,xv]);l();l();var mo={};ee(mo,{createAnnotation:()=>pm,isSelectionAnnotable:()=>Nv,schema:()=>Sv,wrapWithAnnotation:()=>Ev});l();l();var vr={};ee(vr,{createParagraph:()=>E,schema:()=>Tv});l();l();var Tv=O.create({document:{nodes:[{objects:["block"],min:1}],normalize:(r,t,e)=>{switch(t){case tn:r.insertNodeByKey(e.node.key,0,T.create({type:P,nodes:[S.create("")]}),{normalize:!1});break;default:break}}},blocks:{[P]:{nodes:[{objects:["inline","text"]}],data:{__horizontal_rule__:r=>typeof r>"u"||typeof r=="boolean"}}}});l();function E(r=""){return T.create({type:P,nodes:typeof r=="string"?[S.create(r)]:r})}l();function Ns(r,t={}){let{trim:e=!1}=t;if(r.isVoid)return!1;if(r.nodes.size===0)return!0;let n=r.nodes.first();return n.object==="block"?r.nodes.size===1&&Ns(n,t):r.nodes.every(o=>o.object==="text"&&(e?o.text.trim():o.text)==="")}l();function om(r){if(!r)return!0;let{nodes:t}=r;if(t.size===0)return!0;if(t.size>1)return!1;let e=t.first();return e.type!==P?!1:e.isEmpty}l();function Vz(r){return[je,qe,Ge].includes(`${r==null?void 0:r.type}`)}l();function Uz(r,t={}){return r.object==="block"?Ns(r,t):om(r)}l();function Wz(r,t){let{startBlock:e}=r.value;e.isEmpty?r.replaceNodeByKey(e.key,t):r.insertBlock(t),r.collapseToStartOf(r.value.document.getByKey(t.key)),r.focus()}l();var jt=[P,je,qe,Ge,...Ar,X],im=[...jt,$e,pe,se,xt,Bt,we,st,Ue,_e,Pe,mt,or,Tt,Vt,zt],Bv=[...jt,or,$e,se,xt,Bt,we,Tt,st,Ue,mt,Vt],po=[...jt,we],sm={[Ue]:jt.concat([Ue]),[X]:po,[st]:jt,[Ue]:jt,[Y]:Bv,[Ee]:po,[He]:po,[et]:po},At={[tt]:[P],[Ct]:[P],[Ot]:[P,se,_e],[Re]:[...jt,se],[Ie]:[...jt,se]};function am(r,t){return r.object==="document"?im.includes(t):r.object==="fragment"?(At[r.type]||im).includes(t):Ss.includes(r.type)?!1:sm[r.type]?sm[r.type].includes(t):!1}l();function cm(r,t){let e=[r.block];if(r.nearestFragment)e.push(r.nearestFragment);else{let{block:n,document:o}=r,i=o.getClosestFragment(n.key);i&&e.push(i)}return e.every(n=>{switch(n.object){case"block":return Je.includes(n.type)?!0:n.type===le?t===ct:!1;case"fragment":return n.fragmentKey===Z?![sr,ct].includes(t):!(t===ct&&n.type===Ie);default:return!1}})}l();function lm(r){switch(r.object){case"document":return r.nodes.size===1&&lm(r.nodes.first());case"block":return r.type===P&&r.nodes.every(lm);case"inline":return!1;case"text":return r.getMarks().isEmpty();default:return!1}}l();l();var Cv=["http:","https:","mailto:","data:","ftp:"],Ov=["javascript:"],Av=2048,vv=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i;function qt(r,t={}){let{allowAnyScheme:e=!0,allowEmails:n=!0,allowFtp:o=!0,allowData:i=!0,allowNoProtocol:s=!0,maxLength:a=Av}=t;if((!o||!i||!n)&&(e=!1),typeof r!="string")return!1;let c=r.trim();if(c.includes(" ")||c.length>a)return!1;let u=Tn(c);if(!u&&(!s||!c.startsWith("//")&&(!c.match(/^([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)/)||!c.startsWith("www."))))return!1;if(!u)try{u=Tn(sa(c))}catch(f){}if(!u)return!1;if(e){if(e&&Ov.includes(u.protocol))return!1}else if(!Cv.includes(u.protocol)||!n&&u.protocol==="mailto:"||!i&&u.protocol==="data:"||!o&&u.protocol==="ftp:")return!1;return!0}function u1(r){return qt(r,{allowAnyScheme:!1,allowEmails:!1,allowFtp:!1,allowData:!1,allowNoProtocol:!1})}function f1(r){if(!qt(r))return!1;let t=Tn(r);return Boolean(t&&t.protocol==="mailto:")}function d1(r){return!!r.match(vv)}function Ce(r=["user","url","collection","space","file","page","anchor"]){return t=>{if(!t||typeof t!="object"||typeof t.kind!="string"||!r.includes(t.kind))return!1;switch(t.kind){case"user":return typeof t.user=="string";case"url":return qt(t.url);case"collection":return typeof t.collection=="string";case"space":return typeof t.space=="string";case"file":return typeof t.file=="string";case"page":return typeof t.page=="string"&&["string","undefined"].includes(typeof t.space);case"anchor":return typeof t.anchor=="string"&&["string","undefined"].includes(typeof t.page)&&["string","undefined"].includes(typeof t.space);default:return!1}}}l();function We(r,t){return"nodes"in t&&t.nodes.forEach(e=>{"key"in e&&r.unwrapNodeByKey(e.key,{normalize:!1})}),r}l();function ho(r,t){let e=r.value.document.getByKey(t);if(!e||e.object!=="block")return;let n=e.nodes.filter(i=>i.object!=="block");if(n.isEmpty())return;let o=T.create({type:P,nodes:[]});r.insertNodeByKey(e.key,0,o,{normalize:!1}),n.forEach((i,s)=>{let a=s===n.size-1;r.moveNodeByKey(i.key,o.key,s,{normalize:a})})}l();function um(r={}){return N.create({fragment:r.fragment,nodes:[T.create({type:P,nodes:[S.create(r.text||"")]})]})}l();function _1(r,t){fm(r,1,t)}function P1(r,t){fm(r,-1,t)}function fm(r,t,e=Iv(r)){let{document:n}=r.value,o=n.getParent(e.key),i=o.getChildIndex(e.key),s=o.nodes.get(i+t);if(!s||!un.includes(s.type)){let a=E();r.insertNodeByKey(o.key,t>0?i+t:i,a).moveToRangeOf(a)}else t>0?r.collapseToStartOf(s):r.collapseToEndOf(s)}function Iv(r){let{document:t,startBlock:e}=r.value,n=e;for(;n.isVoid;){let o=t.getParent(n.key);if(o.object==="inline")throw new Error("Unexpected inline parent");if(o.object==="document"||o.object==="fragment")break;n=o}return n}l();function z1(r,t){let{document:e,selection:n}=r.value;_(n)&&r.switchSelection();let o=t==="DOCUMENT_START"?e.nodes.first():e.nodes.last();if(un.includes(o.type))return(t==="DOCUMENT_START"?r.collapseToStartOf(o):r.collapseToEndOf(o)).focus();let i=E("");return r.insertNodeByKey(e.key,t==="DOCUMENT_START"?0:e.nodes.size,i).collapseToEndOf(i).focus()}l();function dm(r){if(r.object==="block"){let t=r.fragments.get(Z);if(!t||t.isEmpty)return;let e=t.findDescendant(n=>{if(n.object==="inline"){let o=t.getClosestBlock(n.key);return!cm({block:o,nearestFragment:t},n.type)}});return e?n=>{n.removeNodeByKey(e.key)}:void 0}}var Sv=O.create({inlines:{[ct]:{parent:{types:[...Je,le]},nodes:[{objects:["text"]}],fragments:{nodes:[{objects:["block"]}],keys:{[Ie]:Ie},types:{[Ie]:{min:1,max:1,nodes:[{objects:["block"],types:At[Ie],min:1}]}}},normalize:O.createNormalize({[Te]:(r,t)=>{let{node:e,key:n}=t;if(n===Ie)return r.setFragmentByKey(e.key,N.create({fragment:Ie,type:Ie,nodes:[E()]}))},[ae]:(r,t)=>{let{node:e,parent:n}=t;n.object==="inline"?r.unwrapNodeByKey(e.key):r.removeNodeByKey(e.key)}})}}});l();function pm(){return V.create({type:ct,fragments:[N.create({fragment:Ie,type:Ie,nodes:[E()]})]})}function Nv(r){let{selection:t}=r;return!(t.isCollapsed||r.inlines.size>0)}function Ev(r){let t=pm(),e=t.getFragmentByKey(Ie);r.wrapInline(t),r.collapseToStartOf(e)}var go={};ee(go,{createCodeBlock:()=>fn,createCodeLines:()=>gm,dedentLines:()=>Vv,getCodeText:()=>wv,getCurrentCode:()=>Fv,getIndent:()=>Dv,indentLines:()=>zv,isPlainTextSyntax:()=>yo,schema:()=>Rv,splitTextByNewLines:()=>km});l();l();l();var ym=oe(mm());function Fv(r,t){let{document:e}=r,n;if(t)n=r.document.getDescendant(t);else{if(!r.selection.startKey)return null;n=r.startBlock}let o=e.getParent(n.key);return T.isBlock(o)&&o.type===se?o:null}function Dv(r,t="    "){return(0,ym.default)(r).indent||t}function fn(r,t={}){let{syntax:e,...n}=t;return T.create({type:se,nodes:typeof r=="string"?gm(r):r,data:{...n,...!e||yo(e)?{}:{syntax:e}}})}function gm(r,t={}){return km(r).map(e=>T.create({type:le,data:t,nodes:[S.create(e)]}))}function km(r){return r.split(/\r?\n/)}function wv(r){return r.nodes.map(t=>t.getTexts(!1).map(n=>n.text).join("")).join(`
`)}function yo(r){return r==="plain"||r==="text"}var Rv=O.create({validations:[Mv],blocks:{[se]:{nodes:[{types:[le]}],data:{syntax:r=>r===void 0||typeof r=="string"&&!yo(r),title:r=>r===void 0||typeof r=="string",overflow:r=>r===void 0||r==="scroll"||r==="wrap",lineNumbers:r=>r===void 0||typeof r=="boolean"},normalize:O.createNormalize({[Xe]:(r,t)=>Kv(r,t)})},[le]:{parent:{types:[se]},nodes:[{objects:["text","inline"],types:[void 0,"text",ct],min:1}],data:{highlighted:r=>r===void 0||typeof r=="boolean"},marks:[],normalize:O.createNormalize({[ae]:(r,t)=>Lv(r,t),[Ne]:(r,t)=>bm(r,t),[Xe]:(r,t)=>bm(r,t)})}}});function Es(r,t){let e=r.takeUntil(t),n=r.skip(e.size);if(n.isEmpty())return x.create();let o=n.takeWhile(t),i=n.skip(o.size);return x.create([o]).concat(Es(i,t))}function Kv(r,t){let e=o=>o.type!==le;return Es(t.node.nodes,e).filter(o=>!o.isEmpty()).forEach(o=>{let i=o.reduce((f,d,p)=>f+(T.isBlock(d)&&p>0?`
`:"")+d.text,""),s=fn(i).nodes,a=o.first(),c=t.node,u=c.getChildIndex(a.key);s.forEach((f,d)=>{r.insertNodeByKey(c.key,u+d,f,{normalize:!1})}),o.forEach(f=>r.removeNodeByKey(f.key,{normalize:!1}))}),r}function bm(r,t){let{node:e}=t;e.nodes.forEach(n=>{n.object==="inline"?r.unwrapInlineByKey(n.key,{normalize:!1}):n.object==="block"&&r.unwrapNodeByKey(n.key,{normalize:!1})})}function Lv(r,t){let{parent:e}=t,n=i=>i.type===le;Es(e.nodes,n).forEach(i=>{let s=T.create({type:se,nodes:[]}),a=e.nodes.indexOf(i.first());r.insertNodeByKey(e.key,a,s,{normalize:!1}),i.forEach((c,u)=>r.moveNodeByKey(c.key,s.key,u,{normalize:!1}))})}function Mv(r){if(r.object!=="block"||r.type!==se)return;let t=[];if(r.nodes.forEach(e=>{if(e.object!=="block"||e.type!==le)return;let n=e.text.split(/\r?\n/);n.length!==1&&t.push({line:e,newLines:n.map(o=>T.create({type:le,data:e.data,nodes:[S.create(o)]}))})}),t.length!==0)return e=>{t.forEach(({line:n,newLines:o})=>{let i=e.value.document.getNode(r.key),s=i.getChildIndex(n.key);e.removeNodeByKey(n.key,{normalize:!1}),o.forEach((a,c)=>e.insertNodeByKey(i.key,s+c,a,{normalize:!1}))})}}l();function zv(r,t){let{value:e}=r,{document:n,selection:o}=e;return n.getBlocksAtRange(o).filter(s=>s.type===le).forEach(s=>{let a=s.nodes.first();r.insertTextByKey(a.key,0,t)}),r}function Vv(r,t){let{value:e}=r,{document:n,selection:o}=e;return n.getBlocksAtRange(o).filter(s=>s.type===le).forEach(s=>{let a=s.nodes.first(),c=xm(a.text,t);r.removeTextByKey(a.key,0,c)}),r}function xm(r,t){if(r.length>t.length)return xm(t,r);let n=Array(r.length).fill(0).map((o,i)=>i).find(o=>r[o]!==t[o]);return n==null?r.length:n}var ko={};ee(ko,{createContentRefBlock:()=>qv,insertContentReference:()=>Hv,insertContentReferenceAtRange:()=>Tm,schema:()=>jv});l();l();var jv=O.create({blocks:{[or]:{parent:{objects:["document","block"],types:[void 0,Y]},data:{ref:Ce()}}}});function qv(r){return T.createVoid({type:or,data:{ref:r}})}l();var dn={};ee(dn,{createMention:()=>_s,schema:()=>Gv});l();var Gv=O.create({inlines:{[Or]:{isVoid:!0,data:{ref:Ce()}}}});function _s(r){return V.createVoid({type:Or,data:{ref:r}})}function Hv(r,t){return Tm(r,t,r.value.selection)}function Tm(r,t,e){r.value.isCollapsed&&t.kind==="url"&&r.insertTextAtRange(e,t.url,[]).extend(-t.url.length).focus(),r.value.isCollapsed&&!r.value.isInVoid?r.insertInlineAtRange(e,_s(t)).focus():r.wrapInline({type:ir,data:{ref:t}}).collapseToEnd().focus()}l();l();l();function Ps(r,t,e=void 0,n=new Map){for(let o of r){let i=t.getId(o);n.set(i,{item:o,parent:e}),Ps(t.getChildren(o),t,i,n)}return n}l();l();function Bm(r,t,e){let n={startString1:0,startString2:0,length:0},o=$v(e),i=Uv(r,o),s=[];return t.forEach((a,c)=>{let u=o(a),f,d=[];(i.get(u)||[]).forEach(h=>{f=(h&&s[h-1]||0)+1,f>n.length&&(n.length=f,n.startString1=h-f+1,n.startString2=c-f+1),d[h]=f}),s=d}),n}function Uv(r,t){let e=new Map;return r.forEach((n,o)=>{let i=t(n),s=e.get(i)||[];e.set(i,s),s.push(o)}),e}function $v(r){let t=0,e=new Map;return n=>{if(typeof n=="string")return n;for(let[i,s]of e)if(r(s,n))return i;t+=1;let o=t.toString();return e.set(o,n),o}}function Ir(r,t,e=(n,o)=>n===o){let n=Bm(r,t,e),o=n.startString1,i=n.startString2;if(n.length===0){let f=[];return r.length&&f.push({op:"-",values:r}),t.length&&f.push({op:"+",values:t}),f}let s=r.slice(0,o),a=t.slice(0,i),c=r.slice(o+n.length),u=t.slice(i+n.length);return[...Ir(s,a,e),{op:"=",values:r.slice(o,o+n.length)},...Ir(c,u,e)]}l();function Sr(r,t){let e=new Map,n=Ps(r.before,t),o=(s,a)=>{let c=new Map,u=new Map,f=[],d=[];s.forEach(m=>{let k=t.getId(m);c.set(k,m),f.push(k)}),a.forEach(m=>{let k=t.getId(m);u.set(k,m),d.push(k)});let p=Ir(f,d),h=[],g=(m,k)=>{k?(e.set(t.getId(m),k),h.push(...t.annotateChange(m,k))):h.push(m)};return p.forEach(m=>{switch(m.op){case"+":{m.values.forEach(k=>{var v;let b=u.get(k);Rr(b);let C=(v=n.get(k))==null?void 0:v.item;g(t.setChildren(b,o([],t.getChildren(b))),C&&t.compareItems(C,b)!==0?{type:"modified",before:C,item:b}:{type:"added",item:b})});break}case"-":{m.values.forEach(k=>{let b=c.get(k);Rr(b),g(t.setChildren(b,o(t.getChildren(b),[])),{type:"deleted",item:b})});break}case"=":{m.values.forEach(k=>{let b=c.get(k),C=u.get(k);Rr(b),Rr(C);let v=t.compareItems(b,C)!==0;g(t.setChildren(C,o(t.getChildren(b),t.getChildren(C))),v?{type:"modified",before:b,item:C}:void 0)});break}default:Ke(m)}}),h};return{items:o(r.before,r.after),changes:e}}l();var Jv={added:uo,deleted:fo,modified:Zh};function Gt(r,t){return T.create({type:Qh,data:{type:t},nodes:[r]}).regenerateAllKeys()}function pn(r,t){return r.set("data",r.data.merge({diff:t}))}function hn(r,t){return r.mapDescendants(e=>e.object==="text"?Fs(e,t):e)}function Fs(r,t){return r.addMark(0,r.text.length,M.create({type:Jv[t]})).set("key",`${t}-${r.key}`)}l();l();l();var Wv=()=>/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;function Cm(r){let t=Wv(),e=[0],n=t.exec(r);for(;n;){let i=n[0];if(i.charCodeAt(0)>=19968)for(let s=n.index;s<n.index+i.length;s+=1)e.push(s);else e.push(n.index),e.push(n.index+i.length);n=t.exec(r)}e.push(r.length);let o=[];for(let i=0;i<e.length-1;i+=1){let s=e[i],a=e[i+1];if(s!==a){let c=r.slice(s,a);o.push(c)}}return o}function Am(r,t){let e=Ir(Om(r),Om(t),(n,o)=>n.equals(o));return r.setLeaves(x.create(e.map(n=>{switch(n.op){case"+":return n.values.map(o=>o.addMarks(I.create([M.create(uo)])));case"-":return n.values.map(o=>o.addMarks(I.create([M.create(fo)])));case"=":return n.values;default:Ke(n)}}).flat()))}function Om(r){let t=[];return r.leaves.forEach(e=>{Cm(e.text).forEach(o=>{t.push(e.merge({text:o}))})}),t}l();function Nr(r,t){return r.key!==t.key?1:Ds(r,t)}function Ds(r,t){if(r.type!==t.type||r.object!==t.object||!ws(r.data,t.data))return 1;if(r.object==="inline"||r.object==="block"||r.object==="fragment"){let e=!(r.object==="block"&&t.object==="block");return r.object==="block"&&t.object==="block"&&(e=r.fragments.every(n=>{let o=t.fragments.get(n.fragmentKey);return o!==void 0&&Ds(n,o)===0})),r.nodes.size===t.nodes.size&&r.nodes.every((n,o)=>Ds(n,t.nodes.get(o))===0)&&e?0:1}return r.object==="text"?Yv(r,t):0}function Yv(r,t){if(r===t)return 0;if(!r||!t)return 1;let e=r.getLeaves(),n=t.getLeaves();return e.size===n.size&&e.every((o,i)=>{let s=n.get(i);return o.text===(s==null?void 0:s.text)&&o.marks.equals(s==null?void 0:s.marks)})?0:1}function ws(r,t){return r===t?!0:!r||!t?!1:cr(r,t)}var Xv={getId:r=>r.key,getChildren:r=>[],setChildren:(r,t)=>r,compareItems:Nr,annotateChange:Qv};function Rs(r,t){let e=Sr({before:vm(r),after:vm(t)},Xv);return x.create(e.items.map(n=>n.regenerateKey()))}function vm(r){let t=0;return r.nodes.toArray().map(e=>e.object==="text"?(t+=1,e.set("key",`${t}`)):e)}function Qv(r,t){return r.object==="inline"&&t.type==="modified"?ws(t.before.data,t.item.data)?[r.merge({nodes:Rs(t.before,t.item)})]:[hn(r,t.type)]:t.type==="modified"&&r.object==="text"?[Am(t.before,t.item)]:[r.object==="text"?Fs(r,t.type):hn(r,t.type)]}var Zv={getId:r=>r.key,getChildren:r=>[],setChildren:(r,t)=>r,compareItems:Nr,annotateChange:eI};function bo(r,t){let e=Sr({before:r.nodes.toArray(),after:t.nodes.toArray()},Zv);return x.create(e.items)}function eI(r,t){if(t.type==="modified")return r.isVoid?[Gt(t.before,"deleted"),Gt(t.item,"added")]:r.type===le?[pn(t.before,"deleted"),pn(t.item.regenerateAllKeys(),"added")]:em.includes(r.type)?[Gt(r.merge({nodes:Rs(t.before,t.item)}),t.type)]:r.type===se?[Gt(r.merge({nodes:bo(t.before,t.item)}),t.type)]:[r.merge({nodes:bo(t.before,t.item)})];switch(r.type){case le:return[pn(r,t.type)];case se:return[Gt(r.merge({nodes:r.nodes.map(e=>pn(e,t.type))}),t.type)];case Ee:case He:case et:case X:return r=t.type==="deleted"?r.regenerateAllKeys():r,[Gt(hn(r,t.type),t.type)];default:return[Gt(r,t.type)]}}function t2(r,t){return r.merge({nodes:bo(r,t)}).regenerateTextKeys()}l();var tI={getId:r=>r.key,getChildren:r=>[],setChildren:(r,t)=>r,annotateChange:r=>[r],compareItems:Uo((r,t)=>Nr(r,t),[])};function l2(r,t){let e=Sr({before:r.nodes.toArray(),after:t.nodes.toArray()},tI),n=new Map,o=[];return e.items.forEach((i,s)=>{var p,h,g;let a=e.changes.get(i.key),c=e.items[s-1],u=e.items[s+1],f=!!c&&((p=e.changes.get(c.key))==null?void 0:p.type)==="deleted",d=!!u&&((h=e.changes.get(u.key))==null?void 0:h.type)==="deleted";f&&((g=n.get(o[o.length-1]))!=null&&g.deletedBlocksAfter)&&(f=!1),a?a.type!=="deleted"&&(o.push(i.key),n.set(i.key,{type:a.type,...f?{deletedBlocksBefore:f}:{},...d?{deletedBlocksAfter:d}:{}})):(o.push(i.key),(f||d)&&n.set(i.key,{type:"unmodified",...f?{deletedBlocksBefore:f}:{},...d?{deletedBlocksAfter:d}:{}}))}),n}var xo={};ee(xo,{createDrawingBlock:()=>oI,schema:()=>nI});l();l();var rI=Ce(["file"]),nI=O.create({blocks:{[Tt]:{parent:{objects:["document","block"]},isVoid:!0,data:{ref:r=>typeof r>"u"||rI(r)},fragments:{keys:[Z],nodes:[{types:[P],min:1,max:1}]},normalize:(r,t,e)=>{switch(t){case Te:{let{node:n}=e;return r.setFragmentByKey(n.key,N.create({fragment:Z,nodes:[E()]}))}}}}}});l();function oI(r=void 0,t=""){return T.createVoid({type:Tt,data:{ref:r},fragments:[N.create({fragment:Z,nodes:[E(t)]})]})}var To={};ee(To,{createEmbedBlock:()=>sI,schema:()=>iI});l();l();var iI=O.create({blocks:{[xt]:{parent:{objects:["document","block"]},isVoid:!0,data:{url:r=>qt(r)},fragments:{keys:[Z],nodes:[{types:[P],min:1,max:1}]},normalize:(r,t,e)=>{switch(t){case Te:{let{node:n}=e;return r.setFragmentByKey(n.key,N.create({fragment:Z,nodes:[E()]}))}}}}}});l();function sI(r,t){let e=[];return typeof t>"u"||typeof t=="string"?e.push(N.create({fragment:Z,nodes:[E(t||"")]})):e.push(t),T.createVoid({type:xt,data:{url:r},fragments:e})}var mn={};ee(mn,{createEmoji:()=>cI,schema:()=>aI});l();var aI=O.create({inlines:{[Cr]:{isVoid:!0,parent:{types:Je},data:{code:r=>typeof r=="string"}}}});function cI(r){return V.createVoid({type:Cr,data:{code:r}})}var Er={};ee(Er,{createExpandableBlock:()=>uI,getBodyFragment:()=>Ks,getCurrentExpandable:()=>fI,getTitleFragment:()=>yn,schema:()=>lI});l();l();var lI=O.create({blocks:{[Pe]:{isVoid:!0,data:{},fragments:{nodes:[{objects:["block"]}],keys:{[at]:at,[Re]:Re},types:{[at]:{min:1,max:1,nodes:[{objects:["block"],types:[P],min:1,max:1}]},[Re]:{min:1,max:1,nodes:[{objects:["block"],types:At[Re],min:1}]}}},normalize:O.createNormalize({[Xe]:(r,t)=>{r.replaceNodeByKey(t.child.key,E(t.child.text))},[Te]:(r,t)=>{let{node:e,key:n}=t;if(e.object==="block"){if(n===at)return r.setFragmentByKey(e.key,N.create({fragment:at,type:at,nodes:[E()]}));if(n===Re)return r.setFragmentByKey(e.key,N.create({fragment:Re,type:Re,nodes:[E()]}))}}})}}});l();function uI(r="",t=[E()]){return T.create({type:Pe,isVoid:!0,fragments:[N.create({fragment:at,type:at,nodes:[E(r)]}),N.create({fragment:Re,type:Re,nodes:t})]})}function yn(r){let t=r.getFragmentByKey(at);if(!t)throw new Error("Expandable block is missing title fragment");return t}function Ks(r){let t=r.getFragmentByKey(Re);if(!t)throw new Error("Expandable block is missing body fragment");return t}function fI(r){let t=r.document.getClosest(r.startKey,n=>n.object==="block"&&n.type===Pe);if(!t)return;let e=r.selection.hasFocusInFragmentOf(t);return{expandable:t,fragment:e}}var Bo={};ee(Bo,{createFileBlock:()=>pI,schema:()=>dI});l();l();var dI=O.create({blocks:{[Bt]:{parent:{objects:["document","block"]},isVoid:!0,data:{ref:Ce(["file"])},fragments:{keys:[Z],nodes:[{types:[P],min:1,max:1}]},normalize:(r,t,e)=>{switch(t){case Te:{let{node:n}=e;return r.setFragmentByKey(n.key,N.create({fragment:Z,nodes:[E()]}))}}}}}});l();function pI(r,t=""){return T.createVoid({type:Bt,data:{ref:r},fragments:[N.create({fragment:Z,nodes:[E(t)]})]})}var Co={};ee(Co,{isHeading:()=>BI,schema:()=>xI});l();l();var Ms=oe(ny());l();var hI=[je,qe,Ge,pe,Pe,_e,Y];function Ht(r){return hI.includes(r.type)}var Ls=new WeakMap;function mI(){return new Ms.default}function Im(r,t=new Ms.default){if(Ls.has(r))return Ls.get(r);let e=mI(),n=s=>{let a=zs(yI(s)),c=Sm(e,a);e.set(s.key,c)},o=s=>{s.forEach(a=>{if(!a.isBlock())return!1;Ht(a)&&n(a),T.isBlock(a.nodes.first())&&o(a.blockNodes),a.fragments.forEach(c=>{o(c.nodes)})})};o(r.nodes);let i=t&&gI(e,t)?t:e;return Ls.set(r,i),i}var zs=r=>{let t=r.replace(/(^|\W)(ad)(vert|s|\W|$)(.*)/gi,"$1a-d$3$4");return ia(t)};function Sm(r,t,e=0){let n=e>0?`${t}-${e}`:t;return r.hasValue(n)?Sm(r,t,e+1):n}function yI(r){switch(r.type){case pe:return r.data.has("ref")?r.data.get("path")||"":r.data.get("summary")||"";case Pe:return yn(r).text;case Y:return r.data.get("title")||"";case je:case qe:case Ge:return r.data.get("id")||r.text||"";default:return""}}function gI(r,t){if(r.size!==t.size)return!1;for(let e of r.keys())if(t.get(e)!==r.get(e))return!1;return!0}l();function qq(r,t=Im(r,new Map)){return gn(r.nodes,t,r.object)}function gn(r,t,e){if(r.isEmpty())return[];let n=r.first(),o=[];if(n.type===_e)n.blockNodes.forEach(i=>{if(!Ht(i)||i.type!==Y)return;let s=i.nodes,a=s.findIndex(Ht),c=a>=0?a:s.size;o.push(Vs(i,t,{parentType:e,nodes:s.slice(0,c)})),o.push(...gn(s.slice(c),t,n.type).filter(u=>u.type))}),o.push(...gn(r.rest(),t,e));else if(Ht(n)&&n.type===Pe)o.push(Vs(n,t,{parentType:e,nodes:Ks(n).nodes})),o.push(...gn(r.rest(),t,e));else{let i=r.rest(),s=i.findIndex(Ht),a=s>=0?s:i.size,c=i.slice(0,a);Ht(n)?o.push(Vs(n,t,{parentType:e,nodes:c})):o.push({type:null,parentType:e,key:n.key,title:"",anchor:"",nodes:c.unshift(n)}),s>=0&&o.push(...gn(i.slice(s),t,e))}return o}function Vs(r,t,e={}){return{type:r.type,parentType:"document",key:r.key,title:kI(r),anchor:t.get(r.key)||"",tag:bI(r),nodes:x.create(),...e}}function kI(r){switch(r.type){case pe:return r.data.has("ref")?r.data.get("path")||"":r.data.get("summary")||"";case Pe:return yn(r).text;case Y:return r.data.get("title")||"";default:return r.text}}function bI(r){switch(r.type){case pe:return r.data.get("method");default:return}}var js={parent:{objects:["document","block","fragment"]},nodes:[{objects:["inline","text"]}],data:{id:r=>typeof r=="string"&&oa(r)||typeof r>"u",isMarkdownPageTitle:r=>typeof r=="boolean"||typeof r>"u"},normalize:O.createNormalize({[nt]:(r,t)=>{let{node:e,key:n}=t,o=e.data.get(n);n==="id"&&typeof o=="string"?r.setDataByKey(e.key,[n],zs(o)):r.removeDataByKey(e.key,[n])},[Fe]:(r,t)=>{r.unwrapNodeByKey(t.node.key,{normalize:!1})},[Ne]:(r,t)=>{r.unwrapBlockByKey(t.node.key,{},{normalize:!1})}})},xI=O.create({blocks:{[je]:js,[qe]:js,[Ge]:js}}),TI=[je,qe,Ge];function BI(r){return TI.includes(typeof r=="string"?r:r.type)}var Oo={};ee(Oo,{create:()=>OI,schema:()=>CI});l();l();var CI=O.create({blocks:{[st]:{parent:{objects:["document","block"]},nodes:[{objects:["block"],min:1}],data:{style:r=>["info","warning","danger","success"].includes(r)},normalize:O.createNormalize({[Fe]:(r,t)=>We(r,t.node),[ae]:(r,t)=>We(r,t.node),[Ne]:(r,t)=>ho(r,t.node.key),[nt]:(r,t)=>r.setNodeByKey(t.node.key,{data:{style:"info"}})})}}});l();function OI(){return T.create({type:st,data:{style:"info"},nodes:[E()]})}var Ao={};ee(Ao,{createImageBlock:()=>qs,createImageInline:()=>Gs,createImagesBlock:()=>AI,getImageAltText:()=>II,replaceInlineImageWithBlock:()=>vI,schema:()=>SI});l();l();l();function AI(r){if(!r.length)throw new Error("cannot create images block with 0 images");return T.createVoid({type:we,nodes:r.map(t=>qs(t))})}function qs(r,t="",e=""){return T.createVoid({type:zt,data:{alt:e,ref:r},fragments:[N.create({fragment:Z,nodes:[E(t)]})]})}function Gs(r,t={alt:""}){return V.createVoid({type:sr,data:{...t,ref:r}})}function vI(r,t){let{document:e}=r.value,n=e.getClosest(t.key,o=>o.object==="block"&&o.type===X);if(n){let o=n;if(o.object!=="block")throw new Error(`Couldn't find parent listitem block for inline image "${t.key}"`);let i=o.nodes.size;Nm(r,t,o.key,i)}else{let o=e.getFurthest(t.key,a=>a.object==="block"&&a.type!==_e&&a.type!==Y);if((o==null?void 0:o.object)!=="block")throw new Error(`Unable to find parent block for inline image "${t.key}"`);let i=e.getParent(o.key);if(!i)throw new Error(`Unable to find grandparent block for inline image "${t.key}"`);let s=i.getChildIndex(o.key);Nm(r,t,i.key,s+1,{parentToRemoveIfEmpty:o})}}function Nm(r,t,e,n,{parentToRemoveIfEmpty:o}={}){let i=t.data.get("ref"),s=T.createVoid({type:we,nodes:[qs(i)]});r.insertNodeByKey(e,n,s,{normalize:!1}),r.removeNodeByKey(t.key,{normalize:!1}),o&&!o.text&&o.fragments.size===0&&r.removeNodeByKey(o.key,{normalize:!1}),r.moveToRangeOf(s),r.normalizeNodeByKey(e)}function II(r){return V.isInline(r)?r.data.get("alt")||r.data.get("caption"):r.data.get("alt")}var SI=O.create({inlines:{[sr]:{isVoid:!0,parent:{types:[...Je,ir]},data:{size:r=>[void 0,"line","original"].includes(r),ref:Ce(["file","url"]),caption:r=>typeof r>"u"||typeof r=="string",alt:r=>typeof r>"u"||typeof r=="string"}}},blocks:{[we]:{parent:{objects:["document","block"],types:[void 0,Y,...Ar,X]},nodes:[{types:[zt],min:1}],isVoid:!1,data:{align:r=>r===void 0||r==="left"||r==="right"||r==="center"},normalize:(r,t,e)=>{switch(t){case Fe:case ae:{let{node:n}=e,o=T.create({type:P,nodes:n.nodes.map(i=>{var s;return Gs(i.data.get("ref"),{caption:(s=i.fragments.get(Z))==null?void 0:s.text,size:"original"})})});return r.replaceNodeByKey(n.key,o)}}}},[zt]:{parent:{types:[we]},isVoid:!0,data:{ref:Ce(["file","url"]),alt:r=>typeof r>"u"||typeof r=="string"},fragments:{keys:[Z],nodes:[{types:[P],min:1,max:1}]},normalize:(r,t,e)=>{switch(t){case Te:{let{node:n}=e;return r.setFragmentByKey(n.key,N.create({fragment:Z,nodes:[E()]}))}case ae:{let{node:n}=e;return r.wrapBlockByKey(n.key,{type:we,isVoid:!0})}}}}}});var vo={};ee(vo,{createIntegrationBlock:()=>EI,createIntegrationBlockDataForLinkUnfurl:()=>Em,createIntegrationBlockForLinkUnfurl:()=>_I,schema:()=>NI});l();var NI=O.create({blocks:{[Vt]:{parent:{objects:["document","block"],types:[void 0,Y]},isVoid:!0,data:{integration:r=>typeof r=="string",block:r=>typeof r=="string",props:r=>typeof r=="object",action:r=>typeof r>"u"||typeof r=="object"&&typeof r.action=="string",url:r=>typeof r>"u"||typeof r=="string"&&qt(r)}}}});function EI(r,t,e={},n=void 0){let o={integration:r,block:t,props:e,...n?{action:n}:{}};return T.createVoid({type:Vt,data:o})}function _I(r,t,e){return T.createVoid({type:Vt,data:Em(r,t,e)})}function Em(r,t,e){return{integration:r,block:t,props:{},action:{action:"@link.unfurl",url:e},url:e}}var Io={};ee(Io,{schema:()=>PI});l();var PI=O.create({inlines:{[ir]:{parent:{types:Je},data:{ref:Ce()},normalize:(r,t,e)=>{switch(t){case nt:{let n=e.node;return n.isEmpty?r.removeNodeByKey(n.key):r.unwrapInlineByKey(n.key)}}}}}});var _o={};ee(_o,{checkTaskItem:()=>FI,createList:()=>DI,createListItem:()=>_m,decreaseItemsDepth:()=>Rm,getCurrentItem:()=>ar,getCurrentList:()=>wI,getItemDepth:()=>So,getItemsAtRange:()=>_r,getListForItem:()=>vt,getPreviousItem:()=>RI,increaseItemsDepth:()=>Km,isList:()=>lt,isSelectionInList:()=>KI,moveAsSubItem:()=>$s,schema:()=>qI,splitListItem:()=>$I,unwrapList:()=>JI,wrapInList:()=>WI});l();l();function FI(r,t,e){return r.setNodeByKey(t,{data:{checked:e}})}l();function lt(r){return[He,Ee,et].includes(r.type)}function _m(r=!1){return T.create({type:X,data:r?{checked:!1}:{},nodes:[T.create({type:P,nodes:[S.create("")]})]})}function DI(r){return T.create({type:r,nodes:[_m(r===et)]})}function ar(r,t){let{document:e}=r;if(t!=null||(t=r.selection.startKey?r.startBlock:null),!t)return null;if(t.type===X)return t;let n=e.getParent(t.key);return n&&n.type===X?n:null}function wI(r,t){let e=ar(r,t);return e?vt(r,e):null}function vt(r,t){let{document:e}=r,n=e.getParent(t.key);return n&&lt(n)?n:null}function So(r,t){let{document:e,startBlock:n}=r;t=t||n;let o=ar(r,t);if(!o)return 0;let i=e.getParent(o.key);return 1+So(r,i)}function _r(r,t=r.selection){if(!t.startKey)return x.create();let{document:e}=r,n=e.getClosestBlock(t.startKey),o=e.getClosestBlock(t.endKey);if(n===o){let s=ar(r,n);return s?x.create([s]):x.create()}let i=e.getCommonAncestor(n.key,o.key);if(lt(i)){let s=i.getPath(n.key),a=i.getPath(o.key);return i.nodes.slice(s[0],a[0]+1)}return i.type===X?x.create([i]):x.create()}function RI(r,t){let{document:e,startBlock:n}=r;t=t||n;let o=ar(r,t);if(!o)return null;let i=e.getPreviousSibling(o.key);return i&&i.type===X?i:null}function KI(r,t){let e=_r(r);return!e.isEmpty()&&(!t||vt(r,e.first()).type===t)}l();var Us={};ee(Us,{annotateBlockWithConflict:()=>LI,getConflictCounterpartKey:()=>Eo,getConflictKey:()=>No,getConflictKeyCounterpartOrigin:()=>Pm,getConflictKeyOrigin:()=>kn,getDocumentConflicts:()=>zI,getOriginalKey:()=>Fr,hasBlockConflict:()=>Pr,hasBlockConflictFrom:()=>MI,hasConflictData:()=>bn,isConflictKey:()=>Ut,isConflictKeyFrom:()=>Hs,pickConflict:()=>VI});l();l();function LI(r,t){return r.merge({key:No(r.key,t.origin),data:r.data.set("conflict",t)}).mapDescendants(e=>e.set("key",No(e.key,t.origin)))}function Pr(r){return Ut(r.key)&&bn(r)}function MI(r,t){return Hs(r.key,t)&&Pr(r)}function zI(r){return r.nodes.filter(t=>Pr(t)&&Hs(t.key,"head"))}function Ut(r){return/_(head|base)$/.test(r)}function Hs(r,t){return Ut(r)&&kn(r)===t}function No(r,t){return`${r}_${t}`}function Fr(r){return r.replace(/_(head|base)$/,"")}function kn(r){return/_base$/.test(r)?"base":"head"}function Pm(r){return kn(r)==="head"?"base":"head"}function Eo(r){let t=Pm(r),e=Fr(r);return No(e,t)}function bn(r){return r.data&&r.data.has("conflict")}function VI(r,t){let e=r.value.document.assertBlock(t);if(!Pr(e))return r;let n=Eo(e.key);return r.removeNodeByKey(n),r}var Fm=[...Je,se,st,Ue,mt,$e],wm={nodes:[{types:[X],min:1}],normalize:O.createNormalize({[Xe]:(r,t)=>{r.wrapBlockByKey(t.child.key,X)}})},Dm={...wm,data:{start:r=>typeof r>"u"}},jI={...wm,data:{start:r=>typeof r>"u"?!0:typeof r!="number"?!1:r>=1}},qI=O.create({validations:[HI],blocks:{[Ee]:Dm,[He]:jI,[et]:Dm,[X]:{parent:{types:[He,Ee,et]},nodes:[{objects:["block"],types:[...Fm,...Ar,we],min:1}],first:{types:Fm},normalize:O.createNormalize({[ae]:(r,t)=>{var e;return((e=t.parent)==null?void 0:e.object)==="block"&&t.parent.type===X?r.moveAfterNodeByKey(t.node.key,t.parent.key,{normalize:!1}):am(t.parent,Ee)?r.wrapBlockByKey(t.node.key,{type:Ee},{normalize:!1}):r.unwrapBlockByKey(t.node.key,{},{normalize:!1}),r},[Ne]:(r,t)=>GI(r,t.node),[rn]:(r,t)=>r.insertNodeByKey(t.node.key,0,E())})}}});function GI(r,t){r.wrapBlockByKey(t.nodes.first().key,P,{normalize:!1});let e=r.value.document.getDescendant(t.key).nodes.first();return t.nodes.rest().forEach((n,o)=>r.moveNodeByKey(n.key,e.key,o+1,{normalize:!1})),r}function HI(r){if(r.object!=="document"&&r.object!=="block")return;let t=r.nodes.map((e,n)=>{if(!lt(e)||Pr(e))return null;let o=r.nodes.get(n+1);return!o||!lt(o)||r.object==="document"&&e.type!==o.type?null:[e,o]}).filter(Boolean);if(!t.isEmpty())return e=>{t.reverse().forEach(n=>{let[o,i]=n;e.value.document.getDescendant(i.key).nodes.forEach((a,c)=>{e.moveNodeByKey(a.key,o.key,o.nodes.size+c,{normalize:!1})}),e.removeNodeByKey(i.key,{normalize:!1})})}}l();function Rm(r,t){let{value:e}=r,{document:n}=e,o=t||_r(e);if(o.size===0)return r;let i=o.first(),s=o.last();So(e,i)===1&&o.forEach(g=>{let m=g.nodes.find(k=>lt(k));if(!m||m.nodes.size===0)return!0;r=Rm(r,m.nodes)});let c=vt(e,i);if(!c)return r;let u=n.getParent(c.key);if(!u)return r;let f=vt(e,u);if(!f)return r;let d=c.nodes.skipUntil(g=>g===s).rest(),p=c.nodes.size===d.size+o.size,h=f.getChildIndex(u.key)+1;return o.forEach((g,m)=>{r=UI(r,g,c,u,h+m,g===s?d:void 0)}),p&&r.removeNodeByKey(c.key),r.normalize()}function UI(r,t,e,n,o,i){let{value:s}=r,a=vt(s,n);if(!a)return r;if(i&&!i.isEmpty()){let c=T.create({object:"block",type:e.type,data:e.data});r.insertNodeByKey(t.key,t.nodes.size,c,{normalize:!1}),r.moveNodeByKey(t.key,a.key,o,{normalize:!1}),i.forEach((u,f)=>r.moveNodeByKey(u.key,c.key,c.nodes.size+f,{normalize:!1}))}else r.moveNodeByKey(t.key,a.key,o);return r}function Km(r,t){let{value:e}=r,{document:n,selection:o}=e,i=t||_r(e,o),s=i.first();if(!s)return r;let a=vt(e,s);if(!a)return r;let c=n.getPreviousSibling(s.key);if((!c||c.type!==X)&&(c=s),i.size>1)i.forEach(u=>{let f=a.getChildIndex(u.key);if(!c||f===0)return!0;r=$s(r,u,c.key)});else{a.getChildIndex(s.key)>0&&(r=$s(r,s,c.key));let f=s.nodes.find(p=>lt(p));if(!f)return r;let d=f.nodes;r=Km(r,d)}return r.normalize()}function $s(r,t,e){let n=r.value.document.getDescendant(e),o=n.nodes.size,i=n.nodes.last(),s=lt(i)?i:null;if(s)return r.moveNodeByKey(t.key,s.key,s.nodes.size);let a=vt(r.value,n);if(!a)throw new Error("Destination is not in a list");let c=T.create({object:"block",type:a.type,data:a.type===He?a.data.delete("start"):a.data});return r.insertNodeByKey(e,o,c,{normalize:!1}),r.moveNodeByKey(t.key,c.key,0)}function $I(r){let{value:t}=r,e=ar(t);if(!e)return r;let n=t.startOffset;return r.splitDescendantsByKey(e.key,t.startKey,n)}function JI(r){let t=_r(r.value);if(t.isEmpty())return r;t.forEach(i=>r.unwrapNodeByKey(i.key,{normalize:!1}));let e=t.first(),n=r.value.document.getParent(e.key),o=n.getChildIndex(e.key);return t.forEach(i=>{i.nodes.forEach(s=>{r.moveNodeByKey(s.key,n.key,o,{normalize:!1}),o+=1})}),t.forEach(i=>r.removeNodeByKey(i.key,{normalize:!1})),r}function WI(r,t=Ee,e={}){let n=YI(r.value);return r.wrapBlock({type:t,data:q.create(e)},{normalize:!1}),n.forEach(o=>{lt(o)?o.nodes.forEach(({key:i})=>r.unwrapNodeByKey(i,{normalize:!1})):r.wrapBlockByKey(o.key,X,{normalize:!1})}),r.normalize()}function YI(r){let t=r.selection,{document:e}=r,n=e.getClosestBlock(t.startKey),o=e.getClosestBlock(t.endKey);if(n===o)return x.create([n]);let i=e.getCommonAncestor(n.key,o.key),s=i.getPath(n.key),a=i.getPath(o.key);return i.nodes.slice(s[0],a[0]+1)}var Po={};ee(Po,{createMathBlock:()=>QI,createMathInline:()=>ZI,schema:()=>XI});l();l();var XI=O.create({blocks:{[mt]:{isVoid:!0,data:{formula:r=>typeof r=="string"&&r.length>0}}},inlines:{[ln]:{isVoid:!0,data:{formula:r=>typeof r=="string"&&r.length>0&&r.indexOf(`
`)<0},normalize:O.createNormalize({[nt]:(r,{node:t})=>{let e=t.data.get("formula");return!e||typeof e!="string"?r.removeNodeByKey(t.key):r.setNodeByKey(t.key,{data:{formula:e.replace(/\n/g," ")}}),r}})}}});l();var Lm="f(x) = x * e^{2 pi i \\xi x}";function QI(r=Lm){return T.createVoid({type:mt,data:{formula:r}})}function ZI(r=Lm){return V.createVoid({type:ln,data:{formula:r}})}var Fo={};ee(Fo,{create:()=>tS,schema:()=>eS});l();l();var eS=O.create({blocks:{[Ue]:{parent:{objects:["document","block"]},nodes:[{objects:["block"]}],isVoid:!1,normalize:O.createNormalize({[Fe]:(r,t)=>We(r,t.node),[ae]:(r,t)=>We(r,t.node),[Ne]:(r,t)=>ho(r,t.node.key)})}}});l();function tS(){return T.create({type:Ue,nodes:[E()]})}var Do={};ee(Do,{SORTED_PARAMETERS_LOCATIONS:()=>rS,addParameter:()=>fS,addResponse:()=>gS,createBlock:()=>iS,createBlockWithRef:()=>sS,createFragment:()=>It,defaultParameterSortedKeys:()=>nS,defaultResponseSortedKeys:()=>oS,getProbableRef:()=>CS,isSwaggerFragment:()=>BS,moveParameter:()=>dS,moveResponse:()=>kS,removeParameter:()=>pS,removeResponse:()=>bS,schema:()=>OS,setBaseUrl:()=>cS,setMethod:()=>uS,setParameterName:()=>hS,setParameterRequired:()=>yS,setParameterType:()=>mS,setPath:()=>lS,setResponseDescription:()=>TS,setResponseStatus:()=>xS,setSummary:()=>aS});l();l();l();var rS=["path","query","header","cookie","body"];function nS(r){return Object.keys(r).sort((t,e)=>Jt(r[t],r[e]))}function oS(r){return Object.keys(r||{}).sort((t,e)=>Jt(r[t],r[e]))}function iS(){return T.create({type:pe,isVoid:!0,data:{method:"get",path:"",baseUrl:"",summary:""},fragments:[It(tt,"")]})}function sS(r,t,e){return T.createVoid({type:pe,data:{ref:r,...typeof t<"u"?{path:t}:{},...typeof e<"u"?{method:e}:{}}})}function It(r,t="",e){return e=e||(r===tt?"description":K()),N.create({fragment:e,type:r,nodes:typeof t=="string"?[E(t)]:t})}function aS(r,t,e){r.setDataByKey(t,["summary"],e)}function cS(r,t,e){r.setDataByKey(t,["baseUrl"],e)}function lS(r,t,e){r.setDataByKey(t,["path"],e)}function uS(r,t,e){r.setDataByKey(t,["method"],e)}function fS(r,t,e,n){let o=n;if(!o){let s=r.value.document.assertBlock(t),{parameters:a={}}=s.data.toFrozenObject();o=na(Object.values(a))}let i=It(Ct,"");r.insertFragmentByKey(t,i,{normalize:!1}).insertDataByKey(t,["parameters",i.fragmentKey],{in:e,orderIndex:he(o)})}function dS(r,t,e,n,o={}){r.setDataByKey(t,["parameters",e,"orderIndex"],he(o),{normalize:!1}),r.setDataByKey(t,["parameters",e,"in"],n)}function pS(r,t,e){r.removeFragmentInParentByKey(t,e,{normalize:!1}).removeDataPathByKey(t,["parameters",e])}function hS(r,t,e,n){r.setDataByKey(t,["parameters",e,"name"],n)}function mS(r,t,e,n){r.setDataByKey(t,["parameters",e,"type"],n)}function yS(r,t,e,n){r.setDataByKey(t,["parameters",e,"required"],n)}function gS(r,t,e,n){var i,s;if(!n){let a=r.value.document.assertBlock(t),{responses:c={}}=a.data.toFrozenObject(),u=ra(Object.values(c)),f=u.findIndex(p=>p.status>e),d=f===-1?u.length-1:f-1;n={after:(i=u[f])==null?void 0:i.orderIndex,before:(s=u[d])==null?void 0:s.orderIndex}}let o=It(Ot,[fn(`{
    // Response
}`,{syntax:"javascript"})]);r.insertFragmentByKey(t,o,{normalize:!1}),r.insertDataByKey(t,["responses",o.fragmentKey],{status:String(e),description:"",orderIndex:he(n)})}function kS(r,t,e,n={}){r.setDataByKey(t,["responses",e,"orderIndex"],he(n))}function bS(r,t,e){r.removeFragmentInParentByKey(t,e,{normalize:!1}).removeDataPathByKey(t,["responses",e])}function xS(r,t,e,n){r.setDataByKey(t,["responses",e,"status"],n)}function TS(r,t,e,n){r.setDataByKey(t,["responses",e,"description"],n)}function BS(r){return r.object==="fragment"&&Xh.has(r.type)}function CS(r){let t=r.getBlocksByTypeAsArray(pe);if(t.length===0)return null;let e=t.reverse();for(let n of e){if(n.object!=="block")continue;let o=n.data.toObject();if("ref"in o&&o.ref)return o.ref}return null}var OS=O.create({validations:[AS],blocks:{[pe]:{parent:{objects:["document"]},isVoid:!0,data:{path:r=>r===void 0||typeof r=="string",method:r=>r===void 0||typeof r=="string",ref:r=>r===void 0||Ce(["file","url"])(r),baseUrl:r=>r===void 0||typeof r=="string",summary:r=>r===void 0||typeof r=="string",parameters:r=>r===void 0||typeof r=="object",responses:r=>r===void 0||typeof r=="object",expanded:r=>r===void 0||typeof r=="boolean"},fragments:{nodes:[{objects:["block"]}],keys:r=>{if(r.object!=="block"||r.type!==pe)return;let t=r.data.toFrozenObject();if(!("ref"in t))return["description"].concat(Object.keys(t.parameters||{})).concat(Object.keys(t.responses||{}))},types:{[tt]:{min:1,max:1,nodes:[{types:At[tt],min:1}]},[Ct]:{nodes:[{types:At[Ct],min:1}]},[Ot]:{nodes:[{types:At[Ot],min:1}]}}},normalize:(r,t,e)=>{switch(t){case Te:{let{node:n,key:o}=e;if(n.object!=="block"||n.type!==pe||!o)return;if(o==="description")return r.setFragmentByKey(n.key,It(tt,"","description"));let i=n.data.toFrozenObject();if("ref"in i)return;if(!!(i.parameters||{})[o])return r.setFragmentByKey(n.key,It(Ct,"",o));if(!!(i.responses||{})[o])return r.setFragmentByKey(n.key,It(Ot,"",o))}case nn:{let{node:n,type:o}=e;if(o===tt)return r.setFragmentByKey(n.key,It(tt,"","description"))}}}}}});function AS(r){if(r.object!=="block"||r.type!==pe)return;let t=r.data.toFrozenObject();if("ref"in t)return;let e=vS(r,t);if(e)return o=>{o.withoutNormalization(e)};let n=IS(r,t);if(n)return o=>{o.withoutNormalization(n)}}function vS(r,t){if(!("parameters"in t))return;let e=[],n=[];return Object.entries(t.parameters||{}).forEach(([i,s])=>{if(typeof s.orderIndex!="string")e.push(a=>{a.insertDataByKey(r.key,["parameters",i,"orderIndex"],he(n.length>0?{before:n[n.length-1]}:{}))});else{let a=s.orderIndex;n.includes(s.orderIndex)&&(a=he({before:n[n.length-1]}),e.push(c=>{c.insertDataByKey(r.key,["parameters",i,"orderIndex"],a)})),n.push(a)}}),e.length===0?void 0:i=>{e.forEach(s=>{s(i)})}}function IS(r,t){if(!("responses"in t))return;let e=[],n=[];return Object.entries(t.responses||{}).forEach(([i,s])=>{if(typeof s.orderIndex!="string")e.push(a=>{a.insertDataByKey(r.key,["responses",i,"orderIndex"],he(n.length>0?{before:n[n.length-1]}:{}))});else{let a=s.orderIndex;n.includes(s.orderIndex)&&(a=he({before:n[n.length-1]}),e.push(c=>{c.insertDataByKey(r.key,["responses",i,"orderIndex"],a)})),n.push(a)}}),e.length===0?void 0:i=>{e.forEach(s=>{s(i)})}}var Mo={};ee(Mo,{cards:()=>Lo,changeColumnType:()=>MS,createColumnFromType:()=>wr,createTable:()=>LS,defaultRecordSortedKeys:()=>uN,getCurrentTable:()=>zS,getLastColumnIndex:()=>Ws,getLastRecordOrderIndex:()=>Js,getTableData:()=>wo,getTableRowPlainText:()=>qS,getTableSelection:()=>cN,hideColumn:()=>$S,insertColumn:()=>Ro,insertEmptyRecord:()=>GS,isHeaderEmpty:()=>jS,isRowEmpty:()=>VS,moveColumn:()=>US,moveRecord:()=>HS,moveTableSelection:()=>aN,normalizeColumnDefinition:()=>Ys,removeColumn:()=>JS,removeRecord:()=>YS,renameColumn:()=>XS,schema:()=>rN,setColumnDefinition:()=>WS,setRecordValue:()=>$t,setView:()=>Ko,viewSpecs:()=>Qs});l();l();var Zs=oe(zm());l();l();l();var Vm=oe(Go()),jm=oe(ca());var NS={fragmentKeys:(r,t)=>[t],normalize:(r,t,e,n)=>{if(!(typeof t=="string"&&n.hasFragment(t)))return o=>{let i=`${r}-${e.id}`,s=t==null||t===i?"":String(t);return n.hasFragment(i)||o.insertFragmentByKey(n.key,um({fragment:i,text:s})),i}},normalizeDefinition:r=>{let t=r;return(typeof t.textAlignment!="string"||t.textAlignment!=="center"&&t.textAlignment!=="left"&&t.textAlignment!=="right")&&(t={...t,textAlignment:"left"}),t===r?void 0:t}},ES={normalize:(r,t,e,n)=>{if(!(typeof t=="number"||t===null)){if(typeof t=="string"){if(n.fragments.has(t)&&(t=n.fragments.get(t).getText()),Number.isNaN(Number(t)))return null;let o=parseFloat(t);return o%1===0?parseInt(t,10):o}return typeof t=="boolean"?t?1:0:null}}},_S={normalize:(r,t,e,n)=>{if(typeof t!="boolean")return typeof t=="number"?t>0:typeof t=="string"?Boolean(t):!1}},PS={normalize:(r,t,e,n)=>{if(Array.isArray(t)){let o=t.filter(i=>e.options.some(s=>s.value===i));return o.length===t.length?void 0:o}return[]},normalizeDefinition:r=>{let t=r;return typeof t.multiple!="boolean"&&(t={...t,multiple:!1}),Array.isArray(t.options)||(t={...t,options:[]}),t}},FS={normalize:(r,t,e,n)=>{if(!Array.isArray(t))return[]}},DS={normalize:(r,t,e,n)=>{if(Array.isArray(t)){let o=(0,Vm.default)(t.filter(i=>typeof i=="string"));return e.multiple||(o=o.slice(-1)),o.length!==t.length?o:void 0}return[]},normalizeDefinition:r=>{let t=r;return typeof t.multiple!="boolean"&&(t={...t,multiple:!0}),t===r?void 0:t}},wS={normalize:(r,t,e,n)=>{let o=Dr.number.normalize(r,t,e,n);return typeof o=="number"?(0,jm.default)(o,0,e.max):o},normalizeDefinition:r=>{let t=r;return(typeof t.max!="number"||t.max<=0||t.max>5)&&(t={...t,max:5}),t===r?void 0:t}},RS=Ce(),KS={normalize:(r,t,e,n)=>RS(t)?t:null},Dr={text:NS,number:ES,checkbox:_S,select:PS,files:FS,users:DS,rating:wS,"content-ref":KS};function Js(r){let t=Object.values(r.records).sort(Jt);return t[t.length-1].orderIndex}function Ws(r){return r.view.columns.length-1}function LS(r={}){var s;let{rows:t=3,columns:e=3,view:n="grid"}=r,o={records:{},definition:{},view:{type:n,columns:[]}},i;for(let a=0;a<t;a++){let c=K();i=he(i?{before:i}:{}),o.records[c]={values:{},orderIndex:i}}for(let a=0;a<e;a++){let c=K();o.definition[c]={id:c,title:"",type:"text",textAlignment:"left"},(s=o.view.columns)==null||s.push(c)}return T.createVoid({type:$e,data:o,fragments:[]})}function wr(r){return Ys({id:K(),title:"",type:r})}function MS(r,t){return Ys({id:r.id,title:r.title,type:t})}function Ys(r){let t=Dr[r.type];return t.normalizeDefinition&&t.normalizeDefinition(r)||r}function zS(r){let{document:t,startBlock:e}=r;if(!e)return null;if(e.type===$e)return{table:e};let n=t.getAncestors(e.key);if(!n)return null;let o=n.findLastEntry(a=>a.object==="block"&&a.type===$e);if(!o)return null;let i=n.get(o[0]+1),s=n.slice(o[0]+2);return{table:o[1],fragment:(i==null?void 0:i.object)==="fragment"?i:void 0,ancestorBlocks:s}}function VS(r,t){let e=wo(r),n=e.records[t];return Object.values(e.definition).every(o=>{let i=n.values[o.id];if(o.type==="text"){let s=r.getFragmentByKey(String(i));return s?s.isEmpty:!0}return Array.isArray(i)?i.length===0:!i})}function jS(r){let t=wo(r);return Object.values(t.definition).every(e=>!e.title)}function wo(r){return T.isBlock(r)?r.data.toFrozenObject():r}function qS(r,t){if(!r)return"";let e=wo(r),n=e.definition;return e.view.columns.map(o=>{var s;let i=t.values[n[o].id];if(n[o].type==="text")return(s=r.fragments.get(String(i)))==null?void 0:s.text;if(n[o].type==="number")return i}).filter(Boolean).join(" ")}function Ro(r,t,e=wr("text"),n){let o=typeof n=="number"?n:Ws(r.value.document.assertBlock(t).data.toFrozenObject())+1;r.insertDataByKey(t,["definition",e.id],e,{normalize:!1}),r.insertArrayDataByKey(t,["view","columns"],e.id,o)}function GS(r,t,e){let n=K();return r.insertDataByKey(t,["records",n],{values:{},orderIndex:he(e||{before:Js(r.value.document.assertBlock(t).data.toFrozenObject())})}),n}function HS(r,t,e,n){r.setDataByKey(t,["records",e,"orderIndex"],he(n))}function US(r,t,e,n){let o=r.value.document.assertBlock(t).data.get("view"),{columns:i}=o,s=i.indexOf(e),a=i.indexOf(n);if(s<0||a<0)return;let c=s<a?a:a+1;r.removeArrayDataByKey(t,["view","columns"],e,{normalize:!1}).insertArrayDataByKey(t,["view","columns"],e,c)}function $S(r,t,e){r.removeArrayDataByKey(t,["view","columns"],e)}function JS(r,t,e){r.removeDataPathByKey(t,["definition",e])}function WS(r,t,e,n){r.setDataByKey(t,["definition",e],{...n,id:e})}function YS(r,t,e){r.removeDataPathByKey(t,["records",e])}function $t(r,t,e,n,o){r.insertDataByKey(t,["records",e,"values",n],o)}function XS(r,t,e,n){r.insertDataByKey(t,["definition",e,"title"],n)}function Ko(r,t,e){r.setDataByKey(t,["view"],e)}l();l();var Lo={};ee(Lo,{cardsViewSpec:()=>Xs,removeCardCoverForRecord:()=>ZS,removeCardTargetForRecord:()=>tN,setCardCoverForRecord:()=>QS,setCardTargetForRecord:()=>eN});l();var qm=oe(Go());var Xs={normalize:(r,t)=>{var i,s;let e=r,n=Object.keys(t.definition);typeof e.hideColumnTitle!="boolean"&&(e={...e,hideColumnTitle:!1}),(!e.cardSize||!["medium","large"].includes(e.cardSize))&&(e={...e,cardSize:"medium"}),(!Array.isArray(e.columns)||e.columns.length===0)&&(e={...e,columns:n});let o=(0,qm.immutable)(e.columns).filter(a=>n.includes(a));return o.length!==e.columns.length&&(e={...e,columns:o}),typeof e.coverDefinition<"u"&&(typeof e.coverDefinition!="string"||((i=t.definition[e.coverDefinition])==null?void 0:i.type)!=="files")&&(e={...e,coverDefinition:void 0}),typeof e.targetDefinition<"u"&&(typeof e.targetDefinition!="string"||((s=t.definition[e.targetDefinition])==null?void 0:s.type)!=="content-ref")&&(e={...e,targetDefinition:void 0}),e}};function QS(r,t,e,n){let o=r.value.document.assertBlock(t).data.toFrozenObject();if(o.view.type!=="cards")throw new Error("Cannot set cover for a non-cards view");let i=o.view.coverDefinition?o.definition[o.view.coverDefinition]:void 0;(!i||i.type!=="files")&&(i=wr("files"),Ro(r,t,i),Ko(r,t,{...o.view,coverDefinition:i.id})),$t(r,t,e,i.id,[n.file])}function ZS(r,t,e){let n=r.value.document.assertBlock(t).data.toFrozenObject();if(n.view.type!=="cards")throw new Error("Cannot set cover for a non-cards view");n.view.coverDefinition&&$t(r,t,e,n.view.coverDefinition,[])}function eN(r,t,e,n){let o=r.value.document.assertBlock(t).data.toFrozenObject();if(o.view.type!=="cards")throw new Error("Cannot set cover for a non-cards view");let i=o.view.targetDefinition?o.definition[o.view.targetDefinition]:void 0;(!i||i.type!=="content-ref")&&(i=wr("content-ref"),Ro(r,t,i),Ko(r,t,{...o.view,targetDefinition:i.id})),$t(r,t,e,i.id,n)}function tN(r,t,e){let n=r.value.document.assertBlock(t).data.toFrozenObject();if(n.view.type!=="cards")throw new Error("Cannot set cover for a non-cards view");n.view.targetDefinition&&$t(r,t,e,n.view.targetDefinition,null)}l();var Gm=oe(Go()),Hm=oe(fr()),Um={normalize:(r,t)=>{let e=r,n=Object.keys(t.definition);typeof e.hideHeader!="boolean"&&(e={...e,hideHeader:!1}),typeof e.useNewSizing!="boolean"&&typeof e.useNewSizing<"u"&&(e={...e,useNewSizing:!0}),(!Array.isArray(e.columns)||e.columns.length===0)&&(e={...e,columns:n});let o=(0,Gm.immutable)(e.columns).filter(a=>n.includes(a));o.length!==e.columns.length&&(e={...e,columns:o});let i=e.columnWidths&&(0,Hm.default)(e.columnWidths)?e.columnWidths:{},s=Object.keys(i).reduce((a,c)=>{if(!o.includes(c)||typeof a[c]!="number"){let u={...a};return delete u[c],u}return a},i);return s!==e.columnWidths&&(e={...e,columnWidths:s}),e}};var Qs={grid:Um,cards:Xs};var rN=O.create({validations:[nN],blocks:{[$e]:{isVoid:!0,parent:{objects:["document","fragment","block"],types:[void 0,X,Y]},data:{records:r=>typeof r=="object",definition:r=>typeof r=="object",view:r=>typeof r=="object"},normalize:(r,t,e)=>{switch(t){case ae:{let{node:n}=e;return r.unwrapNodeByKey(n.key)}}}}}});function nN(r){if(r.object!=="block"||r.type!==$e)return;let t=r.data.toFrozenObject(),e=oN(r,t);if(e)return i=>{i.withoutNormalization(e)};let n=iN(r,t);if(n)return i=>{i.withoutNormalization(n)};let o=sN(r,t);if(o)return i=>{i.withoutNormalization(o)}}function oN(r,t){let e=[],n=Object.entries(t.definition);return n.length===0?o=>{o.removeNodeByKey(r.key)}:(n.forEach(([o,i])=>{let s=Dr[i.type];if(!s){e.push(c=>{c.removeDataPathByKey(r.key,["definition",o])});return}if(!s.normalizeDefinition)return;let a=s.normalizeDefinition(i);typeof a<"u"&&a!==i&&e.push(c=>{a?c.setDataByKey(r.key,["definition",o],a):c.removeDataPathByKey(r.key,["definition",o])})}),e.length===0?void 0:o=>{e.forEach(i=>{i(o)})})}function iN(r,t){let e=Object.keys(t.definition),n=[],o=[],i=[],s=Object.entries(t.records);if(s.length===0)return f=>{f.removeNodeByKey(r.key)};s.forEach(([f,d])=>{if(typeof d.orderIndex!="string")n.push(h=>{h.insertDataByKey(r.key,["records",f,"orderIndex"],he(i.length>0?{before:i[i.length-1]}:{}),{normalize:!1})});else{let h=d.orderIndex;i.includes(d.orderIndex)&&(h=he({before:i[i.length-1]}),n.push(g=>{g.insertDataByKey(r.key,["records",f,"orderIndex"],h,{normalize:!1})})),i.push(h)}let p=Object.keys(d.values||{}).filter(h=>!e.includes(h));p.length>0&&n.push(h=>{p.forEach(g=>{h.removeDataPathByKey(r.key,["records",f,"values",g])})}),e.forEach(h=>{var C;let g=t.definition[h],m=(C=d.values)==null?void 0:C[g.id],k=Dr[g.type],b=k.normalize(f,m,g,r);b!==void 0&&b!==m?n.push(v=>{let w=typeof b=="function"?b(v):b;typeof w<"u"&&$t(v,r.key,f,g.id,w)}):k.fragmentKeys&&o.push(...k.fragmentKeys(f,m,g,r))})});let a=r.fragments.toKeysArray(),c=(0,Zs.default)(a,o);c.length>0&&n.push(f=>{c.forEach(d=>{f.removeFragmentInParentByKey(r.key,d)})});let u=(0,Zs.default)(o,a);if(u.length>0)throw new Error(`Normalization should have created ${u.length} fragments`);return n.length===0?void 0:f=>{n.forEach(d=>{d(f)})}}function sN(r,t){if(!t.view)return o=>{let i={type:"grid",columns:[],hideHeader:!0,useNewSizing:!0};o.setDataByKey(r.key,["view"],i)};let e=Qs[t.view.type],n=e?e.normalize(t.view,t):null;if(n===null)return o=>{o.removeNodeByKey(r.key)};if(typeof n<"u"&&n!==t.view)return o=>{o.setDataByKey(r.key,["view"],n)}}l();function aN(r,t,e,n="end"){var a;let{recordId:o,definitionId:i}=e,s=r.value.document.assertBlock(typeof t=="string"?t:t.key);if(o&&i){let c=s.data.toFrozenObject(),u=(a=c.records[o])==null?void 0:a.values[i],f=c.definition[i];if((f==null?void 0:f.type)==="text"&&typeof u=="string"){let d=s.getFragmentByKey(u);r.value.selection.hasFocusIn(d)||(n==="end"?r.collapseToEndOf(d):n==="start"?r.collapseToStartOf(d):r.collapseToStartOf(d).moveFocusToEndOf(d),r.focus())}else r.collapseToStartOf(s).select({data:{table:e}})}else r.collapseToStartOf(s).select({data:{table:e}})}function cN(r,t){if(_(r.selection)||!r.selection.hasFocusIn(t))return{};let n=r.document.getAncestors(r.selection.startKey).find(s=>s.object==="fragment");if(n&&n.object==="fragment"){let s=t.data.toFrozenObject();return lN(s,n.fragmentKey)||{}}let{selection:o}=r;return o.data.get("table")||{}}function lN(r,t){for(let e of Object.entries(r.records))for(let n in e[1].values)if(e[1].values[n]===t)return{recordId:e[0],definitionId:n};return null}l();function uN(r){return Object.keys(r.records).sort((t,e)=>Jt(r.records[t],r.records[e]))}var zo={};ee(zo,{createTabs:()=>dN,createTabsItem:()=>ea,getCurrentTab:()=>$m,getNextTab:()=>Wm,getPreviousTab:()=>Jm,isCodeTab:()=>pN,removeTab:()=>hN,schema:()=>fN});l();l();var fN=O.create({blocks:{[_e]:{parent:{objects:["document","block","fragment"]},nodes:[{types:[Y]}],isVoid:!1,normalize:O.createNormalize({[Fe]:(r,t)=>We(r,t.node),[ae]:(r,t)=>We(r,t.node),[Xe]:(r,t)=>r.wrapBlockByKey(t.child.key,T.create({type:Y}))})},[Y]:{parent:{types:[_e]},nodes:[{objects:["block"]}],isVoid:!1,data:{title:r=>r===void 0||typeof r=="string"},normalize:O.createNormalize({[Fe]:(r,t)=>We(r,t.node),[ae]:(r,t)=>We(r,t.node),[Ne]:(r,t)=>t.child.object==="text"?r.wrapBlockByKey(t.child.key,T.create({type:P})):null})}}});l();function dN(){return T.create({type:_e,nodes:[ea("First Tab"),ea("Second Tab")]})}function ea(r){return T.create({type:Y,data:{title:r},nodes:[E()]})}function $m(r){let{selection:t,document:e}=r,n=_t(t)?t.startKey:t.anchorBlock;if(!n)return null;let o=e.getClosest(n,i=>i.object==="block"&&i.type===Y);return o!=null?o:null}function Jm(r,t){let e=r.document.getParent(t.key);if(!e)return null;let n=e.nodes.indexOf(t)-1;return n>=0?e.nodes.get(n):null}function Wm(r,t){let e=r.document.getParent(t.key);if(!e)return null;let n=e.nodes.indexOf(t)+1;return e.nodes.get(n,null)}function pN(r){return r.nodes.size===1&&r.nodes.first().type===se}function hN(r,t){let{value:e}=r,n=$m(e);if(n&&n.key!==t)return r.removeNodeByKey(t);let o=e.document.getNode(t);if(!o||o.object!=="block")return null;let i=Jm(e,o);if(i)return r.collapseToEndOf(i),r.removeNodeByKey(o.key);let s=Wm(e,o);if(s)return r.collapseToStartOf(s),r.removeNodeByKey(o.key);let a=e.document.getParent(o.key);return a?r.removeNodeByKey(a.key):null}l();var Vo=5,ta=O.create({validations:[Xm,Qm({blocks:tm,inlines:rm,marks:nm}),dm]}).combineWith([go.schema,To.schema,Bo.schema,Ao.schema,Co.schema,Oo.schema,Fo.schema,_o.schema,vr.schema,Mo.schema,ko.schema,zo.schema,Po.schema,mn.schema,Io.schema,dn.schema,Do.schema,Er.schema,xo.schema,vo.schema,mo.schema]),Ym=O.create({validations:[Xm,Qm({blocks:new Set([P]),inlines:new Set([Cr,Or]),marks:new Set})]}).combineWith([vr.schema,mn.schema,dn.schema]);function Xm(r){if(r.object!=="document")return null;let t=r;return t.data.get("schemaVersion",0)===Vo?null:n=>{n.setNodeByKey(t.key,{data:t.data.set("schemaVersion",Vo)})}}function Qm(r){return t=>{if(t.object==="document"||t.object==="fragment")return null;if(t.object==="text"){let e=t.getMarks().filter(n=>!r.marks.has(n.type));return e.size===0?null:n=>{e.forEach(o=>{n.removeMarkByKey(t.key,0,t.text.length,o,{normalize:!1})})}}return t.object==="block"&&r.blocks.has(t.type)||t.object==="inline"&&r.inlines.has(t.type)?null:e=>{e.withoutNormalization(()=>{t.isVoid?e.removeNodeByKey(t.key,{normalize:!1}):We(e,t)})}}}l();l();var Zm=O.create({validations:[function(t){if(t.object!=="document")return null;let e=[],n=[],o=[];return t.nodes.forEach(i=>{if(!Ut(i.key)&&!bn(i))return;if(!Ut(i.key)){e.push(i);return}if(!bn(i)){n.push(i);return}let s=Eo(i.key);t.nodes.find(c=>c.key===s)||o.push(i)}),e.length===0&&n.length===0&&o.length===0?null:i=>{e.forEach(s=>{i.setNodeByKey(s.key,{data:s.data.delete("conflict")},{normalize:!1})}),n.forEach(s=>{i.removeNodeByKey(s.key,{normalize:!1})}),o.forEach(s=>{mN(i,s)})}}]}),ey=O.create({validations:[function(t){return Ut(t.key)?e=>{if(kn(t.key)==="base"){e.removeNodeByKey(t.key);return}let o=t.merge({key:Fr(t.key),..."data"in t&&t.data?{data:t.data.delete("conflict")}:{}});return e.replaceNodeByKey(t.key,o)}:null}]});function mN(r,t){let e=t.merge({key:Fr(t.key),data:t.data.delete("conflict")}),{selection:n}=r.value,o=n.merge({anchorKey:n.anchorKey===t.key?e.key:n.anchorKey,focusKey:n.focusKey===t.key?e.key:n.focusKey});r.replaceNodeByKey(t.key,e,{normalize:!1}),t.forEachDescendant(i=>{if(!Ut(i.key)||!r.value.document.hasNode(i.key))return;let s=Fr(i.key),a=r.value.document.getNode(s);r.replaceNodeByKey(i.key,i.merge({key:a?K():s}),{normalize:!1})},{withFragments:!0}),r.normalizeNodeByKey(e.key),r.select(o)}var ty={document:ta.combineWith(ey),conflicts:ta.combineWith(Zm),comment:Ym};function DU(r,t="document"){return Qe.create({document:r,schema:ty[t]}).change().normalizeDocument().value.document}function yN(r="",t="document"){let e=gN(r);return Qe.create({document:e,schema:ty[t]},{normalize:t!=="document"||e.data.get("schemaVersion",0)!==Vo})}function gN(r){return typeof r=="string"?re.create({nodes:[T.create({type:"paragraph",nodes:[S.create(r)]})]}):re.isDocument(r)?r:Qe.isValue(r)?r.document:re.create(r)}function wU(r){return yN({nodes:[T.create({key:`initial_${r}_block`,type:"paragraph",nodes:[S.create({key:`initial_${r}_text`,text:""})]})]},"document")}export{qt as a,u1 as b,f1 as c,d1 as d,Nt as e,x as f,ie as g,K as h,_t as i,_ as j,fr as k,M as l,z as m,H as n,S as o,T as p,xe as q,N as r,V as s,re as t,Qe as u,ge as v,ue as w,az as x,cz as y,se as z,le as A,kz as B,xt as C,Tt as D,Bt as E,we as F,zt as G,Z as H,je as I,qe as J,Ge as K,st as L,Ee as M,He as N,et as O,X as P,P as Q,Ue as R,pe as S,tt as T,Ct as U,Ot as V,mt as W,ln as X,_e as Y,Y as Z,Pe as _,at as $,Re as aa,$e as ba,or as ca,Vt as da,yv as ea,gv as fa,kv as ga,bv as ha,xv as ia,bz as ja,ir as ka,Cr as la,Or as ma,sr as na,ct as oa,Ie as pa,Qh as qa,uo as ra,fo as sa,Zh as ta,Je as ua,Ar as va,vr as wa,Ns as xa,om as ya,Vz as za,Uz as Aa,Wz as Ba,am as Ca,cm as Da,lm as Ea,_1 as Fa,P1 as Ga,z1 as Ha,mo as Ia,go as Ja,dn as Ka,ko as La,t2 as Ma,l2 as Na,xo as Oa,To as Pa,mn as Qa,Er as Ra,Bo as Sa,mI as Ta,Im as Ua,zs as Va,qq as Wa,Oo as Xa,Ao as Ya,vo as Za,Us as _a,_o as $a,Po as ab,Fo as bb,Do as cb,zm as db,Mo as eb,zo as fb,DU as gb,yN as hb,wU as ib};
/*! Bundled license information:

esrever/esrever.js:
  (*! https://mths.be/esrever v0.2.0 by @mathias *)

isobject/index.js:
  (*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-plain-object/index.js:
  (*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/chunk-RFZIPQ3K.min.js.map
